(function($hx_exports,$global){"use strict";$hx_exports["kha"]=$hx_exports["kha"]||{};$hx_exports["kha"]["input"]=$hx_exports["kha"]["input"]||{};var $hxClasses={},$estr=function(){return js_Boot.__string_rec(this,"")},$hxEnums=$hxEnums||{},$_;function $extend(from,fields){var proto=Object.create(from);for(var name in fields)proto[name]=fields[name];if(fields.toString!==Object.prototype.toString)proto.toString=fields.toString;return proto}var HxOverrides=function(){};$hxClasses["HxOverrides"]=HxOverrides;HxOverrides.__name__=true;HxOverrides.strDate=function(s){switch(s.length){case 8:var k=s.split(":");var d=new Date;d["setTime"](0);d["setUTCHours"](k[0]);d["setUTCMinutes"](k[1]);d["setUTCSeconds"](k[2]);return d;case 10:var k=s.split("-");return new Date(k[0],k[1]-1,k[2],0,0,0);case 19:var k=s.split(" ");var y=k[0].split("-");var t=k[1].split(":");return new Date(y[0],y[1]-1,y[2],t[0],t[1],t[2]);default:throw haxe_Exception.thrown("Invalid date format : "+s)}};HxOverrides.cca=function(s,index){var x=s.charCodeAt(index);if(x!=x){return undefined}return x};HxOverrides.substr=function(s,pos,len){if(len==null){len=s.length}else if(len<0){if(pos==0){len=s.length+len}else{return""}}return s.substr(pos,len)};HxOverrides.remove=function(a,obj){var i=a.indexOf(obj);if(i==-1){return false}a.splice(i,1);return true};HxOverrides.now=function(){return Date.now()};var Main=function(){};$hxClasses["Main"]=Main;Main.__name__=true;Main.main=function(){iron_object_BoneAnimation.skinMaxBones=8;armory_system_Starter.numAssets=8;armory_system_Starter.drawLoading=armory_trait_internal_LoadingScreen.render;armory_system_Starter.main("Scene",0,true,true,true,1920,1080,1,true,celshade_renderpath_RenderPathCreator.get)};Math.__name__=true;var Reflect=function(){};$hxClasses["Reflect"]=Reflect;Reflect.__name__=true;Reflect.field=function(o,field){try{return o[field]}catch(_g){return null}};Reflect.setProperty=function(o,field,value){var tmp;var tmp1;if(o.__properties__){tmp=o.__properties__["set_"+field];tmp1=tmp}else{tmp1=false}if(tmp1){o[tmp](value)}else{o[field]=value}};Reflect.isFunction=function(f){if(typeof f=="function"){return!(f.__name__||f.__ename__)}else{return false}};var Std=function(){};$hxClasses["Std"]=Std;Std.__name__=true;Std.string=function(s){return js_Boot.__string_rec(s,"")};Std.parseInt=function(x){if(x!=null){var _g=0;var _g1=x.length;while(_g<_g1){var i=_g++;var c=x.charCodeAt(i);if(c<=8||c>=14&&c!=32&&c!=45){var nc=x.charCodeAt(i+1);var v=parseInt(x,nc==120||nc==88?16:10);if(isNaN(v)){return null}else{return v}}}}return null};var StringTools=function(){};$hxClasses["StringTools"]=StringTools;StringTools.__name__=true;StringTools.startsWith=function(s,start){if(s.length>=start.length){return s.lastIndexOf(start,0)==0}else{return false}};StringTools.endsWith=function(s,end){var elen=end.length;var slen=s.length;if(slen>=elen){return s.indexOf(end,slen-elen)==slen-elen}else{return false}};StringTools.replace=function(s,sub,by){return s.split(sub).join(by)};var Type=function(){};$hxClasses["Type"]=Type;Type.__name__=true;Type.createInstance=function(cl,args){var ctor=Function.prototype.bind.apply(cl,[null].concat(args));return new ctor};Type.createEnum=function(e,constr,params){var f=Reflect.field(e,constr);if(f==null){throw haxe_Exception.thrown("No such constructor "+constr)}if(Reflect.isFunction(f)){if(params==null){throw haxe_Exception.thrown("Constructor "+constr+" need parameters")}return f.apply(e,params)}if(params!=null&&params.length!=0){throw haxe_Exception.thrown("Constructor "+constr+" does not need parameters")}return f};var UInt={};UInt.gt=function(a,b){var aNeg=a<0;var bNeg=b<0;if(aNeg!=bNeg){return aNeg}else{return a>b}};UInt.gte=function(a,b){var aNeg=a<0;var bNeg=b<0;if(aNeg!=bNeg){return aNeg}else{return a>=b}};UInt.toFloat=function(this1){var int=this1;if(int<0){return 4294967296+int}else{return int+0}};var iron_Trait=function(){this._render2D=null;this._render=null;this._lateUpdate=null;this._update=null;this._remove=null;this._init=null;this._add=null};$hxClasses["iron.Trait"]=iron_Trait;iron_Trait.__name__=true;iron_Trait.prototype={remove:function(){this.object.removeTrait(this)},notifyOnAdd:function(f){if(this._add==null){this._add=[]}this._add.push(f)},notifyOnInit:function(f){if(this._init==null){this._init=[]}this._init.push(f);iron_App.notifyOnInit(f)},notifyOnRemove:function(f){if(this._remove==null){this._remove=[]}this._remove.push(f)},notifyOnUpdate:function(f){if(this._update==null){this._update=[]}this._update.push(f);iron_App.notifyOnUpdate(f)},__class__:iron_Trait};var arm_SimpleRotateObject=function(){this.speed=.01;var _gthis=this;iron_Trait.call(this);this.notifyOnInit(function(){_gthis.rb=_gthis.object.getTrait(armory_trait_physics_bullet_RigidBody);_gthis.keyboard=iron_system_Input.getKeyboard()});this.notifyOnUpdate(function(){var rotate=new iron_math_Vec4(0,0,0);if(_gthis.keyboard.down("r")){rotate.x+=1}if(_gthis.keyboard.down("t")){rotate.x-=1}if(_gthis.keyboard.down("f")){rotate.y+=1}if(_gthis.keyboard.down("g")){rotate.y-=1}if(_gthis.keyboard.down("v")){rotate.z+=1}if(_gthis.keyboard.down("b")){rotate.z-=1}var x=0;var y=0;var z=0;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}var v_x=x;var v_y=y;var v_z=z;var v_w=1;if(!(rotate.x==v_x&&rotate.y==v_y&&rotate.z==v_z)){_gthis.rotateObject(rotate)}})};$hxClasses["arm.SimpleRotateObject"]=arm_SimpleRotateObject;arm_SimpleRotateObject.__name__=true;arm_SimpleRotateObject.__super__=iron_Trait;arm_SimpleRotateObject.prototype=$extend(iron_Trait.prototype,{rotateObject:function(vec){if(this.rb!=null){this.rb.setAngularVelocity(0,0,0);this.rb.transform.rotate(vec,this.speed);this.rb.syncTransform()}else{this.object.transform.rotate(vec,this.speed)}},__class__:arm_SimpleRotateObject});var armory_data_Config=function(){};$hxClasses["armory.data.Config"]=armory_data_Config;armory_data_Config.__name__=true;var armory_object_Uniforms=function(){};$hxClasses["armory.object.Uniforms"]=armory_object_Uniforms;armory_object_Uniforms.__name__=true;armory_object_Uniforms.register=function(){iron_object_Uniforms.externalTextureLinks=[armory_object_Uniforms.textureLink];iron_object_Uniforms.externalVec3Links=[armory_object_Uniforms.vec3Link];iron_object_Uniforms.externalFloatLinks=[armory_object_Uniforms.floatLink]};armory_object_Uniforms.textureLink=function(object,mat,link){var this1=iron_RenderPath.active.renderTargets;var key=StringTools.endsWith(link,"_depth")?HxOverrides.substr(link,0,link.length-6):link;var target=this1.h[key];if(target!=null){return target.image}else{return null}};armory_object_Uniforms.vec3Link=function(object,mat,link){var v=null;if(link=="_hosekA"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.A.x;v.y=armory_renderpath_HosekWilkie.data.A.y;v.z=armory_renderpath_HosekWilkie.data.A.z}}else if(link=="_hosekB"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.B.x;v.y=armory_renderpath_HosekWilkie.data.B.y;v.z=armory_renderpath_HosekWilkie.data.B.z}}else if(link=="_hosekC"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.C.x;v.y=armory_renderpath_HosekWilkie.data.C.y;v.z=armory_renderpath_HosekWilkie.data.C.z}}else if(link=="_hosekD"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.D.x;v.y=armory_renderpath_HosekWilkie.data.D.y;v.z=armory_renderpath_HosekWilkie.data.D.z}}else if(link=="_hosekE"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.E.x;v.y=armory_renderpath_HosekWilkie.data.E.y;v.z=armory_renderpath_HosekWilkie.data.E.z}}else if(link=="_hosekF"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.F.x;v.y=armory_renderpath_HosekWilkie.data.F.y;v.z=armory_renderpath_HosekWilkie.data.F.z}}else if(link=="_hosekG"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.G.x;v.y=armory_renderpath_HosekWilkie.data.G.y;v.z=armory_renderpath_HosekWilkie.data.G.z}}else if(link=="_hosekH"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.H.x;v.y=armory_renderpath_HosekWilkie.data.H.y;v.z=armory_renderpath_HosekWilkie.data.H.z}}else if(link=="_hosekI"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.I.x;v.y=armory_renderpath_HosekWilkie.data.I.y;v.z=armory_renderpath_HosekWilkie.data.I.z}}else if(link=="_hosekZ"){if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.recompute(iron_Scene.active.world)}if(armory_renderpath_HosekWilkie.data!=null){v=iron_object_Uniforms.helpVec;v.x=armory_renderpath_HosekWilkie.data.Z.x;v.y=armory_renderpath_HosekWilkie.data.Z.y;v.z=armory_renderpath_HosekWilkie.data.Z.z}}return v};armory_object_Uniforms.floatLink=function(object,mat,link){return null};var armory_renderpath_HosekWilkieRadianceData=function(){this.Z=new kha_math_FastVector3;this.I=new kha_math_FastVector3;this.H=new kha_math_FastVector3;this.G=new kha_math_FastVector3;this.F=new kha_math_FastVector3;this.E=new kha_math_FastVector3;this.D=new kha_math_FastVector3;this.C=new kha_math_FastVector3;this.B=new kha_math_FastVector3;this.A=new kha_math_FastVector3};$hxClasses["armory.renderpath.HosekWilkieRadianceData"]=armory_renderpath_HosekWilkieRadianceData;armory_renderpath_HosekWilkieRadianceData.__name__=true;armory_renderpath_HosekWilkieRadianceData.prototype={evaluateSpline:function(spline,index,stride,value){return Math.pow(1-value,5)*spline[index]+5*Math.pow(1-value,4)*Math.pow(value,1)*spline[index+stride]+10*Math.pow(1-value,3)*Math.pow(value,2)*spline[index+2*stride]+10*Math.pow(1-value,2)*Math.pow(value,3)*spline[index+3*stride]+5*Math.pow(1-value,1)*Math.pow(value,4)*spline[index+4*stride]+Math.pow(value,5)*spline[index+5*stride]},clamp:function(n,lower,upper){if(n<=lower){return lower}else if(n>=upper){return upper}else{return n}},clampF:function(n,lower,upper){if(n<=lower){return lower}else if(n>=upper){return upper}else{return n}},evaluate:function(dataset,index,stride,turbidity,albedo,sunTheta){var elevationK=Math.pow(Math.max(0,1-sunTheta/(Math.PI/2)),.3333333333333333);var turbidity0=this.clamp(turbidity|0,1,10);var turbidity1=Math.min(turbidity0+1,10)|0;var turbidityK=this.clampF(turbidity-turbidity0,0,1);var datasetA0Index=index;var datasetA1Index=index+stride*6*10;var a0t0=this.evaluateSpline(dataset,datasetA0Index+stride*6*(turbidity0-1),stride,elevationK);var a1t0=this.evaluateSpline(dataset,datasetA1Index+stride*6*(turbidity0-1),stride,elevationK);var a0t1=this.evaluateSpline(dataset,datasetA0Index+stride*6*(turbidity1-1),stride,elevationK);var a1t1=this.evaluateSpline(dataset,datasetA1Index+stride*6*(turbidity1-1),stride,elevationK);return a0t0*(1-albedo)*(1-turbidityK)+a1t0*albedo*(1-turbidityK)+a0t1*(1-albedo)*turbidityK+a1t1*albedo*turbidityK},hosek_wilkie:function(cos_theta,gamma,cos_gamma,A,B,C,D,E,F,G,H,I){var val=1+cos_gamma*cos_gamma;var chix=val/Math.pow(1+H.x*H.x-2*cos_gamma*H.x,1.5);var chiy=val/Math.pow(1+H.y*H.y-2*cos_gamma*H.y,1.5);var chiz=val/Math.pow(1+H.z*H.z-2*cos_gamma*H.z,1.5);var x=chix;var y=chiy;var z=chiz;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}var chi_x=x;var chi_y=y;var chi_z=z;var vx=(1+A.x*Math.exp(B.x/(cos_theta+.01)))*(C.x+D.x*Math.exp(E.x*gamma)+F.x*(cos_gamma*cos_gamma)+G.x*chi_x+I.x*Math.sqrt(Math.max(0,cos_theta)));var vy=(1+A.y*Math.exp(B.y/(cos_theta+.01)))*(C.y+D.y*Math.exp(E.y*gamma)+F.y*(cos_gamma*cos_gamma)+G.y*chi_y+I.y*Math.sqrt(Math.max(0,cos_theta)));var vz=(1+A.z*Math.exp(B.z/(cos_theta+.01)))*(C.z+D.z*Math.exp(E.z*gamma)+F.z*(cos_gamma*cos_gamma)+G.z*chi_z+I.z*Math.sqrt(Math.max(0,cos_theta)));return new kha_math_FastVector3(vx,vy,vz)},setVector:function(v,index,f){if(index==0){v.x=f}else if(index==1){v.y=f}else{v.z=f}},recompute:function(sunTheta,turbidity,albedo,normalizedSunY){var _g=0;while(_g<3){var i=_g++;this.setVector(this.A,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],0,9,turbidity,albedo,sunTheta));this.setVector(this.B,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],1,9,turbidity,albedo,sunTheta));this.setVector(this.C,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],2,9,turbidity,albedo,sunTheta));this.setVector(this.D,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],3,9,turbidity,albedo,sunTheta));this.setVector(this.E,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],4,9,turbidity,albedo,sunTheta));this.setVector(this.F,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],5,9,turbidity,albedo,sunTheta));this.setVector(this.G,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],6,9,turbidity,albedo,sunTheta));this.setVector(this.H,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],8,9,turbidity,albedo,sunTheta));this.setVector(this.I,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGB[i],7,9,turbidity,albedo,sunTheta));this.setVector(this.Z,i,this.evaluate(armory_renderpath_HosekWilkieData.datasetsRGBRad[i],0,1,turbidity,albedo,sunTheta))}if(normalizedSunY!=0){var S=this.hosek_wilkie(Math.cos(sunTheta),0,1,this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H,this.I);S.x*=this.Z.x;S.y*=this.Z.y;S.z*=this.Z.z;var x=.2126;var y=.7152;var z=.0722;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}var v_x=x;var v_y=y;var v_z=z;var dotS=S.x*v_x+S.y*v_y+S.z*v_z;this.Z.x/=dotS;this.Z.y/=dotS;this.Z.z/=dotS;var _this=this.Z;this.Z=new kha_math_FastVector3(_this.x*normalizedSunY,_this.y*normalizedSunY,_this.z*normalizedSunY)}},__class__:armory_renderpath_HosekWilkieRadianceData};var armory_renderpath_HosekWilkie=function(){};$hxClasses["armory.renderpath.HosekWilkie"]=armory_renderpath_HosekWilkie;armory_renderpath_HosekWilkie.__name__=true;armory_renderpath_HosekWilkie.recompute=function(world){if(world==null||world.raw.sun_direction==null){return}if(armory_renderpath_HosekWilkie.data==null){armory_renderpath_HosekWilkie.data=new armory_renderpath_HosekWilkieRadianceData}var sunZ=world.raw.sun_direction[2]>0?world.raw.sun_direction[2]:0;var sunPositionX=Math.acos(sunZ);var normalizedSunY=1.15;armory_renderpath_HosekWilkie.data.recompute(sunPositionX,world.raw.turbidity,world.raw.ground_albedo,normalizedSunY)};var armory_renderpath_HosekWilkieData=function(){};$hxClasses["armory.renderpath.HosekWilkieData"]=armory_renderpath_HosekWilkieData;armory_renderpath_HosekWilkieData.__name__=true;var armory_renderpath_Inc=function(){};$hxClasses["armory.renderpath.Inc"]=armory_renderpath_Inc;armory_renderpath_Inc.__name__=true;armory_renderpath_Inc.init=function(_path){armory_renderpath_Inc.path=_path};armory_renderpath_Inc.bindShadowMap=function(){var _g=0;var _g1=iron_Scene.active.lights;while(_g<_g1.length){var l=_g1[_g];++_g;if(!l.visible||l.data.raw.type!="sun"){continue}var n="shadowMap";armory_renderpath_Inc.path.bindTarget(n,n);break}var _g=0;var _g1=armory_renderpath_Inc.pointIndex;while(_g<_g1){var i=_g++;var n="shadowMapPoint["+i+"]";armory_renderpath_Inc.path.bindTarget(n,n)}var _g=0;var _g1=armory_renderpath_Inc.spotIndex;while(_g<_g1){var i=_g++;var n="shadowMapSpot["+i+"]";armory_renderpath_Inc.path.bindTarget(n,n)}};armory_renderpath_Inc.shadowMapName=function(l){if(l.data.raw.type=="sun"){return"shadowMap"}if(l.data.raw.type=="point"){return"shadowMapPoint["+armory_renderpath_Inc.pointIndex+"]"}else{return"shadowMapSpot["+armory_renderpath_Inc.spotIndex+"]"}};armory_renderpath_Inc.getShadowMap=function(l){var target=armory_renderpath_Inc.shadowMapName(l);var rt=armory_renderpath_Inc.path.renderTargets.h[target];if(rt==null){if(armory_renderpath_Inc.path.light.data.raw.shadowmap_cube){var size=armory_renderpath_Inc.path.light.data.raw.shadowmap_size;var t=new iron_RenderTargetRaw;t.name=target;t.width=size;t.height=size;t.format="DEPTH16";t.is_cubemap=true;rt=armory_renderpath_Inc.path.createRenderTarget(t)}else{var sizew=armory_renderpath_Inc.path.light.data.raw.shadowmap_size;var sizeh=sizew;var t=new iron_RenderTargetRaw;t.name=target;t.width=sizew;t.height=sizeh;t.format="DEPTH16";rt=armory_renderpath_Inc.path.createRenderTarget(t)}}return target};armory_renderpath_Inc.drawShadowMap=function(){armory_renderpath_Inc.pointIndex=0;armory_renderpath_Inc.spotIndex=0;var _g=0;var _g1=iron_Scene.active.lights;while(_g<_g1.length){var l=_g1[_g];++_g;if(!l.visible){continue}armory_renderpath_Inc.path.light=l;var shadowmap=armory_renderpath_Inc.getShadowMap(l);var faces=l.data.raw.shadowmap_cube?6:1;var _g2=0;var _g3=faces;while(_g2<_g3){var i=_g2++;if(faces>1){armory_renderpath_Inc.path.currentFace=i}armory_renderpath_Inc.path.setTarget(shadowmap);armory_renderpath_Inc.path.clearTarget(null,1);if(l.data.raw.cast_shadow){armory_renderpath_Inc.path.drawMeshes("shadowmap")}}armory_renderpath_Inc.path.currentFace=-1;if(l.data.raw.type=="point"){armory_renderpath_Inc.pointIndex++}else if(l.data.raw.type=="spot"||l.data.raw.type=="area"){armory_renderpath_Inc.spotIndex++}}};var armory_system_Starter=function(){};$hxClasses["armory.system.Starter"]=armory_system_Starter;armory_system_Starter.__name__=true;armory_system_Starter.main=function(scene,mode,resize,min,max,w,h,msaa,vsync,getRenderPath){var tasks=0;var start=function(){if(tasks>0){return}if(armory_data_Config.raw==null){armory_data_Config.raw={}}var c=armory_data_Config.raw;if(c.window_mode==null){c.window_mode=mode}if(c.window_resizable==null){c.window_resizable=resize}if(c.window_minimizable==null){c.window_minimizable=min}if(c.window_maximizable==null){c.window_maximizable=max}if(c.window_w==null){c.window_w=w}if(c.window_h==null){c.window_h=h}if(c.window_scale==null){c.window_scale=1}if(c.window_msaa==null){c.window_msaa=msaa}if(c.window_vsync==null){c.window_vsync=vsync}armory_object_Uniforms.register();var windowMode=c.window_mode==0?0:1;var windowFeatures=0;if(c.window_resizable){windowFeatures|=1}if(c.window_maximizable){windowFeatures|=4}if(c.window_minimizable){windowFeatures|=2}kha_System.start(new kha_SystemOptions("shadowscelshadetest",c.window_w,c.window_h,new kha_WindowOptions(null,-1,-1,800,600,-1,true,windowFeatures,windowMode),new kha_FramebufferOptions(60,c.window_vsync,32,16,8,c.window_msaa)),function($window){iron_App.init(function(){var load=null;load=function(g){if(iron_Scene.active!=null&&iron_Scene.active.ready){iron_App.removeRender2D(load)}else{armory_system_Starter.drawLoading(g,iron_data_Data.assetsLoaded,armory_system_Starter.numAssets)}};iron_App.notifyOnRender2D(load);iron_Scene.setActive(scene,function(object){iron_RenderPath.setActive(getRenderPath())})})})};var loadLibAmmo=function(name){kha_Assets.loadBlobFromPath(name,function(b){(1,eval)(b.toString());Ammo({print:function(s){haxe.Log.trace(s)},instantiateWasm:function(imports,successCallback){var wasmbin=Krom.loadBlob("ammo.wasm.wasm");var module=new WebAssembly.Module(wasmbin);var inst=new WebAssembly.Instance(module,imports);successCallback(inst);return inst.exports}}).then(function(){tasks--;start()})},null,{fileName:"Sources/armory/system/Starter.hx",lineNumber:78,className:"armory.system.Starter",methodName:"main"})};tasks=1;tasks+=1;loadLibAmmo("ammo.wasm.js");tasks-=1;start()};var armory_trait_internal_LoadingScreen=function(){};$hxClasses["armory.trait.internal.LoadingScreen"]=armory_trait_internal_LoadingScreen;armory_trait_internal_LoadingScreen.__name__=true;armory_trait_internal_LoadingScreen.render=function(g,assetsLoaded,assetsTotal){g.set_color(-3200189);g.fillRect(0,kha_System.windowHeight()-6,kha_System.windowWidth()/assetsTotal*assetsLoaded,6)};var armory_trait_physics_bullet_Hit=function(rb,pos,normal){this.rb=rb;this.pos=pos;this.normal=normal};$hxClasses["armory.trait.physics.bullet.Hit"]=armory_trait_physics_bullet_Hit;armory_trait_physics_bullet_Hit.__name__=true;armory_trait_physics_bullet_Hit.prototype={__class__:armory_trait_physics_bullet_Hit};var armory_trait_physics_bullet_ContactPair=function(a,b){this.a=a;this.b=b};$hxClasses["armory.trait.physics.bullet.ContactPair"]=armory_trait_physics_bullet_ContactPair;armory_trait_physics_bullet_ContactPair.__name__=true;armory_trait_physics_bullet_ContactPair.prototype={__class__:armory_trait_physics_bullet_ContactPair};var armory_trait_physics_bullet_PhysicsWorld=function(timeScale,timeStep,solverIterations){if(solverIterations==null){solverIterations=10}if(timeStep==null){timeStep=.016666666666666666}if(timeScale==null){timeScale=1}this.pairCache=false;this.hitNormalWorld=new iron_math_Vec4;this.hitPointWorld=new iron_math_Vec4;this.solverIterations=10;this.maxSteps=1;this.timeStep=.016666666666666666;this.timeScale=1;this.preUpdates=null;this.gimpactRegistered=false;iron_Trait.call(this);if(armory_trait_physics_bullet_PhysicsWorld.nullvec){armory_trait_physics_bullet_PhysicsWorld.nullvec=false;armory_trait_physics_bullet_PhysicsWorld.vec1=new Ammo.btVector3(0,0,0);armory_trait_physics_bullet_PhysicsWorld.vec2=new Ammo.btVector3(0,0,0)}if(armory_trait_physics_bullet_PhysicsWorld.active!=null&&!armory_trait_physics_bullet_PhysicsWorld.sceneRemoved){return}armory_trait_physics_bullet_PhysicsWorld.sceneRemoved=false;this.timeScale=timeScale;this.timeStep=timeStep;this.maxSteps=timeStep<.016666666666666666?10:1;this.solverIterations=solverIterations;if(armory_trait_physics_bullet_PhysicsWorld.active==null){this.createPhysics()}else{this.world=armory_trait_physics_bullet_PhysicsWorld.active.world;this.dispatcher=armory_trait_physics_bullet_PhysicsWorld.active.dispatcher;this.gimpactRegistered=armory_trait_physics_bullet_PhysicsWorld.active.gimpactRegistered}this.contacts=[];this.rbMap=new haxe_ds_IntMap;armory_trait_physics_bullet_PhysicsWorld.active=this;this._lateUpdate=[$bind(this,this.lateUpdate)];iron_App.traitLateUpdates.splice(0,0,$bind(this,this.lateUpdate));iron_Scene.active.notifyOnRemove(function(){armory_trait_physics_bullet_PhysicsWorld.sceneRemoved=true})};$hxClasses["armory.trait.physics.bullet.PhysicsWorld"]=armory_trait_physics_bullet_PhysicsWorld;armory_trait_physics_bullet_PhysicsWorld.__name__=true;armory_trait_physics_bullet_PhysicsWorld.__super__=iron_Trait;armory_trait_physics_bullet_PhysicsWorld.prototype=$extend(iron_Trait.prototype,{reset:function(){var rb=armory_trait_physics_bullet_PhysicsWorld.active.rbMap.iterator();while(rb.hasNext()){var rb1=rb.next();this.removeRigidBody(rb1)}},createPhysics:function(){var broadphase=new Ammo.btDbvtBroadphase;var collisionConfiguration=new Ammo.btDefaultCollisionConfiguration;this.dispatcher=new Ammo.btCollisionDispatcher(collisionConfiguration);var solver=new Ammo.btSequentialImpulseConstraintSolver;var g=iron_Scene.active.raw.gravity;var gravity=g==null?new iron_math_Vec4(0,0,-9.81):new iron_math_Vec4(g[0],g[1],g[2]);this.world=new Ammo.btDiscreteDynamicsWorld(this.dispatcher,broadphase,solver,collisionConfiguration);this.setGravity(gravity)},setGravity:function(v){armory_trait_physics_bullet_PhysicsWorld.vec1.setValue(v.x,v.y,v.z);this.world.setGravity(armory_trait_physics_bullet_PhysicsWorld.vec1)},getGravity:function(){var g=this.world.getGravity();return new iron_math_Vec4(g.x(),g.y(),g.z())},addRigidBody:function(body){this.world.addRigidBody(body.body,body.group,body.mask);this.rbMap.h[body.id]=body},removeRigidBody:function(body){if(body.destroyed){return}body.destroyed=true;if(this.world!=null){this.world.removeRigidBody(body.body)}this.rbMap.remove(body.id);body.delete()},getContacts:function(body){if(this.contacts.length==0){return null}var res=[];var _g=0;var _g1=this.contacts.length;while(_g<_g1){var i=_g++;var c=this.contacts[i];var rb=null;if(c.a==body.body.userIndex){rb=this.rbMap.h[c.b]}else if(c.b==body.body.userIndex){rb=this.rbMap.h[c.a]}if(rb!=null&&res.indexOf(rb)==-1){res.push(rb)}}return res},getContactPairs:function(body){if(this.contacts.length==0){return null}var res=[];var _g=0;var _g1=this.contacts.length;while(_g<_g1){var i=_g++;var c=this.contacts[i];if(c.a==body.body.userIndex){res.push(c)}else if(c.b==body.body.userIndex){res.push(c)}}return res},findBody:function(id){var rb=this.rbMap.h[id];return rb},lateUpdate:function(){var t=1/iron_system_Time.frequency*iron_system_Time.scale*this.timeScale;if(t==0){return}if(this.preUpdates!=null){var _g=0;var _g1=this.preUpdates;while(_g<_g1.length){var f=_g1[_g];++_g;f()}}this.world.stepSimulation(this.timeStep,this.maxSteps,t);this.updateContacts();var rb=this.rbMap.iterator();while(rb.hasNext()){var rb1=rb.next();rb1.physicsUpdate()}},updateContacts:function(){this.contacts=[];var disp=this.dispatcher;var numManifolds=disp.getNumManifolds();var _g=0;var _g1=numManifolds;while(_g<_g1){var i=_g++;var contactManifold=disp.getManifoldByIndexInternal(i);var body0=Ammo.btRigidBody.prototype;var body01=contactManifold.getBody0();var body02=body0.upcast(body01);var body1=Ammo.btRigidBody.prototype;var body11=contactManifold.getBody1();var body12=body1.upcast(body11);var numContacts=contactManifold.getNumContacts();var pt=null;var posA=null;var posB=null;var nor=null;var cp=null;var _g2=0;var _g3=numContacts;while(_g2<_g3){var j=_g2++;pt=contactManifold.getContactPoint(j);posA=pt.get_m_positionWorldOnA();posB=pt.get_m_positionWorldOnB();nor=pt.get_m_normalWorldOnB();cp=new armory_trait_physics_bullet_ContactPair(body02.userIndex,body12.userIndex);cp.posA=new iron_math_Vec4(posA.x(),posA.y(),posA.z());cp.posB=new iron_math_Vec4(posB.x(),posB.y(),posB.z());cp.normOnB=new iron_math_Vec4(nor.x(),nor.y(),nor.z());cp.impulse=pt.getAppliedImpulse();cp.distance=pt.getDistance();this.contacts.push(cp)}}},pickClosest:function(inputX,inputY){var camera=iron_Scene.active.camera;var start=new iron_math_Vec4;var end=new iron_math_Vec4;iron_math_RayCaster.getDirection(start,end,inputX,inputY,camera);var _this=camera.transform.world;var hit=this.rayCast(new iron_math_Vec4(_this.self._30,_this.self._31,_this.self._32,_this.self._33),end);var rb=hit!=null?hit.rb:null;return rb},rayCast:function(from,to,group,mask){if(mask==null){mask=-1}if(group==null){group=1}var rayFrom=armory_trait_physics_bullet_PhysicsWorld.vec1;var rayTo=armory_trait_physics_bullet_PhysicsWorld.vec2;rayFrom.setValue(from.x,from.y,from.z);rayTo.setValue(to.x,to.y,to.z);var rayCallback=new Ammo.ClosestRayResultCallback(rayFrom,rayTo);rayCallback.set_m_collisionFilterGroup(group);rayCallback.set_m_collisionFilterMask(mask);var worldDyn=this.world;var worldCol=worldDyn;worldCol.rayTest(rayFrom,rayTo,rayCallback);var rb=null;var hitInfo=null;var rc=rayCallback;if(rc.hasHit()){var co=rayCallback.get_m_collisionObject();var body=Ammo.btRigidBody.prototype.upcast(co);var hit=rayCallback.get_m_hitPointWorld();var _this=this.hitPointWorld;var x=hit.x();var y=hit.y();var z=hit.z();_this.x=x;_this.y=y;_this.z=z;_this.w=1;var norm=rayCallback.get_m_hitNormalWorld();var _this=this.hitNormalWorld;var x=norm.x();var y=norm.y();var z=norm.z();_this.x=x;_this.y=y;_this.z=z;_this.w=1;rb=this.rbMap.h[body.userIndex];hitInfo=new armory_trait_physics_bullet_Hit(rb,this.hitPointWorld,this.hitNormalWorld)}Ammo.destroy(rayCallback);return hitInfo},notifyOnPreUpdate:function(f){if(this.preUpdates==null){this.preUpdates=[]}this.preUpdates.push(f)},removePreUpdate:function(f){HxOverrides.remove(this.preUpdates,f)},__class__:armory_trait_physics_bullet_PhysicsWorld});var kha_math_FastMatrix4=function(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33){this._00=_00;this._10=_10;this._20=_20;this._30=_30;this._01=_01;this._11=_11;this._21=_21;this._31=_31;this._02=_02;this._12=_12;this._22=_22;this._32=_32;this._03=_03;this._13=_13;this._23=_23;this._33=_33};$hxClasses["kha.math.FastMatrix4"]=kha_math_FastMatrix4;kha_math_FastMatrix4.__name__=true;kha_math_FastMatrix4.prototype={__class__:kha_math_FastMatrix4};var iron_math_Vec4=function(x,y,z,w){if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z;this.w=w};$hxClasses["iron.math.Vec4"]=iron_math_Vec4;iron_math_Vec4.__name__=true;iron_math_Vec4.prototype={__class__:iron_math_Vec4};var iron_math_Mat4=function(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33){this.self=new kha_math_FastMatrix4(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33)};$hxClasses["iron.math.Mat4"]=iron_math_Mat4;iron_math_Mat4.__name__=true;iron_math_Mat4.prototype={__class__:iron_math_Mat4};var iron_math_Quat=function(x,y,z,w){if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z;this.w=w};$hxClasses["iron.math.Quat"]=iron_math_Quat;iron_math_Quat.__name__=true;iron_math_Quat.prototype={__class__:iron_math_Quat};var armory_trait_physics_bullet_RigidBody=function(shape,mass,friction,restitution,group,mask,params,flags){if(mask==null){mask=1}if(group==null){group=1}if(restitution==null){restitution=0}if(friction==null){friction=.5}if(mass==null){mass=1}if(shape==null){shape=0}this.heightData=null;this.onContact=null;this.onReady=null;this.id=0;this.ready=false;this.body=null;this.trigger=false;this.mask=1;this.group=1;this.ccd=false;this.destroyed=false;this.transform=null;iron_Trait.call(this);if(armory_trait_physics_bullet_RigidBody.nullvec){armory_trait_physics_bullet_RigidBody.nullvec=false;armory_trait_physics_bullet_RigidBody.vec1=new Ammo.btVector3(0,0,0);armory_trait_physics_bullet_RigidBody.vec2=new Ammo.btVector3(0,0,0);armory_trait_physics_bullet_RigidBody.vec3=new Ammo.btVector3(0,0,0);armory_trait_physics_bullet_RigidBody.quat1=new Ammo.btQuaternion(0,0,0,0);armory_trait_physics_bullet_RigidBody.trans1=new Ammo.btTransform;armory_trait_physics_bullet_RigidBody.trans2=new Ammo.btTransform}this.shape=shape;this.mass=mass;this.friction=friction;this.restitution=restitution;this.group=group;this.mask=mask;if(params==null){params=[.04,.1,1,1,1,1,1,1,0,0,0,0]}if(flags==null){flags=[false,false,false,false]}this.linearDamping=params[0];this.angularDamping=params[1];this.linearFactors=[params[2],params[3],params[4]];this.angularFactors=[params[5],params[6],params[7]];this.collisionMargin=params[8];this.deactivationParams=[params[9],params[10],params[11]];this.animated=flags[0];this.trigger=flags[1];this.ccd=flags[2];this.staticObj=flags[3];this.notifyOnAdd($bind(this,this.init))};$hxClasses["armory.trait.physics.bullet.RigidBody"]=armory_trait_physics_bullet_RigidBody;armory_trait_physics_bullet_RigidBody.__name__=true;armory_trait_physics_bullet_RigidBody.__super__=iron_Trait;armory_trait_physics_bullet_RigidBody.prototype=$extend(iron_Trait.prototype,{withMargin:function(f){return f+f*this.collisionMargin},notifyOnReady:function(f){this.onReady=f;if(this.ready){this.onReady()}},init:function(){if(this.ready){return}this.ready=true;if(!(this.object instanceof iron_object_MeshObject)){return}this.transform=this.object.transform;this.physics=armory_trait_physics_bullet_PhysicsWorld.active;if(this.shape==0){var f=this.transform.dim.x/2;armory_trait_physics_bullet_RigidBody.vec1.setX(f+f*this.collisionMargin);var f=this.transform.dim.y/2;armory_trait_physics_bullet_RigidBody.vec1.setY(f+f*this.collisionMargin);var f=this.transform.dim.z/2;armory_trait_physics_bullet_RigidBody.vec1.setZ(f+f*this.collisionMargin);this.btshape=new Ammo.btBoxShape(armory_trait_physics_bullet_RigidBody.vec1)}else if(this.shape==1){var f=this.transform.dim.x/2;this.btshape=new Ammo.btSphereShape(f+f*this.collisionMargin)}else if(this.shape==2){var shapeConvex=this.fillConvexHull(this.transform.scale,this.collisionMargin);this.btshape=shapeConvex}else if(this.shape==4){var f=this.transform.dim.x/2;var f1=this.transform.dim.z;var coneZ=new Ammo.btConeShapeZ(f+f*this.collisionMargin,f1+f1*this.collisionMargin);var cone=coneZ;this.btshape=cone}else if(this.shape==5){var f=this.transform.dim.x/2;armory_trait_physics_bullet_RigidBody.vec1.setX(f+f*this.collisionMargin);var f=this.transform.dim.y/2;armory_trait_physics_bullet_RigidBody.vec1.setY(f+f*this.collisionMargin);var f=this.transform.dim.z/2;armory_trait_physics_bullet_RigidBody.vec1.setZ(f+f*this.collisionMargin);var cylZ=new Ammo.btCylinderShapeZ(armory_trait_physics_bullet_RigidBody.vec1);var cyl=cylZ;this.btshape=cyl}else if(this.shape==6){var r=this.transform.dim.x/2;var f=this.transform.dim.z-r*2;var capsZ=new Ammo.btCapsuleShapeZ(r+r*this.collisionMargin,f+f*this.collisionMargin);var caps=capsZ;this.btshape=caps}else if(this.shape==3){this.meshInterface=this.fillTriangleMesh(this.transform.scale);if(this.mass>0){var shapeGImpact=new Ammo.btGImpactMeshShape(this.meshInterface);shapeGImpact.updateBound();var shapeConcave=shapeGImpact;this.btshape=shapeConcave;if(!this.physics.gimpactRegistered){(new Ammo.GImpactCollisionAlgorithm).registerAlgorithm(this.physics.dispatcher);this.physics.gimpactRegistered=true}}else{var shapeBvh=new Ammo.btBvhTriangleMeshShape(this.meshInterface,true,true);var shapeTri=shapeBvh;var shapeConcave=shapeTri;this.btshape=shapeConcave}}else if(this.shape==7){var length=this.heightData.length;if(armory_trait_physics_bullet_RigidBody.ammoArray==-1){armory_trait_physics_bullet_RigidBody.ammoArray=Ammo._malloc(length)}var _g=0;var _g1=length;while(_g<_g1){var i=_g++;Ammo.HEAPU8[armory_trait_physics_bullet_RigidBody.ammoArray+i]=this.heightData.b[i]}var slice=Math.sqrt(length)|0;var axis=2;var dataType=5;this.btshape=new Ammo.btHeightfieldTerrainShape(slice,slice,armory_trait_physics_bullet_RigidBody.ammoArray,.00392156862745098,0,1,axis,dataType,false);armory_trait_physics_bullet_RigidBody.vec1.setX(this.transform.dim.x/slice);armory_trait_physics_bullet_RigidBody.vec1.setY(this.transform.dim.y/slice);armory_trait_physics_bullet_RigidBody.vec1.setZ(this.transform.dim.z);this.btshape.setLocalScaling(armory_trait_physics_bullet_RigidBody.vec1)}armory_trait_physics_bullet_RigidBody.trans1.setIdentity();armory_trait_physics_bullet_RigidBody.vec1.setX(this.transform.world.self._30);armory_trait_physics_bullet_RigidBody.vec1.setY(this.transform.world.self._31);armory_trait_physics_bullet_RigidBody.vec1.setZ(this.transform.world.self._32);armory_trait_physics_bullet_RigidBody.trans1.setOrigin(armory_trait_physics_bullet_RigidBody.vec1);var _this=armory_trait_physics_bullet_RigidBody.quat;var m=this.transform.world;var _this1=iron_math_Quat.helpMat;_this1.self._00=m.self._00;_this1.self._01=m.self._01;_this1.self._02=m.self._02;_this1.self._03=m.self._03;_this1.self._10=m.self._10;_this1.self._11=m.self._11;_this1.self._12=m.self._12;_this1.self._13=m.self._13;_this1.self._20=m.self._20;_this1.self._21=m.self._21;_this1.self._22=m.self._22;_this1.self._23=m.self._23;_this1.self._30=m.self._30;_this1.self._31=m.self._31;_this1.self._32=m.self._32;_this1.self._33=m.self._33;var _this1=iron_math_Quat.helpMat;var _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._00;_this2.y=_this1.self._01;_this2.z=_this1.self._02;_this2.w=1;var _this3=_this2;var scale=1/Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);_this1.self._00*=scale;_this1.self._01*=scale;_this1.self._02*=scale;var _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._10;_this2.y=_this1.self._11;_this2.z=_this1.self._12;_this2.w=1;var _this3=_this2;scale=1/Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);_this1.self._10*=scale;_this1.self._11*=scale;_this1.self._12*=scale;var _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._20;_this2.y=_this1.self._21;_this2.z=_this1.self._22;_this2.w=1;var _this3=_this2;scale=1/Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);_this1.self._20*=scale;_this1.self._21*=scale;_this1.self._22*=scale;_this1.self._03=0;_this1.self._13=0;_this1.self._23=0;_this1.self._30=0;_this1.self._31=0;_this1.self._32=0;_this1.self._33=1;var m=iron_math_Quat.helpMat;var m11=m.self._00;var m12=m.self._10;var m13=m.self._20;var m21=m.self._01;var m22=m.self._11;var m23=m.self._21;var m31=m.self._02;var m32=m.self._12;var m33=m.self._22;var tr=m11+m22+m33;var s=0;if(tr>0){s=.5/Math.sqrt(tr+1);_this.w=.25/s;_this.x=(m32-m23)*s;_this.y=(m13-m31)*s;_this.z=(m21-m12)*s}else if(m11>m22&&m11>m33){s=2*Math.sqrt(1+m11-m22-m33);_this.w=(m32-m23)/s;_this.x=.25*s;_this.y=(m12+m21)/s;_this.z=(m13+m31)/s}else if(m22>m33){s=2*Math.sqrt(1+m22-m11-m33);_this.w=(m13-m31)/s;_this.x=(m12+m21)/s;_this.y=.25*s;_this.z=(m23+m32)/s}else{s=2*Math.sqrt(1+m33-m11-m22);_this.w=(m21-m12)/s;_this.x=(m13+m31)/s;_this.y=(m23+m32)/s;_this.z=.25*s}armory_trait_physics_bullet_RigidBody.quat1.setValue(armory_trait_physics_bullet_RigidBody.quat.x,armory_trait_physics_bullet_RigidBody.quat.y,armory_trait_physics_bullet_RigidBody.quat.z,armory_trait_physics_bullet_RigidBody.quat.w);armory_trait_physics_bullet_RigidBody.trans1.setRotation(armory_trait_physics_bullet_RigidBody.quat1);var centerOfMassOffset=armory_trait_physics_bullet_RigidBody.trans2;centerOfMassOffset.setIdentity();this.motionState=new Ammo.btDefaultMotionState(armory_trait_physics_bullet_RigidBody.trans1,centerOfMassOffset);armory_trait_physics_bullet_RigidBody.vec1.setX(0);armory_trait_physics_bullet_RigidBody.vec1.setY(0);armory_trait_physics_bullet_RigidBody.vec1.setZ(0);var inertia=armory_trait_physics_bullet_RigidBody.vec1;if(this.staticObj||this.animated){this.mass=0}if(this.mass>0){this.btshape.calculateLocalInertia(this.mass,inertia)}var bodyCI=new Ammo.btRigidBodyConstructionInfo(this.mass,this.motionState,this.btshape,inertia);this.body=new Ammo.btRigidBody(bodyCI);var bodyColl=this.body;bodyColl.setFriction(this.friction);if(this.shape==1||this.shape==5||this.shape==4||this.shape==6){this.angularDamping+=this.friction}bodyColl.setRestitution(this.restitution);if(this.deactivationParams!=null){this.setDeactivationParams(this.deactivationParams[0],this.deactivationParams[1],this.deactivationParams[2])}else{this.setActivationState(4)}if(this.linearDamping!=.04||this.angularDamping!=.1){this.body.setDamping(this.linearDamping,this.angularDamping)}if(this.linearFactors!=null){this.setLinearFactor(this.linearFactors[0],this.linearFactors[1],this.linearFactors[2])}if(this.angularFactors!=null){this.setAngularFactor(this.angularFactors[0],this.angularFactors[1],this.angularFactors[2])}if(this.trigger){bodyColl.setCollisionFlags(bodyColl.getCollisionFlags()|armory_trait_physics_bullet_RigidBody.CF_NO_CONTACT_RESPONSE)}if(this.animated){bodyColl.setCollisionFlags(bodyColl.getCollisionFlags()|armory_trait_physics_bullet_RigidBody.CF_KINEMATIC_OBJECT);bodyColl.setCollisionFlags(bodyColl.getCollisionFlags()&~armory_trait_physics_bullet_RigidBody.CF_STATIC_OBJECT)}if(this.staticObj&&!this.animated){bodyColl.setCollisionFlags(bodyColl.getCollisionFlags()|armory_trait_physics_bullet_RigidBody.CF_STATIC_OBJECT)}if(this.ccd){this.setCcd(this.transform.radius)}this.bodyScaleX=this.currentScaleX=this.transform.scale.x;this.bodyScaleY=this.currentScaleY=this.transform.scale.y;this.bodyScaleZ=this.currentScaleZ=this.transform.scale.z;this.id=armory_trait_physics_bullet_RigidBody.nextId;armory_trait_physics_bullet_RigidBody.nextId++;this.body.userIndex=this.id;this.physics.addRigidBody(this);this.notifyOnRemove($bind(this,this.removeFromWorld));if(this.onReady!=null){this.onReady()}Ammo.destroy(bodyCI)},physicsUpdate:function(){if(!this.ready){return}if(this.animated){this.syncTransform()}else{var bodyColl=this.body;var trans=bodyColl.getWorldTransform();var p=trans.getOrigin();var q=trans.getRotation();var qw=q;var _this=this.transform.loc;var x=p.x();var y=p.y();var z=p.z();_this.x=x;_this.y=y;_this.z=z;_this.w=1;var _this=this.transform.rot;var x=qw.x();var y=qw.y();var z=qw.z();var w=qw.w();_this.x=x;_this.y=y;_this.z=z;_this.w=w;if(this.object.parent!=null){var ptransform=this.object.parent.transform;this.transform.loc.x-=ptransform.world.self._30;this.transform.loc.y-=ptransform.world.self._31;this.transform.loc.z-=ptransform.world.self._32}this.transform.buildMatrix()}if(this.onContact!=null){var rbs=this.physics.getContacts(this);if(rbs!=null){var _g=0;while(_g<rbs.length){var rb=rbs[_g];++_g;var _g1=0;var _g2=this.onContact;while(_g1<_g2.length){var f=_g2[_g1];++_g1;f(rb)}}}}},removeFromWorld:function(){if(this.physics!=null){this.physics.removeRigidBody(this)}},activate:function(){var bodyColl=this.body;bodyColl.activate(false)},disableGravity:function(){armory_trait_physics_bullet_RigidBody.vec1.setValue(0,0,0);this.body.setGravity(armory_trait_physics_bullet_RigidBody.vec1)},enableGravity:function(){this.body.setGravity(this.physics.world.getGravity())},setGravity:function(v){armory_trait_physics_bullet_RigidBody.vec1.setValue(v.x,v.y,v.z);this.body.setGravity(armory_trait_physics_bullet_RigidBody.vec1)},setActivationState:function(newState){var bodyColl=this.body;bodyColl.setActivationState(newState)},setDeactivationParams:function(linearThreshold,angularThreshold,time){this.body.setSleepingThresholds(linearThreshold,angularThreshold)},applyForce:function(force,loc){this.activate();armory_trait_physics_bullet_RigidBody.vec1.setValue(force.x,force.y,force.z);if(loc==null){this.body.applyCentralForce(armory_trait_physics_bullet_RigidBody.vec1)}else{armory_trait_physics_bullet_RigidBody.vec2.setValue(loc.x,loc.y,loc.z);this.body.applyForce(armory_trait_physics_bullet_RigidBody.vec1,armory_trait_physics_bullet_RigidBody.vec2)}},applyImpulse:function(impulse,loc){this.activate();armory_trait_physics_bullet_RigidBody.vec1.setValue(impulse.x,impulse.y,impulse.z);if(loc==null){this.body.applyCentralImpulse(armory_trait_physics_bullet_RigidBody.vec1)}else{armory_trait_physics_bullet_RigidBody.vec2.setValue(loc.x,loc.y,loc.z);this.body.applyImpulse(armory_trait_physics_bullet_RigidBody.vec1,armory_trait_physics_bullet_RigidBody.vec2)}},applyTorque:function(torque){this.activate();armory_trait_physics_bullet_RigidBody.vec1.setValue(torque.x,torque.y,torque.z);this.body.applyTorque(armory_trait_physics_bullet_RigidBody.vec1)},applyTorqueImpulse:function(torque){this.activate();armory_trait_physics_bullet_RigidBody.vec1.setValue(torque.x,torque.y,torque.z);this.body.applyTorqueImpulse(armory_trait_physics_bullet_RigidBody.vec1)},setLinearFactor:function(x,y,z){armory_trait_physics_bullet_RigidBody.vec1.setValue(x,y,z);this.body.setLinearFactor(armory_trait_physics_bullet_RigidBody.vec1)},setAngularFactor:function(x,y,z){armory_trait_physics_bullet_RigidBody.vec1.setValue(x,y,z);this.body.setAngularFactor(armory_trait_physics_bullet_RigidBody.vec1)},getLinearVelocity:function(){var v=this.body.getLinearVelocity();return new iron_math_Vec4(v.x(),v.y(),v.z())},setLinearVelocity:function(x,y,z){armory_trait_physics_bullet_RigidBody.vec1.setValue(x,y,z);this.body.setLinearVelocity(armory_trait_physics_bullet_RigidBody.vec1)},getAngularVelocity:function(){var v=this.body.getAngularVelocity();return new iron_math_Vec4(v.x(),v.y(),v.z())},setAngularVelocity:function(x,y,z){armory_trait_physics_bullet_RigidBody.vec1.setValue(x,y,z);this.body.setAngularVelocity(armory_trait_physics_bullet_RigidBody.vec1)},setFriction:function(f){var bodyColl=this.body;bodyColl.setFriction(f);this.friction=f},notifyOnContact:function(f){if(this.onContact==null){this.onContact=[]}this.onContact.push(f)},removeContact:function(f){HxOverrides.remove(this.onContact,f)},setScale:function(v){this.currentScaleX=v.x;this.currentScaleY=v.y;this.currentScaleZ=v.z;armory_trait_physics_bullet_RigidBody.vec1.setX(v.x/this.bodyScaleX);armory_trait_physics_bullet_RigidBody.vec1.setY(v.y/this.bodyScaleY);armory_trait_physics_bullet_RigidBody.vec1.setZ(v.z/this.bodyScaleZ);this.btshape.setLocalScaling(armory_trait_physics_bullet_RigidBody.vec1);var worldDyn=this.physics.world;var worldCol=worldDyn;worldCol.updateSingleAabb(this.body)},syncTransform:function(){var t=this.transform;t.buildMatrix();armory_trait_physics_bullet_RigidBody.vec1.setValue(t.world.self._30,t.world.self._31,t.world.self._32);armory_trait_physics_bullet_RigidBody.trans1.setOrigin(armory_trait_physics_bullet_RigidBody.vec1);var _this=armory_trait_physics_bullet_RigidBody.quat;var m=t.world;var _this1=iron_math_Quat.helpMat;_this1.self._00=m.self._00;_this1.self._01=m.self._01;_this1.self._02=m.self._02;_this1.self._03=m.self._03;_this1.self._10=m.self._10;_this1.self._11=m.self._11;_this1.self._12=m.self._12;_this1.self._13=m.self._13;_this1.self._20=m.self._20;_this1.self._21=m.self._21;_this1.self._22=m.self._22;_this1.self._23=m.self._23;_this1.self._30=m.self._30;_this1.self._31=m.self._31;_this1.self._32=m.self._32;_this1.self._33=m.self._33;var _this1=iron_math_Quat.helpMat;var _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._00;_this2.y=_this1.self._01;_this2.z=_this1.self._02;_this2.w=1;var _this3=_this2;var scale=1/Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);_this1.self._00*=scale;_this1.self._01*=scale;_this1.self._02*=scale;var _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._10;_this2.y=_this1.self._11;_this2.z=_this1.self._12;_this2.w=1;var _this3=_this2;scale=1/Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);_this1.self._10*=scale;_this1.self._11*=scale;_this1.self._12*=scale;var _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._20;_this2.y=_this1.self._21;_this2.z=_this1.self._22;_this2.w=1;var _this3=_this2;scale=1/Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);_this1.self._20*=scale;_this1.self._21*=scale;_this1.self._22*=scale;_this1.self._03=0;_this1.self._13=0;_this1.self._23=0;_this1.self._30=0;_this1.self._31=0;_this1.self._32=0;_this1.self._33=1;var m=iron_math_Quat.helpMat;var m11=m.self._00;var m12=m.self._10;var m13=m.self._20;var m21=m.self._01;var m22=m.self._11;var m23=m.self._21;var m31=m.self._02;var m32=m.self._12;var m33=m.self._22;var tr=m11+m22+m33;var s=0;if(tr>0){s=.5/Math.sqrt(tr+1);_this.w=.25/s;_this.x=(m32-m23)*s;_this.y=(m13-m31)*s;_this.z=(m21-m12)*s}else if(m11>m22&&m11>m33){s=2*Math.sqrt(1+m11-m22-m33);_this.w=(m32-m23)/s;_this.x=.25*s;_this.y=(m12+m21)/s;_this.z=(m13+m31)/s}else if(m22>m33){s=2*Math.sqrt(1+m22-m11-m33);_this.w=(m13-m31)/s;_this.x=(m12+m21)/s;_this.y=.25*s;_this.z=(m23+m32)/s}else{s=2*Math.sqrt(1+m33-m11-m22);_this.w=(m21-m12)/s;_this.x=(m13+m31)/s;_this.y=(m23+m32)/s;_this.z=.25*s}armory_trait_physics_bullet_RigidBody.quat1.setValue(armory_trait_physics_bullet_RigidBody.quat.x,armory_trait_physics_bullet_RigidBody.quat.y,armory_trait_physics_bullet_RigidBody.quat.z,armory_trait_physics_bullet_RigidBody.quat.w);armory_trait_physics_bullet_RigidBody.trans1.setRotation(armory_trait_physics_bullet_RigidBody.quat1);if(this.animated){this.body.getMotionState().setWorldTransform(armory_trait_physics_bullet_RigidBody.trans1)}else{this.body.setCenterOfMassTransform(armory_trait_physics_bullet_RigidBody.trans1)}if(this.currentScaleX!=t.scale.x||this.currentScaleY!=t.scale.y||this.currentScaleZ!=t.scale.z){this.setScale(t.scale)}this.activate()},setCcd:function(sphereRadius,motionThreshold){if(motionThreshold==null){motionThreshold=1e-7}var bodyColl=this.body;bodyColl.setCcdSweptSphereRadius(sphereRadius);bodyColl.setCcdMotionThreshold(motionThreshold)},fillConvexHull:function(scale,margin){var data=js_Boot.__cast(this.object,iron_object_MeshObject).data;var shape=armory_trait_physics_bullet_RigidBody.convexHullCache.h[data.__id__];if(shape!=null){armory_trait_physics_bullet_RigidBody.usersCache.set(data,armory_trait_physics_bullet_RigidBody.usersCache.h[data.__id__]+1);return shape}shape=new Ammo.btConvexHullShape;armory_trait_physics_bullet_RigidBody.convexHullCache.set(data,shape);armory_trait_physics_bullet_RigidBody.usersCache.set(data,1);var positions=data.geom.positions.values;var sx=scale.x*(1-margin)*3051850947599719e-20;var sy=scale.y*(1-margin)*3051850947599719e-20;var sz=scale.z*(1-margin)*3051850947599719e-20;if(data.raw.scale_pos!=null){sx*=data.raw.scale_pos;sy*=data.raw.scale_pos;sz*=data.raw.scale_pos}var _g=0;var _g1=positions.length/4|0;while(_g<_g1){var i=_g++;armory_trait_physics_bullet_RigidBody.vec1.setX(positions[i*4]*sx);armory_trait_physics_bullet_RigidBody.vec1.setY(positions[i*4+1]*sy);armory_trait_physics_bullet_RigidBody.vec1.setZ(positions[i*4+2]*sz);shape.addPoint(armory_trait_physics_bullet_RigidBody.vec1,true)}return shape},fillTriangleMesh:function(scale){var data=js_Boot.__cast(this.object,iron_object_MeshObject).data;var triangleMesh=armory_trait_physics_bullet_RigidBody.triangleMeshCache.h[data.__id__];if(triangleMesh!=null){armory_trait_physics_bullet_RigidBody.usersCache.set(data,armory_trait_physics_bullet_RigidBody.usersCache.h[data.__id__]+1);return triangleMesh}triangleMesh=new Ammo.btTriangleMesh(true,true);armory_trait_physics_bullet_RigidBody.triangleMeshCache.set(data,triangleMesh);armory_trait_physics_bullet_RigidBody.usersCache.set(data,1);var positions=data.geom.positions.values;var indices=data.geom.indices;var sx=scale.x*3051850947599719e-20;var sy=scale.y*3051850947599719e-20;var sz=scale.z*3051850947599719e-20;if(data.raw.scale_pos!=null){sx*=data.raw.scale_pos;sy*=data.raw.scale_pos;sz*=data.raw.scale_pos}var _g=0;while(_g<indices.length){var ar=indices[_g];++_g;var _g1=0;var _g2=ar.length/3|0;while(_g1<_g2){var i=_g1++;armory_trait_physics_bullet_RigidBody.vec1.setX(positions[ar[i*3]*4]*sx);armory_trait_physics_bullet_RigidBody.vec1.setY(positions[ar[i*3]*4+1]*sy);armory_trait_physics_bullet_RigidBody.vec1.setZ(positions[ar[i*3]*4+2]*sz);armory_trait_physics_bullet_RigidBody.vec2.setX(positions[ar[i*3+1]*4]*sx);armory_trait_physics_bullet_RigidBody.vec2.setY(positions[ar[i*3+1]*4+1]*sy);armory_trait_physics_bullet_RigidBody.vec2.setZ(positions[ar[i*3+1]*4+2]*sz);armory_trait_physics_bullet_RigidBody.vec3.setX(positions[ar[i*3+2]*4]*sx);armory_trait_physics_bullet_RigidBody.vec3.setY(positions[ar[i*3+2]*4+1]*sy);armory_trait_physics_bullet_RigidBody.vec3.setZ(positions[ar[i*3+2]*4+2]*sz);triangleMesh.addTriangle(armory_trait_physics_bullet_RigidBody.vec1,armory_trait_physics_bullet_RigidBody.vec2,armory_trait_physics_bullet_RigidBody.vec3)}}return triangleMesh},delete:function(){Ammo.destroy(this.motionState);Ammo.destroy(this.body);if(this.shape==2||this.shape==3){var data=js_Boot.__cast(this.object,iron_object_MeshObject).data;var i=armory_trait_physics_bullet_RigidBody.usersCache.h[data.__id__]-1;armory_trait_physics_bullet_RigidBody.usersCache.set(data,i);if(this.shape==3){Ammo.destroy(this.btshape)}if(i<=0){if(this.shape==2){Ammo.destroy(this.btshape);armory_trait_physics_bullet_RigidBody.convexHullCache.remove(data)}else{armory_trait_physics_bullet_RigidBody.triangleMeshCache.remove(data);if(this.meshInterface!=null){Ammo.destroy(this.meshInterface)}}}}else{Ammo.destroy(this.btshape)}},deleteShape:function(){Ammo.destroy(this.btshape)},__class__:armory_trait_physics_bullet_RigidBody});var celshade_renderpath_RenderPathCreator=function(){};$hxClasses["celshade.renderpath.RenderPathCreator"]=celshade_renderpath_RenderPathCreator;celshade_renderpath_RenderPathCreator.__name__=true;celshade_renderpath_RenderPathCreator.get=function(){celshade_renderpath_RenderPathCreator.path=new iron_RenderPath;armory_renderpath_Inc.init(celshade_renderpath_RenderPathCreator.path);celshade_renderpath_RenderPathCreator.init();celshade_renderpath_RenderPathCreator.path.commands=celshade_renderpath_RenderPathCreator.commands;return celshade_renderpath_RenderPathCreator.path};celshade_renderpath_RenderPathCreator.setTargetMeshes=function(){celshade_renderpath_RenderPathCreator.path.setTarget("")};celshade_renderpath_RenderPathCreator.init=function(){};celshade_renderpath_RenderPathCreator.commands=function(){armory_renderpath_Inc.drawShadowMap();celshade_renderpath_RenderPathCreator.setTargetMeshes();celshade_renderpath_RenderPathCreator.path.clearTarget(-1,1);armory_renderpath_Inc.bindShadowMap();celshade_renderpath_RenderPathCreator.path.drawMeshes("mesh")};var haxe_IMap=function(){};$hxClasses["haxe.IMap"]=haxe_IMap;haxe_IMap.__name__=true;haxe_IMap.__isInterface__=true;var haxe_Exception=function(message,previous,native){Error.call(this,message);this.message=message;this.__previousException=previous;this.__nativeException=native!=null?native:this};$hxClasses["haxe.Exception"]=haxe_Exception;haxe_Exception.__name__=true;haxe_Exception.caught=function(value){if(value instanceof haxe_Exception){return value}else if(value instanceof Error){return new haxe_Exception(value.message,null,value)}else{return new haxe_ValueException(value,null,value)}};haxe_Exception.thrown=function(value){if(value instanceof haxe_Exception){return value.get_native()}else if(value instanceof Error){return value}else{var e=new haxe_ValueException(value);return e}};haxe_Exception.__super__=Error;haxe_Exception.prototype=$extend(Error.prototype,{unwrap:function(){return this.__nativeException},get_native:function(){return this.__nativeException},__class__:haxe_Exception,__properties__:{get_native:"get_native"}});var haxe_Log=function(){};$hxClasses["haxe.Log"]=haxe_Log;haxe_Log.__name__=true;haxe_Log.formatOutput=function(v,infos){var str=Std.string(v);if(infos==null){return str}var pstr=infos.fileName+":"+infos.lineNumber;if(infos.customParams!=null){var _g=0;var _g1=infos.customParams;while(_g<_g1.length){var v=_g1[_g];++_g;str+=", "+Std.string(v)}}return pstr+": "+str};haxe_Log.trace=function(v,infos){var str=haxe_Log.formatOutput(v,infos);if(typeof console!="undefined"&&console.log!=null){console.log(str)}};var haxe__$Unserializer_DefaultResolver=function(){};$hxClasses["haxe._Unserializer.DefaultResolver"]=haxe__$Unserializer_DefaultResolver;haxe__$Unserializer_DefaultResolver.__name__=true;haxe__$Unserializer_DefaultResolver.prototype={resolveClass:function(name){return $hxClasses[name]},resolveEnum:function(name){return $hxEnums[name]},__class__:haxe__$Unserializer_DefaultResolver};var haxe_Unserializer=function(buf){this.buf=buf;this.length=buf.length;this.pos=0;this.scache=[];this.cache=[];var r=haxe_Unserializer.DEFAULT_RESOLVER;if(r==null){r=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.DEFAULT_RESOLVER=r}this.resolver=r};$hxClasses["haxe.Unserializer"]=haxe_Unserializer;haxe_Unserializer.__name__=true;haxe_Unserializer.initCodes=function(){var codes=[];var _g=0;var _g1=haxe_Unserializer.BASE64.length;while(_g<_g1){var i=_g++;codes[haxe_Unserializer.BASE64.charCodeAt(i)]=i}return codes};haxe_Unserializer.run=function(v){return new haxe_Unserializer(v).unserialize()};haxe_Unserializer.prototype={readDigits:function(){var k=0;var s=false;var fpos=this.pos;while(true){var c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c==45){if(this.pos!=fpos){break}s=true;this.pos++;continue}if(c<48||c>57){break}k=k*10+(c-48);this.pos++}if(s){k*=-1}return k},readFloat:function(){var p1=this.pos;while(true){var c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c>=43&&c<58||c==101||c==69){this.pos++}else{break}}return parseFloat(HxOverrides.substr(this.buf,p1,this.pos-p1))},unserializeObject:function(o){while(true){if(this.pos>=this.length){throw haxe_Exception.thrown("Invalid object")}if(this.buf.charCodeAt(this.pos)==103){break}var k=this.unserialize();if(typeof k!="string"){throw haxe_Exception.thrown("Invalid object key")}var v=this.unserialize();o[k]=v}this.pos++},unserializeEnum:function(edecl,tag){if(this.buf.charCodeAt(this.pos++)!=58){throw haxe_Exception.thrown("Invalid enum format")}var nargs=this.readDigits();if(nargs==0){return Type.createEnum(edecl,tag)}var args=[];while(nargs-- >0)args.push(this.unserialize());return Type.createEnum(edecl,tag,args)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var name=this.unserialize();var cl=this.resolver.resolveClass(name);if(cl==null){throw haxe_Exception.thrown("Class not found "+name)}return cl;case 66:var name=this.unserialize();var e=this.resolver.resolveEnum(name);if(e==null){throw haxe_Exception.thrown("Enum not found "+name)}return e;case 67:var name=this.unserialize();var cl=this.resolver.resolveClass(name);if(cl==null){throw haxe_Exception.thrown("Class not found "+name)}var o=Object.create(cl.prototype);this.cache.push(o);o.hxUnserialize(this);if(this.buf.charCodeAt(this.pos++)!=103){throw haxe_Exception.thrown("Invalid custom data")}return o;case 77:var h=new haxe_ds_ObjectMap;this.cache.push(h);var buf=this.buf;while(this.buf.charCodeAt(this.pos)!=104){var s=this.unserialize();h.set(s,this.unserialize())}this.pos++;return h;case 82:var n=this.readDigits();if(n<0||n>=this.scache.length){throw haxe_Exception.thrown("Invalid string reference")}return this.scache[n];case 97:var buf=this.buf;var a=[];this.cache.push(a);while(true){var c=this.buf.charCodeAt(this.pos);if(c==104){this.pos++;break}if(c==117){this.pos++;var n=this.readDigits();a[a.length+n-1]=null}else{a.push(this.unserialize())}}return a;case 98:var h=new haxe_ds_StringMap;this.cache.push(h);var buf=this.buf;while(this.buf.charCodeAt(this.pos)!=104){var s=this.unserialize();var value=this.unserialize();h.h[s]=value}this.pos++;return h;case 99:var name=this.unserialize();var cl=this.resolver.resolveClass(name);if(cl==null){throw haxe_Exception.thrown("Class not found "+name)}var o=Object.create(cl.prototype);this.cache.push(o);this.unserializeObject(o);return o;case 100:return this.readFloat();case 102:return false;case 105:return this.readDigits();case 106:var name=this.unserialize();var edecl=this.resolver.resolveEnum(name);if(edecl==null){throw haxe_Exception.thrown("Enum not found "+name)}this.pos++;var index=this.readDigits();var tag=edecl.__constructs__.slice()[index];if(tag==null){throw haxe_Exception.thrown("Unknown enum index "+name+"@"+index)}var e=this.unserializeEnum(edecl,tag);this.cache.push(e);return e;case 107:return NaN;case 108:var l=new haxe_ds_List;this.cache.push(l);var buf=this.buf;while(this.buf.charCodeAt(this.pos)!=104)l.add(this.unserialize());this.pos++;return l;case 109:return-Infinity;case 110:return null;case 111:var o={};this.cache.push(o);this.unserializeObject(o);return o;case 112:return Infinity;case 113:var h=new haxe_ds_IntMap;this.cache.push(h);var buf=this.buf;var c=this.buf.charCodeAt(this.pos++);while(c==58){var i=this.readDigits();var value=this.unserialize();h.h[i]=value;c=this.buf.charCodeAt(this.pos++)}if(c!=104){throw haxe_Exception.thrown("Invalid IntMap format")}return h;case 114:var n=this.readDigits();if(n<0||n>=this.cache.length){throw haxe_Exception.thrown("Invalid reference")}return this.cache[n];case 115:var len=this.readDigits();var buf=this.buf;if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len){throw haxe_Exception.thrown("Invalid bytes length")}var codes=haxe_Unserializer.CODES;if(codes==null){codes=haxe_Unserializer.initCodes();haxe_Unserializer.CODES=codes}var i=this.pos;var rest=len&3;var size=(len>>2)*3+(rest>=2?rest-1:0);var max=i+(len-rest);var bytes=new haxe_io_Bytes(new ArrayBuffer(size));var bpos=0;while(i<max){var c1=codes[buf.charCodeAt(i++)];var c2=codes[buf.charCodeAt(i++)];bytes.b[bpos++]=c1<<2|c2>>4;var c3=codes[buf.charCodeAt(i++)];bytes.b[bpos++]=c2<<4|c3>>2;var c4=codes[buf.charCodeAt(i++)];bytes.b[bpos++]=c3<<6|c4}if(rest>=2){var c1=codes[buf.charCodeAt(i++)];var c2=codes[buf.charCodeAt(i++)];bytes.b[bpos++]=c1<<2|c2>>4;if(rest==3){var c3=codes[buf.charCodeAt(i++)];bytes.b[bpos++]=c2<<4|c3>>2}}this.pos+=len;this.cache.push(bytes);return bytes;case 116:return true;case 118:var d;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&this.buf.charCodeAt(this.pos+4)==45){d=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));this.pos+=19}else{d=new Date(this.readFloat())}this.cache.push(d);return d;case 119:var name=this.unserialize();var edecl=this.resolver.resolveEnum(name);if(edecl==null){throw haxe_Exception.thrown("Enum not found "+name)}var e=this.unserializeEnum(edecl,this.unserialize());this.cache.push(e);return e;case 120:throw haxe_Exception.thrown(this.unserialize());case 121:var len=this.readDigits();if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len){throw haxe_Exception.thrown("Invalid string length")}var s=HxOverrides.substr(this.buf,this.pos,len);this.pos+=len;s=decodeURIComponent(s.split("+").join(" "));this.scache.push(s);return s;case 122:return 0;default:}this.pos--;throw haxe_Exception.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:haxe_Unserializer};var haxe_ValueException=function(value,previous,native){haxe_Exception.call(this,String(value),previous,native);this.value=value};$hxClasses["haxe.ValueException"]=haxe_ValueException;haxe_ValueException.__name__=true;haxe_ValueException.__super__=haxe_Exception;haxe_ValueException.prototype=$extend(haxe_Exception.prototype,{unwrap:function(){return this.value},__class__:haxe_ValueException});var haxe_ds_IntMap=function(){this.h={}};$hxClasses["haxe.ds.IntMap"]=haxe_ds_IntMap;haxe_ds_IntMap.__name__=true;haxe_ds_IntMap.__interfaces__=[haxe_IMap];haxe_ds_IntMap.prototype={remove:function(key){if(!this.h.hasOwnProperty(key)){return false}delete this.h[key];return true},keys:function(){var a=[];for(var key in this.h)if(this.h.hasOwnProperty(key))a.push(key|0);return new haxe_iterators_ArrayIterator(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var i=this.it.next();return this.ref[i]}}},__class__:haxe_ds_IntMap};var haxe_ds_List=function(){this.length=0};$hxClasses["haxe.ds.List"]=haxe_ds_List;haxe_ds_List.__name__=true;haxe_ds_List.prototype={add:function(item){var x=new haxe_ds__$List_ListNode(item,null);if(this.h==null){this.h=x}else{this.q.next=x}this.q=x;this.length++},__class__:haxe_ds_List};var haxe_ds__$List_ListNode=function(item,next){this.item=item;this.next=next};$hxClasses["haxe.ds._List.ListNode"]=haxe_ds__$List_ListNode;haxe_ds__$List_ListNode.__name__=true;haxe_ds__$List_ListNode.prototype={__class__:haxe_ds__$List_ListNode};var haxe_ds_ObjectMap=function(){this.h={__keys__:{}}};$hxClasses["haxe.ds.ObjectMap"]=haxe_ds_ObjectMap;haxe_ds_ObjectMap.__name__=true;haxe_ds_ObjectMap.__interfaces__=[haxe_IMap];haxe_ds_ObjectMap.prototype={set:function(key,value){var id=key.__id__;if(id==null){id=key.__id__=$global.$haxeUID++}this.h[id]=value;this.h.__keys__[id]=key},remove:function(key){var id=key.__id__;if(this.h.__keys__[id]==null){return false}delete this.h[id];delete this.h.__keys__[id];return true},__class__:haxe_ds_ObjectMap};var haxe_ds_StringMap=function(){this.h=Object.create(null)};$hxClasses["haxe.ds.StringMap"]=haxe_ds_StringMap;haxe_ds_StringMap.__name__=true;haxe_ds_StringMap.__interfaces__=[haxe_IMap];haxe_ds_StringMap.valueIterator=function(h){var keys=Object.keys(h);var len=keys.length;var idx=0;return{hasNext:function(){return idx<len},next:function(){idx+=1;return h[keys[idx-1]]}}};haxe_ds_StringMap.prototype={__class__:haxe_ds_StringMap};var haxe_io_Bytes=function(data){this.length=data.byteLength;this.b=new Uint8Array(data);this.b.bufferValue=data;data.hxBytes=this;data.bytes=this.b};$hxClasses["haxe.io.Bytes"]=haxe_io_Bytes;haxe_io_Bytes.__name__=true;haxe_io_Bytes.ofData=function(b){var hb=b.hxBytes;if(hb!=null){return hb}return new haxe_io_Bytes(b)};haxe_io_Bytes.prototype={getFloat:function(pos){if(this.data==null){this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)}return this.data.getFloat32(pos,true)},getString:function(pos,len,encoding){if(pos<0||len<0||pos+len>this.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(encoding==null){encoding=haxe_io_Encoding.UTF8}var s="";var b=this.b;var i=pos;var max=pos+len;switch(encoding._hx_index){case 0:var debug=pos>0;while(i<max){var c=b[i++];if(c<128){if(c==0){break}s+=String.fromCodePoint(c)}else if(c<224){var code=(c&63)<<6|b[i++]&127;s+=String.fromCodePoint(code)}else if(c<240){var c2=b[i++];var code1=(c&31)<<12|(c2&127)<<6|b[i++]&127;s+=String.fromCodePoint(code1)}else{var c21=b[i++];var c3=b[i++];var u=(c&15)<<18|(c21&127)<<12|(c3&127)<<6|b[i++]&127;s+=String.fromCodePoint(u)}}break;case 1:while(i<max){var c=b[i++]|b[i++]<<8;s+=String.fromCodePoint(c)}break}return s},toString:function(){return this.getString(0,this.length)},__class__:haxe_io_Bytes};var haxe_io_BytesBuffer=function(){this.pos=0;this.size=0};$hxClasses["haxe.io.BytesBuffer"]=haxe_io_BytesBuffer;haxe_io_BytesBuffer.__name__=true;haxe_io_BytesBuffer.prototype={addByte:function(byte){if(this.pos==this.size){this.grow(1)}this.view.setUint8(this.pos++,byte)},addBytes:function(src,pos,len){if(pos<0||len<0||pos+len>src.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(this.pos+len>this.size){this.grow(len)}if(this.size==0){return}var sub=new Uint8Array(src.b.buffer,src.b.byteOffset+pos,len);this.u8.set(sub,this.pos);this.pos+=len},grow:function(delta){var req=this.pos+delta;var nsize=this.size==0?16:this.size;while(nsize<req)nsize=nsize*3>>1;var nbuf=new ArrayBuffer(nsize);var nu8=new Uint8Array(nbuf);if(this.size>0){nu8.set(this.u8)}this.size=nsize;this.buffer=nbuf;this.u8=nu8;this.view=new DataView(this.buffer)},getBytes:function(){if(this.size==0){return new haxe_io_Bytes(new ArrayBuffer(0))}var b=new haxe_io_Bytes(this.buffer);b.length=this.pos;return b},__class__:haxe_io_BytesBuffer};var haxe_io_Input=function(){};$hxClasses["haxe.io.Input"]=haxe_io_Input;haxe_io_Input.__name__=true;haxe_io_Input.prototype={readByte:function(){throw haxe_Exception.thrown("Not implemented")},readBytes:function(s,pos,len){var k=len;var b=s.b;if(pos<0||len<0||pos+len>s.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}try{while(k>0){b[pos]=this.readByte();++pos;--k}}catch(_g){if(!(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof)){throw _g}}return len-k},set_bigEndian:function(b){this.bigEndian=b;return b},readFullBytes:function(s,pos,len){while(len>0){var k=this.readBytes(s,pos,len);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}pos+=k;len-=k}},read:function(nbytes){var s=new haxe_io_Bytes(new ArrayBuffer(nbytes));var p=0;while(nbytes>0){var k=this.readBytes(s,p,nbytes);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}p+=k;nbytes-=k}return s},readFloat:function(){return haxe_io_FPHelper.i32ToFloat(this.readInt32())},readInt8:function(){var n=this.readByte();if(n>=128){return n-256}return n},readInt16:function(){var ch1=this.readByte();var ch2=this.readByte();var n=this.bigEndian?ch2|ch1<<8:ch1|ch2<<8;if((n&32768)!=0){return n-65536}return n},readUInt16:function(){var ch1=this.readByte();var ch2=this.readByte();if(this.bigEndian){return ch2|ch1<<8}else{return ch1|ch2<<8}},readInt32:function(){var ch1=this.readByte();var ch2=this.readByte();var ch3=this.readByte();var ch4=this.readByte();if(this.bigEndian){return ch4|ch3<<8|ch2<<16|ch1<<24}else{return ch1|ch2<<8|ch3<<16|ch4<<24}},readString:function(len,encoding){var b=new haxe_io_Bytes(new ArrayBuffer(len));this.readFullBytes(b,0,len);return b.getString(0,len,encoding)},__class__:haxe_io_Input,__properties__:{set_bigEndian:"set_bigEndian"}};var haxe_io_BytesInput=function(b,pos,len){if(pos==null){pos=0}if(len==null){len=b.length-pos}if(pos<0||len<0||pos+len>b.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}this.b=b.b;this.pos=pos;this.len=len;this.totlen=len};$hxClasses["haxe.io.BytesInput"]=haxe_io_BytesInput;haxe_io_BytesInput.__name__=true;haxe_io_BytesInput.__super__=haxe_io_Input;haxe_io_BytesInput.prototype=$extend(haxe_io_Input.prototype,{set_position:function(p){if(p<0){p=0}else if(p>this.totlen){p=this.totlen}this.len=this.totlen-p;return this.pos=p},readByte:function(){if(this.len==0){throw haxe_Exception.thrown(new haxe_io_Eof)}this.len--;return this.b[this.pos++]},readBytes:function(buf,pos,len){if(pos<0||len<0||pos+len>buf.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(this.len==0&&len>0){throw haxe_Exception.thrown(new haxe_io_Eof)}if(this.len<len){len=this.len}var b1=this.b;var b2=buf.b;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;b2[pos+i]=b1[this.pos+i]}this.pos+=len;this.len-=len;return len},__class__:haxe_io_BytesInput,__properties__:$extend(haxe_io_Input.prototype.__properties__,{set_position:"set_position"})});var haxe_io_Output=function(){};$hxClasses["haxe.io.Output"]=haxe_io_Output;haxe_io_Output.__name__=true;haxe_io_Output.prototype={writeByte:function(c){throw haxe_Exception.thrown("Not implemented")},writeBytes:function(s,pos,len){if(pos<0||len<0||pos+len>s.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}var b=s.b;var k=len;while(k>0){this.writeByte(b[pos]);++pos;--k}return len},write:function(s){var l=s.length;var p=0;while(l>0){var k=this.writeBytes(s,p,l);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}p+=k;l-=k}},writeFloat:function(x){this.writeInt32(haxe_io_FPHelper.floatToI32(x))},writeInt32:function(x){if(this.bigEndian){this.writeByte(x>>>24);this.writeByte(x>>16&255);this.writeByte(x>>8&255);this.writeByte(x&255)}else{this.writeByte(x&255);this.writeByte(x>>8&255);this.writeByte(x>>16&255);this.writeByte(x>>>24)}},__class__:haxe_io_Output};var haxe_io_BytesOutput=function(){this.b=new haxe_io_BytesBuffer};$hxClasses["haxe.io.BytesOutput"]=haxe_io_BytesOutput;haxe_io_BytesOutput.__name__=true;haxe_io_BytesOutput.__super__=haxe_io_Output;haxe_io_BytesOutput.prototype=$extend(haxe_io_Output.prototype,{writeByte:function(c){this.b.addByte(c)},writeBytes:function(buf,pos,len){this.b.addBytes(buf,pos,len);return len},getBytes:function(){return this.b.getBytes()},__class__:haxe_io_BytesOutput});var haxe_io_Encoding=$hxEnums["haxe.io.Encoding"]={__ename__:true,__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}};var haxe_io_Eof=function(){};$hxClasses["haxe.io.Eof"]=haxe_io_Eof;haxe_io_Eof.__name__=true;haxe_io_Eof.prototype={toString:function(){return"Eof"},__class__:haxe_io_Eof};var haxe_io_Error=$hxEnums["haxe.io.Error"]={__ename__:true,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:($_=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}},$_.__params__=["e"],$_)};var haxe_io_FPHelper=function(){};$hxClasses["haxe.io.FPHelper"]=haxe_io_FPHelper;haxe_io_FPHelper.__name__=true;haxe_io_FPHelper.i32ToFloat=function(i){haxe_io_FPHelper.helper.setInt32(0,i,true);return haxe_io_FPHelper.helper.getFloat32(0,true)};haxe_io_FPHelper.floatToI32=function(f){haxe_io_FPHelper.helper.setFloat32(0,f,true);return haxe_io_FPHelper.helper.getInt32(0,true)};var haxe_iterators_ArrayIterator=function(array){this.current=0;this.array=array};$hxClasses["haxe.iterators.ArrayIterator"]=haxe_iterators_ArrayIterator;haxe_iterators_ArrayIterator.__name__=true;haxe_iterators_ArrayIterator.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:haxe_iterators_ArrayIterator};var iron_App=function(_appReady){_appReady();iron_system_Time.init();kha_System.notifyOnFrames(iron_App.render);kha_Scheduler.addTimeTask(iron_App.update,0,1/iron_system_Time.frequency*iron_system_Time.scale)};$hxClasses["iron.App"]=iron_App;iron_App.__name__=true;iron_App.init=function(_appReady){new iron_App(_appReady)};iron_App.update=function(){if(iron_Scene.active==null||!iron_Scene.active.ready){return}if(iron_App.pauseUpdates){return}iron_Scene.active.updateFrame();var i=0;var l=iron_App.traitUpdates.length;while(i<l){if(iron_App.traitInits.length>0){var _g=0;var _g1=iron_App.traitInits;while(_g<_g1.length){var f=_g1[_g];++_g;if(iron_App.traitInits.length>0){f()}else{break}}iron_App.traitInits.splice(0,iron_App.traitInits.length)}iron_App.traitUpdates[i]();if(l<=iron_App.traitUpdates.length){++i}else{l=iron_App.traitUpdates.length}}i=0;l=iron_App.traitLateUpdates.length;while(i<l){iron_App.traitLateUpdates[i]();if(l<=iron_App.traitLateUpdates.length){++i}else{l=iron_App.traitLateUpdates.length}}if(iron_App.onEndFrames!=null){var _g=0;var _g1=iron_App.onEndFrames;while(_g<_g1.length){var f=_g1[_g];++_g;f()}}if(iron_App.lastw==-1){iron_App.lastw=kha_System.windowWidth();iron_App.lasth=kha_System.windowHeight()}if(iron_App.lastw!=kha_System.windowWidth()||iron_App.lasth!=kha_System.windowHeight()){if(iron_App.onResize!=null){iron_App.onResize()}else if(iron_Scene.active!=null&&iron_Scene.active.camera!=null){iron_Scene.active.camera.buildProjection()}}iron_App.lastw=kha_System.windowWidth();iron_App.lasth=kha_System.windowHeight()};iron_App.render=function(frames){var frame=frames[0];iron_App.framebuffer=frame;iron_system_Time.update();if(iron_Scene.active==null||!iron_Scene.active.ready){iron_App.render2D(frame);return}if(iron_App.traitInits.length>0){var _g=0;var _g1=iron_App.traitInits;while(_g<_g1.length){var f=_g1[_g];++_g;if(iron_App.traitInits.length>0){f()}else{break}}iron_App.traitInits.splice(0,iron_App.traitInits.length)}iron_Scene.active.renderFrame(frame.get_g4());var _g=0;var _g1=iron_App.traitRenders;while(_g<_g1.length){var f=_g1[_g];++_g;if(iron_App.traitRenders.length>0){f(frame.get_g4())}else{break}}iron_App.render2D(frame)};iron_App.render2D=function(frame){if(iron_App.traitRenders2D.length>0){frame.get_g2().begin(false);var _g=0;var _g1=iron_App.traitRenders2D;while(_g<_g1.length){var f=_g1[_g];++_g;if(iron_App.traitRenders2D.length>0){f(frame.get_g2())}else{break}}frame.get_g2().end()}};iron_App.notifyOnInit=function(f){iron_App.traitInits.push(f)};iron_App.removeInit=function(f){HxOverrides.remove(iron_App.traitInits,f)};iron_App.notifyOnUpdate=function(f){iron_App.traitUpdates.push(f)};iron_App.removeUpdate=function(f){HxOverrides.remove(iron_App.traitUpdates,f)};iron_App.removeLateUpdate=function(f){HxOverrides.remove(iron_App.traitLateUpdates,f)};iron_App.removeRender=function(f){HxOverrides.remove(iron_App.traitRenders,f)};iron_App.notifyOnRender2D=function(f){iron_App.traitRenders2D.push(f)};iron_App.removeRender2D=function(f){HxOverrides.remove(iron_App.traitRenders2D,f)};iron_App.notifyOnReset=function(f){if(iron_App.onResets==null){iron_App.onResets=[]}iron_App.onResets.push(f)};iron_App.notifyOnEndFrame=function(f){if(iron_App.onEndFrames==null){iron_App.onEndFrames=[]}iron_App.onEndFrames.push(f)};iron_App.prototype={__class__:iron_App};var iron_RenderPath=function(){this.depthBuffers=[];this.loading=0;this.lastFrameTime=0;this.viewportScaled=false;this.scissorSet=false;this.lastH=0;this.lastW=0;this.depthToRenderTarget=new haxe_ds_StringMap;this.renderTargets=new haxe_ds_StringMap;this.commands=null;this.paused=false;this.drawOrder=0;this.currentG=null;this.isProbe=false;this.isProbeCube=false;this.isProbePlanar=false;this.point=null;this.sun=null;this.light=null;this.currentTarget=null;this.frame=0;this.frameTime=0;this.frameScissorH=0;this.frameScissorW=0;this.frameScissorY=0;this.frameScissorX=0;this.frameScissor=false};$hxClasses["iron.RenderPath"]=iron_RenderPath;iron_RenderPath.__name__=true;iron_RenderPath.setActive=function(renderPath){iron_RenderPath.active=renderPath};iron_RenderPath.sortMeshesDistance=function(meshes){meshes.sort(function(a,b){if(a.cameraDistance>=b.cameraDistance){return 1}else{return-1}})};iron_RenderPath.sortMeshesShader=function(meshes){meshes.sort(function(a,b){if(a.materials[0].name>=b.materials[0].name){return 1}else{return-1}})};iron_RenderPath.prototype={get_ready:function(){return this.loading==0},renderFrame:function(g){if(!this.get_ready()||this.paused||kha_System.windowWidth()==0||kha_System.windowHeight()==0){return}if(this.lastW>0&&(this.lastW!=kha_System.windowWidth()||this.lastH!=kha_System.windowHeight())){this.resize()}this.lastW=kha_System.windowWidth();this.lastH=kha_System.windowHeight();this.frameTime=kha_Scheduler.time()-this.lastFrameTime;this.lastFrameTime=kha_Scheduler.time();var cam=iron_Scene.active.camera;this.isProbePlanar=cam!=null&&cam.renderTarget!=null;this.isProbeCube=cam!=null&&cam.renderTargetCube!=null;this.isProbe=this.isProbePlanar||this.isProbeCube;if(this.isProbePlanar){this.frameG=cam.renderTarget.get_g4()}else if(this.isProbeCube){this.frameG=cam.renderTargetCube.get_g4()}else{this.frameG=g}this.currentW=kha_System.windowWidth();this.currentH=kha_System.windowHeight();this.currentD=1;this.currentFace=-1;this.meshesSorted=false;var _g=0;var _g1=iron_Scene.active.lights;while(_g<_g1.length){var l=_g1[_g];++_g;if(l.visible){l.buildMatrix(iron_Scene.active.camera)}if(l.data.raw.type=="sun"){this.sun=l}else{this.point=l}}this.light=iron_Scene.active.lights[0];this.commands();if(!this.isProbe){this.frame++}},setTarget:function(target,additional,viewportScale){if(viewportScale==null){viewportScale=1}if(target==""){this.currentD=1;this.currentTarget=null;this.currentFace=-1;if(this.isProbeCube){this.currentW=iron_Scene.active.camera.renderTargetCube.get_width();this.currentH=iron_Scene.active.camera.renderTargetCube.get_height();var g=this.frameG;var additionalRenderTargets=null;var face=iron_Scene.active.camera.currentFace;if(face==null){face=-1}if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=g;this.additionalTargets=additionalRenderTargets;if(face>=0){g.beginFace(face)}else{g.begin(additionalRenderTargets)}}else{this.currentW=kha_System.windowWidth();this.currentH=kha_System.windowHeight();if(this.frameScissor){this.setFrameScissor()}var g=this.frameG;var additionalRenderTargets=null;if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=g;this.additionalTargets=additionalRenderTargets;g.begin(additionalRenderTargets)}}else{var rt=this.renderTargets.h[target];this.currentTarget=rt;var additionalImages=null;if(additional!=null){additionalImages=[];var _g=0;while(_g<additional.length){var s=additional[_g];++_g;var t=this.renderTargets.h[s];additionalImages.push(t.image)}}var targetG=rt.isCubeMap?rt.cubeMap.get_g4():rt.image.get_g4();this.currentW=rt.isCubeMap?rt.cubeMap.get_width():rt.image.get_width();this.currentH=rt.isCubeMap?rt.cubeMap.get_height():rt.image.get_height();if(rt.is3D){this.currentD=rt.image.get_depth()}var face=this.currentFace;if(face==null){face=-1}if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=targetG;this.additionalTargets=additionalImages;if(face>=0){targetG.beginFace(face)}else{targetG.begin(additionalImages)}}if(viewportScale!=1){this.viewportScaled=true;var viewW=this.currentW*viewportScale|0;var viewH=this.currentH*viewportScale|0;this.currentG.viewport(0,viewH,viewW,viewH);this.currentG.scissor(0,viewH,viewW,viewH)}else if(this.viewportScaled){this.viewportScaled=false;this.setCurrentViewport(this.currentW,this.currentH);this.setCurrentScissor(this.currentW,this.currentH)}this.bindParams=null},setCurrentViewport:function(viewW,viewH){this.currentG.viewport(0,this.currentH-viewH,viewW,viewH)},setCurrentScissor:function(viewW,viewH){this.currentG.scissor(0,this.currentH-viewH,viewW,viewH);this.scissorSet=true},setFrameScissor:function(){this.frameG.scissor(this.frameScissorX,this.currentH-(this.frameScissorH-this.frameScissorY),this.frameScissorW,this.frameScissorH)},clearTarget:function(colorFlag,depthFlag){if(colorFlag==-1){if(iron_Scene.active.world!=null){colorFlag=iron_Scene.active.world.raw.background_color}else if(iron_Scene.active.camera!=null){var cc=iron_Scene.active.camera.data.raw.clear_color;if(cc!=null){colorFlag=kha_Color.fromFloats(cc[0],cc[1],cc[2])}}}this.currentG.clear(colorFlag,depthFlag,null)},drawMeshes:function(context){var isShadows=context=="shadowmap";if(isShadows){if(this.light==null||!this.light.data.raw.cast_shadow||!this.light.visible||this.light.data.raw.strength==0){return}}if(this.currentFace>=0&&this.light!=null){this.light.setCubeFace(this.currentFace,iron_Scene.active.camera)}var drawn=false;if(!drawn){this.submitDraw(context)}if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null},submitDraw:function(context){var camera=iron_Scene.active.camera;var meshes=iron_Scene.active.meshes;iron_object_MeshObject.lastPipeline=null;if(!this.meshesSorted&&camera!=null){var camX=camera.transform.world.self._30;var camY=camera.transform.world.self._31;var camZ=camera.transform.world.self._32;var _g=0;while(_g<meshes.length){var mesh=meshes[_g];++_g;var vx=camX-mesh.transform.world.self._30;var vy=camY-mesh.transform.world.self._31;var vz=camZ-mesh.transform.world.self._32;mesh.cameraDistance=Math.sqrt(vx*vx+vy*vy+vz*vz)}if(this.drawOrder==1){iron_RenderPath.sortMeshesShader(meshes)}else{iron_RenderPath.sortMeshesDistance(meshes)}this.meshesSorted=true}var _g=0;while(_g<meshes.length){var m=meshes[_g];++_g;m.render(this.currentG,context,this.bindParams)}},bindTarget:function(target,uniform){if(this.bindParams!=null){this.bindParams.push(target);this.bindParams.push(uniform)}else{this.bindParams=[target,uniform]}},resize:function(){if(kha_System.windowWidth()==0||kha_System.windowHeight()==0){return}var rt=haxe_ds_StringMap.valueIterator(this.renderTargets.h);while(rt.hasNext()){var rt1=rt.next();if(rt1.raw.width>0||rt1.depthStencilFrom==""||rt1==this.depthToRenderTarget.h[rt1.depthStencilFrom]){continue}var nodepth=null;var rt2=haxe_ds_StringMap.valueIterator(this.renderTargets.h);while(rt2.hasNext()){var rt21=rt2.next();if(rt21.raw.width>0||rt21.depthStencilFrom!=""||this.depthToRenderTarget.h[rt21.raw.depth_buffer]!=null){continue}nodepth=rt21;break}if(nodepth!=null){rt1.image.setDepthStencilFrom(nodepth.image)}}var rt=haxe_ds_StringMap.valueIterator(this.renderTargets.h);while(rt.hasNext()){var rt1=rt.next();if(rt1.raw.width==0){rt1.image.unload();rt1.image=this.createImage(rt1.raw,rt1.depthStencil)}}var rt=haxe_ds_StringMap.valueIterator(this.renderTargets.h);while(rt.hasNext()){var rt1=rt.next();if(rt1.depthStencilFrom!=""){rt1.image.setDepthStencilFrom(this.depthToRenderTarget.h[rt1.depthStencilFrom].image)}}},createRenderTarget:function(t){var rt=this.createTarget(t);this.renderTargets.h[t.name]=rt;return rt},createTarget:function(t){var rt=new iron_RenderTarget(t);if(t.depth_buffer!=null){rt.hasDepth=true;var depthTarget=this.depthToRenderTarget.h[t.depth_buffer];if(depthTarget==null){var _g=0;var _g1=this.depthBuffers;while(_g<_g1.length){var db=_g1[_g];++_g;if(db.name==t.depth_buffer){this.depthToRenderTarget.h[db.name]=rt;var s=db.format;var tmp;if(s==null||s==""){tmp=1}else{switch(s){case"DEPTH16":tmp=5;break;case"DEPTH24":tmp=1;break;default:tmp=1}}rt.depthStencil=tmp;rt.image=this.createImage(t,rt.depthStencil);break}}}else{rt.depthStencil=0;rt.depthStencilFrom=t.depth_buffer;rt.image=this.createImage(t,rt.depthStencil);rt.image.setDepthStencilFrom(depthTarget.image)}}else{rt.hasDepth=false;if(t.depth!=null&&t.depth>1){rt.is3D=true}if(t.is_cubemap){rt.isCubeMap=true;rt.depthStencil=0;rt.cubeMap=this.createCubeMap(t,rt.depthStencil)}else{rt.depthStencil=0;rt.image=this.createImage(t,rt.depthStencil)}}return rt},createImage:function(t,depthStencil){var width=t.width==0?kha_System.windowWidth():t.width;var height=t.height==0?kha_System.windowHeight():t.height;var depth=t.depth!=null?t.depth:0;if(t.displayp!=null){if(width>height){width=width*(t.displayp/height)|0;height=t.displayp}else{height=height*(t.displayp/width)|0;width=t.displayp}}if(t.scale!=null){width=width*t.scale|0;height=height*t.scale|0;depth=depth*t.scale|0}if(width<1){width=1}if(height<1){height=1}if(t.depth!=null&&t.depth>1){var img;if(t.format!=null){switch(t.format){case"DEPTH16":img=3;break;case"R16":img=6;break;case"R32":img=5;break;case"R8":img=1;break;case"RGBA128":img=2;break;case"RGBA32":img=0;break;case"RGBA64":img=4;break;default:img=0}}else{img=0}var img1=kha_Image.create3D(width,height,depth,img);if(t.mipmaps){img1.generateMipmaps(1e3)}return img1}else if(t.is_image!=null&&t.is_image){var tmp;if(t.format!=null){switch(t.format){case"DEPTH16":tmp=3;break;case"R16":tmp=6;break;case"R32":tmp=5;break;case"R8":tmp=1;break;case"RGBA128":tmp=2;break;case"RGBA32":tmp=0;break;case"RGBA64":tmp=4;break;default:tmp=0}}else{tmp=0}return kha_Image.create(width,height,tmp)}else{var tmp;if(t.format!=null){switch(t.format){case"DEPTH16":tmp=3;break;case"R16":tmp=6;break;case"R32":tmp=5;break;case"R8":tmp=1;break;case"RGBA128":tmp=2;break;case"RGBA32":tmp=0;break;case"RGBA64":tmp=4;break;default:tmp=0}}else{tmp=0}return kha_Image.createRenderTarget(width,height,tmp,depthStencil)}},createCubeMap:function(t,depthStencil){var tmp;if(t.format!=null){switch(t.format){case"DEPTH16":tmp=3;break;case"R16":tmp=6;break;case"R32":tmp=5;break;case"R8":tmp=1;break;case"RGBA128":tmp=2;break;case"RGBA32":tmp=0;break;case"RGBA64":tmp=4;break;default:tmp=0}}else{tmp=0}return kha_graphics4_CubeMap.createRenderTarget(t.width,tmp,depthStencil)},__class__:iron_RenderPath,__properties__:{get_ready:"get_ready"}};var iron_RenderTargetRaw=function(){this.is_cubemap=null;this.is_image=null;this.depth=null;this.mipmaps=null;this.depth_buffer=null;this.displayp=null;this.scale=null;this.format=null};$hxClasses["iron.RenderTargetRaw"]=iron_RenderTargetRaw;iron_RenderTargetRaw.__name__=true;iron_RenderTargetRaw.prototype={__class__:iron_RenderTargetRaw};var iron_RenderTarget=function(raw){this.isCubeMap=false;this.is3D=false;this.hasDepth=false;this.cubeMap=null;this.image=null;this.depthStencilFrom="";this.raw=raw};$hxClasses["iron.RenderTarget"]=iron_RenderTarget;iron_RenderTarget.__name__=true;iron_RenderTarget.prototype={__class__:iron_RenderTarget};var iron_Scene=function(){this.traitRemoves=[];this.traitInits=[];this.groups=null;this.uid=iron_Scene.uidCounter++;this.meshes=[];this.lights=[];this.cameras=[];this.speakers=[];this.empties=[];this.animations=[];this.armatures=[];this.embedded=new haxe_ds_StringMap;this.root=new iron_object_Object;this.root.name="Root";this.traitInits=[];this.traitRemoves=[];this.initializing=true;if(iron_Scene.global==null){iron_Scene.global=new iron_object_Object}};$hxClasses["iron.Scene"]=iron_Scene;iron_Scene.__name__=true;iron_Scene.create=function(format,done){iron_Scene.active=new iron_Scene;iron_Scene.active.ready=false;iron_Scene.active.raw=format;iron_data_Data.getWorld(format.name,format.world_ref,function(world){iron_Scene.active.world=world;iron_Scene.active.addScene(format.name,null,function(sceneObject){var _g=0;var _g1=sceneObject.getChildren(true);while(_g<_g1.length){var object=_g1[_g];++_g;iron_Scene.createTraits(iron_Scene.getRawObjectByName(format,object.name).traits,object)}if(iron_Scene.active.cameras.length==0){haxe_Log.trace('No camera found for scene "'+format.name+'"',{fileName:"Sources/iron/Scene.hx",lineNumber:131,className:"iron.Scene",methodName:"create"})}iron_Scene.active.camera=iron_Scene.active.getCamera(format.camera_ref);iron_Scene.active.ready=true;var _g=0;var _g1=iron_Scene.active.traitInits;while(_g<_g1.length){var f=_g1[_g];++_g;f()}iron_Scene.active.traitInits=[];iron_Scene.active.sceneParent=sceneObject;iron_Scene.active.initializing=false;done(sceneObject)})})};iron_Scene.setActive=function(sceneName,done){if(!iron_Scene.framePassed){return}iron_Scene.framePassed=false;if(iron_Scene.active!=null){iron_Scene.active.remove()}iron_data_Data.getSceneRaw(sceneName,function(format){iron_Scene.create(format,function(o){if(done!=null){done(o)}})})};iron_Scene.getRawObjectByName=function(format,name){return iron_Scene.traverseObjs(format.objects,name)};iron_Scene.traverseObjs=function(children,name){var _g=0;while(_g<children.length){var o=children[_g];++_g;if(o.name==name){return o}if(o.children!=null){var res=iron_Scene.traverseObjs(o.children,name);if(res!=null){return res}}}return null};iron_Scene.generateTransform=function(object,transform){var tmp;if(object.transform!=null){var a=object.transform.values;tmp=new iron_math_Mat4(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}else{tmp=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}transform.world=tmp;var _this=transform.world;var loc=transform.loc;var quat=transform.rot;var scale=transform.scale;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;var _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._10;_this1.y=_this.self._11;_this1.z=_this.self._12;_this1.w=1;var _this2=_this1;scale.y=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._20;_this1.y=_this.self._21;_this1.z=_this.self._22;_this1.w=1;var _this2=_this1;scale.z=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=_this.self;var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c00=_this1._11*(m4*m8-m5*m7)-_this1._21*(m3*m8-m5*m6)+_this1._31*(m3*m7-m4*m6);var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c01=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c02=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._12;var m7=_this1._22;var m8=_this1._32;var c03=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);if(_this1._00*c00-_this1._01*c01+_this1._02*c02-_this1._03*c03<0){scale.x=-scale.x}var invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;var m=iron_math_Mat4.helpMat;var m11=m.self._00;var m12=m.self._10;var m13=m.self._20;var m21=m.self._01;var m22=m.self._11;var m23=m.self._21;var m31=m.self._02;var m32=m.self._12;var m33=m.self._22;var tr=m11+m22+m33;var s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m32-m23)*s;quat.y=(m13-m31)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m33){s=2*Math.sqrt(1+m11-m22-m33);quat.w=(m32-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m31)/s}else if(m22>m33){s=2*Math.sqrt(1+m22-m11-m33);quat.w=(m13-m31)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m32)/s}else{s=2*Math.sqrt(1+m33-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m31)/s;quat.y=(m23+m32)/s;quat.z=.25*s}if(object.local_only!=null){transform.localOnly=object.local_only}if(transform.object.parent!=null){transform.update()}};iron_Scene.createTraits=function(traits,object){if(traits==null){return}var _g=0;while(_g<traits.length){var t=traits[_g];++_g;if(t.type=="Script"){var args=[];if(t.parameters!=null){var _g1=0;var _g2=t.parameters;while(_g1<_g2.length){var param=_g2[_g1];++_g1;args.push(iron_Scene.parseArg(param))}}var traitInst=iron_Scene.createTraitClassInstance(t.class_name,args);if(traitInst==null){haxe_Log.trace("Error: Trait '"+t.class_name+"' referenced in object '"+object.name+"' not found",{fileName:"Sources/iron/Scene.hx",lineNumber:820,className:"iron.Scene",methodName:"createTraits"});continue}if(t.props!=null){var _g3=0;var _g4=t.props.length/3|0;while(_g3<_g4){var i=_g3++;var pname=t.props[i*3];var ptype=t.props[i*3+1];var pval=t.props[i*3+2];if(StringTools.endsWith(ptype,"Object")&&pval!=""){Reflect.setProperty(traitInst,pname,iron_Scene.active.getChild(pval))}else{switch(ptype){case"Vec2":Reflect.setProperty(traitInst,pname,new iron_math_Vec2(pval[0],pval[1]));break;case"Vec3":Reflect.setProperty(traitInst,pname,new iron_math_Vec3(pval[0],pval[1],pval[2]));break;case"Vec4":Reflect.setProperty(traitInst,pname,new iron_math_Vec4(pval[0],pval[1],pval[2],pval[3]));break;default:Reflect.setProperty(traitInst,pname,pval)}}}}object.addTrait(traitInst)}}};iron_Scene.parseArg=function(str){if(str=="true"){return true}else if(str=="false"){return false}else if(str=="null"){return null}else if(str.charAt(0)=="'"){return StringTools.replace(str,"'","")}else if(str.charAt(0)=='"'){return StringTools.replace(str,'"',"")}else if(str.charAt(0)=="["){str=StringTools.replace(str,"[","");str=StringTools.replace(str,"]","");str=StringTools.replace(str," ","");var ar=[];var vals=str.split(",");var _g=0;while(_g<vals.length){var v=vals[_g];++_g;ar.push(iron_Scene.parseArg(v))}return ar}else{var f=parseFloat(str);var i=Std.parseInt(str);if(f==i){return i}else{return f}}};iron_Scene.createConstraints=function(constraints,object){if(constraints==null){return}object.constraints=[];var _g=0;while(_g<constraints.length){var c=constraints[_g];++_g;var constr=new iron_object_Constraint(c);object.constraints.push(constr)}};iron_Scene.createTraitClassInstance=function(traitName,args){var cname=$hxClasses[traitName];if(cname==null){return null}return Type.createInstance(cname,args)};iron_Scene.prototype={remove:function(){var _g=0;var _g1=this.traitRemoves;while(_g<_g1.length){var f=_g1[_g];++_g;f()}var _g=0;var _g1=this.meshes;while(_g<_g1.length){var o=_g1[_g];++_g;o.remove()}var _g=0;var _g1=this.lights;while(_g<_g1.length){var o=_g1[_g];++_g;o.remove()}var _g=0;var _g1=this.cameras;while(_g<_g1.length){var o=_g1[_g];++_g;o.remove()}var _g=0;var _g1=this.speakers;while(_g<_g1.length){var o=_g1[_g];++_g;o.remove()}var _g=0;var _g1=this.empties;while(_g<_g1.length){var o=_g1[_g];++_g;o.remove()}this.groups=null;this.root.remove()},updateFrame:function(){if(!this.ready){return}var _g=0;var _g1=this.animations;while(_g<_g1.length){var anim=_g1[_g];++_g;anim.update(1/iron_system_Time.frequency*iron_system_Time.scale)}var _g=0;var _g1=this.empties;while(_g<_g1.length){var e=_g1[_g];++_g;if(e!=null&&e.parent!=null){e.transform.update()}}},renderFrame:function(g){if(!this.ready||iron_RenderPath.active==null){return}iron_Scene.framePassed=true;if(this.camera!=null){this.camera.renderFrame(g)}else{iron_RenderPath.active.renderFrame(g)}},addObject:function(parent){var object=new iron_object_Object;if(parent!=null){parent.addChild(object)}else{this.root.addChild(object)}return object},getChild:function(name){return this.root.getChild(name)},getCamera:function(name){var _g=0;var _g1=this.cameras;while(_g<_g1.length){var c=_g1[_g];++_g;if(c.name==name){return c}}return null},addMeshObject:function(data,materials,parent){var object=new iron_object_MeshObject(data,materials);if(parent!=null){parent.addChild(object)}else{this.root.addChild(object)}return object},addLightObject:function(data,parent){var object=new iron_object_LightObject(data);if(parent!=null){parent.addChild(object)}else{this.root.addChild(object)}return object},addCameraObject:function(data,parent){var object=new iron_object_CameraObject(data);if(parent!=null){parent.addChild(object)}else{this.root.addChild(object)}return object},addSpeakerObject:function(data,parent){var object=new iron_object_SpeakerObject(data);if(parent!=null){parent.addChild(object)}else{this.root.addChild(object)}return object},addScene:function(sceneName,parent,done){var _gthis=this;if(parent==null){parent=this.addObject();parent.name=sceneName}iron_data_Data.getSceneRaw(sceneName,function(format){iron_Scene.createTraits(format.traits,parent);_gthis.loadEmbeddedData(format.embedded_datas,function(){var objectsTraversed=0;var objectsCount=_gthis.getObjectsCount(format.objects);var traverseObjects=null;traverseObjects=function(parent,objects,parentObject,done){if(objects==null){return}var _g=0;var _g1=objects.length;while(_g<_g1){var i=_g++;var o=[objects[i]];if(o[0].spawn!=null&&o[0].spawn==false){if((objectsTraversed+=1)==objectsCount){done()}continue}_gthis.createObject(o[0],format,parent,parentObject,function(o){return function(object){traverseObjects(object,o[0].children,o[0],done);if((objectsTraversed+=1)==objectsCount){done()}}}(o))}};if(format.objects==null||format.objects.length==0){done(parent)}else{traverseObjects(parent,format.objects,null,function(){done(parent)})}})})},getObjectsCount:function(objects,discardNoSpawn){if(discardNoSpawn==null){discardNoSpawn=true}if(objects==null){return 0}var result=objects.length;var _g=0;while(_g<objects.length){var o=objects[_g];++_g;if(discardNoSpawn&&o.spawn!=null&&o.spawn==false){continue}if(o.children!=null){result+=this.getObjectsCount(o.children)}}return result},spawnObject:function(name,parent,done,spawnChildren){if(spawnChildren==null){spawnChildren=true}var _gthis=this;var objectsTraversed=0;var obj=iron_Scene.getRawObjectByName(this.raw,name);var objectsCount=spawnChildren?this.getObjectsCount([obj],false):1;var spawnObjectTree=null;spawnObjectTree=function(obj,parent,parentObject,done){_gthis.createObject(obj,_gthis.raw,parent,parentObject,function(object){if(spawnChildren&&obj.children!=null){var _g=0;var _g1=obj.children;while(_g<_g1.length){var child=_g1[_g];++_g;spawnObjectTree(child,object,obj,done)}}if((objectsTraversed+=1)==objectsCount&&done!=null){while(object.name!=name)object=object.parent;done(object)}})};spawnObjectTree(obj,parent,null,done)},createObject:function(o,format,parent,parentObject,done){var _gthis=this;var sceneName=format.name;if(o.type=="camera_object"){iron_data_Data.getCamera(sceneName,o.data_ref,function(b){var object=_gthis.addCameraObject(b,parent);_gthis.returnObject(object,o,done)})}else if(o.type=="light_object"){iron_data_Data.getLight(sceneName,o.data_ref,function(b){var object=_gthis.addLightObject(b,parent);_gthis.returnObject(object,o,done)})}else if(o.type=="mesh_object"){if(o.material_refs==null||o.material_refs.length==0){this.createMeshObject(o,format,parent,parentObject,null,done)}else{var this1=new Array(o.material_refs.length);var materials=this1;var materialsLoaded=0;var _g=0;var _g1=o.material_refs.length;while(_g<_g1){var i=[_g++];var ref=o.material_refs[i[0]];iron_data_Data.getMaterial(sceneName,ref,function(i){return function(mat){materials[i[0]]=mat;materialsLoaded+=1;if(materialsLoaded==o.material_refs.length){_gthis.createMeshObject(o,format,parent,parentObject,materials,done)}}}(i))}}}else if(o.type=="speaker_object"){var object=this.addSpeakerObject(iron_data_Data.getSpeakerRawByName(format.speaker_datas,o.data_ref),parent);this.returnObject(object,o,done)}else if(o.type=="object"){var object=this.addObject(parent);this.returnObject(object,o,function(ro){if(o.group_ref!=null){_gthis.spawnGroup(format,o.group_ref,ro,function(){done(ro)})}else{done(ro)}})}else{done(null)}},spawnGroup:function(format,groupRef,groupOwner,done,failed){var _gthis=this;var spawned=0;var object_refs=this.getGroupObjectRefs(groupRef);if(object_refs==null){if(failed!=null){failed()}}else if(object_refs.length==0){done()}else{var _g=0;while(_g<object_refs.length){var object_ref=object_refs[_g];++_g;this.spawnObject(object_ref,groupOwner,function(spawnedObject){if(!_gthis.isObjectInGroup(groupRef,spawnedObject.parent)){var _g=0;var _g1=format.groups;while(_g<_g1.length){var group=_g1[_g];++_g;if(group.name==groupRef){spawnedObject.transform.translate(-group.instance_offset[0],-group.instance_offset[1],-group.instance_offset[2]);break}}}if((spawned+=1)==object_refs.length){done()}})}}},getGroupObjectRefs:function(group_ref){var _g=0;var _g1=iron_Scene.active.raw.groups;while(_g<_g1.length){var g=_g1[_g];++_g;if(g.name==group_ref){return g.object_refs}}return null},getGroupObjectsRaw:function(groupRef){var objectRefs=this.getGroupObjectRefs(groupRef);var objects=[];if(objectRefs==null){return objects}var _g=0;while(_g<objectRefs.length){var objRef=objectRefs[_g];++_g;var rawObj=iron_Scene.getRawObjectByName(this.raw,objRef);objects.push(rawObj);var childRefs=this.getChildObjectsRaw(rawObj);objects=objects.concat(childRefs)}return objects},getChildObjectsRaw:function(rawObj,recursive){if(recursive==null){recursive=true}var children=rawObj.children;if(children==null){return[]}children=children.slice();if(recursive){var _g=0;var _g1=rawObj.children;while(_g<_g1.length){var child=_g1[_g];++_g;var childRefs=this.getChildObjectsRaw(child);children=children.concat(childRefs)}}return children},isObjectInGroup:function(groupRef,object){var _g=0;var _g1=this.getGroupObjectsRaw(groupRef);while(_g<_g1.length){var obj=_g1[_g];++_g;if(obj.name==object.name){return true}}return false},createMeshObject:function(o,format,parent,parentObject,materials,done){var _gthis=this;var ref=o.data_ref.split("/");var object_file="";var data_ref="";var sceneName=format.name;if(ref.length==2){object_file=ref[0];data_ref=ref[1]}else{object_file=sceneName;data_ref=o.data_ref}if(parentObject!=null&&parentObject.bone_actions!=null){var bactions=[];var _g=0;var _g1=parentObject.bone_actions;while(_g<_g1.length){var ref=_g1[_g];++_g;iron_data_Data.getSceneRaw(ref,function(action){bactions.push(action);if(bactions.length==parentObject.bone_actions.length){var armature=null;var _g=0;var _g1=_gthis.armatures;while(_g<_g1.length){var a=_g1[_g];++_g;if(a.uid==parent.uid){armature=a;break}}if(armature==null){var _g=0;var _g1=_gthis.armatures;while(_g<_g1.length){var a=_g1[_g];++_g;if(a.name==parent.name){parent.name+="."+parent.uid;break}}armature=new iron_data_Armature(parent.uid,parent.name,bactions);_gthis.armatures.push(armature)}_gthis.returnMeshObject(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done)}})}}else{this.returnMeshObject(object_file,data_ref,sceneName,null,materials,parent,parentObject,o,done)}},returnMeshObject:function(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done){var _gthis=this;iron_data_Data.getMesh(object_file,data_ref,function(mesh){if(mesh.isSkinned){var g=mesh.geom;if(armature!=null){g.addArmature(armature)}else{g.addAction(mesh.format.objects,"none")}}var object=_gthis.addMeshObject(mesh,materials,parent);if(o.particle_refs!=null){var _g=0;var _g1=o.particle_refs;while(_g<_g1.length){var ref=_g1[_g];++_g;js_Boot.__cast(object,iron_object_MeshObject).setupParticleSystem(sceneName,ref)}}if(o.tilesheet_ref!=null){js_Boot.__cast(object,iron_object_MeshObject).setupTilesheet(sceneName,o.tilesheet_ref,o.tilesheet_action_ref)}_gthis.returnObject(object,o,done)})},returnObject:function(object,o,done){var _gthis=this;if(object!=null&&o.object_actions!=null){var oactions=[];while(oactions.length<o.object_actions.length)oactions.push(null);var actionsLoaded=0;var _g=0;var _g1=o.object_actions.length;while(_g<_g1){var i=[_g++];var ref=o.object_actions[i[0]];if(ref=="null"){actionsLoaded+=1;continue}iron_data_Data.getSceneRaw(ref,function(i){return function(action){oactions[i[0]]=action;actionsLoaded+=1;if(actionsLoaded==o.object_actions.length){_gthis.returnObjectLoaded(object,o,oactions,done)}}}(i))}}else{this.returnObjectLoaded(object,o,null,done)}},returnObjectLoaded:function(object,o,oactions,done){if(object!=null){object.raw=o;object.name=o.name;if(o.visible!=null){object.visible=o.visible}if(o.visible_mesh!=null){object.visibleMesh=o.visible_mesh}if(o.visible_shadow!=null){object.visibleShadow=o.visible_shadow}iron_Scene.createConstraints(o.constraints,object);iron_Scene.generateTransform(o,object.transform);object.setupAnimation(oactions);if(o.properties!=null){object.properties=new haxe_ds_StringMap;var _g=0;var _g1=o.properties;while(_g<_g1.length){var p=_g1[_g];++_g;object.properties.h[p.name]=p.value}}if(!iron_Scene.active.initializing){iron_Scene.createTraits(o.traits,object)}}done(object)},loadEmbeddedData:function(datas,done){if(datas==null){done();return}var loaded=0;var _g=0;while(_g<datas.length){var file=datas[_g];++_g;this.embedData(file,function(){loaded+=1;if(loaded==datas.length){done()}})}},embedData:function(file,done){var _gthis=this;if(StringTools.endsWith(file,".raw")){iron_data_Data.getBlob(file,function(blob){var b=blob.toBytes();var w=(Math.pow(b.length,.3333333333333333)|0)+1;var image=kha_Image.fromBytes3D(b,w,w,w,1);_gthis.embedded.h[file]=image;done()})}else{iron_data_Data.getImage(file,function(image){_gthis.embedded.h[file]=image;done()})}},notifyOnInit:function(f){if(this.ready){f()}else{this.traitInits.push(f)}},notifyOnRemove:function(f){this.traitRemoves.push(f)},__class__:iron_Scene};var iron_data_Armature=function(uid,name,actions){this.matsReady=false;this.actions=[];this.uid=uid;this.name=name;var _g=0;while(_g<actions.length){var a=actions[_g];++_g;var _g1=0;var _g2=a.objects;while(_g1<_g2.length){var o=_g2[_g1];++_g1;iron_data_Armature.setParents(o)}var bones=[[]];iron_data_Armature.traverseBones(a.objects,function(bones){return function(object){bones[0].push(object)}}(bones));this.actions.push({name:a.name,bones:bones[0],mats:null})}};$hxClasses["iron.data.Armature"]=iron_data_Armature;iron_data_Armature.__name__=true;iron_data_Armature.setParents=function(object){if(object.children==null){return}var _g=0;var _g1=object.children;while(_g<_g1.length){var o=_g1[_g];++_g;o.parent=object;iron_data_Armature.setParents(o)}};iron_data_Armature.traverseBones=function(objects,callback){var _g=0;var _g1=objects.length;while(_g<_g1){var i=_g++;iron_data_Armature.traverseBonesStep(objects[i],callback)}};iron_data_Armature.traverseBonesStep=function(object,callback){if(object.type=="bone_object"){callback(object)}if(object.children==null){return}var _g=0;var _g1=object.children.length;while(_g<_g1){var i=_g++;iron_data_Armature.traverseBonesStep(object.children[i],callback)}};iron_data_Armature.prototype={initMats:function(){if(this.matsReady){return}this.matsReady=true;var _g=0;var _g1=this.actions;while(_g<_g1.length){var a=_g1[_g];++_g;if(a.mats!=null){continue}a.mats=[];var _g2=0;var _g3=a.bones;while(_g2<_g3.length){var b=_g3[_g2];++_g2;var a1=b.transform.values;a.mats.push(new iron_math_Mat4(a1[0],a1[1],a1[2],a1[3],a1[4],a1[5],a1[6],a1[7],a1[8],a1[9],a1[10],a1[11],a1[12],a1[13],a1[14],a1[15]))}}},getAction:function(name){var _g=0;var _g1=this.actions;while(_g<_g1.length){var a=_g1[_g];++_g;if(a.name==name){return a}}return null},__class__:iron_data_Armature};var iron_data_CameraData=function(raw,done){this.raw=raw;this.name=raw.name;done(this)};$hxClasses["iron.data.CameraData"]=iron_data_CameraData;iron_data_CameraData.__name__=true;iron_data_CameraData.parse=function(name,id,done){iron_data_Data.getSceneRaw(name,function(format){var raw=iron_data_Data.getCameraRawByName(format.camera_datas,id);if(raw==null){haxe_Log.trace('Camera data "'+id+'" not found!',{fileName:"Sources/iron/data/CameraData.hx",lineNumber:20,className:"iron.data.CameraData",methodName:"parse"});done(null)}new iron_data_CameraData(raw,done)})};iron_data_CameraData.prototype={__class__:iron_data_CameraData};var iron_data_Data=function(){};$hxClasses["iron.data.Data"]=iron_data_Data;iron_data_Data.__name__=true;iron_data_Data.getMesh=function(file,name,done){var handle=file+name;var cached=iron_data_Data.cachedMeshes.h[handle];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingMeshes.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingMeshes.h[handle]=[done];iron_data_MeshData.parse(file,name,function(b){iron_data_Data.cachedMeshes.h[handle]=b;b.handle=handle;var _g=0;var _g1=iron_data_Data.loadingMeshes.h[handle];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingMeshes;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})};iron_data_Data.getLight=function(file,name,done){var handle=file+name;var cached=iron_data_Data.cachedLights.h[handle];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingLights.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingLights.h[handle]=[done];iron_data_LightData.parse(file,name,function(b){iron_data_Data.cachedLights.h[handle]=b;var _g=0;var _g1=iron_data_Data.loadingLights.h[handle];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingLights;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})};iron_data_Data.getCamera=function(file,name,done){var handle=file+name;var cached=iron_data_Data.cachedCameras.h[handle];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingCameras.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingCameras.h[handle]=[done];iron_data_CameraData.parse(file,name,function(b){iron_data_Data.cachedCameras.h[handle]=b;var _g=0;var _g1=iron_data_Data.loadingCameras.h[handle];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingCameras;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})};iron_data_Data.getMaterial=function(file,name,done){var handle=file+name;var cached=iron_data_Data.cachedMaterials.h[handle];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingMaterials.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingMaterials.h[handle]=[done];iron_data_MaterialData.parse(file,name,function(b){iron_data_Data.cachedMaterials.h[handle]=b;var _g=0;var _g1=iron_data_Data.loadingMaterials.h[handle];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingMaterials;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})};iron_data_Data.getParticle=function(file,name,done){var handle=file+name;var cached=iron_data_Data.cachedParticles.h[handle];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingParticles.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingParticles.h[handle]=[done];iron_data_ParticleData.parse(file,name,function(b){iron_data_Data.cachedParticles.h[handle]=b;var _g=0;var _g1=iron_data_Data.loadingParticles.h[handle];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingParticles;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})};iron_data_Data.getWorld=function(file,name,done){if(name==null){done(null);return}var handle=file+name;var cached=iron_data_Data.cachedWorlds.h[handle];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingWorlds.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingWorlds.h[handle]=[done];iron_data_WorldData.parse(file,name,function(b){iron_data_Data.cachedWorlds.h[handle]=b;var _g=0;var _g1=iron_data_Data.loadingWorlds.h[handle];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingWorlds;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})};iron_data_Data.getShader=function(file,name,done,overrideContext){var cacheName=name;if(overrideContext!=null){cacheName+="2"}var cached=iron_data_Data.cachedShaders.h[cacheName];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingShaders.h[cacheName];if(loading!=null){loading.push(done);return}iron_data_Data.loadingShaders.h[cacheName]=[done];iron_data_ShaderData.parse(file,name,function(b){iron_data_Data.cachedShaders.h[cacheName]=b;var _g=0;var _g1=iron_data_Data.loadingShaders.h[cacheName];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingShaders;if(Object.prototype.hasOwnProperty.call(_this.h,cacheName)){delete _this.h[cacheName]}},overrideContext)};iron_data_Data.getSceneRaw=function(file,done){var cached=iron_data_Data.cachedSceneRaws.h[file];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingSceneRaws.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingSceneRaws.h[file]=[done];var compressed=StringTools.endsWith(file,".lz4");var isJson=StringTools.endsWith(file,".json");var ext=compressed||isJson||StringTools.endsWith(file,".arm")?"":".arm";iron_data_Data.getBlob(file+ext,function(b){var parsed=null;if(isJson){var s=b.toString();if(s.charAt(0)=="{"){parsed=JSON.parse(s)}else{var i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);parsed=iron_system_ArmPack.read(i)}}else{var i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);parsed=iron_system_ArmPack.read(i)}iron_data_Data.returnSceneRaw(file,parsed)})};iron_data_Data.returnSceneRaw=function(file,parsed){iron_data_Data.cachedSceneRaws.h[file]=parsed;var _g=0;var _g1=iron_data_Data.loadingSceneRaws.h[file];while(_g<_g1.length){var f=_g1[_g];++_g;f(parsed)}var _this=iron_data_Data.loadingSceneRaws;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}};iron_data_Data.getMeshRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getLightRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getCameraRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getMaterialRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getParticleRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getWorldRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getShaderRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getSpeakerRawByName=function(datas,name){if(name==""){return datas[0]}var _g=0;while(_g<datas.length){var dat=datas[_g];++_g;if(dat.name==name){return dat}}return null};iron_data_Data.getBlob=function(file,done){var cached=iron_data_Data.cachedBlobs.h[file];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingBlobs.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingBlobs.h[file]=[done];kha_Assets.loadBlobFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,function(b){iron_data_Data.cachedBlobs.h[file]=b;var _g=0;var _g1=iron_data_Data.loadingBlobs.h[file];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingBlobs;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:357,className:"iron.data.Data",methodName:"getBlob"})};iron_data_Data.getImage=function(file,done,readable,format){if(format==null){format="RGBA32"}if(readable==null){readable=false}var cached=iron_data_Data.cachedImages.h[file];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingImages.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingImages.h[file]=[done];kha_Assets.loadImageFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,readable,function(b){iron_data_Data.cachedImages.h[file]=b;var _g=0;var _g1=iron_data_Data.loadingImages.h[file];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingImages;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:385,className:"iron.data.Data",methodName:"getImage"})};iron_data_Data.getSound=function(file,done){if(StringTools.endsWith(file,".wav")){file=file.substring(0,file.length-4)+".ogg"}var cached=iron_data_Data.cachedSounds.h[file];if(cached!=null){done(cached);return}var loading=iron_data_Data.loadingSounds.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingSounds.h[file]=[done];kha_Assets.loadSoundFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,function(b){b.uncompress(function(){iron_data_Data.cachedSounds.h[file]=b;var _g=0;var _g1=iron_data_Data.loadingSounds.h[file];while(_g<_g1.length){var f=_g1[_g];++_g;f(b)}var _this=iron_data_Data.loadingSounds;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++})},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:419,className:"iron.data.Data",methodName:"getSound"})};iron_data_Data.isAbsolute=function(file){if(!(file.charAt(0)=="/"||file.charAt(1)==":")){if(file.charAt(0)=="\\"){return file.charAt(1)=="\\"}else{return false}}else{return true}};var iron_data_Geometry=function(data,indices,materialIndices,usage){this.mats=null;this.actions=null;this.skeletonBoneLens=null;this.skeletonBoneRefs=null;this.skeletonTransformsI=null;this.skinBoneWeights=null;this.skinBoneIndices=null;this.skinBoneCounts=null;this.instanceCount=0;this.instanced=false;this.instancedVB=null;this.numTris=0;this.ready=false;this.name="";this.count=-1;this.start=0;this.vertexBufferMap=new haxe_ds_StringMap;if(usage==null){usage=0}this.indices=indices;this.materialIndices=materialIndices;this.usage=usage;this.vertexArrays=data.raw.vertex_arrays;this.positions=this.getVArray("pos");this.normals=this.getVArray("nor");this.uvs=this.getVArray("tex");this.cols=this.getVArray("col");this.data=data;this.struct=iron_data_Geometry.getVertexStructure(this.vertexArrays);this.structLength=this.struct.byteSize()/2|0;this.structStr="";var _g=0;var _g1=this.struct.elements;while(_g<_g1.length){var e=_g1[_g];++_g;this.structStr+=e.name}};$hxClasses["iron.data.Geometry"]=iron_data_Geometry;iron_data_Geometry.__name__=true;iron_data_Geometry.getVertexStructure=function(vertexArrays){var structure=new kha_graphics4_VertexStructure;var _g=0;var _g1=vertexArrays.length;while(_g<_g1){var i=_g++;structure.add(vertexArrays[i].attrib,iron_data_Geometry.getVertexData(vertexArrays[i].data))}return structure};iron_data_Geometry.getVertexData=function(data){switch(data){case"short2norm":return 5;case"short4norm":return 6;default:return 6}};iron_data_Geometry.buildVertices=function(vertices,vertexArrays,offset,fakeUVs,uvsIndex){if(uvsIndex==null){uvsIndex=-1}if(fakeUVs==null){fakeUVs=false}if(offset==null){offset=0}var arr=vertexArrays[0];var numVertices=arr.values.length/arr.size|0;var di=-1+offset;var _g=0;var _g1=numVertices;while(_g<_g1){var i=_g++;var _g2=0;var _g3=vertexArrays.length;while(_g2<_g3){var va=_g2++;var l=vertexArrays[va].size;if(fakeUVs&&va==uvsIndex){var _g4=0;var _g5=l;while(_g4<_g5){var j=_g4++;vertices[++di]=0}continue}var _g6=0;var _g7=l;while(_g6<_g7){var o=_g6++;vertices[++di]=vertexArrays[va].values[i*l+o]}if(vertexArrays[va].padding!=null){if(vertexArrays[va].padding==1){vertices[++di]=0}}}}};iron_data_Geometry.prototype={applyScale:function(sx,sy,sz){this.data.scalePos*=sx},getVArray:function(name){var _g=0;var _g1=this.vertexArrays.length;while(_g<_g1){var i=_g++;if(this.vertexArrays[i].attrib==name){return this.vertexArrays[i]}}return null},setupInstanced:function(data,instancedType,usage){var structure=new kha_graphics4_VertexStructure;structure.instanced=true;this.instanced=true;structure.add("ipos",2);if(instancedType==2||instancedType==4){structure.add("irot",2)}if(instancedType==3||instancedType==4){structure.add("iscl",2)}this.instanceCount=data.length/(structure.byteSize()/4|0)|0;this.instancedVB=new kha_graphics4_VertexBuffer(this.instanceCount,structure,usage,1);var vertices=this.instancedVB.lock();var _g=0;var _g1=vertices.length;while(_g<_g1){var i=_g++;vertices[i]=data[i]}this.instancedVB.unlock()},get:function(vs){var key="";var _g=0;while(_g<vs.length){var e=vs[_g];++_g;key+=e.name}var vb=this.vertexBufferMap.h[key];if(vb==null){var nVertexArrays=[];var atex=false;var texOffset=-1;var acol=false;var _g=0;var _g1=vs.length;while(_g<_g1){var e=_g++;if(vs[e].name=="tex"){atex=true;texOffset=e}if(vs[e].name=="col"){acol=true}var _g2=0;var _g3=this.vertexArrays.length;while(_g2<_g3){var va=_g2++;if(vs[e].name==this.vertexArrays[va].attrib){nVertexArrays.push(this.vertexArrays[va])}}}var struct=iron_data_Geometry.getVertexStructure(nVertexArrays);vb=new kha_graphics4_VertexBuffer(this.positions.values.length/this.positions.size|0,struct,this.usage);this.vertices=vb.lockInt16();iron_data_Geometry.buildVertices(this.vertices,nVertexArrays,0,atex&&this.uvs==null,texOffset);vb.unlock();this.vertexBufferMap.h[key]=vb;if(atex&&this.uvs==null){haxe_Log.trace("Armory Warning: Geometry "+this.name+" is missing UV map",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:224,className:"iron.data.Geometry",methodName:"get"})}if(acol&&this.cols==null){haxe_Log.trace("Armory Warning: Geometry "+this.name+" is missing vertex colors",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:225,className:"iron.data.Geometry",methodName:"get"})}}return vb},build:function(){if(this.ready){return}this.vertexBuffer=new kha_graphics4_VertexBuffer(this.positions.values.length/this.positions.size|0,this.struct,this.usage);this.vertices=this.vertexBuffer.lockInt16();iron_data_Geometry.buildVertices(this.vertices,this.vertexArrays);this.vertexBuffer.unlock();this.vertexBufferMap.h[this.structStr]=this.vertexBuffer;this.indexBuffers=[];var _g=0;var _g1=this.indices;while(_g<_g1.length){var id=_g1[_g];++_g;if(id.length==0){continue}var indexBuffer=new kha_graphics4_IndexBuffer(id.length,this.usage);this.numTris+=id.length/3|0;var indicesA=indexBuffer.lock();var _g2=0;var _g3=indicesA.length;while(_g2<_g3){var i=_g2++;indicesA[i]=id[i]}indexBuffer.unlock();this.indexBuffers.push(indexBuffer)}if(this.data.raw.instanced_data!=null){this.setupInstanced(this.data.raw.instanced_data,this.data.raw.instanced_type,this.usage)}this.ready=true},addArmature:function(armature){var _g=0;var _g1=armature.actions;while(_g<_g1.length){var a=_g1[_g];++_g;this.addAction(a.bones,a.name)}},addAction:function(bones,name){if(bones==null){return}if(this.actions==null){this.actions=new haxe_ds_StringMap;this.mats=new haxe_ds_StringMap}if(this.actions.h[name]!=null){return}var actionBones=[];var _g=0;var _g1=this.skeletonBoneRefs;while(_g<_g1.length){var s=_g1[_g];++_g;var _g2=0;while(_g2<bones.length){var b=bones[_g2];++_g2;if(b.name==s){actionBones.push(b)}}}this.actions.h[name]=actionBones;var actionMats=[];var _g=0;while(_g<actionBones.length){var b=actionBones[_g];++_g;var a=b.transform.values;actionMats.push(new iron_math_Mat4(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]))}this.mats.h[name]=actionMats},initSkeletonTransforms:function(transformsI){this.skeletonTransformsI=[];var _g=0;while(_g<transformsI.length){var t=transformsI[_g];++_g;var mi=new iron_math_Mat4(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]);this.skeletonTransformsI.push(mi)}},__class__:iron_data_Geometry};var iron_data_LightData=function(raw,done){this.raw=raw;this.name=raw.name;done(this)};$hxClasses["iron.data.LightData"]=iron_data_LightData;iron_data_LightData.__name__=true;iron_data_LightData.parse=function(name,id,done){iron_data_Data.getSceneRaw(name,function(format){var raw=iron_data_Data.getLightRawByName(format.light_datas,id);if(raw==null){haxe_Log.trace('Light data "'+id+'" not found!',{fileName:"Sources/iron/data/LightData.hx",lineNumber:30,className:"iron.data.LightData",methodName:"parse"});done(null)}new iron_data_LightData(raw,done)})};iron_data_LightData.prototype={__class__:iron_data_LightData};var iron_data_MaterialData=function(raw,done,file){if(file==null){file=""}this.contexts=null;var _gthis=this;this.uid=++iron_data_MaterialData.uidCounter;this.raw=raw;this.name=raw.name;var ref=raw.shader.split("/");var object_file="";var data_ref="";if(ref.length==2){object_file=ref[0];data_ref=ref[1]}else{object_file=file;data_ref=raw.shader}iron_data_Data.getShader(object_file,data_ref,function(b){_gthis.shader=b;_gthis.contexts=[];while(_gthis.contexts.length<raw.contexts.length)_gthis.contexts.push(null);var contextsLoaded=0;var _g=0;var _g1=raw.contexts.length;while(_g<_g1){var i=[_g++];var c=raw.contexts[i[0]];new iron_data_MaterialContext(c,function(i){return function(self){_gthis.contexts[i[0]]=self;contextsLoaded+=1;if(contextsLoaded==raw.contexts.length){done(_gthis)}}}(i))}},raw.override_context)};$hxClasses["iron.data.MaterialData"]=iron_data_MaterialData;iron_data_MaterialData.__name__=true;iron_data_MaterialData.parse=function(file,name,done){iron_data_Data.getSceneRaw(file,function(format){var raw=iron_data_Data.getMaterialRawByName(format.material_datas,name);if(raw==null){haxe_Log.trace('Material data "'+name+'" not found!',{fileName:"Sources/iron/data/MaterialData.hx",lineNumber:58,className:"iron.data.MaterialData",methodName:"parse"});done(null)}new iron_data_MaterialData(raw,done,file)})};iron_data_MaterialData.prototype={getContext:function(name){var _g=0;var _g1=this.contexts;while(_g<_g1.length){var c=_g1[_g];++_g;if(HxOverrides.substr(c.raw.name,0,name.length)==name){return c}}return null},__class__:iron_data_MaterialData};var iron_data_MaterialContext=function(raw,done){this.id=0;this.textures=null;var _gthis=this;this.raw=raw;this.id=iron_data_MaterialContext.num++;if(raw.bind_textures!=null&&raw.bind_textures.length>0){var this1=new Array(raw.bind_textures.length);this.textures=this1;var texturesLoaded=0;var _g=0;var _g1=raw.bind_textures.length;while(_g<_g1){var i=[_g++];var tex=[raw.bind_textures[i[0]]];if(tex[0].file==""||tex[0].source=="movie"){texturesLoaded+=1;if(texturesLoaded==raw.bind_textures.length){done(this)}continue}iron_data_Data.getImage(tex[0].file,function(tex,i){return function(image){_gthis.textures[i[0]]=image;texturesLoaded+=1;if(tex[0].mipmaps!=null){var mipmaps=[];while(mipmaps.length<tex[0].mipmaps.length)mipmaps.push(null);var mipmapsLoaded=0;var _g=0;var _g1=tex[0].mipmaps.length;while(_g<_g1){var j=[_g++];var name=tex[0].mipmaps[j[0]];iron_data_Data.getImage(name,function(j,tex){return function(mipimg){mipmaps[j[0]]=mipimg;mipmapsLoaded+=1;if(mipmapsLoaded==tex[0].mipmaps.length){image.setMipmaps(mipmaps);tex[0].mipmaps=null;tex[0].generate_mipmaps=false;if(texturesLoaded==raw.bind_textures.length){done(_gthis)}}}}(j,tex))}}else if(tex[0].generate_mipmaps==true&&image!=null){image.generateMipmaps(1e3);tex[0].mipmaps=null;tex[0].generate_mipmaps=false;if(texturesLoaded==raw.bind_textures.length){done(_gthis)}}else if(texturesLoaded==raw.bind_textures.length){done(_gthis)}}}(tex,i),false,tex[0].format!=null?tex[0].format:"RGBA32")}}else{done(this)}};$hxClasses["iron.data.MaterialContext"]=iron_data_MaterialContext;iron_data_MaterialContext.__name__=true;iron_data_MaterialContext.prototype={setTextureParameters:function(g,textureIndex,context,unitIndex){context.setTextureParameters(g,unitIndex,this.raw.bind_textures[textureIndex])},__class__:iron_data_MaterialContext};var iron_data_MeshData=function(raw,done){this.scaleTex=1;this.scalePos=1;this.refcount=0;this.raw=raw;this.name=raw.name;if(raw.scale_pos!=null){this.scalePos=raw.scale_pos}if(raw.scale_tex!=null){this.scaleTex=raw.scale_tex}var indices=[];var materialIndices=[];var _g=0;var _g1=raw.index_arrays;while(_g<_g1.length){var ind=_g1[_g];++_g;indices.push(ind.values);materialIndices.push(ind.material)}this.isSkinned=raw.skin!=null;var vertexArrays=raw.vertex_arrays;if(this.isSkinned){vertexArrays.push({attrib:"bone",values:null,data:"short4norm"});vertexArrays.push({attrib:"weight",values:null,data:"short4norm"})}var _g=0;var _g1=vertexArrays.length;while(_g<_g1){var i=_g++;var padding=vertexArrays[i].padding;vertexArrays[i].size=this.getVertexSize(vertexArrays[i].data,padding!=null?padding:0)}var parsedUsage=0;if(raw.dynamic_usage!=null&&raw.dynamic_usage==true){parsedUsage=1}var usage=parsedUsage;if(this.isSkinned){var bonea=null;var weighta=null;var vertex_length=vertexArrays[0].values.length/vertexArrays[0].size|0;var l=vertex_length*4;var this1=new Int16Array(l);bonea=this1;var this1=new Int16Array(l);weighta=this1;var index=0;var ai=0;var _g=0;var _g1=vertex_length;while(_g<_g1){var i=_g++;var boneCount=raw.skin.bone_count_array[i];var _g2=index;var _g3=index+boneCount;while(_g2<_g3){var j=_g2++;bonea[ai]=raw.skin.bone_index_array[j];weighta[ai]=raw.skin.bone_weight_array[j];++ai}var _g4=boneCount;var _g5=4;while(_g4<_g5){var j1=_g4++;bonea[ai]=0;weighta[ai]=0;++ai}index+=boneCount}vertexArrays[vertexArrays.length-2].values=bonea;vertexArrays[vertexArrays.length-1].values=weighta}this.geom=new iron_data_Geometry(this,indices,materialIndices,usage);this.geom.name=this.name;done(this)};$hxClasses["iron.data.MeshData"]=iron_data_MeshData;iron_data_MeshData.__name__=true;iron_data_MeshData.parse=function(name,id,done){iron_data_Data.getSceneRaw(name,function(format){var raw=iron_data_Data.getMeshRawByName(format.mesh_datas,id);if(raw==null){haxe_Log.trace('Mesh data "'+id+'" not found!',{fileName:"Sources/iron/data/MeshData.hx",lineNumber:101,className:"iron.data.MeshData",methodName:"parse"});done(null)}new iron_data_MeshData(raw,function(dat){dat.format=format;if(raw.skin!=null){dat.geom.skinBoneCounts=raw.skin.bone_count_array;dat.geom.skinBoneIndices=raw.skin.bone_index_array;dat.geom.skinBoneWeights=raw.skin.bone_weight_array;dat.geom.skeletonBoneRefs=raw.skin.bone_ref_array;dat.geom.skeletonBoneLens=raw.skin.bone_len_array;dat.geom.initSkeletonTransforms(raw.skin.transformsI)}done(dat)})})};iron_data_MeshData.prototype={getVertexSize:function(vertex_data,padding){if(padding==null){padding=0}switch(vertex_data){case"short2norm":return 2-padding;case"short4norm":return 4-padding;default:return 0}},__class__:iron_data_MeshData};var iron_data_ParticleData=function(raw,done){this.raw=raw;this.name=raw.name;done(this)};$hxClasses["iron.data.ParticleData"]=iron_data_ParticleData;iron_data_ParticleData.__name__=true;iron_data_ParticleData.parse=function(name,id,done){iron_data_Data.getSceneRaw(name,function(format){var raw=iron_data_Data.getParticleRawByName(format.particle_datas,id);if(raw==null){haxe_Log.trace('Particle data "'+id+'" not found!',{fileName:"Sources/iron/data/ParticleData.hx",lineNumber:21,className:"iron.data.ParticleData",methodName:"parse"});done(null)}new iron_data_ParticleData(raw,done)})};iron_data_ParticleData.prototype={__class__:iron_data_ParticleData};var iron_data_ShaderData=function(raw,done,overrideContext){this.contexts=[];var _gthis=this;this.raw=raw;this.name=raw.name;var _g=0;var _g1=raw.contexts;while(_g<_g1.length){var c=_g1[_g];++_g;this.contexts.push(null)}var contextsLoaded=0;var _g=0;var _g1=raw.contexts.length;while(_g<_g1){var i=[_g++];var c=raw.contexts[i[0]];new iron_data_ShaderContext(c,function(i){return function(con){_gthis.contexts[i[0]]=con;contextsLoaded+=1;if(contextsLoaded==raw.contexts.length){done(_gthis)}}}(i),overrideContext)}};$hxClasses["iron.data.ShaderData"]=iron_data_ShaderData;iron_data_ShaderData.__name__=true;iron_data_ShaderData.parse=function(file,name,done,overrideContext){iron_data_Data.getSceneRaw(file,function(format){var raw=iron_data_Data.getShaderRawByName(format.shader_datas,name);if(raw==null){haxe_Log.trace('Shader data "'+name+'" not found!',{fileName:"Sources/iron/data/ShaderData.hx",lineNumber:50,className:"iron.data.ShaderData",methodName:"parse"});done(null)}new iron_data_ShaderData(raw,done,overrideContext)})};iron_data_ShaderData.prototype={getContext:function(name){var _g=0;var _g1=this.contexts;while(_g<_g1.length){var c=_g1[_g];++_g;if(c.raw.name==name){return c}}return null},__class__:iron_data_ShaderData};var iron_data_ShaderContext=function(raw,done,overrideContext){this.instancingType=0;this.raw=raw;if(raw.name=="voxel"){done(this);return}this.overrideContext=overrideContext;this.parseVertexStructure();this.compile(done)};$hxClasses["iron.data.ShaderContext"]=iron_data_ShaderContext;iron_data_ShaderContext.__name__=true;iron_data_ShaderContext.parseData=function(data){if(data=="float1"){return 0}else if(data=="float2"){return 1}else if(data=="float3"){return 2}else if(data=="float4"){return 3}else if(data=="short2norm"){return 5}else if(data=="short4norm"){return 6}return 0};iron_data_ShaderContext.prototype={compile:function(done){if(this.pipeState!=null){this.pipeState.delete()}this.pipeState=new kha_graphics4_PipelineState;this.constants=[];this.textureUnits=[];if(this.instancingType>0){var instStruct=new kha_graphics4_VertexStructure;instStruct.add("ipos",2);if(this.instancingType==2||this.instancingType==4){instStruct.add("irot",2)}if(this.instancingType==3||this.instancingType==4){instStruct.add("iscl",2)}instStruct.instanced=true;this.pipeState.inputLayout=[this.structure,instStruct]}else{this.pipeState.inputLayout=[this.structure]}this.pipeState.depthWrite=this.raw.depth_write;this.pipeState.depthMode=this.getCompareMode(this.raw.compare_mode);this.pipeState.cullMode=this.getCullMode(this.raw.cull_mode);if(this.raw.blend_source!=null){this.pipeState.blendSource=this.getBlendingFactor(this.raw.blend_source)}if(this.raw.blend_destination!=null){this.pipeState.blendDestination=this.getBlendingFactor(this.raw.blend_destination)}if(this.raw.blend_operation!=null){this.pipeState.blendOperation=this.getBlendingOperation(this.raw.blend_operation)}if(this.raw.alpha_blend_source!=null){this.pipeState.alphaBlendSource=this.getBlendingFactor(this.raw.alpha_blend_source)}if(this.raw.alpha_blend_destination!=null){this.pipeState.alphaBlendDestination=this.getBlendingFactor(this.raw.alpha_blend_destination)}if(this.raw.alpha_blend_operation!=null){this.pipeState.alphaBlendOperation=this.getBlendingOperation(this.raw.alpha_blend_operation)}if(this.raw.color_writes_red!=null){var _g=0;var _g1=this.raw.color_writes_red.length;while(_g<_g1){var i=_g++;this.pipeState.colorWriteMasksRed[i]=this.raw.color_writes_red[i]}}if(this.raw.color_writes_green!=null){var _g=0;var _g1=this.raw.color_writes_green.length;while(_g<_g1){var i=_g++;this.pipeState.colorWriteMasksGreen[i]=this.raw.color_writes_green[i]}}if(this.raw.color_writes_blue!=null){var _g=0;var _g1=this.raw.color_writes_blue.length;while(_g<_g1){var i=_g++;this.pipeState.colorWriteMasksBlue[i]=this.raw.color_writes_blue[i]}}if(this.raw.color_writes_alpha!=null){var _g=0;var _g1=this.raw.color_writes_alpha.length;while(_g<_g1){var i=_g++;this.pipeState.colorWriteMasksAlpha[i]=this.raw.color_writes_alpha[i]}}if(this.raw.color_attachments!=null){this.pipeState.colorAttachmentCount=this.raw.color_attachments.length;var _g=0;var _g1=this.raw.color_attachments.length;while(_g<_g1){var i=_g++;this.pipeState.colorAttachments[i]=this.getTextureFormat(this.raw.color_attachments[i])}}var tmp=this.raw.depth_attachment!=null;if(this.raw.conservative_raster!=null){this.pipeState.conservativeRasterization=this.raw.conservative_raster}if(this.raw.shader_from_source){this.pipeState.vertexShader=kha_graphics4_VertexShader.fromSource(this.raw.vertex_shader);this.pipeState.fragmentShader=kha_graphics4_FragmentShader.fromSource(this.raw.fragment_shader);if(this.pipeState.vertexShader.shader==null||this.pipeState.fragmentShader.shader==null){done(null);return}this.finishCompile(done)}else{var tmp=StringTools.replace(this.raw.fragment_shader,".","_");this.pipeState.fragmentShader=Reflect.field(kha_Shaders,tmp);var tmp=StringTools.replace(this.raw.vertex_shader,".","_");this.pipeState.vertexShader=Reflect.field(kha_Shaders,tmp);if(this.raw.geometry_shader!=null){var tmp=StringTools.replace(this.raw.geometry_shader,".","_");this.pipeState.geometryShader=Reflect.field(kha_Shaders,tmp)}if(this.raw.tesscontrol_shader!=null){var tmp=StringTools.replace(this.raw.tesscontrol_shader,".","_");this.pipeState.tessellationControlShader=Reflect.field(kha_Shaders,tmp)}if(this.raw.tesseval_shader!=null){var tmp=StringTools.replace(this.raw.tesseval_shader,".","_");this.pipeState.tessellationEvaluationShader=Reflect.field(kha_Shaders,tmp)}this.finishCompile(done)}},finishCompile:function(done){if(this.overrideContext!=null){if(this.overrideContext.cull_mode!=null){this.pipeState.cullMode=this.getCullMode(this.overrideContext.cull_mode)}}this.pipeState.compile();if(this.raw.constants!=null){var _g=0;var _g1=this.raw.constants;while(_g<_g1.length){var c=_g1[_g];++_g;this.addConstant(c)}}if(this.raw.texture_units!=null){var _g=0;var _g1=this.raw.texture_units;while(_g<_g1.length){var tu=_g1[_g];++_g;this.addTexture(tu)}}done(this)},parseVertexStructure:function(){this.structure=new kha_graphics4_VertexStructure;var ipos=false;var irot=false;var iscl=false;var _g=0;var _g1=this.raw.vertex_elements;while(_g<_g1.length){var elem=_g1[_g];++_g;if(elem.name=="ipos"){ipos=true;continue}if(elem.name=="irot"){irot=true;continue}if(elem.name=="iscl"){iscl=true;continue}this.structure.add(elem.name,iron_data_ShaderContext.parseData(elem.data))}if(ipos&&!irot&&!iscl){this.instancingType=1}else if(ipos&&irot&&!iscl){this.instancingType=2}else if(ipos&&!irot&&iscl){this.instancingType=3}else if(ipos&&irot&&iscl){this.instancingType=4}},getCompareMode:function(s){switch(s){case"always":return 0;case"equal":return 2;case"greater":return 6;case"greater_equal":return 7;case"less":return 4;case"less_equal":return 5;case"never":return 1;case"not_equal":return 3;default:return 4}},getCullMode:function(s){switch(s){case"clockwise":return 0;case"none":return 2;default:return 1}},getBlendingOperation:function(s){switch(s){case"add":return 0;case"max":return 4;case"min":return 3;case"reverse_subtract":return 2;case"subtract":return 1;default:return 0}},getBlendingFactor:function(s){switch(s){case"blend_one":return 1;case"blend_zero":return 2;case"destination_alpha":return 4;case"destination_color":return 8;case"inverse_destination_alpha":return 6;case"inverse_destination_color":return 10;case"inverse_source_alpha":return 5;case"inverse_source_color":return 9;case"source_alpha":return 3;case"source_color":return 7;default:return 0}},getTextureAddresing:function(s){switch(s){case"mirror":return 1;case"repeat":return 0;default:return 2}},getTextureFilter:function(s){switch(s){case"linear":return 1;case"point":return 0;default:return 2}},getMipmapFilter:function(s){switch(s){case"no":return 0;case"point":return 1;default:return 2}},getTextureFormat:function(s){switch(s){case"DEPTH16":return 3;case"R16":return 6;case"R32":return 5;case"R8":return 1;case"RGBA128":return 2;case"RGBA32":return 0;case"RGBA64":return 4;default:return 0}},addConstant:function(c){this.constants.push(this.pipeState.getConstantLocation(c.name))},addTexture:function(tu){var unit=this.pipeState.getTextureUnit(tu.name);this.textureUnits.push(unit)},setTextureParameters:function(g,unitIndex,tex){var unit=this.textureUnits[unitIndex];g.setTextureParameters(unit,tex.u_addressing==null?0:this.getTextureAddresing(tex.u_addressing),tex.v_addressing==null?0:this.getTextureAddresing(tex.v_addressing),tex.min_filter==null?1:this.getTextureFilter(tex.min_filter),tex.mag_filter==null?1:this.getTextureFilter(tex.mag_filter),tex.mipmap_filter==null?0:this.getMipmapFilter(tex.mipmap_filter))},__class__:iron_data_ShaderContext};var iron_data_WorldData=function(raw,done){var _gthis=this;this.raw=raw;this.name=raw.name;if(raw.probe!=null){new iron_data_Probe(raw.probe,function(self){_gthis.probe=self;_gthis.loadEnvmap(done)})}else{this.loadEnvmap(done)}};$hxClasses["iron.data.WorldData"]=iron_data_WorldData;iron_data_WorldData.__name__=true;iron_data_WorldData.parse=function(name,id,done){iron_data_Data.getSceneRaw(name,function(format){var raw=iron_data_Data.getWorldRawByName(format.world_datas,id);if(raw==null){haxe_Log.trace('World data "'+id+'" not found!',{fileName:"Sources/iron/data/WorldData.hx",lineNumber:57,className:"iron.data.WorldData",methodName:"parse"});done(null)}new iron_data_WorldData(raw,done)})};iron_data_WorldData.getEmptyIrradiance=function(){if(iron_data_WorldData.emptyIrr==null){var this1=new Float32Array(28);iron_data_WorldData.emptyIrr=this1;var _g=0;var _g1=iron_data_WorldData.emptyIrr.length;while(_g<_g1){var i=_g++;iron_data_WorldData.emptyIrr[i]=0}}return iron_data_WorldData.emptyIrr};iron_data_WorldData.prototype={loadEnvmap:function(done){var _gthis=this;if(this.raw.envmap!=null){iron_data_Data.getImage(this.raw.envmap,function(image){_gthis.envmap=image;done(_gthis)})}else{done(this)}},__class__:iron_data_WorldData};var iron_data_Probe=function(raw,done){this.radianceMipmaps=[];var _gthis=this;this.raw=raw;this.setIrradiance(function(irr){_gthis.irradiance=irr;if(raw.radiance!=null){iron_data_Data.getImage(raw.radiance,function(rad){_gthis.radiance=rad;while(_gthis.radianceMipmaps.length<raw.radiance_mipmaps)_gthis.radianceMipmaps.push(null);var dot=raw.radiance.lastIndexOf(".");var ext=raw.radiance.substring(dot);var base=raw.radiance.substring(0,dot);var mipsLoaded=0;var _g=0;var _g1=raw.radiance_mipmaps;while(_g<_g1){var i=[_g++];iron_data_Data.getImage(base+"_"+i[0]+ext,function(i){return function(mipimg){_gthis.radianceMipmaps[i[0]]=mipimg;mipsLoaded+=1;if(mipsLoaded==raw.radiance_mipmaps){_gthis.radiance.setMipmaps(_gthis.radianceMipmaps);done(_gthis)}}}(i),true)}})}else{done(_gthis)}})};$hxClasses["iron.data.Probe"]=iron_data_Probe;iron_data_Probe.__name__=true;iron_data_Probe.prototype={setIrradiance:function(done){if(this.raw.irradiance==null){done(iron_data_WorldData.getEmptyIrradiance())}else{var ext=StringTools.endsWith(this.raw.irradiance,".json")?"":".arm";iron_data_Data.getBlob(this.raw.irradiance+ext,function(b){var irradianceParsed;if(ext==""){irradianceParsed=JSON.parse(b.toString())}else{var i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);irradianceParsed=iron_system_ArmPack.read(i)}var this1=new Float32Array(28);var irr=this1;irr[0]=irradianceParsed.irradiance[0];irr[1]=irradianceParsed.irradiance[1];irr[2]=irradianceParsed.irradiance[2];irr[3]=irradianceParsed.irradiance[3];irr[4]=irradianceParsed.irradiance[4];irr[5]=irradianceParsed.irradiance[5];irr[6]=irradianceParsed.irradiance[6];irr[7]=irradianceParsed.irradiance[7];irr[8]=irradianceParsed.irradiance[8];irr[9]=irradianceParsed.irradiance[9];irr[10]=irradianceParsed.irradiance[10];irr[11]=irradianceParsed.irradiance[11];irr[12]=irradianceParsed.irradiance[12];irr[13]=irradianceParsed.irradiance[13];irr[14]=irradianceParsed.irradiance[14];irr[15]=irradianceParsed.irradiance[15];irr[16]=irradianceParsed.irradiance[16];irr[17]=irradianceParsed.irradiance[17];irr[18]=irradianceParsed.irradiance[18];irr[19]=irradianceParsed.irradiance[19];irr[20]=irradianceParsed.irradiance[20];irr[21]=irradianceParsed.irradiance[21];irr[22]=irradianceParsed.irradiance[22];irr[23]=irradianceParsed.irradiance[23];irr[24]=irradianceParsed.irradiance[24];irr[25]=irradianceParsed.irradiance[25];irr[26]=irradianceParsed.irradiance[26];done(irr)})}},__class__:iron_data_Probe};var iron_math_Mat3=function(_00,_10,_20,_01,_11,_21,_02,_12,_22){this.self=new kha_math_FastMatrix3(_00,_10,_20,_01,_11,_21,_02,_12,_22)};$hxClasses["iron.math.Mat3"]=iron_math_Mat3;iron_math_Mat3.__name__=true;iron_math_Mat3.prototype={__class__:iron_math_Mat3};var iron_math_RayCaster=function(){};$hxClasses["iron.math.RayCaster"]=iron_math_RayCaster;iron_math_RayCaster.__name__=true;iron_math_RayCaster.getDirection=function(start,end,inputX,inputY,camera){start.x=inputX/kha_System.windowWidth()*2-1;start.y=-(inputY/kha_System.windowHeight()*2-1);start.z=-1;end.x=start.x;end.y=start.y;end.z=1;var _this=iron_math_RayCaster.PInv;var m=camera.P;var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=iron_math_RayCaster.VInv;var m=camera.V;var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=iron_math_RayCaster.VPInv;var b=iron_math_RayCaster.VInv;var a=iron_math_RayCaster.PInv;var a00=a.self._00;var a01=a.self._01;var a02=a.self._02;var a03=a.self._03;var a10=a.self._10;var a11=a.self._11;var a12=a.self._12;var a13=a.self._13;var a20=a.self._20;var a21=a.self._21;var a22=a.self._22;var a23=a.self._23;var a30=a.self._30;var a31=a.self._31;var a32=a.self._32;var a33=a.self._33;var b0=b.self._00;var b1=b.self._10;var b2=b.self._20;var b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var m=iron_math_RayCaster.VPInv;var x=start.x;var y=start.y;var z=start.z;var d=1/(m.self._03*x+m.self._13*y+m.self._23*z+m.self._33);start.x=(m.self._00*x+m.self._10*y+m.self._20*z+m.self._30)*d;start.y=(m.self._01*x+m.self._11*y+m.self._21*z+m.self._31)*d;start.z=(m.self._02*x+m.self._12*y+m.self._22*z+m.self._32)*d;var m=iron_math_RayCaster.VPInv;var x=end.x;var y=end.y;var z=end.z;var d=1/(m.self._03*x+m.self._13*y+m.self._23*z+m.self._33);end.x=(m.self._00*x+m.self._10*y+m.self._20*z+m.self._30)*d;end.y=(m.self._01*x+m.self._11*y+m.self._21*z+m.self._31)*d;end.z=(m.self._02*x+m.self._12*y+m.self._22*z+m.self._32)*d};var iron_math_Vec2=function(x,y){if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y};$hxClasses["iron.math.Vec2"]=iron_math_Vec2;iron_math_Vec2.__name__=true;iron_math_Vec2.prototype={__class__:iron_math_Vec2};var iron_math_Vec3=function(x,y,z){if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z};$hxClasses["iron.math.Vec3"]=iron_math_Vec3;iron_math_Vec3.__name__=true;iron_math_Vec3.prototype={__class__:iron_math_Vec3};var iron_object_Animation=function(){this.markerEvents=null;this.lastFrameIndex=-1;this.blendFactor=0;this.blendAction="";this.blendCurrent=0;this.blendTime=0;this.frameTime=.016666666666666666;this.paused=false;this.onComplete=null;this.frameIndex=0;this.loop=true;this.speed=1;this.time=0;this.action="";iron_Scene.active.animations.push(this);if(iron_Scene.active.raw.frame_time!=null){this.frameTime=iron_Scene.active.raw.frame_time}this.play()};$hxClasses["iron.object.Animation"]=iron_object_Animation;iron_object_Animation.__name__=true;iron_object_Animation.prototype={play:function(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=0}if(action==null){action=""}if(blendTime>0){this.blendTime=blendTime;this.blendCurrent=0;this.blendAction=this.action;this.frameIndex=0;this.time=0}else{this.frameIndex=-1}this.action=action;this.onComplete=onComplete;this.speed=speed;this.loop=loop;this.paused=false},remove:function(){HxOverrides.remove(iron_Scene.active.animations,this)},update:function(delta){if(this.paused||this.speed==0){return}this.time+=delta*this.speed;if(this.blendTime>0&&this.blendFactor==0){this.blendCurrent+=delta;if(this.blendCurrent>=this.blendTime){this.blendTime=0}}},isTrackEnd:function(track){if(this.speed>0){return this.frameIndex>=track.frames.length-1}else{return this.frameIndex<=0}},rewind:function(track){this.frameIndex=this.speed>0?0:track.frames.length-1;this.time=track.frames[this.frameIndex]*this.frameTime},updateTrack:function(anim){if(anim==null){return}var track=anim.tracks[0];if(this.frameIndex==-1){this.rewind(track)}var sign=this.speed>0?1:-1;while(true){var frameValues=track.frames;if(!(this.speed>0?this.frameIndex+1<frameValues.length&&this.time>frameValues[this.frameIndex+1]*this.frameTime:this.frameIndex-1>-1&&this.time<frameValues[this.frameIndex-1]*this.frameTime)){break}this.frameIndex+=sign}if(this.markerEvents!=null&&anim.marker_names!=null&&this.frameIndex!=this.lastFrameIndex){var _g=0;var _g1=anim.marker_frames.length;while(_g<_g1){var i=_g++;if(this.frameIndex==anim.marker_frames[i]){var ar=this.markerEvents.h[anim.marker_names[i]];var _g2=0;while(_g2<ar.length){var f=ar[_g2];++_g2;f()}}}this.lastFrameIndex=this.frameIndex}if(this.isTrackEnd(track)){if(this.loop||this.blendTime>0){this.rewind(track)}else{this.frameIndex-=sign;this.paused=true}if(this.onComplete!=null&&this.blendTime==0){this.onComplete()}}},updateAnimSampled:function(anim,m){if(anim==null){return}var track=anim.tracks[0];var sign=this.speed>0?1:-1;var t=this.time;var ti=this.frameIndex;var t1=track.frames[ti]*this.frameTime;var t2=track.frames[ti+sign]*this.frameTime;var s=(t-t1)/(t2-t1);var _this=iron_object_Animation.m1;var a=track.values;var offset=ti*16;if(offset==null){offset=0}_this.self._00=a[offset];_this.self._10=a[1+offset];_this.self._20=a[2+offset];_this.self._30=a[3+offset];_this.self._01=a[4+offset];_this.self._11=a[5+offset];_this.self._21=a[6+offset];_this.self._31=a[7+offset];_this.self._02=a[8+offset];_this.self._12=a[9+offset];_this.self._22=a[10+offset];_this.self._32=a[11+offset];_this.self._03=a[12+offset];_this.self._13=a[13+offset];_this.self._23=a[14+offset];_this.self._33=a[15+offset];var _this=iron_object_Animation.m2;var a=track.values;var offset=(ti+sign)*16;if(offset==null){offset=0}_this.self._00=a[offset];_this.self._10=a[1+offset];_this.self._20=a[2+offset];_this.self._30=a[3+offset];_this.self._01=a[4+offset];_this.self._11=a[5+offset];_this.self._21=a[6+offset];_this.self._31=a[7+offset];_this.self._02=a[8+offset];_this.self._12=a[9+offset];_this.self._22=a[10+offset];_this.self._32=a[11+offset];_this.self._03=a[12+offset];_this.self._13=a[13+offset];_this.self._23=a[14+offset];_this.self._33=a[15+offset];var _this=iron_object_Animation.m1;var loc=iron_object_Animation.vpos;var quat=iron_object_Animation.q1;var scale=iron_object_Animation.vscl;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;var _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._10;_this1.y=_this.self._11;_this1.z=_this.self._12;_this1.w=1;var _this2=_this1;scale.y=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._20;_this1.y=_this.self._21;_this1.z=_this.self._22;_this1.w=1;var _this2=_this1;scale.z=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=_this.self;var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c00=_this1._11*(m4*m8-m5*m7)-_this1._21*(m3*m8-m5*m6)+_this1._31*(m3*m7-m4*m6);var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c01=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c02=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._12;var m7=_this1._22;var m8=_this1._32;var c03=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);if(_this1._00*c00-_this1._01*c01+_this1._02*c02-_this1._03*c03<0){scale.x=-scale.x}var invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;var m1=iron_math_Mat4.helpMat;var m11=m1.self._00;var m12=m1.self._10;var m13=m1.self._20;var m21=m1.self._01;var m22=m1.self._11;var m23=m1.self._21;var m31=m1.self._02;var m32=m1.self._12;var m33=m1.self._22;var tr=m11+m22+m33;var s1=0;if(tr>0){s1=.5/Math.sqrt(tr+1);quat.w=.25/s1;quat.x=(m32-m23)*s1;quat.y=(m13-m31)*s1;quat.z=(m21-m12)*s1}else if(m11>m22&&m11>m33){s1=2*Math.sqrt(1+m11-m22-m33);quat.w=(m32-m23)/s1;quat.x=.25*s1;quat.y=(m12+m21)/s1;quat.z=(m13+m31)/s1}else if(m22>m33){s1=2*Math.sqrt(1+m22-m11-m33);quat.w=(m13-m31)/s1;quat.x=(m12+m21)/s1;quat.y=.25*s1;quat.z=(m23+m32)/s1}else{s1=2*Math.sqrt(1+m33-m11-m22);quat.w=(m21-m12)/s1;quat.x=(m13+m31)/s1;quat.y=(m23+m32)/s1;quat.z=.25*s1}var _this=iron_object_Animation.m2;var loc=iron_object_Animation.vpos2;var quat=iron_object_Animation.q2;var scale=iron_object_Animation.vscl2;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;var _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._10;_this1.y=_this.self._11;_this1.z=_this.self._12;_this1.w=1;var _this2=_this1;scale.y=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._20;_this1.y=_this.self._21;_this1.z=_this.self._22;_this1.w=1;var _this2=_this1;scale.z=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=_this.self;var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c00=_this1._11*(m4*m8-m5*m7)-_this1._21*(m3*m8-m5*m6)+_this1._31*(m3*m7-m4*m6);var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c01=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c02=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._12;var m7=_this1._22;var m8=_this1._32;var c03=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);if(_this1._00*c00-_this1._01*c01+_this1._02*c02-_this1._03*c03<0){scale.x=-scale.x}var invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;var m1=iron_math_Mat4.helpMat;var m11=m1.self._00;var m12=m1.self._10;var m13=m1.self._20;var m21=m1.self._01;var m22=m1.self._11;var m23=m1.self._21;var m31=m1.self._02;var m32=m1.self._12;var m33=m1.self._22;var tr=m11+m22+m33;var s1=0;if(tr>0){s1=.5/Math.sqrt(tr+1);quat.w=.25/s1;quat.x=(m32-m23)*s1;quat.y=(m13-m31)*s1;quat.z=(m21-m12)*s1}else if(m11>m22&&m11>m33){s1=2*Math.sqrt(1+m11-m22-m33);quat.w=(m32-m23)/s1;quat.x=.25*s1;quat.y=(m12+m21)/s1;quat.z=(m13+m31)/s1}else if(m22>m33){s1=2*Math.sqrt(1+m22-m11-m33);quat.w=(m13-m31)/s1;quat.x=(m12+m21)/s1;quat.y=.25*s1;quat.z=(m23+m32)/s1}else{s1=2*Math.sqrt(1+m33-m11-m22);quat.w=(m21-m12)/s1;quat.x=(m13+m31)/s1;quat.y=(m23+m32)/s1;quat.z=.25*s1}var _this=iron_object_Animation.vp;var from=iron_object_Animation.vpos;var to=iron_object_Animation.vpos2;_this.x=from.x+(to.x-from.x)*s;_this.y=from.y+(to.y-from.y)*s;_this.z=from.z+(to.z-from.z)*s;var _this=iron_object_Animation.vs;var from=iron_object_Animation.vscl;var to=iron_object_Animation.vscl2;_this.x=from.x+(to.x-from.x)*s;_this.y=from.y+(to.y-from.y)*s;_this.z=from.z+(to.z-from.z)*s;var _this=iron_object_Animation.q3;var from=iron_object_Animation.q1;var to=iron_object_Animation.q2;var fromx=from.x;var fromy=from.y;var fromz=from.z;var fromw=from.w;var dot=from.x*to.x+from.y*to.y+from.z*to.z+from.w*to.w;if(dot<0){fromx=-fromx;fromy=-fromy;fromz=-fromz;fromw=-fromw}_this.x=fromx+(to.x-fromx)*s;_this.y=fromy+(to.y-fromy)*s;_this.z=fromz+(to.z-fromz)*s;_this.w=fromw+(to.w-fromw)*s;var l=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z+_this.w*_this.w);if(l==0){_this.x=0;_this.y=0;_this.z=0;_this.w=0}else{l=1/l;_this.x*=l;_this.y*=l;_this.z*=l;_this.w*=l}var q=iron_object_Animation.q3;var x=q.x;var y=q.y;var z=q.z;var w=q.w;var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;m.self._00=1-(yy+zz);m.self._10=xy-wz;m.self._20=xz+wy;m.self._01=xy+wz;m.self._11=1-(xx+zz);m.self._21=yz-wx;m.self._02=xz-wy;m.self._12=yz+wx;m.self._22=1-(xx+yy);m.self._03=0;m.self._13=0;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1;var v=iron_object_Animation.vs;var x=v.x;var y=v.y;var z=v.z;m.self._00*=x;m.self._01*=x;m.self._02*=x;m.self._03*=x;m.self._10*=y;m.self._11*=y;m.self._12*=y;m.self._13*=y;m.self._20*=z;m.self._21*=z;m.self._22*=z;m.self._23*=z;m.self._30=iron_object_Animation.vp.x;m.self._31=iron_object_Animation.vp.y;m.self._32=iron_object_Animation.vp.z},__class__:iron_object_Animation};var iron_object_BoneAnimation=function(armatureName){if(armatureName==null){armatureName=""}this.onUpdates=null;this.constraintMats=null;this.constraintTargetsI=null;this.constraintTargets=null;this.boneChildren=null;this.matsFastBlendSort=[];this.matsFastBlend=[];this.matsFastSort=[];this.matsFast=[];this.applyParent=null;this.absMats=null;this.skeletonMatsBlend=null;this.skeletonBonesBlend=null;this.skeletonMats=null;this.skeletonBones=null;iron_object_Animation.call(this);this.isSampled=false;var _g=0;var _g1=iron_Scene.active.armatures;while(_g<_g1.length){var a=_g1[_g];++_g;if(a.name==armatureName){this.armature=a;break}}};$hxClasses["iron.object.BoneAnimation"]=iron_object_BoneAnimation;iron_object_BoneAnimation.__name__=true;iron_object_BoneAnimation.__super__=iron_object_Animation;iron_object_BoneAnimation.prototype=$extend(iron_object_Animation.prototype,{setSkin:function(mo){var _gthis=this;this.object=mo;this.data=mo!=null?mo.data:null;this.isSkinned=this.data!=null&&this.data.isSkinned;if(this.isSkinned){var boneSize=8;var this1=new Float32Array(iron_object_BoneAnimation.skinMaxBones*boneSize);this.skinBuffer=this1;var _g=0;var _g1=this.skinBuffer.length;while(_g<_g1){var i=_g++;this.skinBuffer[i]=0}var _this=this.object.transform.rot;_this.x=0;_this.y=0;_this.z=0;_this.w=1;this.object.transform.buildMatrix();var refs=mo.parent.raw.bone_actions;if(refs!=null&&refs.length>0){iron_data_Data.getSceneRaw(refs[0],function(action){_gthis.play(action.name)})}}},addBoneChild:function(bone,o){if(this.boneChildren==null){this.boneChildren=new haxe_ds_StringMap}var ar=this.boneChildren.h[bone];if(ar==null){ar=[];this.boneChildren.h[bone]=ar}ar.push(o)},updateBoneChildren:function(bone,bm){var ar=this.boneChildren.h[bone.name];if(ar==null){return}var _g=0;while(_g<ar.length){var o=ar[_g];++_g;var t=o.transform;if(t.boneParent==null){t.boneParent=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}if(o.raw.parent_bone_tail!=null){if(o.raw.parent_bone_connected||this.isSkinned){var v=o.raw.parent_bone_tail;var _this=t.boneParent;var x=v[0];var y=v[1];var z=v[2];if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=x;_this.self._31=y;_this.self._32=z;_this.self._33=1;var _this1=t.boneParent;var a00=_this1.self._00;var a01=_this1.self._01;var a02=_this1.self._02;var a03=_this1.self._03;var a10=_this1.self._10;var a11=_this1.self._11;var a12=_this1.self._12;var a13=_this1.self._13;var a20=_this1.self._20;var a21=_this1.self._21;var a22=_this1.self._22;var a23=_this1.self._23;var a30=_this1.self._30;var a31=_this1.self._31;var a32=_this1.self._32;var a33=_this1.self._33;var b0=bm.self._00;var b1=bm.self._10;var b2=bm.self._20;var b3=bm.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._01;b1=bm.self._11;b2=bm.self._21;b3=bm.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._02;b1=bm.self._12;b2=bm.self._22;b3=bm.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._03;b1=bm.self._13;b2=bm.self._23;b3=bm.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3}else{var v1=o.raw.parent_bone_tail_pose;var _this2=t.boneParent;_this2.self._00=bm.self._00;_this2.self._01=bm.self._01;_this2.self._02=bm.self._02;_this2.self._03=bm.self._03;_this2.self._10=bm.self._10;_this2.self._11=bm.self._11;_this2.self._12=bm.self._12;_this2.self._13=bm.self._13;_this2.self._20=bm.self._20;_this2.self._21=bm.self._21;_this2.self._22=bm.self._22;_this2.self._23=bm.self._23;_this2.self._30=bm.self._30;_this2.self._31=bm.self._31;_this2.self._32=bm.self._32;_this2.self._33=bm.self._33;var _this3=t.boneParent;var x1=v1[0];var y1=v1[1];var z1=v1[2];_this3.self._00+=x1*_this3.self._03;_this3.self._01+=y1*_this3.self._03;_this3.self._02+=z1*_this3.self._03;_this3.self._10+=x1*_this3.self._13;_this3.self._11+=y1*_this3.self._13;_this3.self._12+=z1*_this3.self._13;_this3.self._20+=x1*_this3.self._23;_this3.self._21+=y1*_this3.self._23;_this3.self._22+=z1*_this3.self._23;_this3.self._30+=x1*_this3.self._33;_this3.self._31+=y1*_this3.self._33;_this3.self._32+=z1*_this3.self._33}}else{var _this4=t.boneParent;_this4.self._00=bm.self._00;_this4.self._01=bm.self._01;_this4.self._02=bm.self._02;_this4.self._03=bm.self._03;_this4.self._10=bm.self._10;_this4.self._11=bm.self._11;_this4.self._12=bm.self._12;_this4.self._13=bm.self._13;_this4.self._20=bm.self._20;_this4.self._21=bm.self._21;_this4.self._22=bm.self._22;_this4.self._23=bm.self._23;_this4.self._30=bm.self._30;_this4.self._31=bm.self._31;_this4.self._32=bm.self._32;_this4.self._33=bm.self._33}t.buildMatrix()}},numParents:function(b){var i=0;var p=b.parent;while(p!=null){++i;p=p.parent}return i},setMats:function(){var _gthis=this;while(this.matsFast.length<this.skeletonBones.length){this.matsFast.push(new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));this.matsFastSort.push(this.matsFastSort.length)}this.matsFastSort.sort(function(a,b){var i=_gthis.numParents(_gthis.skeletonBones[a]);var j=_gthis.numParents(_gthis.skeletonBones[b]);if(i<j){return-1}else if(i>j){return 1}else{return 0}});if(this.skeletonBonesBlend!=null){while(this.matsFastBlend.length<this.skeletonBonesBlend.length){this.matsFastBlend.push(new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));this.matsFastBlendSort.push(this.matsFastBlendSort.length)}this.matsFastBlendSort.sort(function(a,b){var i=_gthis.numParents(_gthis.skeletonBonesBlend[a]);var j=_gthis.numParents(_gthis.skeletonBonesBlend[b]);if(i<j){return-1}else if(i>j){return 1}else{return 0}})}},setAction:function(action){if(this.isSkinned){this.skeletonBones=this.data.geom.actions.h[action];this.skeletonMats=this.data.geom.mats.h[action];this.skeletonBonesBlend=null;this.skeletonMatsBlend=null}else{this.armature.initMats();var a=this.armature.getAction(action);this.skeletonBones=a.bones;this.skeletonMats=a.mats}this.setMats()},setActionBlend:function(action){if(this.isSkinned){this.skeletonBonesBlend=this.skeletonBones;this.skeletonMatsBlend=this.skeletonMats;this.skeletonBones=this.data.geom.actions.h[action];this.skeletonMats=this.data.geom.mats.h[action]}else{this.armature.initMats();var a=this.armature.getAction(action);this.skeletonBones=a.bones;this.skeletonMats=a.mats}this.setMats()},play:function(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=.2}if(action==null){action=""}iron_object_Animation.prototype.play.call(this,action,onComplete,blendTime,speed,loop);if(action!=""){if(blendTime>0){this.setActionBlend(action)}else{this.setAction(action)}}this.blendFactor=0},update:function(delta){if(!this.isSkinned&&this.skeletonBones==null){this.setAction(this.armature.actions[0].name)}if(this.object!=null&&(!this.object.visible||this.object.culled)){return}if(this.skeletonBones==null||this.skeletonBones.length==0){return}iron_object_Animation.prototype.update.call(this,delta);if(this.paused||this.speed==0){return}var lastBones=this.skeletonBones;var _g=0;var _g1=this.skeletonBones;while(_g<_g1.length){var b=_g1[_g];++_g;if(b.anim!=null){this.updateTrack(b.anim);break}}if(lastBones!=this.skeletonBones){return}var _g=0;var _g1=this.skeletonBones.length;while(_g<_g1){var i=_g++;this.updateAnimSampled(this.skeletonBones[i].anim,this.skeletonMats[i])}if(this.blendTime>0&&this.skeletonBonesBlend!=null){var _g=0;var _g1=this.skeletonBonesBlend;while(_g<_g1.length){var b=_g1[_g];++_g;if(b.anim!=null){this.updateTrack(b.anim);break}}var _g=0;var _g1=this.skeletonBonesBlend.length;while(_g<_g1){var i=_g++;this.updateAnimSampled(this.skeletonBonesBlend[i].anim,this.skeletonMatsBlend[i])}}this.updateConstraints();if(this.onUpdates!=null){var _g=0;var _g1=this.onUpdates;while(_g<_g1.length){var f=_g1[_g];++_g;f()}}var _g=0;var _g1=this.skeletonBones.length;while(_g<_g1){var i=_g++;this.multParent(this.matsFastSort[i],this.matsFast,this.skeletonBones,this.skeletonMats)}if(this.skeletonBonesBlend!=null){var _g=0;var _g1=this.skeletonBonesBlend.length;while(_g<_g1){var i=_g++;this.multParent(this.matsFastBlendSort[i],this.matsFastBlend,this.skeletonBonesBlend,this.skeletonMatsBlend)}}if(this.isSkinned){this.updateSkinGpu()}else{this.updateBonesOnly()}},multParent:function(i,fasts,bones,mats){var f=fasts[i];if(this.applyParent!=null&&!this.applyParent[i]){var m=mats[i];f.self._00=m.self._00;f.self._01=m.self._01;f.self._02=m.self._02;f.self._03=m.self._03;f.self._10=m.self._10;f.self._11=m.self._11;f.self._12=m.self._12;f.self._13=m.self._13;f.self._20=m.self._20;f.self._21=m.self._21;f.self._22=m.self._22;f.self._23=m.self._23;f.self._30=m.self._30;f.self._31=m.self._31;f.self._32=m.self._32;f.self._33=m.self._33;return}var p=bones[i].parent;var bi=this.getBoneIndex(p,bones);if(p==null||bi==-1){var m=mats[i];f.self._00=m.self._00;f.self._01=m.self._01;f.self._02=m.self._02;f.self._03=m.self._03;f.self._10=m.self._10;f.self._11=m.self._11;f.self._12=m.self._12;f.self._13=m.self._13;f.self._20=m.self._20;f.self._21=m.self._21;f.self._22=m.self._22;f.self._23=m.self._23;f.self._30=m.self._30;f.self._31=m.self._31;f.self._32=m.self._32;f.self._33=m.self._33}else{var b=fasts[bi];var a=mats[i];var a00=a.self._00;var a01=a.self._01;var a02=a.self._02;var a03=a.self._03;var a10=a.self._10;var a11=a.self._11;var a12=a.self._12;var a13=a.self._13;var a20=a.self._20;var a21=a.self._21;var a22=a.self._22;var a23=a.self._23;var a30=a.self._30;var a31=a.self._31;var a32=a.self._32;var a33=a.self._33;var b0=b.self._00;var b1=b.self._10;var b2=b.self._20;var b3=b.self._30;f.self._00=a00*b0+a01*b1+a02*b2+a03*b3;f.self._10=a10*b0+a11*b1+a12*b2+a13*b3;f.self._20=a20*b0+a21*b1+a22*b2+a23*b3;f.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;f.self._01=a00*b0+a01*b1+a02*b2+a03*b3;f.self._11=a10*b0+a11*b1+a12*b2+a13*b3;f.self._21=a20*b0+a21*b1+a22*b2+a23*b3;f.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;f.self._02=a00*b0+a01*b1+a02*b2+a03*b3;f.self._12=a10*b0+a11*b1+a12*b2+a13*b3;f.self._22=a20*b0+a21*b1+a22*b2+a23*b3;f.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;f.self._03=a00*b0+a01*b1+a02*b2+a03*b3;f.self._13=a10*b0+a11*b1+a12*b2+a13*b3;f.self._23=a20*b0+a21*b1+a22*b2+a23*b3;f.self._33=a30*b0+a31*b1+a32*b2+a33*b3}},updateConstraints:function(){if(this.data==null){return}var cs=this.data.raw.skin.constraints;if(cs==null){return}if(this.constraintTargets==null){this.constraintTargets=[];this.constraintTargetsI=[];var _g=0;while(_g<cs.length){var c=cs[_g];++_g;var o=iron_Scene.active.getChild(c.target);this.constraintTargets.push(o);var m=null;if(o!=null){var a=o.raw.transform.values;m=new iron_math_Mat4(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){m.self._00=1;m.self._01=0;m.self._02=0;m.self._03=0;m.self._10=0;m.self._11=1;m.self._12=0;m.self._13=0;m.self._20=0;m.self._21=0;m.self._22=1;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1}else{det=1/det;m.self._00=(a11*b11-a12*b10+a13*b09)*det;m.self._01=(a02*b10-a01*b11-a03*b09)*det;m.self._02=(a31*b05-a32*b04+a33*b03)*det;m.self._03=(a22*b04-a21*b05-a23*b03)*det;m.self._10=(a12*b08-a10*b11-a13*b07)*det;m.self._11=(a00*b11-a02*b08+a03*b07)*det;m.self._12=(a32*b02-a30*b05-a33*b01)*det;m.self._13=(a20*b05-a22*b02+a23*b01)*det;m.self._20=(a10*b10-a11*b08+a13*b06)*det;m.self._21=(a01*b08-a00*b10-a03*b06)*det;m.self._22=(a30*b04-a31*b02+a33*b00)*det;m.self._23=(a21*b02-a20*b04-a23*b00)*det;m.self._30=(a11*b07-a10*b09-a12*b06)*det;m.self._31=(a00*b09-a01*b07+a02*b06)*det;m.self._32=(a31*b01-a30*b03-a32*b00)*det;m.self._33=(a20*b03-a21*b01+a22*b00)*det}}this.constraintTargetsI.push(m)}this.constraintMats=new haxe_ds_ObjectMap}var _g=0;var _g1=cs.length;while(_g<_g1){var i=_g++;var c=cs[i];var bone=this.getBone(c.bone);if(bone==null){continue}var o=this.constraintTargets[i];if(o==null){continue}if(c.type=="CHILD_OF"){var m=this.constraintMats.h[bone.__id__];if(m==null){m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.constraintMats.set(bone,m)}var m1=this.object.parent.transform.world;m.self._00=m1.self._00;m.self._01=m1.self._01;m.self._02=m1.self._02;m.self._03=m1.self._03;m.self._10=m1.self._10;m.self._11=m1.self._11;m.self._12=m1.self._12;m.self._13=m1.self._13;m.self._20=m1.self._20;m.self._21=m1.self._21;m.self._22=m1.self._22;m.self._23=m1.self._23;m.self._30=m1.self._30;m.self._31=m1.self._31;m.self._32=m1.self._32;m.self._33=m1.self._33;var m2=this.constraintTargetsI[i];var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b0=m2.self._00;var b1=m2.self._10;var b2=m2.self._20;var b3=m2.self._30;m.self._00=a00*b0+a01*b1+a02*b2+a03*b3;m.self._10=a10*b0+a11*b1+a12*b2+a13*b3;m.self._20=a20*b0+a21*b1+a22*b2+a23*b3;m.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;m.self._01=a00*b0+a01*b1+a02*b2+a03*b3;m.self._11=a10*b0+a11*b1+a12*b2+a13*b3;m.self._21=a20*b0+a21*b1+a22*b2+a23*b3;m.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;m.self._02=a00*b0+a01*b1+a02*b2+a03*b3;m.self._12=a10*b0+a11*b1+a12*b2+a13*b3;m.self._22=a20*b0+a21*b1+a22*b2+a23*b3;m.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;m.self._03=a00*b0+a01*b1+a02*b2+a03*b3;m.self._13=a10*b0+a11*b1+a12*b2+a13*b3;m.self._23=a20*b0+a21*b1+a22*b2+a23*b3;m.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var m3=o.transform.world;var a001=m.self._00;var a011=m.self._01;var a021=m.self._02;var a031=m.self._03;var a101=m.self._10;var a111=m.self._11;var a121=m.self._12;var a131=m.self._13;var a201=m.self._20;var a211=m.self._21;var a221=m.self._22;var a231=m.self._23;var a301=m.self._30;var a311=m.self._31;var a321=m.self._32;var a331=m.self._33;var b01=m3.self._00;var b11=m3.self._10;var b21=m3.self._20;var b31=m3.self._30;m.self._00=a001*b01+a011*b11+a021*b21+a031*b31;m.self._10=a101*b01+a111*b11+a121*b21+a131*b31;m.self._20=a201*b01+a211*b11+a221*b21+a231*b31;m.self._30=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._01;b11=m3.self._11;b21=m3.self._21;b31=m3.self._31;m.self._01=a001*b01+a011*b11+a021*b21+a031*b31;m.self._11=a101*b01+a111*b11+a121*b21+a131*b31;m.self._21=a201*b01+a211*b11+a221*b21+a231*b31;m.self._31=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._02;b11=m3.self._12;b21=m3.self._22;b31=m3.self._32;m.self._02=a001*b01+a011*b11+a021*b21+a031*b31;m.self._12=a101*b01+a111*b11+a121*b21+a131*b31;m.self._22=a201*b01+a211*b11+a221*b21+a231*b31;m.self._32=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._03;b11=m3.self._13;b21=m3.self._23;b31=m3.self._33;m.self._03=a001*b01+a011*b11+a021*b21+a031*b31;m.self._13=a101*b01+a111*b11+a121*b21+a131*b31;m.self._23=a201*b01+a211*b11+a221*b21+a231*b31;m.self._33=a301*b01+a311*b11+a321*b21+a331*b31;var _this=iron_object_BoneAnimation.m1;var m4=this.object.parent.transform.world;var a002=m4.self._00;var a012=m4.self._01;var a022=m4.self._02;var a032=m4.self._03;var a102=m4.self._10;var a112=m4.self._11;var a122=m4.self._12;var a132=m4.self._13;var a202=m4.self._20;var a212=m4.self._21;var a222=m4.self._22;var a232=m4.self._23;var a302=m4.self._30;var a312=m4.self._31;var a322=m4.self._32;var a332=m4.self._33;var b00=a002*a112-a012*a102;var b011=a002*a122-a022*a102;var b02=a002*a132-a032*a102;var b03=a012*a122-a022*a112;var b04=a012*a132-a032*a112;var b05=a022*a132-a032*a122;var b06=a202*a312-a212*a302;var b07=a202*a322-a222*a302;var b08=a202*a332-a232*a302;var b09=a212*a322-a222*a312;var b10=a212*a332-a232*a312;var b111=a222*a332-a232*a322;var det=b00*b111-b011*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a112*b111-a122*b10+a132*b09)*det;_this.self._01=(a022*b10-a012*b111-a032*b09)*det;_this.self._02=(a312*b05-a322*b04+a332*b03)*det;_this.self._03=(a222*b04-a212*b05-a232*b03)*det;_this.self._10=(a122*b08-a102*b111-a132*b07)*det;_this.self._11=(a002*b111-a022*b08+a032*b07)*det;_this.self._12=(a322*b02-a302*b05-a332*b011)*det;_this.self._13=(a202*b05-a222*b02+a232*b011)*det;_this.self._20=(a102*b10-a112*b08+a132*b06)*det;_this.self._21=(a012*b08-a002*b10-a032*b06)*det;_this.self._22=(a302*b04-a312*b02+a332*b00)*det;_this.self._23=(a212*b02-a202*b04-a232*b00)*det;_this.self._30=(a112*b07-a102*b09-a122*b06)*det;_this.self._31=(a002*b09-a012*b07+a022*b06)*det;_this.self._32=(a312*b011-a302*b03-a322*b00)*det;_this.self._33=(a202*b03-a212*b011+a222*b00)*det}var m5=iron_object_BoneAnimation.m1;var a003=m.self._00;var a013=m.self._01;var a023=m.self._02;var a033=m.self._03;var a103=m.self._10;var a113=m.self._11;var a123=m.self._12;var a133=m.self._13;var a203=m.self._20;var a213=m.self._21;var a223=m.self._22;var a233=m.self._23;var a303=m.self._30;var a313=m.self._31;var a323=m.self._32;var a333=m.self._33;var b010=m5.self._00;var b12=m5.self._10;var b22=m5.self._20;var b32=m5.self._30;m.self._00=a003*b010+a013*b12+a023*b22+a033*b32;m.self._10=a103*b010+a113*b12+a123*b22+a133*b32;m.self._20=a203*b010+a213*b12+a223*b22+a233*b32;m.self._30=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._01;b12=m5.self._11;b22=m5.self._21;b32=m5.self._31;m.self._01=a003*b010+a013*b12+a023*b22+a033*b32;m.self._11=a103*b010+a113*b12+a123*b22+a133*b32;m.self._21=a203*b010+a213*b12+a223*b22+a233*b32;m.self._31=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._02;b12=m5.self._12;b22=m5.self._22;b32=m5.self._32;m.self._02=a003*b010+a013*b12+a023*b22+a033*b32;m.self._12=a103*b010+a113*b12+a123*b22+a133*b32;m.self._22=a203*b010+a213*b12+a223*b22+a233*b32;m.self._32=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._03;b12=m5.self._13;b22=m5.self._23;b32=m5.self._33;m.self._03=a003*b010+a013*b12+a023*b22+a033*b32;m.self._13=a103*b010+a113*b12+a123*b22+a133*b32;m.self._23=a203*b010+a213*b12+a223*b22+a233*b32;m.self._33=a303*b010+a313*b12+a323*b22+a333*b32}}},updateBonesOnly:function(){if(this.boneChildren!=null){var _g=0;var _g1=this.skeletonBones.length;while(_g<_g1){var i=_g++;var b=this.skeletonBones[i];var _this=iron_object_BoneAnimation.m;var m=this.matsFast[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;this.updateBoneChildren(b,iron_object_BoneAnimation.m)}}},updateSkinGpu:function(){var bones=this.skeletonBones;var s=this.blendCurrent/this.blendTime;s=s*s*(3-2*s);if(this.blendFactor!=0){s=1-this.blendFactor}var _g=0;var _g1=bones.length;while(_g<_g1){var i=_g++;if(this.constraintMats!=null){var m=this.constraintMats.h[bones[i].__id__];if(m!=null){this.updateSkinBuffer(m,i);continue}}var _this=iron_object_BoneAnimation.m;var m1=this.matsFast[i];_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;if(this.blendTime>0&&this.skeletonBonesBlend!=null){var _this1=iron_object_BoneAnimation.m1;var m2=this.matsFastBlend[i];_this1.self._00=m2.self._00;_this1.self._01=m2.self._01;_this1.self._02=m2.self._02;_this1.self._03=m2.self._03;_this1.self._10=m2.self._10;_this1.self._11=m2.self._11;_this1.self._12=m2.self._12;_this1.self._13=m2.self._13;_this1.self._20=m2.self._20;_this1.self._21=m2.self._21;_this1.self._22=m2.self._22;_this1.self._23=m2.self._23;_this1.self._30=m2.self._30;_this1.self._31=m2.self._31;_this1.self._32=m2.self._32;_this1.self._33=m2.self._33;var _this2=iron_object_BoneAnimation.m1;var loc=iron_object_BoneAnimation.vpos;var quat=iron_object_BoneAnimation.q1;var scale=iron_object_BoneAnimation.vscl;loc.x=_this2.self._30;loc.y=_this2.self._31;loc.z=_this2.self._32;var _this3=iron_math_Mat4.helpVec;_this3.x=_this2.self._00;_this3.y=_this2.self._01;_this3.z=_this2.self._02;_this3.w=1;var _this4=_this3;scale.x=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);var _this5=iron_math_Mat4.helpVec;_this5.x=_this2.self._10;_this5.y=_this2.self._11;_this5.z=_this2.self._12;_this5.w=1;var _this6=_this5;scale.y=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);var _this7=iron_math_Mat4.helpVec;_this7.x=_this2.self._20;_this7.y=_this2.self._21;_this7.z=_this2.self._22;_this7.w=1;var _this8=_this7;scale.z=Math.sqrt(_this8.x*_this8.x+_this8.y*_this8.y+_this8.z*_this8.z);var _this9=_this2.self;var m3=_this9._12;var m4=_this9._22;var m5=_this9._32;var m6=_this9._13;var m7=_this9._23;var m8=_this9._33;var c00=_this9._11*(m4*m8-m5*m7)-_this9._21*(m3*m8-m5*m6)+_this9._31*(m3*m7-m4*m6);var m31=_this9._12;var m41=_this9._22;var m51=_this9._32;var m61=_this9._13;var m71=_this9._23;var m81=_this9._33;var c01=_this9._10*(m41*m81-m51*m71)-_this9._20*(m31*m81-m51*m61)+_this9._30*(m31*m71-m41*m61);var m32=_this9._11;var m42=_this9._21;var m52=_this9._31;var m62=_this9._13;var m72=_this9._23;var m82=_this9._33;var c02=_this9._10*(m42*m82-m52*m72)-_this9._20*(m32*m82-m52*m62)+_this9._30*(m32*m72-m42*m62);var m33=_this9._11;var m43=_this9._21;var m53=_this9._31;var m63=_this9._12;var m73=_this9._22;var m83=_this9._32;var c03=_this9._10*(m43*m83-m53*m73)-_this9._20*(m33*m83-m53*m63)+_this9._30*(m33*m73-m43*m63);if(_this9._00*c00-_this9._01*c01+_this9._02*c02-_this9._03*c03<0){scale.x=-scale.x}var invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this2.self._00*invs;iron_math_Mat4.helpMat.self._01=_this2.self._01*invs;iron_math_Mat4.helpMat.self._02=_this2.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this2.self._10*invs;iron_math_Mat4.helpMat.self._11=_this2.self._11*invs;iron_math_Mat4.helpMat.self._12=_this2.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this2.self._20*invs;iron_math_Mat4.helpMat.self._21=_this2.self._21*invs;iron_math_Mat4.helpMat.self._22=_this2.self._22*invs;var m9=iron_math_Mat4.helpMat;var m11=m9.self._00;var m12=m9.self._10;var m13=m9.self._20;var m21=m9.self._01;var m22=m9.self._11;var m23=m9.self._21;var m311=m9.self._02;var m321=m9.self._12;var m331=m9.self._22;var tr=m11+m22+m331;var s1=0;if(tr>0){s1=.5/Math.sqrt(tr+1);quat.w=.25/s1;quat.x=(m321-m23)*s1;quat.y=(m13-m311)*s1;quat.z=(m21-m12)*s1}else if(m11>m22&&m11>m331){s1=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s1;quat.x=.25*s1;quat.y=(m12+m21)/s1;quat.z=(m13+m311)/s1}else if(m22>m331){s1=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s1;quat.x=(m12+m21)/s1;quat.y=.25*s1;quat.z=(m23+m321)/s1}else{s1=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s1;quat.x=(m13+m311)/s1;quat.y=(m23+m321)/s1;quat.z=.25*s1}var _this10=iron_object_BoneAnimation.m;var loc1=iron_object_BoneAnimation.vpos2;var quat1=iron_object_BoneAnimation.q2;var scale1=iron_object_BoneAnimation.vscl2;loc1.x=_this10.self._30;loc1.y=_this10.self._31;loc1.z=_this10.self._32;var _this11=iron_math_Mat4.helpVec;_this11.x=_this10.self._00;_this11.y=_this10.self._01;_this11.z=_this10.self._02;_this11.w=1;var _this12=_this11;scale1.x=Math.sqrt(_this12.x*_this12.x+_this12.y*_this12.y+_this12.z*_this12.z);var _this13=iron_math_Mat4.helpVec;_this13.x=_this10.self._10;_this13.y=_this10.self._11;_this13.z=_this10.self._12;_this13.w=1;var _this14=_this13;scale1.y=Math.sqrt(_this14.x*_this14.x+_this14.y*_this14.y+_this14.z*_this14.z);var _this15=iron_math_Mat4.helpVec;_this15.x=_this10.self._20;_this15.y=_this10.self._21;_this15.z=_this10.self._22;_this15.w=1;var _this16=_this15;scale1.z=Math.sqrt(_this16.x*_this16.x+_this16.y*_this16.y+_this16.z*_this16.z);var _this17=_this10.self;var m34=_this17._12;var m44=_this17._22;var m54=_this17._32;var m64=_this17._13;var m74=_this17._23;var m84=_this17._33;var c001=_this17._11*(m44*m84-m54*m74)-_this17._21*(m34*m84-m54*m64)+_this17._31*(m34*m74-m44*m64);var m35=_this17._12;var m45=_this17._22;var m55=_this17._32;var m65=_this17._13;var m75=_this17._23;var m85=_this17._33;var c011=_this17._10*(m45*m85-m55*m75)-_this17._20*(m35*m85-m55*m65)+_this17._30*(m35*m75-m45*m65);var m36=_this17._11;var m46=_this17._21;var m56=_this17._31;var m66=_this17._13;var m76=_this17._23;var m86=_this17._33;var c021=_this17._10*(m46*m86-m56*m76)-_this17._20*(m36*m86-m56*m66)+_this17._30*(m36*m76-m46*m66);var m37=_this17._11;var m47=_this17._21;var m57=_this17._31;var m67=_this17._12;var m77=_this17._22;var m87=_this17._32;var c031=_this17._10*(m47*m87-m57*m77)-_this17._20*(m37*m87-m57*m67)+_this17._30*(m37*m77-m47*m67);if(_this17._00*c001-_this17._01*c011+_this17._02*c021-_this17._03*c031<0){scale1.x=-scale1.x}var invs1=1/scale1.x;iron_math_Mat4.helpMat.self._00=_this10.self._00*invs1;iron_math_Mat4.helpMat.self._01=_this10.self._01*invs1;iron_math_Mat4.helpMat.self._02=_this10.self._02*invs1;invs1=1/scale1.y;iron_math_Mat4.helpMat.self._10=_this10.self._10*invs1;iron_math_Mat4.helpMat.self._11=_this10.self._11*invs1;iron_math_Mat4.helpMat.self._12=_this10.self._12*invs1;invs1=1/scale1.z;iron_math_Mat4.helpMat.self._20=_this10.self._20*invs1;iron_math_Mat4.helpMat.self._21=_this10.self._21*invs1;iron_math_Mat4.helpMat.self._22=_this10.self._22*invs1;var m10=iron_math_Mat4.helpMat;var m111=m10.self._00;var m121=m10.self._10;var m131=m10.self._20;var m211=m10.self._01;var m221=m10.self._11;var m231=m10.self._21;var m312=m10.self._02;var m322=m10.self._12;var m332=m10.self._22;var tr1=m111+m221+m332;var s2=0;if(tr1>0){s2=.5/Math.sqrt(tr1+1);quat1.w=.25/s2;quat1.x=(m322-m231)*s2;quat1.y=(m131-m312)*s2;quat1.z=(m211-m121)*s2}else if(m111>m221&&m111>m332){s2=2*Math.sqrt(1+m111-m221-m332);quat1.w=(m322-m231)/s2;quat1.x=.25*s2;quat1.y=(m121+m211)/s2;quat1.z=(m131+m312)/s2}else if(m221>m332){s2=2*Math.sqrt(1+m221-m111-m332);quat1.w=(m131-m312)/s2;quat1.x=(m121+m211)/s2;quat1.y=.25*s2;quat1.z=(m231+m322)/s2}else{s2=2*Math.sqrt(1+m332-m111-m221);quat1.w=(m211-m121)/s2;quat1.x=(m131+m312)/s2;quat1.y=(m231+m322)/s2;quat1.z=.25*s2}var _this18=iron_object_BoneAnimation.v1;var from=iron_object_BoneAnimation.vpos;var to=iron_object_BoneAnimation.vpos2;_this18.x=from.x+(to.x-from.x)*s;_this18.y=from.y+(to.y-from.y)*s;_this18.z=from.z+(to.z-from.z)*s;var _this19=iron_object_BoneAnimation.v2;var from1=iron_object_BoneAnimation.vscl;var to1=iron_object_BoneAnimation.vscl2;_this19.x=from1.x+(to1.x-from1.x)*s;_this19.y=from1.y+(to1.y-from1.y)*s;_this19.z=from1.z+(to1.z-from1.z)*s;var _this20=iron_object_BoneAnimation.q3;var from2=iron_object_BoneAnimation.q1;var to2=iron_object_BoneAnimation.q2;var fromx=from2.x;var fromy=from2.y;var fromz=from2.z;var fromw=from2.w;var dot=from2.x*to2.x+from2.y*to2.y+from2.z*to2.z+from2.w*to2.w;if(dot<0){fromx=-fromx;fromy=-fromy;fromz=-fromz;fromw=-fromw}_this20.x=fromx+(to2.x-fromx)*s;_this20.y=fromy+(to2.y-fromy)*s;_this20.z=fromz+(to2.z-fromz)*s;_this20.w=fromw+(to2.w-fromw)*s;var l=Math.sqrt(_this20.x*_this20.x+_this20.y*_this20.y+_this20.z*_this20.z+_this20.w*_this20.w);if(l==0){_this20.x=0;_this20.y=0;_this20.z=0;_this20.w=0}else{l=1/l;_this20.x*=l;_this20.y*=l;_this20.z*=l;_this20.w*=l}var _this21=iron_object_BoneAnimation.m;var q=iron_object_BoneAnimation.q3;var x=q.x;var y=q.y;var z=q.z;var w=q.w;var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;_this21.self._00=1-(yy+zz);_this21.self._10=xy-wz;_this21.self._20=xz+wy;_this21.self._01=xy+wz;_this21.self._11=1-(xx+zz);_this21.self._21=yz-wx;_this21.self._02=xz-wy;_this21.self._12=yz+wx;_this21.self._22=1-(xx+yy);_this21.self._03=0;_this21.self._13=0;_this21.self._23=0;_this21.self._30=0;_this21.self._31=0;_this21.self._32=0;_this21.self._33=1;var _this22=iron_object_BoneAnimation.m;var v=iron_object_BoneAnimation.v2;var x1=v.x;var y1=v.y;var z1=v.z;_this22.self._00*=x1;_this22.self._01*=x1;_this22.self._02*=x1;_this22.self._03*=x1;_this22.self._10*=y1;_this22.self._11*=y1;_this22.self._12*=y1;_this22.self._13*=y1;_this22.self._20*=z1;_this22.self._21*=z1;_this22.self._22*=z1;_this22.self._23*=z1;iron_object_BoneAnimation.m.self._30=iron_object_BoneAnimation.v1.x;iron_object_BoneAnimation.m.self._31=iron_object_BoneAnimation.v1.y;iron_object_BoneAnimation.m.self._32=iron_object_BoneAnimation.v1.z}if(this.absMats!=null&&i<this.absMats.length){var _this23=this.absMats[i];var m14=iron_object_BoneAnimation.m;_this23.self._00=m14.self._00;_this23.self._01=m14.self._01;_this23.self._02=m14.self._02;_this23.self._03=m14.self._03;_this23.self._10=m14.self._10;_this23.self._11=m14.self._11;_this23.self._12=m14.self._12;_this23.self._13=m14.self._13;_this23.self._20=m14.self._20;_this23.self._21=m14.self._21;_this23.self._22=m14.self._22;_this23.self._23=m14.self._23;_this23.self._30=m14.self._30;_this23.self._31=m14.self._31;_this23.self._32=m14.self._32;_this23.self._33=m14.self._33}if(this.boneChildren!=null){this.updateBoneChildren(bones[i],iron_object_BoneAnimation.m)}var _this24=iron_object_BoneAnimation.m;var b=iron_object_BoneAnimation.m;var a=this.data.geom.skeletonTransformsI[i];var a00=a.self._00;var a01=a.self._01;var a02=a.self._02;var a03=a.self._03;var a10=a.self._10;var a11=a.self._11;var a12=a.self._12;var a13=a.self._13;var a20=a.self._20;var a21=a.self._21;var a22=a.self._22;var a23=a.self._23;var a30=a.self._30;var a31=a.self._31;var a32=a.self._32;var a33=a.self._33;var b0=b.self._00;var b1=b.self._10;var b2=b.self._20;var b3=b.self._30;_this24.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this24.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this24.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this24.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this24.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this24.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this24.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this24.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this24.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this24.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this24.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this24.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this24.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this24.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this24.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this24.self._33=a30*b0+a31*b1+a32*b2+a33*b3;this.updateSkinBuffer(iron_object_BoneAnimation.m,i)}},updateSkinBuffer:function(m,i){var loc=iron_object_BoneAnimation.vpos;var quat=iron_object_BoneAnimation.q1;var scale=iron_object_BoneAnimation.vscl;loc.x=m.self._30;loc.y=m.self._31;loc.z=m.self._32;var _this=iron_math_Mat4.helpVec;_this.x=m.self._00;_this.y=m.self._01;_this.z=m.self._02;_this.w=1;var _this1=_this;scale.x=Math.sqrt(_this1.x*_this1.x+_this1.y*_this1.y+_this1.z*_this1.z);var _this=iron_math_Mat4.helpVec;_this.x=m.self._10;_this.y=m.self._11;_this.z=m.self._12;_this.w=1;var _this1=_this;scale.y=Math.sqrt(_this1.x*_this1.x+_this1.y*_this1.y+_this1.z*_this1.z);var _this=iron_math_Mat4.helpVec;_this.x=m.self._20;_this.y=m.self._21;_this.z=m.self._22;_this.w=1;var _this1=_this;scale.z=Math.sqrt(_this1.x*_this1.x+_this1.y*_this1.y+_this1.z*_this1.z);var _this=m.self;var m3=_this._12;var m4=_this._22;var m5=_this._32;var m6=_this._13;var m7=_this._23;var m8=_this._33;var c00=_this._11*(m4*m8-m5*m7)-_this._21*(m3*m8-m5*m6)+_this._31*(m3*m7-m4*m6);var m3=_this._12;var m4=_this._22;var m5=_this._32;var m6=_this._13;var m7=_this._23;var m8=_this._33;var c01=_this._10*(m4*m8-m5*m7)-_this._20*(m3*m8-m5*m6)+_this._30*(m3*m7-m4*m6);var m3=_this._11;var m4=_this._21;var m5=_this._31;var m6=_this._13;var m7=_this._23;var m8=_this._33;var c02=_this._10*(m4*m8-m5*m7)-_this._20*(m3*m8-m5*m6)+_this._30*(m3*m7-m4*m6);var m3=_this._11;var m4=_this._21;var m5=_this._31;var m6=_this._12;var m7=_this._22;var m8=_this._32;var c03=_this._10*(m4*m8-m5*m7)-_this._20*(m3*m8-m5*m6)+_this._30*(m3*m7-m4*m6);if(_this._00*c00-_this._01*c01+_this._02*c02-_this._03*c03<0){scale.x=-scale.x}var invs=1/scale.x;iron_math_Mat4.helpMat.self._00=m.self._00*invs;iron_math_Mat4.helpMat.self._01=m.self._01*invs;iron_math_Mat4.helpMat.self._02=m.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=m.self._10*invs;iron_math_Mat4.helpMat.self._11=m.self._11*invs;iron_math_Mat4.helpMat.self._12=m.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=m.self._20*invs;iron_math_Mat4.helpMat.self._21=m.self._21*invs;iron_math_Mat4.helpMat.self._22=m.self._22*invs;var m=iron_math_Mat4.helpMat;var m11=m.self._00;var m12=m.self._10;var m13=m.self._20;var m21=m.self._01;var m22=m.self._11;var m23=m.self._21;var m31=m.self._02;var m32=m.self._12;var m33=m.self._22;var tr=m11+m22+m33;var s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m32-m23)*s;quat.y=(m13-m31)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m33){s=2*Math.sqrt(1+m11-m22-m33);quat.w=(m32-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m31)/s}else if(m22>m33){s=2*Math.sqrt(1+m22-m11-m33);quat.w=(m13-m31)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m32)/s}else{s=2*Math.sqrt(1+m33-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m31)/s;quat.y=(m23+m32)/s;quat.z=.25*s}var _this=iron_object_BoneAnimation.q1;var l=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z+_this.w*_this.w);if(l==0){_this.x=0;_this.y=0;_this.z=0;_this.w=0}else{l=1/l;_this.x*=l;_this.y*=l;_this.z*=l;_this.w*=l}var _this=iron_object_BoneAnimation.q2;_this.x=iron_object_BoneAnimation.vpos.x;_this.y=iron_object_BoneAnimation.vpos.y;_this.z=iron_object_BoneAnimation.vpos.z;_this.w=0;var _this=iron_object_BoneAnimation.q2;var q1=iron_object_BoneAnimation.q2;var q2=iron_object_BoneAnimation.q1;var q1x=q1.x;var q1y=q1.y;var q1z=q1.z;var q1w=q1.w;var q2x=q2.x;var q2y=q2.y;var q2z=q2.z;var q2w=q2.w;_this.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;this.skinBuffer[i*8]=iron_object_BoneAnimation.q1.x;this.skinBuffer[i*8+1]=iron_object_BoneAnimation.q1.y;this.skinBuffer[i*8+2]=iron_object_BoneAnimation.q1.z;this.skinBuffer[i*8+3]=iron_object_BoneAnimation.q1.w;this.skinBuffer[i*8+4]=iron_object_BoneAnimation.q2.x*.5;this.skinBuffer[i*8+5]=iron_object_BoneAnimation.q2.y*.5;this.skinBuffer[i*8+6]=iron_object_BoneAnimation.q2.z*.5;this.skinBuffer[i*8+7]=iron_object_BoneAnimation.q2.w*.5},getBone:function(name){if(this.skeletonBones==null){return null}var _g=0;var _g1=this.skeletonBones;while(_g<_g1.length){var b=_g1[_g];++_g;if(b.name==name){return b}}return null},getBoneIndex:function(bone,bones){if(bones==null){bones=this.skeletonBones}if(bones!=null){var _g=0;var _g1=bones.length;while(_g<_g1){var i=_g++;if(bones[i]==bone){return i}}}return-1},__class__:iron_object_BoneAnimation});var iron_object_Object=function(){this.isEmpty=false;this.properties=null;this.culledShadow=false;this.culledMesh=false;this.culled=false;this.visibleShadow=true;this.visibleMesh=true;this.visible=true;this.animation=null;this.lods=null;this.children=[];this.parent=null;this.traits=[];this.constraints=null;this.name="";this.raw=null;this.uid=iron_object_Object.uidCounter++;this.urandom=iron_object_Object.seededRandom();this.transform=new iron_object_Transform(this);this.isEmpty=js_Boot.getClass(this)==iron_object_Object;if(this.isEmpty&&iron_Scene.active!=null){iron_Scene.active.empties.push(this)}};$hxClasses["iron.object.Object"]=iron_object_Object;iron_object_Object.__name__=true;iron_object_Object.seededRandom=function(){iron_object_Object.seed=(iron_object_Object.seed*9301+49297)%233280;return iron_object_Object.seed/233280};iron_object_Object.prototype={addChild:function(o,parentInverse){if(parentInverse==null){parentInverse=false}if(o.parent==this){return}this.children.push(o);o.parent=this;if(parentInverse){o.transform.applyParentInverse()}},remove:function(){if(this.isEmpty&&iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.empties,this)}if(this.animation!=null){this.animation.remove()}while(this.children.length>0)this.children[0].remove();while(this.traits.length>0)this.traits[0].remove();if(this.parent!=null){HxOverrides.remove(this.parent.children,this);this.parent=null}},getChild:function(name){if(this.name==name){return this}else{var _g=0;var _g1=this.children;while(_g<_g1.length){var c=_g1[_g];++_g;var r=c.getChild(name);if(r!=null){return r}}}return null},getChildren:function(recursive){if(recursive==null){recursive=false}if(!recursive){return this.children}var retChildren=this.children.slice();var _g=0;var _g1=this.children;while(_g<_g1.length){var child=_g1[_g];++_g;retChildren=retChildren.concat(child.getChildren(recursive))}return retChildren},addTrait:function(t){this.traits.push(t);t.object=this;if(t._add!=null){var _g=0;var _g1=t._add;while(_g<_g1.length){var f=_g1[_g];++_g;f()}t._add=null}},removeTrait:function(t){if(t._init!=null){var _g=0;var _g1=t._init;while(_g<_g1.length){var f=_g1[_g];++_g;iron_App.removeInit(f)}t._init=null}if(t._update!=null){var _g=0;var _g1=t._update;while(_g<_g1.length){var f=_g1[_g];++_g;iron_App.removeUpdate(f)}t._update=null}if(t._lateUpdate!=null){var _g=0;var _g1=t._lateUpdate;while(_g<_g1.length){var f=_g1[_g];++_g;iron_App.removeLateUpdate(f)}t._lateUpdate=null}if(t._render!=null){var _g=0;var _g1=t._render;while(_g<_g1.length){var f=_g1[_g];++_g;iron_App.removeRender(f)}t._render=null}if(t._render2D!=null){var _g=0;var _g1=t._render2D;while(_g<_g1.length){var f=_g1[_g];++_g;iron_App.removeRender2D(f)}t._render2D=null}if(t._remove!=null){var _g=0;var _g1=t._remove;while(_g<_g1.length){var f=_g1[_g];++_g;f()}t._remove=null}HxOverrides.remove(this.traits,t)},getTrait:function(c){var _g=0;var _g1=this.traits;while(_g<_g1.length){var t=_g1[_g];++_g;if(js_Boot.getClass(t)==c){return t}}return null},getParentArmature:function(name){var _g=0;var _g1=iron_Scene.active.animations;while(_g<_g1.length){var a=_g1[_g];++_g;if(a.armature!=null&&a.armature.name==name){return a}}return null},setupAnimation:function(oactions){var _gthis=this;if(this.raw.parent_bone!=null){iron_Scene.active.notifyOnInit(function(){var banim=_gthis.getParentArmature(_gthis.parent.name);if(banim!=null){banim.addBoneChild(_gthis.raw.parent_bone,_gthis)}})}if(oactions==null){return}this.animation=new iron_object_ObjectAnimation(this,oactions)},__class__:iron_object_Object};var iron_object_CameraObject=function(data){this.currentFace=0;this.renderTargetCube=null;this.renderTarget=null;this.frustumPlanes=null;this.prevV=null;iron_object_Object.call(this);this.data=data;this.buildProjection();this.V=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.VP=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);if(data.raw.frustum_culling){this.frustumPlanes=[];this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane)}iron_Scene.active.cameras.push(this)};$hxClasses["iron.object.CameraObject"]=iron_object_CameraObject;iron_object_CameraObject.__name__=true;iron_object_CameraObject.buildViewFrustum=function(VP,frustumPlanes){var _this=frustumPlanes[0];var _this1=_this.normal;_this1.x=VP.self._03+VP.self._00;_this1.y=VP.self._13+VP.self._10;_this1.z=VP.self._23+VP.self._20;_this1.w=1;_this.constant=VP.self._33+VP.self._30;var _this=frustumPlanes[1];var _this1=_this.normal;_this1.x=VP.self._03-VP.self._00;_this1.y=VP.self._13-VP.self._10;_this1.z=VP.self._23-VP.self._20;_this1.w=1;_this.constant=VP.self._33-VP.self._30;var _this=frustumPlanes[2];var _this1=_this.normal;_this1.x=VP.self._03-VP.self._01;_this1.y=VP.self._13-VP.self._11;_this1.z=VP.self._23-VP.self._21;_this1.w=1;_this.constant=VP.self._33-VP.self._31;var _this=frustumPlanes[3];var _this1=_this.normal;_this1.x=VP.self._03+VP.self._01;_this1.y=VP.self._13+VP.self._11;_this1.z=VP.self._23+VP.self._21;_this1.w=1;_this.constant=VP.self._33+VP.self._31;var _this=frustumPlanes[4];var _this1=_this.normal;_this1.x=VP.self._02;_this1.y=VP.self._12;_this1.z=VP.self._22;_this1.w=1;_this.constant=VP.self._32;var _this=frustumPlanes[5];var _this1=_this.normal;_this1.x=VP.self._03-VP.self._02;_this1.y=VP.self._13-VP.self._12;_this1.z=VP.self._23-VP.self._22;_this1.w=1;_this.constant=VP.self._33-VP.self._32;var _g=0;while(_g<frustumPlanes.length){var plane=frustumPlanes[_g];++_g;plane.normalize()}};iron_object_CameraObject.sphereInFrustum=function(frustumPlanes,t,radiusScale,offsetX,offsetY,offsetZ){if(offsetZ==null){offsetZ=0}if(offsetY==null){offsetY=0}if(offsetX==null){offsetX=0}if(radiusScale==null){radiusScale=1}var radius=t.radius*radiusScale;var _g=0;while(_g<frustumPlanes.length){var plane=frustumPlanes[_g];++_g;var _this=iron_object_CameraObject.sphereCenter;_this.x=t.world.self._30+offsetX;_this.y=t.world.self._31+offsetY;_this.z=t.world.self._32+offsetZ;_this.w=1;if(plane.distanceToSphere(iron_object_CameraObject.sphereCenter,radius)+radius*2<0){return false}}return true};iron_object_CameraObject.setCubeFace=function(m,eye,face,flip){if(flip==null){flip=false}var _this=iron_object_CameraObject.vcenter;_this.x=eye.x;_this.y=eye.y;_this.z=eye.z;_this.w=eye.w;var f=flip?-1:1;switch(face){case 0:var _this=iron_object_CameraObject.vcenter;_this.x+=f;_this.y+=0;_this.z+=0;var _this=iron_object_CameraObject.vup;_this.x=0;_this.y=-1*f;_this.z=0;_this.w=1;break;case 1:var _this=iron_object_CameraObject.vcenter;_this.x+=-1*f;_this.y+=0;_this.z+=0;var _this=iron_object_CameraObject.vup;_this.x=0;_this.y=-1*f;_this.z=0;_this.w=1;break;case 2:var _this=iron_object_CameraObject.vcenter;_this.x+=0;_this.y+=f;_this.z+=0;var _this=iron_object_CameraObject.vup;_this.x=0;_this.y=0;_this.z=f;_this.w=1;break;case 3:var _this=iron_object_CameraObject.vcenter;_this.x+=0;_this.y+=-1*f;_this.z+=0;var _this=iron_object_CameraObject.vup;_this.x=0;_this.y=0;_this.z=-1*f;_this.w=1;break;case 4:var _this=iron_object_CameraObject.vcenter;_this.x+=0;_this.y+=0;_this.z+=f;var _this=iron_object_CameraObject.vup;_this.x=0;_this.y=-1*f;_this.z=0;_this.w=1;break;case 5:var _this=iron_object_CameraObject.vcenter;_this.x+=0;_this.y+=0;_this.z+=-1*f;var _this=iron_object_CameraObject.vup;_this.x=0;_this.y=-1*f;_this.z=0;_this.w=1;break}var center=iron_object_CameraObject.vcenter;var up=iron_object_CameraObject.vup;var f0=center.x-eye.x;var f1=center.y-eye.y;var f2=center.z-eye.z;var n=1/Math.sqrt(f0*f0+f1*f1+f2*f2);f0*=n;f1*=n;f2*=n;var s0=f1*up.z-f2*up.y;var s1=f2*up.x-f0*up.z;var s2=f0*up.y-f1*up.x;n=1/Math.sqrt(s0*s0+s1*s1+s2*s2);s0*=n;s1*=n;s2*=n;var u0=s1*f2-s2*f1;var u1=s2*f0-s0*f2;var u2=s0*f1-s1*f0;var d0=-eye.x*s0-eye.y*s1-eye.z*s2;var d1=-eye.x*u0-eye.y*u1-eye.z*u2;var d2=eye.x*f0+eye.y*f1+eye.z*f2;m.self._00=s0;m.self._10=s1;m.self._20=s2;m.self._30=d0;m.self._01=u0;m.self._11=u1;m.self._21=u2;m.self._31=d1;m.self._02=-f0;m.self._12=-f1;m.self._22=-f2;m.self._32=d2;m.self._03=0;m.self._13=0;m.self._23=0;m.self._33=1};iron_object_CameraObject.__super__=iron_object_Object;iron_object_CameraObject.prototype=$extend(iron_object_Object.prototype,{buildProjection:function(screenAspect){if(this.data.raw.ortho!=null){var left=this.data.raw.ortho[0];var right=this.data.raw.ortho[1];var bottom=this.data.raw.ortho[2];var top=this.data.raw.ortho[3];var near=this.data.raw.near_plane;var far=this.data.raw.far_plane;var rl=right-left;var tb=top-bottom;var fn=far-near;var tx=-(right+left)/rl;var ty=-(top+bottom)/tb;var tz=-(far+near)/fn;this.P=new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1)}else{if(screenAspect==null){screenAspect=kha_System.windowWidth()/kha_System.windowHeight()}var aspect=this.data.raw.aspect!=null?this.data.raw.aspect:screenAspect;var zn=this.data.raw.near_plane;var zf=this.data.raw.far_plane;var uh=1/Math.tan(this.data.raw.fov/2);var uw=uh/aspect;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}},remove:function(){HxOverrides.remove(iron_Scene.active.cameras,this);iron_object_Object.prototype.remove.call(this)},renderFrame:function(g){this.buildMatrix();iron_RenderPath.active.renderFrame(g);var _this=this.prevV;var m=this.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33},buildMatrix:function(){this.transform.buildMatrix();var _this=this.transform.world;var x=Math.sqrt(_this.self._00*_this.self._00+_this.self._10*_this.self._10+_this.self._20*_this.self._20);var y=Math.sqrt(_this.self._01*_this.self._01+_this.self._11*_this.self._11+_this.self._21*_this.self._21);var z=Math.sqrt(_this.self._02*_this.self._02+_this.self._12*_this.self._12+_this.self._22*_this.self._22);if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}var sc_x=x;var sc_y=y;var sc_z=z;var sc_w=1;if(sc_x!=1||sc_y!=1||sc_z!=1){var _this=iron_object_CameraObject.temp;_this.x=1/sc_x;_this.y=1/sc_y;_this.z=1/sc_z;_this.w=1;var _this=this.transform.world;var v=iron_object_CameraObject.temp;var x=v.x;var y=v.y;var z=v.z;_this.self._00*=x;_this.self._01*=x;_this.self._02*=x;_this.self._03*=x;_this.self._10*=y;_this.self._11*=y;_this.self._12*=y;_this.self._13*=y;_this.self._20*=z;_this.self._21*=z;_this.self._22*=z;_this.self._23*=z}var _this=this.V;var m=this.transform.world;var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=this.VP;var b=this.P;var a=this.V;var a00=a.self._00;var a01=a.self._01;var a02=a.self._02;var a03=a.self._03;var a10=a.self._10;var a11=a.self._11;var a12=a.self._12;var a13=a.self._13;var a20=a.self._20;var a21=a.self._21;var a22=a.self._22;var a23=a.self._23;var a30=a.self._30;var a31=a.self._31;var a32=a.self._32;var a33=a.self._33;var b0=b.self._00;var b1=b.self._10;var b2=b.self._20;var b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;if(this.data.raw.frustum_culling){iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes)}if(this.prevV==null){this.prevV=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);var _this=this.prevV;var m=this.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}},__class__:iron_object_CameraObject});var iron_object_FrustumPlane=function(){this.constant=0;this.normal=new iron_math_Vec4(1,0,0)};$hxClasses["iron.object.FrustumPlane"]=iron_object_FrustumPlane;iron_object_FrustumPlane.__name__=true;iron_object_FrustumPlane.prototype={normalize:function(){var _this=this.normal;var inverseNormalLength=1/Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);var _this=this.normal;_this.x*=inverseNormalLength;_this.y*=inverseNormalLength;_this.z*=inverseNormalLength;this.constant*=inverseNormalLength},distanceToSphere:function(sphereCenter,sphereRadius){var _this=this.normal;return _this.x*sphereCenter.x+_this.y*sphereCenter.y+_this.z*sphereCenter.z+this.constant-sphereRadius},__class__:iron_object_FrustumPlane};var iron_object_Constraint=function(constr){this.target=null;this.raw=constr};$hxClasses["iron.object.Constraint"]=iron_object_Constraint;iron_object_Constraint.__name__=true;iron_object_Constraint.prototype={apply:function(transform){if(this.target==null&&this.raw.target!=null){this.target=iron_Scene.active.getChild(this.raw.target).transform}if(this.raw.type=="COPY_LOCATION"){if(this.raw.use_x){transform.world.self._30=this.target.loc.x;if(this.raw.use_offset){transform.world.self._30+=transform.loc.x}}if(this.raw.use_y){transform.world.self._31=this.target.loc.y;if(this.raw.use_offset){transform.world.self._31+=transform.loc.y}}if(this.raw.use_z){transform.world.self._32=this.target.loc.z;if(this.raw.use_offset){transform.world.self._32+=transform.loc.z}}}},__class__:iron_object_Constraint};var iron_object_LightObject=function(data){this.frustumPlanes=null;this.VP=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.P=null;this.V=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.camSlicedP=null;iron_object_Object.call(this);this.data=data;var type=data.raw.type;var fov=data.raw.fov;if(type=="sun"){if(iron_object_LightObject.corners==null){iron_object_LightObject.corners=[];iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4)}this.P=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}else if(type=="point"||type=="area"){var zn=data.raw.near_plane;var zf=data.raw.far_plane;var uh=1/Math.tan(fov/2);var uw=uh/1;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}else if(type=="spot"){var zn=data.raw.near_plane;var zf=data.raw.far_plane;var uh=1/Math.tan(fov/2);var uw=uh/1;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}iron_Scene.active.lights.push(this)};$hxClasses["iron.object.LightObject"]=iron_object_LightObject;iron_object_LightObject.__name__=true;iron_object_LightObject.setCorners=function(){var _this=iron_object_LightObject.corners[0];_this.x=-1;_this.y=-1;_this.z=1;_this.w=1;var _this=iron_object_LightObject.corners[1];_this.x=-1;_this.y=-1;_this.z=-1;_this.w=1;var _this=iron_object_LightObject.corners[2];_this.x=-1;_this.y=1;_this.z=1;_this.w=1;var _this=iron_object_LightObject.corners[3];_this.x=-1;_this.y=1;_this.z=-1;_this.w=1;var _this=iron_object_LightObject.corners[4];_this.x=1;_this.y=-1;_this.z=1;_this.w=1;var _this=iron_object_LightObject.corners[5];_this.x=1;_this.y=-1;_this.z=-1;_this.w=1;var _this=iron_object_LightObject.corners[6];_this.x=1;_this.y=1;_this.z=1;_this.w=1;var _this=iron_object_LightObject.corners[7];_this.x=1;_this.y=1;_this.z=-1;_this.w=1};iron_object_LightObject.__super__=iron_object_Object;iron_object_LightObject.prototype=$extend(iron_object_Object.prototype,{remove:function(){if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.lights,this)}iron_object_Object.prototype.remove.call(this)},buildMatrix:function(camera){this.transform.buildMatrix();if(this.data.raw.type=="sun"){this.setCascade(camera,0)}else{var _this=this.V;var m=this.transform.world;var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}this.updateViewFrustum(camera)}},setCascade:function(camera,cascade){var _this=iron_object_LightObject.m;var m=camera.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;if(this.camSlicedP==null){var ortho=camera.data.raw.ortho;if(ortho==null){var fov=camera.data.raw.fov;var near=this.data.raw.near_plane;var far=this.data.raw.far_plane;var aspect=camera.data.raw.aspect!=null?camera.data.raw.aspect:kha_System.windowWidth()/kha_System.windowHeight();var uh=1/Math.tan(fov/2);var uw=uh/aspect;this.camSlicedP=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(far+near)/(near-far),2*far*near/(near-far),0,0,-1,0)}else{var left=ortho[0];var right=ortho[1];var bottom=ortho[2];var top=ortho[3];var near=this.data.raw.near_plane;var far=this.data.raw.far_plane;var rl=right-left;var tb=top-bottom;var fn=far-near;var tx=-(right+left)/rl;var ty=-(top+bottom)/tb;var tz=-(far+near)/fn;this.camSlicedP=new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1)}}var _this=iron_object_LightObject.m;var m=this.camSlicedP;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m.self._00;var b1=m.self._10;var b2=m.self._20;var b3=m.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._01;b1=m.self._11;b2=m.self._21;b3=m.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._02;b1=m.self._12;b2=m.self._22;b3=m.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._03;b1=m.self._13;b2=m.self._23;b3=m.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_LightObject.m;var m=iron_object_LightObject.m;var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=this.V;var m=this.transform.world;var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=this.V;var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;var _this2=_this1;var scale=1/Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);_this.self._00*=scale;_this.self._01*=scale;_this.self._02*=scale;var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._10;_this1.y=_this.self._11;_this1.z=_this.self._12;_this1.w=1;var _this2=_this1;scale=1/Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);_this.self._10*=scale;_this.self._11*=scale;_this.self._12*=scale;var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._20;_this1.y=_this.self._21;_this1.z=_this.self._22;_this1.w=1;var _this2=_this1;scale=1/Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);_this.self._20*=scale;_this.self._21*=scale;_this.self._22*=scale;_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1;var _this=iron_object_LightObject.m;var m=this.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m.self._00;var b1=m.self._10;var b2=m.self._20;var b3=m.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._01;b1=m.self._11;b2=m.self._21;b3=m.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._02;b1=m.self._12;b2=m.self._22;b3=m.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._03;b1=m.self._13;b2=m.self._23;b3=m.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_LightObject.setCorners();var _g=0;var _g1=iron_object_LightObject.corners;while(_g<_g1.length){var v=_g1[_g];++_g;var m=iron_object_LightObject.m;var x=v.x;var y=v.y;var z=v.z;var w=v.w;v.x=m.self._00*x+m.self._10*y+m.self._20*z+m.self._30*w;v.y=m.self._01*x+m.self._11*y+m.self._21*z+m.self._31*w;v.z=m.self._02*x+m.self._12*y+m.self._22*z+m.self._32*w;v.w=m.self._03*x+m.self._13*y+m.self._23*z+m.self._33*w;v.x/=v.w;v.y/=v.w;v.z/=v.w;v.w=1}var minx=iron_object_LightObject.corners[0].x;var miny=iron_object_LightObject.corners[0].y;var minz=iron_object_LightObject.corners[0].z;var maxx=iron_object_LightObject.corners[0].x;var maxy=iron_object_LightObject.corners[0].y;var maxz=iron_object_LightObject.corners[0].z;var _g=0;var _g1=iron_object_LightObject.corners;while(_g<_g1.length){var v=_g1[_g];++_g;if(v.x<minx){minx=v.x}if(v.x>maxx){maxx=v.x}if(v.y<miny){miny=v.y}if(v.y>maxy){maxy=v.y}if(v.z<minz){minz=v.z}if(v.z>maxz){maxz=v.z}}var v1=iron_object_LightObject.corners[0];var v2=iron_object_LightObject.corners[7];var vx=v1.x-v2.x;var vy=v1.y-v2.y;var vz=v1.z-v2.z;var diag0=Math.sqrt(vx*vx+vy*vy+vz*vz);var offx=(diag0-(maxx-minx))*.5;var offy=(diag0-(maxy-miny))*.5;minx-=offx;maxx+=offx;miny-=offy;maxy+=offy;var smsize=this.data.raw.shadowmap_size;var worldPerTexelX=(maxx-minx)/smsize;var worldPerTexelY=(maxy-miny)/smsize;var worldPerTexelZ=(maxz-minz)/smsize;minx=Math.floor(minx/worldPerTexelX)*worldPerTexelX;miny=Math.floor(miny/worldPerTexelY)*worldPerTexelY;minz=Math.floor(minz/worldPerTexelZ)*worldPerTexelZ;maxx=Math.floor(maxx/worldPerTexelX)*worldPerTexelX;maxy=Math.floor(maxy/worldPerTexelY)*worldPerTexelY;maxz=Math.floor(maxz/worldPerTexelZ)*worldPerTexelZ;var hx=(maxx-minx)/2;var hy=(maxy-miny)/2;var hz=(maxz-minz)/2;this.V.self._30=-(minx+hx);this.V.self._31=-(miny+hy);this.V.self._32=-(minz+hz);var left=-hx;var bottom=-hy;var near=-hz*4*iron_object_LightObject.cascadeBounds;var rl=hx-left;var tb=hy-bottom;var fn=hz-near;var tx=-(hx+left)/rl;var ty=-(hy+bottom)/tb;var tz=-(hz+near)/fn;iron_object_LightObject.m=new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1);var _this=this.P;var m=iron_object_LightObject.m;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;this.updateViewFrustum(camera)},updateViewFrustum:function(camera){var _this=this.VP;var b=this.P;var a=this.V;var a00=a.self._00;var a01=a.self._01;var a02=a.self._02;var a03=a.self._03;var a10=a.self._10;var a11=a.self._11;var a12=a.self._12;var a13=a.self._13;var a20=a.self._20;var a21=a.self._21;var a22=a.self._22;var a23=a.self._23;var a30=a.self._30;var a31=a.self._31;var a32=a.self._32;var a33=a.self._33;var b0=b.self._00;var b1=b.self._10;var b2=b.self._20;var b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;if(camera.data.raw.frustum_culling){if(this.frustumPlanes==null){this.frustumPlanes=[];this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane)}iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes)}},setCubeFace:function(face,camera){var _this=iron_object_LightObject.eye;_this.x=this.transform.world.self._30;_this.y=this.transform.world.self._31;_this.z=this.transform.world.self._32;_this.w=1;var flip=face==2||face==3;iron_object_CameraObject.setCubeFace(this.V,iron_object_LightObject.eye,face,flip);this.updateViewFrustum(camera)},__class__:iron_object_LightObject});var iron_object_MeshObject=function(data,materials){this.force_context=null;this.skip_context=null;this.tilesheet=null;this.frustumCulling=true;this.screenSize=0;this.particleIndex=-1;this.particleOwner=null;this.particleChildren=null;this.particleSystems=null;this.materialIndex=0;this.data=null;iron_object_Object.call(this);this.materials=materials;this.setData(data);iron_Scene.active.meshes.push(this)};$hxClasses["iron.object.MeshObject"]=iron_object_MeshObject;iron_object_MeshObject.__name__=true;iron_object_MeshObject.__super__=iron_object_Object;iron_object_MeshObject.prototype=$extend(iron_object_Object.prototype,{setData:function(data){this.data=data;data.refcount++;data.geom.build();this.transform.scaleWorld=data.scalePos},remove:function(){if(this.particleChildren!=null){var _g=0;var _g1=this.particleChildren;while(_g<_g1.length){var c=_g1[_g];++_g;c.remove()}this.particleChildren=null}if(this.particleSystems!=null){var _g=0;var _g1=this.particleSystems;while(_g<_g1.length){var psys=_g1[_g];++_g;psys.remove()}this.particleSystems=null}if(this.tilesheet!=null){this.tilesheet.remove()}if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.meshes,this)}this.data.refcount--;iron_object_Object.prototype.remove.call(this)},setupAnimation:function(oactions){var hasAction=this.parent!=null&&this.parent.raw!=null&&this.parent.raw.bone_actions!=null;if(hasAction){var armatureName=this.parent.name;this.animation=this.getParentArmature(armatureName);if(this.animation==null){this.animation=new iron_object_BoneAnimation(armatureName)}if(this.data.isSkinned){js_Boot.__cast(this.animation,iron_object_BoneAnimation).setSkin(this)}}iron_object_Object.prototype.setupAnimation.call(this,oactions)},setupParticleSystem:function(sceneName,pref){if(this.particleSystems==null){this.particleSystems=[]}var psys=new iron_object_ParticleSystem(sceneName,pref);this.particleSystems.push(psys)},setupTilesheet:function(sceneName,tilesheet_ref,tilesheet_action_ref){this.tilesheet=new iron_object_Tilesheet(sceneName,tilesheet_ref,tilesheet_action_ref)},setCulled:function(isShadow,b){if(isShadow){this.culledShadow=b}else{this.culledMesh=b}this.culled=this.culledMesh&&this.culledShadow;return b},cullMaterial:function(context){var mats=this.materials;if(!(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true)&&!this.validContext(mats,context)){return true}var isShadow=context=="shadowmap";if(!this.visibleMesh&&!isShadow){return this.setCulled(isShadow,true)}if(!this.visibleShadow&&isShadow){return this.setCulled(isShadow,true)}if(this.skip_context==context){return this.setCulled(isShadow,true)}if(this.force_context!=null&&this.force_context!=context){return this.setCulled(isShadow,true)}if(context=="voxel"&&this.raw!=null&&this.raw.mobile==true){return this.setCulled(isShadow,true)}return this.setCulled(isShadow,false)},cullMesh:function(context,camera,light){if(camera==null){return false}if(camera.data.raw.frustum_culling&&this.frustumCulling){var radiusScale=this.data.isSkinned?2:1;if(this.particleSystems!=null||this.particleOwner!=null){radiusScale*=1e3}if(context=="voxel"){radiusScale*=100}if(this.data.geom.instanced){radiusScale*=100}var isShadow=context=="shadowmap";var frustumPlanes=isShadow?light.frustumPlanes:camera.frustumPlanes;if(isShadow&&light.data.raw.type!="sun"){light.transform.radius=light.data.raw.far_plane;if(!iron_object_CameraObject.sphereInFrustum(camera.frustumPlanes,light.transform)){return this.setCulled(isShadow,true)}}if(!iron_object_CameraObject.sphereInFrustum(frustumPlanes,this.transform,radiusScale)){return this.setCulled(isShadow,true)}}this.culled=false;return this.culled},skipContext:function(context,mat){if(mat.raw.skip_context!=null&&mat.raw.skip_context==context){return true}return false},getContexts:function(context,materials,materialContexts,shaderContexts){var _g=0;while(_g<materials.length){var mat=materials[_g];++_g;var found=false;var _g1=0;var _g2=mat.raw.contexts.length;while(_g1<_g2){var i=_g1++;if(HxOverrides.substr(mat.raw.contexts[i].name,0,context.length)==context){materialContexts.push(mat.contexts[i]);shaderContexts.push(mat.shader.getContext(context));found=true;break}}if(!found){materialContexts.push(null);shaderContexts.push(null)}}},render:function(g,context,bindParams){var _gthis=this;if(this.data==null||!this.data.geom.ready){return}if(!this.visible){return}if(this.cullMesh(context,iron_Scene.active.camera,iron_RenderPath.active.light)){return}var meshContext=this.raw!=null&&context=="mesh";if(this.raw!=null&&this.raw.is_particle&&this.particleOwner==null){return}if(this.particleSystems!=null&&meshContext){if(this.particleChildren==null){this.particleChildren=[];var _g=0;var _g1=this.particleSystems;while(_g<_g1.length){var psys=_g1[_g];++_g;iron_Scene.active.spawnObject(psys.data.raw.instance_object,null,function(o){if(o!=null){var c=o;_gthis.particleChildren.push(c);c.particleOwner=_gthis;c.particleIndex=_gthis.particleChildren.length-1}})}}var _g=0;var _g1=this.particleSystems.length;while(_g<_g1){var i=_g++;this.particleSystems[i].update(this.particleChildren[i],this)}}if(this.particleSystems!=null&&this.particleSystems.length>0&&!this.raw.render_emitter){return}if(this.tilesheet!=null){this.tilesheet.update()}if(this.cullMaterial(context)){return}var mats=this.materials;var lod=this;if(this.raw!=null&&this.raw.lods!=null&&this.raw.lods.length>0){var camera=iron_Scene.active.camera;var tr=this.transform;var volume=tr.dim.x*tr.dim.y*tr.dim.z;this.screenSize=volume*(1/this.cameraDistance);this.screenSize=this.screenSize>1?1:this.screenSize;if(this.lods==null){this.lods=[];var _g=0;var _g1=this.raw.lods;while(_g<_g1.length){var l=_g1[_g];++_g;if(l.object_ref==""){this.lods.push(null)}else{this.lods.push(iron_Scene.active.getChild(l.object_ref))}}}if(context=="voxel"){lod=this.lods[this.lods.length-1]}else{var _g=0;var _g1=this.raw.lods.length;while(_g<_g1){var i=_g++;if(this.screenSize>this.raw.lods[i].screen_size){break}lod=this.lods[i];if(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true){mats=lod.materials}}}if(lod==null){return}}if(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true&&!this.validContext(mats,context)){return}var materialContexts=[];var shaderContexts=[];this.getContexts(context,mats,materialContexts,shaderContexts);iron_object_Uniforms.posUnpack=this.data.scalePos;iron_object_Uniforms.texUnpack=this.data.scaleTex;this.transform.update();var ldata=lod.data;var _g=0;var _g1=ldata.geom.indexBuffers.length;while(_g<_g1){var i=_g++;var mi=ldata.geom.materialIndices[i];if(shaderContexts.length<=mi||shaderContexts[mi]==null){continue}this.materialIndex=mi;if(this.materials.length>mi&&this.skipContext(context,this.materials[mi])){continue}var scontext=shaderContexts[mi];if(scontext==null){continue}var elems=scontext.raw.vertex_elements;if(scontext.pipeState!=iron_object_MeshObject.lastPipeline){g.setPipeline(scontext.pipeState);iron_object_MeshObject.lastPipeline=scontext.pipeState}iron_object_Uniforms.setContextConstants(g,scontext,bindParams);iron_object_Uniforms.setObjectConstants(g,scontext,this);if(materialContexts.length>mi){iron_object_Uniforms.setMaterialConstants(g,scontext,materialContexts[mi])}if(ldata.geom.instancedVB!=null){g.setVertexBuffers([ldata.geom.get(elems),ldata.geom.instancedVB])}else{g.setVertexBuffer(ldata.geom.get(elems))}g.setIndexBuffer(ldata.geom.indexBuffers[i]);if(ldata.geom.instanced){g.drawIndexedVerticesInstanced(ldata.geom.instanceCount,ldata.geom.start,ldata.geom.count)}else{g.drawIndexedVertices(ldata.geom.start,ldata.geom.count)}}},validContext:function(mats,context){var _g=0;while(_g<mats.length){var mat=mats[_g];++_g;if(mat.getContext(context)!=null){return true}}return false},__class__:iron_object_MeshObject});var iron_object_ObjectAnimation=function(object,oactions){this.object=object;this.oactions=oactions;this.isSkinned=false;iron_object_Animation.call(this)};$hxClasses["iron.object.ObjectAnimation"]=iron_object_ObjectAnimation;iron_object_ObjectAnimation.__name__=true;iron_object_ObjectAnimation.__super__=iron_object_Animation;iron_object_ObjectAnimation.prototype=$extend(iron_object_Animation.prototype,{getAction:function(action){var _g=0;var _g1=this.oactions;while(_g<_g1.length){var a=_g1[_g];++_g;if(a!=null&&a.objects[0].name==action){return a.objects[0]}}return null},play:function(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=0}if(action==null){action=""}iron_object_Animation.prototype.play.call(this,action,onComplete,blendTime,speed,loop);if(this.action==""&&this.oactions[0]!=null){this.action=this.oactions[0].objects[0].name}this.oaction=this.getAction(this.action);if(this.oaction!=null){this.isSampled=this.oaction.sampled!=null&&this.oaction.sampled}},update:function(delta){if(!this.object.visible||this.object.culled||this.oaction==null){return}iron_object_Animation.prototype.update.call(this,delta);if(this.paused){return}if(!this.isSkinned){this.updateObjectAnim()}},updateObjectAnim:function(){this.updateTransformAnim(this.oaction.anim,this.object.transform);this.object.transform.buildMatrix()},isTrackEnd:function(track){if(this.speed>0){return this.frameIndex>=track.frames.length-2}else{return this.frameIndex<=0}},updateTransformAnim:function(anim,transform){if(anim==null){return}var total=anim.end*this.frameTime-anim.begin*this.frameTime;if(anim.has_delta){var t=transform;if(t.dloc==null){t.dloc=new iron_math_Vec4;t.drot=new iron_math_Quat;t.dscale=new iron_math_Vec4}var _this=t.dloc;_this.x=0;_this.y=0;_this.z=0;_this.w=1;var _this=t.dscale;_this.x=0;_this.y=0;_this.z=0;_this.w=1;t._deulerX=t._deulerY=t._deulerZ=0}var _g=0;var _g1=anim.tracks;while(_g<_g1.length){var track=_g1[_g];++_g;if(this.frameIndex==-1){this.rewind(track)}var sign=this.speed>0?1:-1;var t=this.time+anim.begin*this.frameTime;while(true){var frameValues=track.frames;if(!(this.speed>0?this.frameIndex<frameValues.length-2&&t>frameValues[this.frameIndex+1]*this.frameTime:this.frameIndex>1&&t>frameValues[this.frameIndex-1]*this.frameTime)){break}this.frameIndex+=sign}if(this.frameIndex>=track.frames.length){continue}if(this.time>total){if(this.onComplete!=null){this.onComplete()}if(this.loop){this.rewind(track)}else{this.frameIndex-=sign;this.paused=true}return}var ti=this.frameIndex;var t1=track.frames[ti]*this.frameTime;var t2=track.frames[ti+sign]*this.frameTime;var v1=track.values[ti];var v2=track.values[ti+sign];var s=(t-t1)/(t2-t1);var value=(1-s)*v1+s*v2;switch(track.target){case"dqwrot":transform.drot.w=value;break;case"dqxrot":transform.drot.x=value;break;case"dqyrot":transform.drot.y=value;break;case"dqzrot":transform.drot.z=value;break;case"dxloc":transform.dloc.x=value;break;case"dxrot":transform._deulerX=value;break;case"dxscl":transform.dscale.x=value;break;case"dyloc":transform.dloc.y=value;break;case"dyrot":transform._deulerY=value;break;case"dyscl":transform.dscale.y=value;break;case"dzloc":transform.dloc.z=value;break;case"dzrot":transform._deulerZ=value;break;case"dzscl":transform.dscale.z=value;break;case"qwrot":transform.rot.w=value;break;case"qxrot":transform.rot.x=value;break;case"qyrot":transform.rot.y=value;break;case"qzrot":transform.rot.z=value;break;case"xloc":transform.loc.x=value;break;case"xrot":transform.setRotation(value,transform._eulerY,transform._eulerZ);break;case"xscl":transform.scale.x=value;break;case"yloc":transform.loc.y=value;break;case"yrot":transform.setRotation(transform._eulerX,value,transform._eulerZ);break;case"yscl":transform.scale.y=value;break;case"zloc":transform.loc.z=value;break;case"zrot":transform.setRotation(transform._eulerX,transform._eulerY,value);break;case"zscl":transform.scale.z=value;break}}},__class__:iron_object_ObjectAnimation});var iron_object_ParticleSystem=function(sceneName,pref){this.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.lapTime=0;this.lap=0;this.count=0;this.seed=0;this.spawnRate=0;this.time=0;this.animtime=0;this.lifetime=0;this.frameRate=24;this.speed=1;var _gthis=this;this.seed=pref.seed;this.particles=[];this.ready=false;iron_data_Data.getParticle(sceneName,pref.particle,function(b){_gthis.data=b;_gthis.r=_gthis.data.raw;if(iron_Scene.active.raw.gravity!=null){_gthis.gx=iron_Scene.active.raw.gravity[0]*_gthis.r.weight_gravity;_gthis.gy=iron_Scene.active.raw.gravity[1]*_gthis.r.weight_gravity;_gthis.gz=iron_Scene.active.raw.gravity[2]*_gthis.r.weight_gravity}else{_gthis.gx=0;_gthis.gy=0;_gthis.gz=-9.81*_gthis.r.weight_gravity}_gthis.alignx=_gthis.r.object_align_factor[0]/2;_gthis.aligny=_gthis.r.object_align_factor[1]/2;_gthis.alignz=_gthis.r.object_align_factor[2]/2;_gthis.lifetime=_gthis.r.lifetime/_gthis.frameRate;_gthis.animtime=(_gthis.r.frame_end-_gthis.r.frame_start)/_gthis.frameRate;_gthis.spawnRate=(_gthis.r.frame_end-_gthis.r.frame_start)/_gthis.r.count/_gthis.frameRate;var _g=0;var _g1=_gthis.r.count;while(_g<_g1){var i=_g++;_gthis.particles.push(new iron_object_Particle(i))}_gthis.ready=true})};$hxClasses["iron.object.ParticleSystem"]=iron_object_ParticleSystem;iron_object_ParticleSystem.__name__=true;iron_object_ParticleSystem.prototype={update:function(object,owner){if(!this.ready||object==null||this.speed==0){return}object.transform.loc=owner.transform.loc;object.transform.rot=owner.transform.rot;object.transform.buildMatrix();owner.transform.buildMatrix();var _this=object.transform.dim;var v=owner.transform.dim;_this.x=v.x;_this.y=v.y;_this.z=v.z;_this.w=v.w;this.dimx=object.transform.dim.x;this.dimy=object.transform.dim.y;if(object.tilesheet!=null){this.tilesx=object.tilesheet.raw.tilesx;this.tilesy=object.tilesheet.raw.tilesy;this.tilesFramerate=object.tilesheet.raw.framerate}this.time+=iron_system_Time.realDelta*this.speed;this.lap=this.time/this.animtime|0;this.lapTime=this.time-this.lap*this.animtime;this.count=this.lapTime/this.spawnRate|0;this.updateGpu(object,owner)},getData:function(){var hair=this.r.type==1;this.m.self._00=this.r.loop?this.animtime:-this.animtime;this.m.self._01=hair?1/this.particles.length:this.spawnRate;this.m.self._02=hair?1:this.lifetime;this.m.self._03=this.particles.length;this.m.self._10=hair?0:this.alignx;this.m.self._11=hair?0:this.aligny;this.m.self._12=hair?0:this.alignz;this.m.self._13=hair?0:this.r.factor_random;this.m.self._20=hair?0:this.gx*this.r.mass;this.m.self._21=hair?0:this.gy*this.r.mass;this.m.self._22=hair?0:this.gz*this.r.mass;this.m.self._23=hair?0:this.r.lifetime_random;this.m.self._30=this.tilesx;this.m.self._31=this.tilesy;this.m.self._32=1/this.tilesFramerate;this.m.self._33=hair?1:this.lapTime;return this.m},updateGpu:function(object,owner){if(!object.data.geom.instanced){this.setupGeomGpu(object,owner)}},setupGeomGpu:function(object,owner){var this1=new Float32Array(this.particles.length*3);var instancedData=this1;var i=0;if(this.r.emit_from==0){var pa=owner.data.geom.positions;var sc=owner.data.scalePos;var _g=0;var _g1=this.particles;while(_g<_g1.length){var p=_g1[_g];++_g;var j=this.fhash(i)*(pa.values.length/pa.size)|0;instancedData[i]=pa.values[j*pa.size]/32767*sc;++i;instancedData[i]=pa.values[j*pa.size+1]/32767*sc;++i;instancedData[i]=pa.values[j*pa.size+2]/32767*sc;++i}}else{var _g=0;var _g1=this.particles;while(_g<_g1.length){var p=_g1[_g];++_g;instancedData[i]=(Math.random()*2-1)*(object.transform.dim.x/2);++i;instancedData[i]=(Math.random()*2-1)*(object.transform.dim.y/2);++i;instancedData[i]=(Math.random()*2-1)*(object.transform.dim.z/2);++i}}if(this.r.particle_size!=1){object.data.geom.applyScale(this.r.particle_size,this.r.particle_size,this.r.particle_size)}object.data.geom.setupInstanced(instancedData,1,0)},fhash:function(n){var s=n+1;s*=9301%s;s=(s*9301+49297)%233280;return s/233280},remove:function(){},__class__:iron_object_ParticleSystem};var iron_object_Particle=function(i){this.i=i};$hxClasses["iron.object.Particle"]=iron_object_Particle;iron_object_Particle.__name__=true;iron_object_Particle.prototype={__class__:iron_object_Particle};var iron_object_SpeakerObject=function(data){this.paused=false;this.channels=[];this.sound=null;var _gthis=this;iron_object_Object.call(this);this.data=data;iron_Scene.active.speakers.push(this);if(data.sound==""){return}iron_data_Data.getSound(data.sound,function(sound){_gthis.sound=sound;iron_App.notifyOnInit($bind(_gthis,_gthis.init))})};$hxClasses["iron.object.SpeakerObject"]=iron_object_SpeakerObject;iron_object_SpeakerObject.__name__=true;iron_object_SpeakerObject.__super__=iron_object_Object;iron_object_SpeakerObject.prototype=$extend(iron_object_Object.prototype,{init:function(){if(this.visible&&this.data.play_on_start){this.play()}},play:function(){if(this.sound==null||this.data.muted){return}if(this.paused){var _g=0;var _g1=this.channels;while(_g<_g1.length){var c=_g1[_g];++_g;c.play()}this.paused=false;return}var channel=iron_system_Audio.play(this.sound,this.data.loop,this.data.stream);this.channels.push(channel);if(this.data.attenuation>0&&this.channels.length==1){iron_App.notifyOnUpdate($bind(this,this.update))}},stop:function(){var _g=0;var _g1=this.channels;while(_g<_g1.length){var c=_g1[_g];++_g;c.stop()}this.channels.splice(0,this.channels.length)},update:function(){if(this.paused){return}var _g=0;var _g1=this.channels;while(_g<_g1.length){var c=_g1[_g];++_g;if(c.get_finished()){HxOverrides.remove(this.channels,c)}}if(this.channels.length==0){iron_App.removeUpdate($bind(this,this.update));return}var cam=iron_Scene.active.camera;var _this=cam.transform.world;var x=_this.self._30;var y=_this.self._31;var z=_this.self._32;var w=_this.self._33;if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}var loc1_x=x;var loc1_y=y;var loc1_z=z;var loc1_w=w;var _this=this.transform.world;var x=_this.self._30;var y=_this.self._31;var z=_this.self._32;var w=_this.self._33;if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}var loc2_x=x;var loc2_y=y;var loc2_z=z;var loc2_w=w;var vx=loc1_x-loc2_x;var vy=loc1_y-loc2_y;var vz=loc1_z-loc2_z;var d=Math.sqrt(vx*vx+vy*vy+vz*vz);d*=this.data.attenuation;var vol=1-Math.min(d/100,1);var _g=0;var _g1=this.channels;while(_g<_g1.length){var c=_g1[_g];++_g;c.set_volume(vol*this.data.volume)}},remove:function(){this.stop();if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.speakers,this)}iron_object_Object.prototype.remove.call(this)},__class__:iron_object_SpeakerObject});var iron_object_Tilesheet=function(sceneName,tilesheet_ref,tilesheet_action_ref){this.onActionComplete=null;this.time=0;this.frame=0;this.paused=false;this.action=null;this.tileY=0;this.tileX=0;var _gthis=this;this.ready=false;iron_data_Data.getSceneRaw(sceneName,function(format){var _g=0;var _g1=format.tilesheet_datas;while(_g<_g1.length){var ts=_g1[_g];++_g;if(ts.name==tilesheet_ref){_gthis.raw=ts;_gthis.play(tilesheet_action_ref);_gthis.ready=true;break}}})};$hxClasses["iron.object.Tilesheet"]=iron_object_Tilesheet;iron_object_Tilesheet.__name__=true;iron_object_Tilesheet.prototype={play:function(action_ref,onActionComplete){this.onActionComplete=onActionComplete;var _g=0;var _g1=this.raw.actions;while(_g<_g1.length){var a=_g1[_g];++_g;if(a.name==action_ref){this.action=a;break}}this.setFrame(this.action.start);this.paused=false},remove:function(){},update:function(){if(!this.ready||this.paused||this.action.start>=this.action.end){return}this.time+=1/iron_system_Time.frequency*iron_system_Time.scale;if(this.time>=1/this.raw.framerate){this.setFrame(this.frame+1)}},setFrame:function(f){this.frame=f;this.time=0;var tx=this.frame%this.raw.tilesx;var ty=this.frame/this.raw.tilesx|0;this.tileX=tx*(1/this.raw.tilesx);this.tileY=ty*(1/this.raw.tilesy);if(this.frame>=this.action.end&&this.action.start<this.action.end){if(this.onActionComplete!=null){this.onActionComplete()}if(this.action.loop){this.setFrame(this.action.start)}else{this.paused=true}}},__class__:iron_object_Tilesheet};var iron_object_Transform=function(object){this.dscale=null;this.drot=null;this.dloc=null;this.boneParent=null;this.scaleWorld=1;this.localOnly=false;this.object=object;this.reset()};$hxClasses["iron.object.Transform"]=iron_object_Transform;iron_object_Transform.__name__=true;iron_object_Transform.prototype={reset:function(){this.world=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.worldUnpack=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.local=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.loc=new iron_math_Vec4;this.rot=new iron_math_Quat;this.scale=new iron_math_Vec4(1,1,1);this.dim=new iron_math_Vec4(2,2,2);this.radius=1;this.dirty=true},update:function(){if(this.dirty){this.buildMatrix()}},composeDelta:function(){var _this=this.dloc;var a=this.loc;var b=this.dloc;_this.x=a.x+b.x;_this.y=a.y+b.y;_this.z=a.z+b.z;var _this=this.dscale;var a=this.dscale;var b=this.scale;_this.x=a.x+b.x;_this.y=a.y+b.y;_this.z=a.z+b.z;var _this=this.drot;var f=this._deulerX/2;var c1=Math.cos(f);var s1=Math.sin(f);f=this._deulerY/2;var c2=Math.cos(f);var s2=Math.sin(f);f=this._deulerZ/2;var c3=Math.cos(f);var s3=Math.sin(f);_this.x=s1*c2*c3+c1*s2*s3;_this.y=c1*s2*c3+s1*c2*s3;_this.z=c1*c2*s3-s1*s2*c3;_this.w=c1*c2*c3-s1*s2*s3;var _this=this.drot;var q1=this.rot;var q2=this.drot;var q1x=q1.x;var q1y=q1.y;var q1z=q1.z;var q1w=q1.w;var q2x=q2.x;var q2y=q2.y;var q2z=q2.z;var q2w=q2.w;_this.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;var _this=this.local;var loc=this.dloc;var quat=this.drot;var sc=this.dscale;var x=quat.x;var y=quat.y;var z=quat.z;var w=quat.w;var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;_this.self._00=1-(yy+zz);_this.self._10=xy-wz;_this.self._20=xz+wy;_this.self._01=xy+wz;_this.self._11=1-(xx+zz);_this.self._21=yz-wx;_this.self._02=xz-wy;_this.self._12=yz+wx;_this.self._22=1-(xx+yy);_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1;var x=sc.x;var y=sc.y;var z=sc.z;_this.self._00*=x;_this.self._01*=x;_this.self._02*=x;_this.self._03*=x;_this.self._10*=y;_this.self._11*=y;_this.self._12*=y;_this.self._13*=y;_this.self._20*=z;_this.self._21*=z;_this.self._22*=z;_this.self._23*=z;_this.self._30=loc.x;_this.self._31=loc.y;_this.self._32=loc.z},buildMatrix:function(){if(this.dloc==null){var _this=this.local;var loc=this.loc;var quat=this.rot;var sc=this.scale;var x=quat.x;var y=quat.y;var z=quat.z;var w=quat.w;var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;_this.self._00=1-(yy+zz);_this.self._10=xy-wz;_this.self._20=xz+wy;_this.self._01=xy+wz;_this.self._11=1-(xx+zz);_this.self._21=yz-wx;_this.self._02=xz-wy;_this.self._12=yz+wx;_this.self._22=1-(xx+yy);_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1;var x=sc.x;var y=sc.y;var z=sc.z;_this.self._00*=x;_this.self._01*=x;_this.self._02*=x;_this.self._03*=x;_this.self._10*=y;_this.self._11*=y;_this.self._12*=y;_this.self._13*=y;_this.self._20*=z;_this.self._21*=z;_this.self._22*=z;_this.self._23*=z;_this.self._30=loc.x;_this.self._31=loc.y;_this.self._32=loc.z}else{this.composeDelta()}if(this.boneParent!=null){var _this=this.local;var b=this.boneParent;var a=this.local;var a00=a.self._00;var a01=a.self._01;var a02=a.self._02;var a03=a.self._03;var a10=a.self._10;var a11=a.self._11;var a12=a.self._12;var a13=a.self._13;var a20=a.self._20;var a21=a.self._21;var a22=a.self._22;var a23=a.self._23;var a30=a.self._30;var a31=a.self._31;var a32=a.self._32;var a33=a.self._33;var b0=b.self._00;var b1=b.self._10;var b2=b.self._20;var b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3}if(this.object.parent!=null&&!this.localOnly){var _this=this.world;var a=this.local;var b=this.object.parent.transform.world;var a00=a.self._00;var a01=a.self._01;var a02=a.self._02;var a03=a.self._03;var a10=a.self._10;var a11=a.self._11;var a12=a.self._12;var a13=a.self._13;var a20=a.self._20;var a21=a.self._21;var a22=a.self._22;var a23=a.self._23;var a30=a.self._30;var a31=a.self._31;var a32=a.self._32;var a33=a.self._33;var b0=b.self._00;var b1=b.self._10;var b2=b.self._20;var b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._33=1}else{var _this=this.world;var m=this.local;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}var _this=this.worldUnpack;var m=this.world;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;if(this.scaleWorld!=1){this.worldUnpack.self._00*=this.scaleWorld;this.worldUnpack.self._01*=this.scaleWorld;this.worldUnpack.self._02*=this.scaleWorld;this.worldUnpack.self._03*=this.scaleWorld;this.worldUnpack.self._10*=this.scaleWorld;this.worldUnpack.self._11*=this.scaleWorld;this.worldUnpack.self._12*=this.scaleWorld;this.worldUnpack.self._13*=this.scaleWorld;this.worldUnpack.self._20*=this.scaleWorld;this.worldUnpack.self._21*=this.scaleWorld;this.worldUnpack.self._22*=this.scaleWorld;this.worldUnpack.self._23*=this.scaleWorld}if(this.object.constraints!=null){var _g=0;var _g1=this.object.constraints;while(_g<_g1.length){var c=_g1[_g];++_g;c.apply(this)}}this.computeDim();var _g=0;var _g1=this.object.children;while(_g<_g1.length){var n=_g1[_g];++_g;n.transform.buildMatrix()}this.dirty=false},translate:function(x,y,z){this.loc.x+=x;this.loc.y+=y;this.loc.z+=z;this.buildMatrix()},decompose:function(){var _this=this.local;var loc=this.loc;var quat=this.rot;var scale=this.scale;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;var _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._10;_this1.y=_this.self._11;_this1.z=_this.self._12;_this1.w=1;var _this2=_this1;scale.y=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._20;_this1.y=_this.self._21;_this1.z=_this.self._22;_this1.w=1;var _this2=_this1;scale.z=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);var _this1=_this.self;var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c00=_this1._11*(m4*m8-m5*m7)-_this1._21*(m3*m8-m5*m6)+_this1._31*(m3*m7-m4*m6);var m3=_this1._12;var m4=_this1._22;var m5=_this1._32;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c01=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._13;var m7=_this1._23;var m8=_this1._33;var c02=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);var m3=_this1._11;var m4=_this1._21;var m5=_this1._31;var m6=_this1._12;var m7=_this1._22;var m8=_this1._32;var c03=_this1._10*(m4*m8-m5*m7)-_this1._20*(m3*m8-m5*m6)+_this1._30*(m3*m7-m4*m6);if(_this1._00*c00-_this1._01*c01+_this1._02*c02-_this1._03*c03<0){scale.x=-scale.x}var invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;var m=iron_math_Mat4.helpMat;var m11=m.self._00;var m12=m.self._10;var m13=m.self._20;var m21=m.self._01;var m22=m.self._11;var m23=m.self._21;var m31=m.self._02;var m32=m.self._12;var m33=m.self._22;var tr=m11+m22+m33;var s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m32-m23)*s;quat.y=(m13-m31)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m33){s=2*Math.sqrt(1+m11-m22-m33);quat.w=(m32-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m31)/s}else if(m22>m33){s=2*Math.sqrt(1+m22-m11-m33);quat.w=(m13-m31)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m32)/s}else{s=2*Math.sqrt(1+m33-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m31)/s;quat.y=(m23+m32)/s;quat.z=.25*s}},rotate:function(axis,f){var _this=iron_object_Transform.q;var s=Math.sin(f*.5);_this.x=axis.x*s;_this.y=axis.y*s;_this.z=axis.z*s;_this.w=Math.cos(f*.5);var l=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z+_this.w*_this.w);if(l==0){_this.x=0;_this.y=0;_this.z=0;_this.w=0}else{l=1/l;_this.x*=l;_this.y*=l;_this.z*=l;_this.w*=l}var _this=this.rot;var q1=iron_object_Transform.q;var q2=this.rot;var q1x=q1.x;var q1y=q1.y;var q1z=q1.z;var q1w=q1.w;var q2x=q2.x;var q2y=q2.y;var q2z=q2.z;var q2w=q2.w;_this.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;this.buildMatrix()},setRotation:function(x,y,z){var _this=this.rot;var f=x/2;var c1=Math.cos(f);var s1=Math.sin(f);f=y/2;var c2=Math.cos(f);var s2=Math.sin(f);f=z/2;var c3=Math.cos(f);var s3=Math.sin(f);_this.x=s1*c2*c3+c1*s2*s3;_this.y=c1*s2*c3+s1*c2*s3;_this.z=c1*c2*s3-s1*s2*c3;_this.w=c1*c2*c3-s1*s2*s3;this._eulerX=x;this._eulerY=y;this._eulerZ=z;this.dirty=true},computeRadius:function(){this.radius=Math.sqrt(this.dim.x*this.dim.x+this.dim.y*this.dim.y+this.dim.z*this.dim.z)},computeDim:function(){if(this.object.raw==null){this.computeRadius();return}var d=this.object.raw.dimensions;if(d==null){var _this=this.dim;_this.x=2*this.scale.x;_this.y=2*this.scale.y;_this.z=2*this.scale.z;_this.w=1}else{var _this=this.dim;var y=d[1]*this.scale.y;var z=d[2]*this.scale.z;_this.x=d[0]*this.scale.x;_this.y=y;_this.z=z;_this.w=1}this.computeRadius()},applyParentInverse:function(){var pt=this.object.parent.transform;pt.buildMatrix();var _this=iron_object_Transform.temp;var m=pt.world;var a00=m.self._00;var a01=m.self._01;var a02=m.self._02;var a03=m.self._03;var a10=m.self._10;var a11=m.self._11;var a12=m.self._12;var a13=m.self._13;var a20=m.self._20;var a21=m.self._21;var a22=m.self._22;var a23=m.self._23;var a30=m.self._30;var a31=m.self._31;var a32=m.self._32;var a33=m.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=this.local;var m=iron_object_Transform.temp;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m.self._00;var b1=m.self._10;var b2=m.self._20;var b3=m.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._01;b1=m.self._11;b2=m.self._21;b3=m.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._02;b1=m.self._12;b2=m.self._22;b3=m.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._03;b1=m.self._13;b2=m.self._23;b3=m.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;this.decompose();this.buildMatrix()},__class__:iron_object_Transform};var kha_math_FastMatrix3=function(_00,_10,_20,_01,_11,_21,_02,_12,_22){this._00=_00;this._10=_10;this._20=_20;this._01=_01;this._11=_11;this._21=_21;this._02=_02;this._12=_12;this._22=_22};$hxClasses["kha.math.FastMatrix3"]=kha_math_FastMatrix3;kha_math_FastMatrix3.__name__=true;kha_math_FastMatrix3.prototype={__class__:kha_math_FastMatrix3};var iron_object_Uniforms=function(){};$hxClasses["iron.object.Uniforms"]=iron_object_Uniforms;iron_object_Uniforms.__name__=true;iron_object_Uniforms.setContextConstants=function(g,context,bindParams){if(context.raw.constants!=null){var _g=0;var _g1=context.raw.constants.length;while(_g<_g1){var i=_g++;var c=context.raw.constants[i];iron_object_Uniforms.setContextConstant(g,context.constants[i],c)}}if(bindParams!=null){var _g=0;var _g1=bindParams.length/2|0;while(_g<_g1){var i=_g++;var pos=i*2;var rtID=bindParams[pos];var samplerID=bindParams[pos+1];var attachDepth=false;var char=rtID.charAt(0);if(char=="_"){attachDepth=true;rtID=HxOverrides.substr(rtID,1,null)}var rt=attachDepth?iron_RenderPath.active.depthToRenderTarget.h[rtID]:iron_RenderPath.active.renderTargets.h[rtID];iron_object_Uniforms.bindRenderTarget(g,rt,context,samplerID,attachDepth)}}if(context.raw.texture_units!=null){var _g=0;var _g1=context.raw.texture_units.length;while(_g<_g1){var j=_g++;var tulink=context.raw.texture_units[j].link;if(tulink==null){continue}if(tulink.charAt(0)=="$"){g.setTexture(context.textureUnits[j],iron_Scene.active.embedded.h[HxOverrides.substr(tulink,1,null)]);if(StringTools.endsWith(tulink,".raw")){g.setTexture3DParameters(context.textureUnits[j],0,0,0,1,1,0)}else{g.setTextureParameters(context.textureUnits[j],0,0,1,1,0)}}else{switch(tulink){case"_envmap":var w=iron_Scene.active.world;if(w!=null){g.setTexture(context.textureUnits[j],w.envmap);g.setTextureParameters(context.textureUnits[j],0,0,1,1,0)}break;case"_envmapRadiance":var w1=iron_Scene.active.world;if(w1!=null){g.setTexture(context.textureUnits[j],w1.probe.radiance);g.setTextureParameters(context.textureUnits[j],0,0,1,1,2)}break}}}}};iron_object_Uniforms.setObjectConstants=function(g,context,object){if(context.raw.constants!=null){var _g=0;var _g1=context.raw.constants.length;while(_g<_g1){var i=_g++;var c=context.raw.constants[i];iron_object_Uniforms.setObjectConstant(g,object,context.constants[i],c)}}if(iron_object_Uniforms.externalTextureLinks!=null){if(context.raw.texture_units!=null){var _g=0;var _g1=context.raw.texture_units.length;while(_g<_g1){var j=_g++;var tulink=context.raw.texture_units[j].link;if(tulink==null){continue}var _g2=0;var _g3=iron_object_Uniforms.externalTextureLinks;while(_g2<_g3.length){var f=_g3[_g2];++_g2;var image=f(object,iron_object_Uniforms.currentMat(object),tulink);if(image!=null){if(StringTools.endsWith(tulink,"_depth")){g.setTextureDepth(context.textureUnits[j],image)}else{g.setTexture(context.textureUnits[j],image)}g.setTextureParameters(context.textureUnits[j],0,0,1,1,0);break}}}}}};iron_object_Uniforms.bindRenderTarget=function(g,rt,context,samplerID,attachDepth){if(rt!=null){var tus=context.raw.texture_units;var _g=0;var _g1=tus.length;while(_g<_g1){var j=_g++;if(samplerID==tus[j].name){var isImage=tus[j].is_image!=null&&tus[j].is_image;var paramsSet=false;if(rt.raw.depth>1){g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,2,2);paramsSet=true}if(isImage){g.setImageTexture(context.textureUnits[j],rt.image);g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,0,2);paramsSet=true}else if(rt.isCubeMap){if(attachDepth){g.setCubeMapDepth(context.textureUnits[j],rt.cubeMap)}else{g.setCubeMap(context.textureUnits[j],rt.cubeMap)}}else if(attachDepth){g.setTextureDepth(context.textureUnits[j],rt.image)}else{g.setTexture(context.textureUnits[j],rt.image)}if(!paramsSet&&rt.raw.mipmaps!=null&&rt.raw.mipmaps==true&&!isImage){g.setTextureParameters(context.textureUnits[j],2,2,1,1,2);paramsSet=true}if(!paramsSet){if(StringTools.startsWith(samplerID,"shadowMap")){if(rt.isCubeMap){g.setCubeMapCompareMode(context.textureUnits[j],true)}else{g.setTextureParameters(context.textureUnits[j],2,2,1,1,0);g.setTextureCompareMode(context.textureUnits[j],true)}paramsSet=true}else if(attachDepth){g.setTextureParameters(context.textureUnits[j],2,2,0,0,0);paramsSet=true}}if(!paramsSet){var oc=context.overrideContext;var allowParams=oc==null||oc.shared_sampler==null||oc.shared_sampler==samplerID;if(allowParams){var addressing=oc!=null&&oc.addressing=="repeat"?0:2;var filter=oc!=null&&oc.filter=="point"?0:iron_object_Uniforms.defaultFilter;g.setTextureParameters(context.textureUnits[j],addressing,addressing,filter,filter,0)}paramsSet=true}}}}};iron_object_Uniforms.setContextConstant=function(g,location,c){if(c.link==null){return true}var camera=iron_Scene.active.camera;var light=iron_RenderPath.active.light;if(c.type=="mat4"){var m=null;switch(c.link){case"_biasLightViewProjectionMatrix":if(light!=null){var _this=iron_object_Uniforms.helpMat;var m1=light.VP;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=iron_object_Uniforms.biasMat;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_inverseProjectionMatrix":var _this=iron_object_Uniforms.helpMat;var m1=camera.P;var a00=m1.self._00;var a01=m1.self._01;var a02=m1.self._02;var a03=m1.self._03;var a10=m1.self._10;var a11=m1.self._11;var a12=m1.self._12;var a13=m1.self._13;var a20=m1.self._20;var a21=m1.self._21;var a22=m1.self._22;var a23=m1.self._23;var a30=m1.self._30;var a31=m1.self._31;var a32=m1.self._32;var a33=m1.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}m=iron_object_Uniforms.helpMat;break;case"_inverseViewProjectionMatrix":var _this=iron_object_Uniforms.helpMat;var m1=camera.V;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.P;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_Uniforms.helpMat;var m1=iron_object_Uniforms.helpMat;var a00=m1.self._00;var a01=m1.self._01;var a02=m1.self._02;var a03=m1.self._03;var a10=m1.self._10;var a11=m1.self._11;var a12=m1.self._12;var a13=m1.self._13;var a20=m1.self._20;var a21=m1.self._21;var a22=m1.self._22;var a23=m1.self._23;var a30=m1.self._30;var a31=m1.self._31;var a32=m1.self._32;var a33=m1.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}m=iron_object_Uniforms.helpMat;break;case"_lightViewProjectionMatrix":if(light!=null){m=light.VP}break;case"_prevViewProjectionMatrix":var _this=iron_object_Uniforms.helpMat;var m1=camera.prevV;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.P;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat;break;case"_projectionMatrix":m=camera.P;break;case"_skydomeMatrix":var tr=camera.transform;var _this=iron_object_Uniforms.helpVec;_this.x=tr.world.self._30;_this.y=tr.world.self._31;_this.z=tr.world.self._32-3.5;_this.w=1;var bounds=camera.data.raw.far_plane*.95;var _this=iron_object_Uniforms.helpVec2;_this.x=bounds;_this.y=bounds;_this.z=bounds;_this.w=1;var _this=iron_object_Uniforms.helpMat;var loc=iron_object_Uniforms.helpVec;var quat=iron_object_Uniforms.helpQuat;var sc=iron_object_Uniforms.helpVec2;var x=quat.x;var y=quat.y;var z=quat.z;var w=quat.w;var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;_this.self._00=1-(yy+zz);_this.self._10=xy-wz;_this.self._20=xz+wy;_this.self._01=xy+wz;_this.self._11=1-(xx+zz);_this.self._21=yz-wx;_this.self._02=xz-wy;_this.self._12=yz+wx;_this.self._22=1-(xx+yy);_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1;var x=sc.x;var y=sc.y;var z=sc.z;_this.self._00*=x;_this.self._01*=x;_this.self._02*=x;_this.self._03*=x;_this.self._10*=y;_this.self._11*=y;_this.self._12*=y;_this.self._13*=y;_this.self._20*=z;_this.self._21*=z;_this.self._22*=z;_this.self._23*=z;_this.self._30=loc.x;_this.self._31=loc.y;_this.self._32=loc.z;var _this=iron_object_Uniforms.helpMat;var m1=camera.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_Uniforms.helpMat;var m1=camera.P;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat;break;case"_transposeViewMatrix":var _this=iron_object_Uniforms.helpMat;var m1=camera.V;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var f=_this.self._01;_this.self._01=_this.self._10;_this.self._10=f;f=_this.self._02;_this.self._02=_this.self._20;_this.self._20=f;f=_this.self._12;_this.self._12=_this.self._21;_this.self._21=f;m=iron_object_Uniforms.helpMat;break;case"_viewMatrix":m=camera.V;break;case"_viewProjectionMatrix":m=camera.VP;break}if(m!=null){g.setMatrix(location,m.self);return true}}else if(c.type=="vec4"){var v=null;var _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;if(v!=null){g.setFloat4(location,v.x,v.y,v.z,v.w);return true}}else if(c.type=="vec3"){var v=null;var _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;switch(c.link){case"_backgroundCol":if(camera.data.raw.clear_color!=null){var _this=iron_object_Uniforms.helpVec;var y=camera.data.raw.clear_color[1];var z=camera.data.raw.clear_color[2];_this.x=camera.data.raw.clear_color[0];_this.y=y;_this.z=z;_this.w=1}v=iron_object_Uniforms.helpVec;break;case"_cameraLook":var _this=new iron_math_Vec4(-camera.transform.world.self._20,-camera.transform.world.self._21,-camera.transform.world.self._22);var n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){var invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec;break;case"_cameraPosition":var _this=iron_object_Uniforms.helpVec;_this.x=camera.transform.world.self._30;_this.y=camera.transform.world.self._31;_this.z=camera.transform.world.self._32;_this.w=1;v=iron_object_Uniforms.helpVec;break;case"_cameraRight":var _this=new iron_math_Vec4(camera.transform.world.self._00,camera.transform.world.self._01,camera.transform.world.self._02);var n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){var invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec;break;case"_cameraUp":var _this=new iron_math_Vec4(camera.transform.world.self._10,camera.transform.world.self._11,camera.transform.world.self._12);var n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){var invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec;break;case"_hosekSunDirection":var w=iron_Scene.active.world;if(w!=null){var _this=iron_object_Uniforms.helpVec;var y=w.raw.sun_direction[1];var z=w.raw.sun_direction[2]>0?w.raw.sun_direction[2]:0;_this.x=w.raw.sun_direction[0];_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_lightDirection":if(light!=null){var _this=new iron_math_Vec4(light.V.self._02,light.V.self._12,light.V.self._22);var n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){var invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec}break;case"_lightPosition":if(light!=null){var _this=iron_object_Uniforms.helpVec;_this.x=light.transform.world.self._30;_this.y=light.transform.world.self._31;_this.z=light.transform.world.self._32;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_pointColor":var point=iron_RenderPath.active.point;if(point!=null){var str=point.visible?point.data.raw.strength:0;var _this=iron_object_Uniforms.helpVec;var y=point.data.raw.color[1]*str;var z=point.data.raw.color[2]*str;_this.x=point.data.raw.color[0]*str;_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_pointPosition":var point=iron_RenderPath.active.point;if(point!=null){var _this=iron_object_Uniforms.helpVec;_this.x=point.transform.world.self._30;_this.y=point.transform.world.self._31;_this.z=point.transform.world.self._32;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_spotDirection":var point=iron_RenderPath.active.point;if(point!=null){var _this=new iron_math_Vec4(point.V.self._02,point.V.self._12,point.V.self._22);var n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){var invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec}break;case"_sunColor":var sun=iron_RenderPath.active.sun;if(sun!=null){var str=sun.visible?sun.data.raw.strength:0;var _this=iron_object_Uniforms.helpVec;var y=sun.data.raw.color[1]*str;var z=sun.data.raw.color[2]*str;_this.x=sun.data.raw.color[0]*str;_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_sunDirection":var sun=iron_RenderPath.active.sun;if(sun!=null){var _this=new iron_math_Vec4(sun.V.self._02,sun.V.self._12,sun.V.self._22);var n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){var invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec}break}if(v!=null){g.setFloat3(location,v.x,v.y,v.z);return true}}else if(c.type=="vec2"){var v=null;var _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;switch(c.link){case"_aspectRatio":v=iron_object_Uniforms.helpVec;v.x=iron_RenderPath.active.currentH/iron_RenderPath.active.currentW;v.y=iron_RenderPath.active.currentW/iron_RenderPath.active.currentH;v.x=v.x>1?1:v.x;v.y=v.y>1?1:v.y;break;case"_cameraPlane":v=iron_object_Uniforms.helpVec;v.x=camera.data.raw.near_plane;v.y=camera.data.raw.far_plane;break;case"_cameraPlaneProj":var near=camera.data.raw.near_plane;var far=camera.data.raw.far_plane;v=iron_object_Uniforms.helpVec;v.x=far/(far-near);v.y=-far*near/(far-near);break;case"_lightPlane":if(light!=null){v=iron_object_Uniforms.helpVec;v.x=light.data.raw.near_plane;v.y=light.data.raw.far_plane}break;case"_lightPlaneProj":if(light!=null){var near=light.data.raw.near_plane;var far=light.data.raw.far_plane;var a=far+near;var b=far-near;var f2=2;var c1=f2*far*near;v=iron_object_Uniforms.helpVec;v.x=a/b;v.y=c1/b}break;case"_screenSize":v=iron_object_Uniforms.helpVec;v.x=iron_RenderPath.active.currentW;v.y=iron_RenderPath.active.currentH;break;case"_screenSizeInv":v=iron_object_Uniforms.helpVec;v.x=1/iron_RenderPath.active.currentW;v.y=1/iron_RenderPath.active.currentH;break;case"_shadowMapSize":if(light!=null&&light.data.raw.cast_shadow){v=iron_object_Uniforms.helpVec;v.x=v.y=light.data.raw.shadowmap_size}break;case"_spotData":var point=iron_RenderPath.active.point;if(point!=null){v=iron_object_Uniforms.helpVec;v.x=point.data.raw.spot_size;v.y=v.x-point.data.raw.spot_blend}break;case"_vec2x":v=iron_object_Uniforms.helpVec;v.x=1;v.y=0;break;case"_vec2x2":v=iron_object_Uniforms.helpVec;v.x=2;v.y=0;break;case"_vec2x2Inv":v=iron_object_Uniforms.helpVec;v.x=2/iron_RenderPath.active.currentW;v.y=0;break;case"_vec2xInv":v=iron_object_Uniforms.helpVec;v.x=1/iron_RenderPath.active.currentW;v.y=0;break;case"_vec2y":v=iron_object_Uniforms.helpVec;v.x=0;v.y=1;break;case"_vec2y2":v=iron_object_Uniforms.helpVec;v.x=0;v.y=2;break;case"_vec2y2Inv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=2/iron_RenderPath.active.currentH;break;case"_vec2y3":v=iron_object_Uniforms.helpVec;v.x=0;v.y=3;break;case"_vec2y3Inv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=3/iron_RenderPath.active.currentH;break;case"_vec2yInv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=1/iron_RenderPath.active.currentH;break;case"_windowSize":v=iron_object_Uniforms.helpVec;v.x=kha_System.windowWidth();v.y=kha_System.windowHeight();break}if(v!=null){g.setFloat2(location,v.x,v.y);return true}}else if(c.type=="float"){var f=null;switch(c.link){case"_aspectRatioF":f=iron_RenderPath.active.currentW/iron_RenderPath.active.currentH;break;case"_aspectRatioWindowF":f=kha_System.windowWidth()/kha_System.windowHeight();break;case"_envmapStrength":f=iron_Scene.active.world==null?0:iron_Scene.active.world.probe.raw.strength;break;case"_fieldOfView":f=camera.data.raw.fov;break;case"_frameScale":f=iron_RenderPath.active.frameTime/(1/iron_system_Time.frequency*iron_system_Time.scale);break;case"_pointShadowsBias":var point=iron_RenderPath.active.point;f=point==null?0:point.data.raw.shadows_bias;break;case"_sunShadowsBias":var sun=iron_RenderPath.active.sun;f=sun==null?0:sun.data.raw.shadows_bias;break;case"_time":f=kha_Scheduler.time();break}if(f!=null){g.setFloat(location,f);return true}}else if(c.type=="floats"){var fa=null;if(c.link=="_envmapIrradiance"){fa=iron_Scene.active.world==null?iron_data_WorldData.getEmptyIrradiance():iron_Scene.active.world.probe.irradiance}if(fa!=null){g.setFloats(location,fa);return true}}else if(c.type=="int"){var i=null;if(c.link=="_envmapNumMipmaps"){var w=iron_Scene.active.world;i=w!=null?w.probe.raw.radiance_mipmaps+1-2:1}if(i!=null){g.setInt(location,i);return true}}return false};iron_object_Uniforms.setObjectConstant=function(g,object,location,c){if(c.link==null){return}var camera=iron_Scene.active.camera;var light=iron_RenderPath.active.light;if(c.type=="mat4"){var m=null;switch(c.link){case"_biasLightWorldViewProjectionMatrix":if(light!=null){if(object==null){var _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33}var _this=iron_object_Uniforms.helpMat;var m1=light.VP;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_Uniforms.helpMat;var m1=iron_object_Uniforms.biasMat;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_inverseWorldMatrix":var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;var a00=m1.self._00;var a01=m1.self._01;var a02=m1.self._02;var a03=m1.self._03;var a10=m1.self._10;var a11=m1.self._11;var a12=m1.self._12;var a13=m1.self._13;var a20=m1.self._20;var a21=m1.self._21;var a22=m1.self._22;var a23=m1.self._23;var a30=m1.self._30;var a31=m1.self._31;var a32=m1.self._32;var a33=m1.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}m=iron_object_Uniforms.helpMat;break;case"_lightWorldViewProjectionMatrix":if(light!=null){if(object==null){var _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33}var _this=iron_object_Uniforms.helpMat;var m1=light.VP;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_lightWorldViewProjectionMatrixCylinder":if(light!=null){var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._22=1;var _this=iron_object_Uniforms.helpMat2;var m1=camera.V;var a00=m1.self._00;var a01=m1.self._01;var a02=m1.self._02;var a03=m1.self._03;var a10=m1.self._10;var a11=m1.self._11;var a12=m1.self._12;var a13=m1.self._13;var a20=m1.self._20;var a21=m1.self._21;var a22=m1.self._22;var a23=m1.self._23;var a30=m1.self._30;var a31=m1.self._31;var a32=m1.self._32;var a33=m1.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=iron_object_Uniforms.helpMat;var m1=iron_object_Uniforms.helpMat2;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_Uniforms.helpMat;var m1=light.VP;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_lightWorldViewProjectionMatrixSphere":if(light!=null){var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._10=0;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._11=1;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._12=0;iron_object_Uniforms.helpMat.self._22=1;var _this=iron_object_Uniforms.helpMat2;var m1=camera.V;var a00=m1.self._00;var a01=m1.self._01;var a02=m1.self._02;var a03=m1.self._03;var a10=m1.self._10;var a11=m1.self._11;var a12=m1.self._12;var a13=m1.self._13;var a20=m1.self._20;var a21=m1.self._21;var a22=m1.self._22;var a23=m1.self._23;var a30=m1.self._30;var a31=m1.self._31;var a32=m1.self._32;var a33=m1.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=iron_object_Uniforms.helpMat;var m1=iron_object_Uniforms.helpMat2;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_Uniforms.helpMat;var m1=light.VP;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_particleData":var mo=js_Boot.__cast(object,iron_object_MeshObject);if(mo.particleOwner!=null&&mo.particleOwner.particleSystems!=null){m=mo.particleOwner.particleSystems[mo.particleIndex].getData()}break;case"_worldMatrix":m=object.transform.worldUnpack;break;case"_worldViewMatrix":var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrix":var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_Uniforms.helpMat;var m1=camera.P;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrixCylinder":var t=object.transform;var _this=iron_object_Uniforms.helpMat;var m1=t.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=t.scale.x;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._22=t.scale.z;var _this=iron_object_Uniforms.helpMat;var m1=camera.P;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrixSphere":var t=object.transform;var _this=iron_object_Uniforms.helpMat;var m1=t.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=camera.V;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=t.scale.x;iron_object_Uniforms.helpMat.self._10=0;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._11=t.scale.y;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._12=0;iron_object_Uniforms.helpMat.self._22=t.scale.z;var _this=iron_object_Uniforms.helpMat;var m1=camera.P;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat;break}if(m==null){if(StringTools.startsWith(c.link,"_biasLightWorldViewProjectionMatrixSpot")){var light=iron_object_Uniforms.getSpot(HxOverrides.cca(c.link,c.link.length-1)-48);if(light!=null){if(object==null){var _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{var _this=iron_object_Uniforms.helpMat;var m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33}var _this=iron_object_Uniforms.helpMat;var m1=light.VP;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;var _this=iron_object_Uniforms.helpMat;var m1=iron_object_Uniforms.biasMat;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}}if(StringTools.startsWith(c.link,"_biasLightViewProjectionMatrixSpot")){var light=iron_object_Uniforms.getSpot(HxOverrides.cca(c.link,c.link.length-1)-48);if(light!=null){var _this=iron_object_Uniforms.helpMat;var m1=light.VP;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;var _this=iron_object_Uniforms.helpMat;var m1=iron_object_Uniforms.biasMat;var a00=_this.self._00;var a01=_this.self._01;var a02=_this.self._02;var a03=_this.self._03;var a10=_this.self._10;var a11=_this.self._11;var a12=_this.self._12;var a13=_this.self._13;var a20=_this.self._20;var a21=_this.self._21;var a22=_this.self._22;var a23=_this.self._23;var a30=_this.self._30;var a31=_this.self._31;var a32=_this.self._32;var a33=_this.self._33;var b0=m1.self._00;var b1=m1.self._10;var b2=m1.self._20;var b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}}}if(m==null&&iron_object_Uniforms.externalMat4Links!=null){var _g=0;var _g1=iron_object_Uniforms.externalMat4Links;while(_g<_g1.length){var fn=_g1[_g];++_g;m=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(m!=null){break}}}if(m==null){return}g.setMatrix(location,m.self)}else if(c.type=="mat3"){var m=null;switch(c.link){case"_normalMatrix":var _this=iron_object_Uniforms.helpMat;var m1=object.transform.world;var a00=m1.self._00;var a01=m1.self._01;var a02=m1.self._02;var a03=m1.self._03;var a10=m1.self._10;var a11=m1.self._11;var a12=m1.self._12;var a13=m1.self._13;var a20=m1.self._20;var a21=m1.self._21;var a22=m1.self._22;var a23=m1.self._23;var a30=m1.self._30;var a31=m1.self._31;var a32=m1.self._32;var a33=m1.self._33;var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}var _this=iron_object_Uniforms.helpMat;var f=_this.self._01;_this.self._01=_this.self._10;_this.self._10=f;f=_this.self._02;_this.self._02=_this.self._20;_this.self._20=f;f=_this.self._12;_this.self._12=_this.self._21;_this.self._21=f;var _this=iron_object_Uniforms.helpMat3;var m1=iron_object_Uniforms.helpMat;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;m=iron_object_Uniforms.helpMat3;break;case"_viewMatrix3":var _this=iron_object_Uniforms.helpMat3;var m1=camera.V;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;m=iron_object_Uniforms.helpMat3;break}if(m==null){return}g.setMatrix3(location,m.self)}else if(c.type=="vec4"){var v=null;var _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;if(v==null&&iron_object_Uniforms.externalVec4Links!=null){var _g=0;var _g1=iron_object_Uniforms.externalVec4Links;while(_g<_g1.length){var fn=_g1[_g];++_g;v=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){break}}}if(v==null){return}g.setFloat4(location,v.x,v.y,v.z,v.w)}else if(c.type=="vec3"){var v=null;var _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;switch(c.link){case"_dim":var d=object.transform.dim;var s=object.transform.scale;var _this=iron_object_Uniforms.helpVec;_this.x=d.x/s.x;_this.y=d.y/s.y;_this.z=d.z/s.z;_this.w=1;v=iron_object_Uniforms.helpVec;break;case"_halfDim":var d=object.transform.dim;var s=object.transform.scale;var _this=iron_object_Uniforms.helpVec;_this.x=d.x/s.x/2;_this.y=d.y/s.y/2;_this.z=d.z/s.z/2;_this.w=1;v=iron_object_Uniforms.helpVec;break}if(v==null&&iron_object_Uniforms.externalVec3Links!=null){var _g=0;var _g1=iron_object_Uniforms.externalVec3Links;while(_g<_g1.length){var f=_g1[_g];++_g;v=f(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){break}}}if(v==null){return}g.setFloat3(location,v.x,v.y,v.z)}else if(c.type=="vec2"){var vx=null;var vy=null;if(c.link=="_tilesheetOffset"){var ts=js_Boot.__cast(object,iron_object_MeshObject).tilesheet;vx=ts.tileX;vy=ts.tileY}if(vx==null&&iron_object_Uniforms.externalVec2Links!=null){var _g=0;var _g1=iron_object_Uniforms.externalVec2Links;while(_g<_g1.length){var fn=_g1[_g];++_g;var v=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){vx=v.x;vy=v.y;break}}}if(vx==null){return}g.setFloat2(location,vx,vy)}else if(c.type=="float"){var f=null;switch(c.link){case"_objectInfoIndex":f=object.uid;break;case"_objectInfoMaterialIndex":f=iron_object_Uniforms.currentMat(object).uid;break;case"_objectInfoRandom":f=object.urandom;break;case"_posUnpack":f=iron_object_Uniforms.posUnpack!=null?iron_object_Uniforms.posUnpack:1;break;case"_texUnpack":f=iron_object_Uniforms.texUnpack!=null?iron_object_Uniforms.texUnpack:1;break}if(f==null&&iron_object_Uniforms.externalFloatLinks!=null){var _g=0;var _g1=iron_object_Uniforms.externalFloatLinks;while(_g<_g1.length){var fn=_g1[_g];++_g;var res=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(res!=null){f=res;break}}}if(f==null){return}g.setFloat(location,f)}else if(c.type=="floats"){var fa=null;if(c.link=="_skinBones"){if(object.animation!=null){fa=js_Boot.__cast(object.animation,iron_object_BoneAnimation).skinBuffer}}if(fa==null&&iron_object_Uniforms.externalFloatsLinks!=null){var _g=0;var _g1=iron_object_Uniforms.externalFloatsLinks;while(_g<_g1.length){var fn=_g1[_g];++_g;fa=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(fa!=null){break}}}if(fa==null){return}g.setFloats(location,fa)}else if(c.type=="int"){var i=null;if(c.link=="_uid"){i=object.uid}if(i==null&&iron_object_Uniforms.externalIntLinks!=null){var _g=0;var _g1=iron_object_Uniforms.externalIntLinks;while(_g<_g1.length){var fn=_g1[_g];++_g;var res=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(res!=null){i=res;break}}}if(i==null){return}g.setInt(location,i)}};iron_object_Uniforms.setMaterialConstants=function(g,context,materialContext){if(materialContext.raw.bind_constants!=null){var _g=0;var _g1=materialContext.raw.bind_constants.length;while(_g<_g1){var i=_g++;var matc=materialContext.raw.bind_constants[i];var pos=-1;var _g2=0;var _g3=context.raw.constants.length;while(_g2<_g3){var i1=_g2++;if(context.raw.constants[i1].name==matc.name){pos=i1;break}}if(pos==-1){continue}var c=context.raw.constants[pos];iron_object_Uniforms.setMaterialConstant(g,context.constants[pos],c,matc)}}if(materialContext.textures!=null){var _g=0;var _g1=materialContext.textures.length;while(_g<_g1){var i=_g++;var mname=materialContext.raw.bind_textures[i].name;var _g2=0;var _g3=context.textureUnits.length;while(_g2<_g3){var j=_g2++;var sname=context.raw.texture_units[j].name;if(mname==sname){g.setTexture(context.textureUnits[j],materialContext.textures[i]);materialContext.setTextureParameters(g,i,context,j);break}}}}};iron_object_Uniforms.getSpot=function(index){var i=0;var _g=0;var _g1=iron_Scene.active.lights;while(_g<_g1.length){var l=_g1[_g];++_g;if(l.data.raw.type!="spot"&&l.data.raw.type!="area"){continue}if(i==index){return l}++i}return null};iron_object_Uniforms.currentMat=function(object){if(object!=null&&object instanceof iron_object_MeshObject){var mo=js_Boot.__cast(object,iron_object_MeshObject);return mo.materials[mo.materialIndex]}return null};iron_object_Uniforms.setMaterialConstant=function(g,location,c,matc){switch(c.type){case"bool":g.setBool(location,matc.bool);break;case"float":g.setFloat(location,matc.float);break;case"int":g.setInt(location,matc.int);break;case"vec2":g.setFloat2(location,matc.vec2[0],matc.vec2[1]);break;case"vec3":g.setFloat3(location,matc.vec3[0],matc.vec3[1],matc.vec3[2]);break;case"vec4":g.setFloat4(location,matc.vec4[0],matc.vec4[1],matc.vec4[2],matc.vec4[3]);break}};var iron_system_ArmPack=function(){};$hxClasses["iron.system.ArmPack"]=iron_system_ArmPack;iron_system_ArmPack.__name__=true;iron_system_ArmPack.read=function(i,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}try{var b=i.readByte();switch(b){case 192:return null;case 194:return false;case 195:return true;case 196:return i.read(i.readByte());case 197:return i.read(i.readUInt16());case 198:return i.read(i.readInt32());case 202:return i.readFloat();case 204:return i.readByte();case 205:return i.readUInt16();case 206:return i.readInt32();case 208:return i.readInt8();case 209:return i.readInt16();case 210:return i.readInt32();case 217:return i.readString(i.readByte());case 218:return i.readString(i.readUInt16());case 219:return i.readString(i.readInt32());case 220:return iron_system_ArmPack.readArray(i,i.readUInt16(),key,parentKey);case 221:return iron_system_ArmPack.readArray(i,i.readInt32(),key,parentKey);case 222:return iron_system_ArmPack.readMap(i,i.readUInt16(),key,parentKey);case 223:return iron_system_ArmPack.readMap(i,i.readInt32(),key,parentKey);default:if(b<128){return b}else if(b<144){return iron_system_ArmPack.readMap(i,15&b,key,parentKey)}else if(b<160){return iron_system_ArmPack.readArray(i,15&b,key,parentKey)}else if(b<192){return i.readString(31&b)}else if(b>223){return-256|b}}}catch(_g){if(!(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof)){throw _g}}return null};iron_system_ArmPack.readArray=function(i,length,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}var b=i.readByte();var _g=i;_g.set_position(_g.pos-1);if(b==202){var _g=i;_g.set_position(_g.pos+1);var this1=new Float32Array(length);var a=this1;var _g=0;var _g1=length;while(_g<_g1){var x=_g++;a[x]=i.readFloat()}return a}else if(b==210){var _g=i;_g.set_position(_g.pos+1);var this1=new Uint32Array(length);var a=this1;var _g=0;var _g1=length;while(_g<_g1){var x=_g++;a[x]=i.readInt32()}return a}else if(b==209){var _g=i;_g.set_position(_g.pos+1);var this1=new Int16Array(length);var a=this1;var _g=0;var _g1=length;while(_g<_g1){var x=_g++;a[x]=i.readInt16()}return a}else{var a=[];var _g=0;var _g1=length;while(_g<_g1){var x=_g++;a.push(iron_system_ArmPack.read(i,key,parentKey))}return a}};iron_system_ArmPack.readMap=function(i,length,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}var out={};var _g=0;var _g1=length;while(_g<_g1){var n=_g++;var k=Std.string(iron_system_ArmPack.read(i));var v=iron_system_ArmPack.read(i,k,key);out[k]=v}return out};var iron_system_Audio=function(){};$hxClasses["iron.system.Audio"]=iron_system_Audio;iron_system_Audio.__name__=true;iron_system_Audio.play=function(sound,loop,stream){if(stream==null){stream=false}if(loop==null){loop=false}if(stream&&sound.compressedData!=null){return kha_audio2_Audio1.stream(sound,loop)}else if(sound.uncompressedData!=null){return kha_audio2_Audio1.play(sound,loop)}else{return null}};var iron_system_Input=function(){};$hxClasses["iron.system.Input"]=iron_system_Input;iron_system_Input.__name__=true;iron_system_Input.reset=function(){iron_system_Input.occupied=false;if(iron_system_Input.mouse!=null){iron_system_Input.mouse.reset()}if(iron_system_Input.pen!=null){iron_system_Input.pen.reset()}if(iron_system_Input.keyboard!=null){iron_system_Input.keyboard.reset()}var _g=0;var _g1=iron_system_Input.gamepads;while(_g<_g1.length){var gamepad=_g1[_g];++_g;gamepad.reset()}};iron_system_Input.endFrame=function(){if(iron_system_Input.mouse!=null){iron_system_Input.mouse.endFrame()}if(iron_system_Input.pen!=null){iron_system_Input.pen.endFrame()}if(iron_system_Input.keyboard!=null){iron_system_Input.keyboard.endFrame()}var _g=0;var _g1=iron_system_Input.gamepads;while(_g<_g1.length){var gamepad=_g1[_g];++_g;gamepad.endFrame()}if(iron_system_Input.virtualButtons!=null){var vb=haxe_ds_StringMap.valueIterator(iron_system_Input.virtualButtons.h);while(vb.hasNext()){var vb1=vb.next();vb1.started=vb1.released=false}}};iron_system_Input.getMouse=function(){if(!iron_system_Input.registered){iron_system_Input.registered=true;iron_App.notifyOnEndFrame(iron_system_Input.endFrame);iron_App.notifyOnReset(iron_system_Input.reset);kha_System.notifyOnApplicationState(function(){iron_system_Input.getMouse().reset()},null,null,null,null)}if(iron_system_Input.mouse==null){iron_system_Input.mouse=new iron_system_Mouse}return iron_system_Input.mouse};iron_system_Input.getKeyboard=function(){if(!iron_system_Input.registered){iron_system_Input.registered=true;iron_App.notifyOnEndFrame(iron_system_Input.endFrame);iron_App.notifyOnReset(iron_system_Input.reset);kha_System.notifyOnApplicationState(function(){iron_system_Input.getMouse().reset()},null,null,null,null)}if(iron_system_Input.keyboard==null){iron_system_Input.keyboard=new iron_system_Keyboard}return iron_system_Input.keyboard};var iron_system_VirtualButton=function(){this.down=false;this.released=false;this.started=false};$hxClasses["iron.system.VirtualButton"]=iron_system_VirtualButton;iron_system_VirtualButton.__name__=true;iron_system_VirtualButton.prototype={__class__:iron_system_VirtualButton};var iron_system_VirtualInput=function(){this.virtualButtons=null};$hxClasses["iron.system.VirtualInput"]=iron_system_VirtualInput;iron_system_VirtualInput.__name__=true;iron_system_VirtualInput.prototype={downVirtual:function(button){if(this.virtualButtons!=null){var vb=this.virtualButtons.h[button];if(vb!=null){vb.down=true;vb.started=true}}},upVirtual:function(button){if(this.virtualButtons!=null){var vb=this.virtualButtons.h[button];if(vb!=null){vb.down=false;vb.released=true}}},__class__:iron_system_VirtualInput};var iron_system_Mouse=function(){this.lastY=-1;this.lastX=-1;this.locked=false;this.wheelDelta=0;this.movementY=0;this.movementX=0;this.moved=false;this.y=0;this.x=0;this.buttonsReleased=[false,false,false];this.buttonsStarted=[false,false,false];this.buttonsDown=[false,false,false];iron_system_VirtualInput.call(this);kha_input_Mouse.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener),$bind(this,this.wheelListener))};$hxClasses["iron.system.Mouse"]=iron_system_Mouse;iron_system_Mouse.__name__=true;iron_system_Mouse.__super__=iron_system_VirtualInput;iron_system_Mouse.prototype=$extend(iron_system_VirtualInput.prototype,{endFrame:function(){var tmp=this.buttonsStarted[1]=this.buttonsStarted[2]=false;this.buttonsStarted[0]=tmp;var tmp=this.buttonsReleased[1]=this.buttonsReleased[2]=false;this.buttonsReleased[0]=tmp;this.moved=false;this.movementX=0;this.movementY=0;this.wheelDelta=0},reset:function(){var tmp=this.buttonsDown[1]=this.buttonsDown[2]=false;this.buttonsDown[0]=tmp;this.endFrame()},downListener:function(index,x,y){this.buttonsDown[index]=true;this.buttonsStarted[index]=true;this.x=x;this.y=y;this.downVirtual(iron_system_Mouse.buttons[index])},upListener:function(index,x,y){this.buttonsDown[index]=false;this.buttonsReleased[index]=true;this.x=x;this.y=y;this.upVirtual(iron_system_Mouse.buttons[index])},moveListener:function(x,y,movementX,movementY){if(this.lastX==-1&&this.lastY==-1){this.lastX=x;this.lastY=y}if(this.locked){this.movementX+=movementX;this.movementY+=movementY}else{this.movementX+=x-this.lastX;this.movementY+=y-this.lastY}this.lastX=x;this.lastY=y;this.x=x;this.y=y;this.moved=true},wheelListener:function(delta){this.wheelDelta=delta},__class__:iron_system_Mouse});var iron_system_Pen=function(){this.lastY=-1;this.lastX=-1;this.connected=false;this.pressure=0;this.movementY=0;this.movementX=0;this.moved=false;this.y=0;this.x=0;this.buttonsReleased=[false];this.buttonsStarted=[false];this.buttonsDown=[false];iron_system_VirtualInput.call(this);kha_input_Pen.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener))};$hxClasses["iron.system.Pen"]=iron_system_Pen;iron_system_Pen.__name__=true;iron_system_Pen.__super__=iron_system_VirtualInput;iron_system_Pen.prototype=$extend(iron_system_VirtualInput.prototype,{endFrame:function(){this.buttonsStarted[0]=false;this.buttonsReleased[0]=false;this.moved=false;this.movementX=0;this.movementY=0},reset:function(){this.buttonsDown[0]=false;this.endFrame()},downListener:function(x,y,pressure){this.buttonsDown[0]=true;this.buttonsStarted[0]=true;this.x=x;this.y=y;this.pressure=pressure},upListener:function(x,y,pressure){this.buttonsDown[0]=false;this.buttonsReleased[0]=true;this.x=x;this.y=y;this.pressure=pressure},moveListener:function(x,y,pressure){if(this.lastX==-1&&this.lastY==-1){this.lastX=x;this.lastY=y}this.movementX=x-this.lastX;this.movementY=y-this.lastY;this.lastX=x;this.lastY=y;this.x=x;this.y=y;this.moved=true;this.pressure=pressure;this.connected=true},__class__:iron_system_Pen});var iron_system_Keyboard=function(){this.repeatTime=0;this.repeatKey=false;this.keysFrame=[];this.keysReleased=new haxe_ds_StringMap;this.keysStarted=new haxe_ds_StringMap;this.keysDown=new haxe_ds_StringMap;iron_system_VirtualInput.call(this);this.reset();kha_input_Keyboard.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.pressListener))};$hxClasses["iron.system.Keyboard"]=iron_system_Keyboard;iron_system_Keyboard.__name__=true;iron_system_Keyboard.keyCode=function(key){if(key==32){return"space"}else if(key==8){return"backspace"}else if(key==9){return"tab"}else if(key==13){return"enter"}else if(key==16){return"shift"}else if(key==17){return"control"}else if(key==18){return"alt"}else if(key==91){return"win"}else if(key==27){return"escape"}else if(key==46){return"delete"}else if(key==38){return"up"}else if(key==40){return"down"}else if(key==37){return"left"}else if(key==39){return"right"}else if(key==1){return"back"}else if(key==188){return","}else if(key==190){return"."}else if(key==58){return":"}else if(key==59){return";"}else if(key==60){return"<"}else if(key==61){return"="}else if(key==62){return">"}else if(key==63){return"?"}else if(key==161){return"!"}else if(key==162){return'"'}else if(key==163){return"#"}else if(key==164){return"$"}else if(key==165){return"%"}else if(key==166){return"&"}else if(key==167){return"_"}else if(key==168){return"("}else if(key==169){return")"}else if(key==170){return"*"}else if(key==172){return"|"}else if(key==174){return"{"}else if(key==175){return"}"}else if(key==219){return"["}else if(key==221){return"]"}else if(key==176){return"~"}else if(key==192){return"`"}else if(key==191){return"/"}else if(key==220){return"\\"}else if(key==64){return"@"}else if(key==107){return"+"}else if(key==171){return"+"}else if(key==109){return"-"}else if(key==173){return"-"}else if(key==106){return"*"}else if(key==111){return"/"}else if(key==110){return"."}else if(key==48){return"0"}else if(key==96){return"0"}else if(key==49){return"1"}else if(key==97){return"1"}else if(key==50){return"2"}else if(key==98){return"2"}else if(key==51){return"3"}else if(key==99){return"3"}else if(key==52){return"4"}else if(key==100){return"4"}else if(key==53){return"5"}else if(key==101){return"5"}else if(key==54){return"6"}else if(key==102){return"6"}else if(key==55){return"7"}else if(key==103){return"7"}else if(key==56){return"8"}else if(key==104){return"8"}else if(key==57){return"9"}else if(key==105){return"9"}else if(key==112){return"f1"}else if(key==113){return"f2"}else if(key==114){return"f3"}else if(key==115){return"f4"}else if(key==116){return"f5"}else if(key==117){return"f6"}else if(key==118){return"f7"}else if(key==119){return"f8"}else if(key==120){return"f9"}else if(key==121){return"f10"}else if(key==122){return"f11"}else if(key==123){return"f12"}else{return String.fromCodePoint(key).toLowerCase()}};iron_system_Keyboard.__super__=iron_system_VirtualInput;iron_system_Keyboard.prototype=$extend(iron_system_VirtualInput.prototype,{endFrame:function(){if(this.keysFrame.length>0){var _g=0;var _g1=this.keysFrame;while(_g<_g1.length){var s=_g1[_g];++_g;this.keysStarted.h[s]=false;this.keysReleased.h[s]=false}this.keysFrame.splice(0,this.keysFrame.length)}if(kha_Scheduler.time()-this.repeatTime>.05){this.repeatTime=kha_Scheduler.time();this.repeatKey=true}else{this.repeatKey=false}},reset:function(){var _g=0;var _g1=iron_system_Keyboard.keys;while(_g<_g1.length){var s=_g1[_g];++_g;this.keysDown.h[s]=false;this.keysStarted.h[s]=false;this.keysReleased.h[s]=false}this.endFrame()},down:function(key){return this.keysDown.h[key]},downListener:function(code){var s=iron_system_Keyboard.keyCode(code);this.keysFrame.push(s);this.keysStarted.h[s]=true;this.keysDown.h[s]=true;this.repeatTime=kha_Scheduler.time()+.4;this.downVirtual(s)},upListener:function(code){var s=iron_system_Keyboard.keyCode(code);this.keysFrame.push(s);this.keysReleased.h[s]=true;this.keysDown.h[s]=false;this.upVirtual(s)},pressListener:function(char){},__class__:iron_system_Keyboard});var iron_system_GamepadStick=function(){this.movementY=0;this.movementX=0;this.moved=false;this.lastY=0;this.lastX=0;this.y=0;this.x=0};$hxClasses["iron.system.GamepadStick"]=iron_system_GamepadStick;iron_system_GamepadStick.__name__=true;iron_system_GamepadStick.prototype={__class__:iron_system_GamepadStick};var iron_system_Gamepad=function(i,virtual){if(virtual==null){virtual=false}this.num=0;this.connected=false;this.rightStick=new iron_system_GamepadStick;this.leftStick=new iron_system_GamepadStick;this.buttonsFrame=[];this.buttonsReleased=[];this.buttonsStarted=[];this.buttonsDown=[];iron_system_VirtualInput.call(this);var _g=0;var _g1=iron_system_Gamepad.buttons;while(_g<_g1.length){var s=_g1[_g];++_g;this.buttonsDown.push(0);this.buttonsStarted.push(false);this.buttonsReleased.push(false)}this.num=i;this.reset();if(virtual){this.connected=true}else{this.connect()}};$hxClasses["iron.system.Gamepad"]=iron_system_Gamepad;iron_system_Gamepad.__name__=true;iron_system_Gamepad.__super__=iron_system_VirtualInput;iron_system_Gamepad.prototype=$extend(iron_system_VirtualInput.prototype,{connect:function(){var gamepad=kha_input_Gamepad.get(this.num);if(gamepad==null){return}this.connected=true;gamepad.notify($bind(this,this.axisListener),$bind(this,this.buttonListener))},endFrame:function(){if(this.buttonsFrame.length>0){var _g=0;var _g1=this.buttonsFrame;while(_g<_g1.length){var i=_g1[_g];++_g;this.buttonsStarted[i]=false;this.buttonsReleased[i]=false}this.buttonsFrame.splice(0,this.buttonsFrame.length)}this.leftStick.moved=false;this.leftStick.movementX=0;this.leftStick.movementY=0;this.rightStick.moved=false;this.rightStick.movementX=0;this.rightStick.movementY=0},reset:function(){var _g=0;var _g1=this.buttonsDown.length;while(_g<_g1){var i=_g++;this.buttonsDown[i]=0;this.buttonsStarted[i]=false;this.buttonsReleased[i]=false}this.endFrame()},axisListener:function(axis,value){var stick=axis<=1?this.leftStick:this.rightStick;if(axis==0||axis==2){stick.lastX=stick.x;stick.x=value;stick.movementX=stick.x-stick.lastX}else if(axis==1||axis==3){stick.lastY=stick.y;stick.y=value;stick.movementY=stick.y-stick.lastY}stick.moved=true},buttonListener:function(button,value){this.buttonsFrame.push(button);this.buttonsDown[button]=value;if(value>0){this.buttonsStarted[button]=true}else{this.buttonsReleased[button]=true}if(value==0){this.upVirtual(iron_system_Gamepad.buttons[button])}else if(value==1){this.downVirtual(iron_system_Gamepad.buttons[button])}},__class__:iron_system_Gamepad});var iron_system_Time=function(){};$hxClasses["iron.system.Time"]=iron_system_Time;iron_system_Time.__name__=true;iron_system_Time.init=function(){iron_system_Time.frequency=kha_Display.get_primary()!=null?kha_Display.get_primary().get_frequency():60};iron_system_Time.update=function(){iron_system_Time.realDelta=kha_Scheduler.realTime()-iron_system_Time.last;iron_system_Time.last=kha_Scheduler.realTime()};var js_Boot=function(){};$hxClasses["js.Boot"]=js_Boot;js_Boot.__name__=true;js_Boot.getClass=function(o){if(o==null){return null}else if(o instanceof Array){return Array}else{var cl=o.__class__;if(cl!=null){return cl}var name=js_Boot.__nativeClassName(o);if(name!=null){return js_Boot.__resolveNativeClass(name)}return null}};js_Boot.__string_rec=function(o,s){if(o==null){return"null"}if(s.length>=5){return"<...>"}var t=typeof o;if(t=="function"&&(o.__name__||o.__ename__)){t="object"}switch(t){case"function":return"<function>";case"object":if(o.__enum__){var e=$hxEnums[o.__enum__];var n=e.__constructs__[o._hx_index];var con=e[n];if(con.__params__){s=s+"\t";return n+"("+function($this){var $r;var _g=[];{var _g1=0;var _g2=con.__params__;while(true){if(!(_g1<_g2.length)){break}var p=_g2[_g1];_g1=_g1+1;_g.push(js_Boot.__string_rec(o[p],s))}}$r=_g;return $r}(this).join(",")+")"}else{return n}}if(o instanceof Array){var str="[";s+="\t";var _g=0;var _g1=o.length;while(_g<_g1){var i=_g++;str+=(i>0?",":"")+js_Boot.__string_rec(o[i],s)}str+="]";return str}var tostr;try{tostr=o.toString}catch(_g){return"???"}if(tostr!=null&&tostr!=Object.toString&&typeof tostr=="function"){var s2=o.toString();if(s2!="[object Object]"){return s2}}var str="{\n";s+="\t";var hasp=o.hasOwnProperty!=null;var k=null;for(k in o){if(hasp&&!o.hasOwnProperty(k)){continue}if(k=="prototype"||k=="__class__"||k=="__super__"||k=="__interfaces__"||k=="__properties__"){continue}if(str.length!=2){str+=", \n"}str+=s+k+" : "+js_Boot.__string_rec(o[k],s)}s=s.substring(1);str+="\n"+s+"}";return str;case"string":return o;default:return String(o)}};js_Boot.__interfLoop=function(cc,cl){if(cc==null){return false}if(cc==cl){return true}var intf=cc.__interfaces__;if(intf!=null){var _g=0;var _g1=intf.length;while(_g<_g1){var i=_g++;var i1=intf[i];if(i1==cl||js_Boot.__interfLoop(i1,cl)){return true}}}return js_Boot.__interfLoop(cc.__super__,cl)};js_Boot.__instanceof=function(o,cl){if(cl==null){return false}switch(cl){case Array:return o instanceof Array;case Bool:return typeof o=="boolean";case Dynamic:return o!=null;case Float:return typeof o=="number";case Int:if(typeof o=="number"){return(o|0)===o}else{return false}break;case String:return typeof o=="string";default:if(o!=null){if(typeof cl=="function"){if(js_Boot.__downcastCheck(o,cl)){return true}}else if(typeof cl=="object"&&js_Boot.__isNativeObj(cl)){if(o instanceof cl){return true}}}else{return false}if(cl==Class?o.__name__!=null:false){return true}if(cl==Enum?o.__ename__!=null:false){return true}return o.__enum__!=null?$hxEnums[o.__enum__]==cl:false}};js_Boot.__downcastCheck=function(o,cl){if(!(o instanceof cl)){if(cl.__isInterface__){return js_Boot.__interfLoop(js_Boot.getClass(o),cl)}else{return false}}else{return true}};js_Boot.__cast=function(o,t){if(o==null||js_Boot.__instanceof(o,t)){return o}else{throw haxe_Exception.thrown("Cannot cast "+Std.string(o)+" to "+Std.string(t))}};js_Boot.__nativeClassName=function(o){var name=js_Boot.__toStr.call(o).slice(8,-1);if(name=="Object"||name=="Function"||name=="Math"||name=="JSON"){return null}return name};js_Boot.__isNativeObj=function(o){return js_Boot.__nativeClassName(o)!=null};js_Boot.__resolveNativeClass=function(name){return $global[name]};var kha_Assets=function(){};$hxClasses["kha.Assets"]=kha_Assets;kha_Assets.__name__=true;kha_Assets.loadImageFromPath=function(path,readable,done,failed,pos){var description={files:[path],readable:readable};kha_LoaderImpl.loadImageFromDescription(description,done,kha_Assets.reporter(failed,pos))};kha_Assets.loadBlobFromPath=function(path,done,failed,pos){var description={files:[path]};kha_LoaderImpl.loadBlobFromDescription(description,done,kha_Assets.reporter(failed,pos))};kha_Assets.loadSoundFromPath=function(path,done,failed,pos){var description={files:[path]};kha_LoaderImpl.loadSoundFromDescription(description,done,kha_Assets.reporter(failed,pos))};kha_Assets.reporter=function(custom,pos){if(custom!=null){return custom}else{var _g=haxe_Log.trace;var infos=pos;return function(v){_g(v,infos)}}};var kha_Canvas=function(){};$hxClasses["kha.Canvas"]=kha_Canvas;kha_Canvas.__name__=true;kha_Canvas.__isInterface__=true;kha_Canvas.prototype={__class__:kha_Canvas,__properties__:{get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}};var kha_Color={};kha_Color.fromFloats=function(r,g,b,a){if(a==null){a=1}return kha_Color._new((a*255|0)<<24|(r*255|0)<<16|(g*255|0)<<8|(b*255|0))};kha_Color._new=function(value){var this1=value;return this1};var kha_Display=function(num,isPrimary){this.num=num;this.isPrimary=isPrimary};$hxClasses["kha.Display"]=kha_Display;kha_Display.__name__=true;kha_Display.__properties__={get_primary:"get_primary"};kha_Display.init=function(){var _g=0;var _g1=Krom.displayCount();while(_g<_g1){var i=_g++;kha_Display.displays.push(new kha_Display(i,Krom.displayIsPrimary(i)))}};kha_Display.get_primary=function(){kha_Display.init();var _g=0;var _g1=kha_Display.displays;while(_g<_g1.length){var display=_g1[_g];++_g;if(display.isPrimary){return display}}return null};kha_Display.prototype={get_frequency:function(){return 60},__class__:kha_Display,__properties__:{get_frequency:"get_frequency"}};var kha_Framebuffer=function($window,g1,g2,g4){this.window=$window;this.graphics1=g1;this.graphics2=g2;this.graphics4=g4};$hxClasses["kha.Framebuffer"]=kha_Framebuffer;kha_Framebuffer.__name__=true;kha_Framebuffer.__interfaces__=[kha_Canvas];kha_Framebuffer.prototype={init:function(g1,g2,g4){this.graphics1=g1;this.graphics2=g2;this.graphics4=g4},get_g2:function(){return this.graphics2},get_g4:function(){return this.graphics4},get_width:function(){return kha_System.windowWidth(this.window)},get_height:function(){return kha_System.windowHeight(this.window)},__class__:kha_Framebuffer,__properties__:{get_height:"get_height",get_width:"get_width",get_g4:"get_g4",get_g2:"get_g2"}};var kha_FramebufferOptions=function(frequency,verticalSync,colorBufferBits,depthBufferBits,stencilBufferBits,samplesPerPixel){if(samplesPerPixel==null){samplesPerPixel=1}if(stencilBufferBits==null){stencilBufferBits=8}if(depthBufferBits==null){depthBufferBits=16}if(colorBufferBits==null){colorBufferBits=32}if(verticalSync==null){verticalSync=true}if(frequency==null){frequency=60}this.samplesPerPixel=1;this.stencilBufferBits=8;this.depthBufferBits=16;this.colorBufferBits=32;this.verticalSync=true;this.frequency=60;this.frequency=frequency;this.verticalSync=verticalSync;this.colorBufferBits=colorBufferBits;this.depthBufferBits=depthBufferBits;this.stencilBufferBits=stencilBufferBits;this.samplesPerPixel=samplesPerPixel};$hxClasses["kha.FramebufferOptions"]=kha_FramebufferOptions;kha_FramebufferOptions.__name__=true;kha_FramebufferOptions.prototype={__class__:kha_FramebufferOptions};var kha_Resource=function(){};$hxClasses["kha.Resource"]=kha_Resource;kha_Resource.__name__=true;kha_Resource.__isInterface__=true;var kha_Image=function(texture){this.texture_=texture};$hxClasses["kha.Image"]=kha_Image;kha_Image.__name__=true;kha_Image.__interfaces__=[kha_Resource,kha_Canvas];kha_Image.__properties__={get_nonPow2Supported:"get_nonPow2Supported"};kha_Image.getRenderTargetFormat=function(format){switch(format){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 4;case 4:return 1;case 5:return 2;case 6:return 6;default:return 0}};kha_Image.getDepthBufferBits=function(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return 24;case 2:return 24;case 3:return 24;case 4:return 32;case 5:return 16}};kha_Image.getStencilBufferBits=function(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return-1;case 2:return 8;case 3:return 8;case 4:return 8;case 5:return 0}};kha_Image.getTextureFormat=function(format){switch(format){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;case 6:return 7;default:return 1}};kha_Image._fromTexture=function(texture){return new kha_Image(texture)};kha_Image.fromBytes3D=function(bytes,width,height,depth,format,usage){if(format==null){format=0}var readable=true;var image=new kha_Image(null);image.format=format;image.texture_=Krom.createTextureFromBytes3D(bytes.b.bufferValue,width,height,depth,kha_Image.getTextureFormat(format),readable);return image};kha_Image.create=function(width,height,format,usage){if(format==null){format=0}var image=new kha_Image(null);image.format=format;image.texture_=Krom.createTexture(width,height,kha_Image.getTextureFormat(format));return image};kha_Image.create3D=function(width,height,depth,format,usage){if(format==null){format=0}var image=new kha_Image(null);image.format=format;image.texture_=Krom.createTexture3D(width,height,depth,kha_Image.getTextureFormat(format));return image};kha_Image.createRenderTarget=function(width,height,format,depthStencil,antiAliasingSamples,contextId){if(contextId==null){contextId=0}if(antiAliasingSamples==null){antiAliasingSamples=1}if(depthStencil==null){depthStencil=0}if(format==null){format=0}var image=new kha_Image(null);image.format=format;image.renderTarget_=Krom.createRenderTarget(width,height,kha_Image.getDepthBufferBits(depthStencil),kha_Image.getRenderTargetFormat(format),kha_Image.getStencilBufferBits(depthStencil),contextId);return image};kha_Image.get_nonPow2Supported=function(){return true};kha_Image.renderTargetsInvertedY=function(){return Krom.renderTargetsInvertedY()};kha_Image.prototype={unload:function(){Krom.unloadImage(this);this.texture_=null;this.renderTarget_=null},generateMipmaps:function(levels){if(this.texture_==null){Krom.generateRenderTargetMipmaps(this.renderTarget_,levels)}else{Krom.generateTextureMipmaps(this.texture_,levels)}},setMipmaps:function(mipmaps){Krom.setMipmaps(this.texture_,mipmaps)},setDepthStencilFrom:function(image){Krom.setDepthStencilFrom(this.renderTarget_,image.renderTarget_)},get_width:function(){if(this.texture_==null){return this.renderTarget_.width}else{return this.texture_.width}},get_height:function(){if(this.texture_==null){return this.renderTarget_.height}else{return this.texture_.height}},get_depth:function(){if(this.texture_!=null){return this.texture_.depth}else{return 1}},get_g4:function(){if(this.graphics4==null){this.graphics4=new kha_krom_Graphics(this)}return this.graphics4},__class__:kha_Image,__properties__:{get_g4:"get_g4",get_depth:"get_depth",get_height:"get_height",get_width:"get_width"}};var kha_LoaderImpl=function(){};$hxClasses["kha.LoaderImpl"]=kha_LoaderImpl;kha_LoaderImpl.__name__=true;kha_LoaderImpl.loadImageFromDescription=function(desc,done,failed){var readable=Object.prototype.hasOwnProperty.call(desc,"readable")&&desc.readable;done(kha_Image._fromTexture(Krom.loadImage(desc.files[0],readable)))};kha_LoaderImpl.loadSoundFromDescription=function(desc,done,failed){done(new kha_krom_Sound(haxe_io_Bytes.ofData(Krom.loadSound(desc.files[0]))))};kha_LoaderImpl.loadBlobFromDescription=function(desc,done,failed){done(new kha_internal_BytesBlob(haxe_io_Bytes.ofData(Krom.loadBlob(desc.files[0]))))};var kha_TimeTask=function(){};$hxClasses["kha.TimeTask"]=kha_TimeTask;kha_TimeTask.__name__=true;kha_TimeTask.prototype={__class__:kha_TimeTask};var kha_FrameTask=function(task,priority,id){this.task=task;this.priority=priority;this.id=id;this.active=true;this.paused=false};$hxClasses["kha.FrameTask"]=kha_FrameTask;kha_FrameTask.__name__=true;kha_FrameTask.prototype={__class__:kha_FrameTask};var kha_Scheduler=function(){};$hxClasses["kha.Scheduler"]=kha_Scheduler;kha_Scheduler.__name__=true;kha_Scheduler.init=function(){kha_Scheduler.deltas=[];var _g=0;var _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){var i=_g++;kha_Scheduler.deltas[i]=0}kha_Scheduler.stopped=true;kha_Scheduler.frame_tasks_sorted=true;kha_Scheduler.current=kha_Scheduler.lastTime=kha_Scheduler.lastFrameEnd=kha_Scheduler.realTime();kha_Scheduler.currentFrameTaskId=0;kha_Scheduler.currentTimeTaskId=0;kha_Scheduler.currentGroupId=0;kha_Scheduler.timeTasks=[];kha_Scheduler.pausedTimeTasks=[];kha_Scheduler.outdatedTimeTasks=[];kha_Scheduler.timeTasksScratchpad=[];kha_Scheduler.frameTasks=[];kha_Scheduler.toDeleteFrame=[]};kha_Scheduler.start=function(restartTimers){if(restartTimers==null){restartTimers=false}kha_Scheduler.vsync=kha_Window.get(0).get_vSynced();var hz=kha_Display.get_primary().get_frequency();if(hz>=57&&hz<=63){hz=60}kha_Scheduler.onedifhz=1/hz;kha_Scheduler.stopped=false;kha_Scheduler.resetTime();kha_Scheduler.lastTime=kha_Scheduler.realTime()-kha_Scheduler.startTime;var _g=0;var _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){var i=_g++;kha_Scheduler.deltas[i]=0}if(restartTimers){var _g=0;var _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){var timeTask=_g1[_g];++_g;timeTask.paused=false}var _g=0;var _g1=kha_Scheduler.frameTasks;while(_g<_g1.length){var frameTask=_g1[_g];++_g;frameTask.paused=false}}};kha_Scheduler.executeFrame=function(){var now=kha_Scheduler.realTime()-kha_Scheduler.startTime;var delta=now-kha_Scheduler.lastTime;var frameEnd=kha_Scheduler.lastFrameEnd;if(delta>=0){if(kha_netsync_Session.the()==null){if(delta>kha_Scheduler.maxframetime){kha_Scheduler.startTime+=delta-kha_Scheduler.maxframetime;delta=kha_Scheduler.maxframetime;frameEnd+=delta}else if(kha_Scheduler.vsync){var realdif=kha_Scheduler.onedifhz;while(realdif<delta-kha_Scheduler.onedifhz)realdif+=kha_Scheduler.onedifhz;delta=realdif;var _g=0;var _g1=kha_Scheduler.DIF_COUNT-2;while(_g<_g1){var i=_g++;delta+=kha_Scheduler.deltas[i];kha_Scheduler.deltas[i]=kha_Scheduler.deltas[i+1]}delta+=kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2];delta/=kha_Scheduler.DIF_COUNT;kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2]=realdif;frameEnd+=delta}else{var _g=0;var _g1=kha_Scheduler.DIF_COUNT-1;while(_g<_g1){var i=_g++;kha_Scheduler.deltas[i]=kha_Scheduler.deltas[i+1]}kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-1]=delta;var next=0;var _g=0;var _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){var i=_g++;next+=kha_Scheduler.deltas[i]}next/=kha_Scheduler.DIF_COUNT;frameEnd+=next}}else{frameEnd+=delta}kha_Scheduler.lastTime=frameEnd;if(!kha_Scheduler.stopped){kha_Scheduler.lastFrameEnd=frameEnd}var _g=0;var _g1=kha_Scheduler.pausedTimeTasks;while(_g<_g1.length){var pausedTask=_g1[_g];++_g;pausedTask.next+=delta}if(kha_Scheduler.stopped){var _g=0;var _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){var timeTask=_g1[_g];++_g;timeTask.next+=delta}}kha_Scheduler.executeTimeTasks(frameEnd);var _g=0;var _g1=kha_Scheduler.outdatedTimeTasks;while(_g<_g1.length){var task=_g1[_g];++_g;if(task.next<frameEnd-10){kha_Scheduler.timeTasksScratchpad.push(task)}}var _g=0;var _g1=kha_Scheduler.timeTasksScratchpad;while(_g<_g1.length){var task=_g1[_g];++_g;HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,task)}while(kha_Scheduler.timeTasksScratchpad.length>0)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}kha_Scheduler.current=frameEnd;kha_Scheduler.sortFrameTasks();var _g=0;var _g1=kha_Scheduler.frameTasks;while(_g<_g1.length){var frameTask=_g1[_g];++_g;if(!kha_Scheduler.stopped&&!frameTask.paused&&frameTask.active){if(!frameTask.task()){frameTask.active=false}}}var _g=0;var _g1=kha_Scheduler.frameTasks;while(_g<_g1.length){var frameTask=_g1[_g];++_g;if(!frameTask.active){kha_Scheduler.toDeleteFrame.push(frameTask)}}while(kha_Scheduler.toDeleteFrame.length>0)HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop())};kha_Scheduler.executeTimeTasks=function(until){while(kha_Scheduler.timeTasks.length>0){kha_Scheduler.activeTimeTask=kha_Scheduler.timeTasks[0];if(kha_Scheduler.activeTimeTask.next<=until){kha_Scheduler.current=kha_Scheduler.activeTimeTask.next;kha_Scheduler.activeTimeTask.next+=kha_Scheduler.activeTimeTask.period;HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask);if(kha_Scheduler.activeTimeTask.active&&kha_Scheduler.activeTimeTask.task()){if(kha_Scheduler.activeTimeTask.period>0&&(kha_Scheduler.activeTimeTask.duration==0||kha_Scheduler.activeTimeTask.duration>=kha_Scheduler.activeTimeTask.start+kha_Scheduler.activeTimeTask.next)){kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask)}else{kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until)}}else{kha_Scheduler.activeTimeTask.active=false;kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until)}}else{break}}kha_Scheduler.activeTimeTask=null};kha_Scheduler.archiveTimeTask=function(timeTask,frameEnd){};kha_Scheduler.time=function(){return kha_Scheduler.current};kha_Scheduler.realTime=function(){return kha_System.get_time()};kha_Scheduler.resetTime=function(){var now=kha_System.get_time();var dif=now-kha_Scheduler.startTime;kha_Scheduler.startTime=now;var _g=0;var _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){var timeTask=_g1[_g];++_g;timeTask.start-=dif;timeTask.next-=dif}var _g=0;var _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){var i=_g++;kha_Scheduler.deltas[i]=0}kha_Scheduler.current=0;kha_Scheduler.lastTime=0;kha_Scheduler.lastFrameEnd=0};kha_Scheduler.addBreakableTimeTaskToGroup=function(groupId,task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}var t=new kha_TimeTask;t.active=true;t.task=task;t.id=++kha_Scheduler.currentTimeTaskId;t.groupId=groupId;t.start=kha_Scheduler.current+start;t.period=0;if(period!=0){t.period=period}t.duration=0;if(duration!=0){t.duration=t.start+duration}t.next=t.start;kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,t);return t.id};kha_Scheduler.addTimeTaskToGroup=function(groupId,task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}return kha_Scheduler.addBreakableTimeTaskToGroup(groupId,function(){task();return true},start,period,duration)};kha_Scheduler.addTimeTask=function(task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}return kha_Scheduler.addTimeTaskToGroup(0,task,start,period,duration)};kha_Scheduler.insertSorted=function(list,task){var _g=0;var _g1=list.length;while(_g<_g1){var i=_g++;if(list[i].next>task.next){list.splice(i,0,task);return}}list.push(task)};kha_Scheduler.sortFrameTasks=function(){if(kha_Scheduler.frame_tasks_sorted){return}kha_Scheduler.frameTasks.sort(function(a,b){if(a.priority>b.priority){return 1}else if(a.priority<b.priority){return-1}else{return 0}});kha_Scheduler.frame_tasks_sorted=true};var kha_Shaders=function(){};$hxClasses["kha.Shaders"]=kha_Shaders;kha_Shaders.__name__=true;kha_Shaders.init=function(){var blobs=[];var data=Reflect.field(kha_Shaders,"World_World_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.World_World_frag=new kha_graphics4_FragmentShader(blobs,["World_World.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"World_World_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.World_World_vert=new kha_graphics4_VertexShader(blobs,["World_World.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"armdefault_mesh_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.armdefault_mesh_frag=new kha_graphics4_FragmentShader(blobs,["armdefault_mesh.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"armdefault_mesh_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.armdefault_mesh_vert=new kha_graphics4_VertexShader(blobs,["armdefault_mesh.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"armdefault_shadowmap_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.armdefault_shadowmap_frag=new kha_graphics4_FragmentShader(blobs,["armdefault_shadowmap.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"armdefault_shadowmap_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.armdefault_shadowmap_vert=new kha_graphics4_VertexShader(blobs,["armdefault_shadowmap.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"ground_mesh_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.ground_mesh_frag=new kha_graphics4_FragmentShader(blobs,["ground_mesh.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"ground_mesh_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.ground_mesh_vert=new kha_graphics4_VertexShader(blobs,["ground_mesh.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_colored_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_colored_frag=new kha_graphics4_FragmentShader(blobs,["painter-colored.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_colored_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_colored_vert=new kha_graphics4_VertexShader(blobs,["painter-colored.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_image_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_image_frag=new kha_graphics4_FragmentShader(blobs,["painter-image.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_image_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_image_vert=new kha_graphics4_VertexShader(blobs,["painter-image.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_text_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_text_frag=new kha_graphics4_FragmentShader(blobs,["painter-text.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_text_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_text_vert=new kha_graphics4_VertexShader(blobs,["painter-text.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_video_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_video_frag=new kha_graphics4_FragmentShader(blobs,["painter-video.frag.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"painter_video_vertData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.painter_video_vert=new kha_graphics4_VertexShader(blobs,["painter-video.vert.d3d11"]);var blobs=[];var data=Reflect.field(kha_Shaders,"sky_mesh_fragData"+0);var bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.sky_mesh_frag=new kha_graphics4_FragmentShader(blobs,["sky_mesh.frag.d3d11"])};var kha_Sound=function(){this.sampleRate=0;this.channels=0;this.length=0};$hxClasses["kha.Sound"]=kha_Sound;kha_Sound.__name__=true;kha_Sound.__interfaces__=[kha_Resource];kha_Sound.prototype={uncompress:function(done){if(this.uncompressedData!=null){done();return}var output=new haxe_io_BytesOutput;var header=kha_audio2_ogg_vorbis_Reader.readAll(this.compressedData,output,true);var soundBytes=output.getBytes();var count=soundBytes.length/4|0;if(header.channel==1){this.length=count/kha_audio2_Audio.samplesPerSecond;var this1=new Float32Array(count*2);this.uncompressedData=this1;var _g=0;var _g1=count;while(_g<_g1){var i=_g++;this.uncompressedData[i*2]=soundBytes.getFloat(i*4);this.uncompressedData[i*2+1]=soundBytes.getFloat(i*4)}}else{this.length=count/2/kha_audio2_Audio.samplesPerSecond;var this1=new Float32Array(count);this.uncompressedData=this1;var _g=0;var _g1=count;while(_g<_g1){var i=_g++;this.uncompressedData[i]=soundBytes.getFloat(i*4)}}this.channels=header.channel;this.sampleRate=header.sampleRate;this.compressedData=null;done()},__class__:kha_Sound};var kha_SystemOptions=function(title,width,height,$window,framebuffer){if(height==null){height=-1}if(width==null){width=-1}if(title==null){title="Kha"}this.framebuffer=null;this.window=null;this.height=-1;this.width=-1;this.title="Kha";this.title=title;this.window=$window==null?new kha_WindowOptions(null,-1,-1,800,600,-1,true,null,0):$window;if(width>0){this.window.width=width;this.width=width}else{this.width=this.window.width}if(height>0){this.window.height=height;this.height=height}else{this.height=this.window.height}if(this.window.title==null){this.window.title=title}this.framebuffer=framebuffer==null?new kha_FramebufferOptions(60,true,32,16,8,1):framebuffer};$hxClasses["kha.SystemOptions"]=kha_SystemOptions;kha_SystemOptions.__name__=true;kha_SystemOptions.prototype={__class__:kha_SystemOptions};var kha_System=function(){};$hxClasses["kha.System"]=kha_System;kha_System.__name__=true;kha_System.__properties__={get_time:"get_time"};kha_System.start=function(options,callback){kha_System.theTitle=options.title;kha_SystemImpl.init(options,callback)};kha_System.notifyOnFrames=function(listener){kha_System.renderListeners.push(listener)};kha_System.notifyOnApplicationState=function(foregroundListener,resumeListener,pauseListener,backgroundListener,shutdownListener){if(foregroundListener!=null){kha_System.foregroundListeners.push(foregroundListener)}if(resumeListener!=null){kha_System.resumeListeners.push(resumeListener)}if(pauseListener!=null){kha_System.pauseListeners.push(pauseListener)}if(backgroundListener!=null){kha_System.backgroundListeners.push(backgroundListener)}if(shutdownListener!=null){kha_System.shutdownListeners.push(shutdownListener)}};kha_System.render=function(framebuffers){var _g=0;var _g1=kha_System.renderListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(framebuffers)}};kha_System.foreground=function(){var _g=0;var _g1=kha_System.foregroundListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}};kha_System.resume=function(){var _g=0;var _g1=kha_System.resumeListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}};kha_System.pause=function(){var _g=0;var _g1=kha_System.pauseListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}};kha_System.background=function(){var _g=0;var _g1=kha_System.backgroundListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}};kha_System.shutdown=function(){var _g=0;var _g1=kha_System.shutdownListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}};kha_System.dropFiles=function(filePath){var _g=0;var _g1=kha_System.dropFilesListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(filePath)}};kha_System.get_time=function(){return kha_SystemImpl.getTime()};kha_System.windowWidth=function($window){if($window==null){$window=0}return kha_Window.get($window).get_width()};kha_System.windowHeight=function($window){if($window==null){$window=0}return kha_Window.get_all()[$window].get_height()};var kha_SystemImpl=function(){};$hxClasses["kha.SystemImpl"]=kha_SystemImpl;kha_SystemImpl.__name__=true;kha_SystemImpl.renderCallback=function(){kha_Scheduler.executeFrame();kha_System.render([kha_SystemImpl.framebuffer])};kha_SystemImpl.dropFilesCallback=function(filePath){kha_System.dropFiles(filePath)};kha_SystemImpl.copyCallback=function(){if(kha_System.copyListener!=null){return kha_System.copyListener()}else{return null}};kha_SystemImpl.cutCallback=function(){if(kha_System.cutListener!=null){return kha_System.cutListener()}else{return null}};kha_SystemImpl.pasteCallback=function(data){if(kha_System.pasteListener!=null){kha_System.pasteListener(data)}};kha_SystemImpl.foregroundCallback=function(){kha_System.foreground()};kha_SystemImpl.resumeCallback=function(){kha_System.resume()};kha_SystemImpl.pauseCallback=function(){kha_System.pause()};kha_SystemImpl.backgroundCallback=function(){kha_System.background()};kha_SystemImpl.shutdownCallback=function(){kha_System.shutdown()};kha_SystemImpl.keyboardDownCallback=function(code){kha_SystemImpl.keyboard.sendDownEvent(code)};kha_SystemImpl.keyboardUpCallback=function(code){kha_SystemImpl.keyboard.sendUpEvent(code)};kha_SystemImpl.keyboardPressCallback=function(charCode){kha_SystemImpl.keyboard.sendPressEvent(String.fromCodePoint(charCode))};kha_SystemImpl.mouseDownCallback=function(button,x,y){kha_SystemImpl.mouse.sendDownEvent(0,button,x,y)};kha_SystemImpl.mouseUpCallback=function(button,x,y){kha_SystemImpl.mouse.sendUpEvent(0,button,x,y)};kha_SystemImpl.mouseMoveCallback=function(x,y,mx,my){kha_SystemImpl.mouse.sendMoveEvent(0,x,y,mx,my)};kha_SystemImpl.mouseWheelCallback=function(delta){kha_SystemImpl.mouse.sendWheelEvent(0,delta)};kha_SystemImpl.penDownCallback=function(x,y,pressure){kha_SystemImpl.pen.sendDownEvent(0,x,y,pressure)};kha_SystemImpl.penUpCallback=function(x,y,pressure){kha_SystemImpl.pen.sendUpEvent(0,x,y,pressure)};kha_SystemImpl.penMoveCallback=function(x,y,pressure){kha_SystemImpl.pen.sendMoveEvent(0,x,y,pressure)};kha_SystemImpl.gamepadAxisCallback=function(gamepad,axis,value){kha_SystemImpl.gamepads[gamepad].sendAxisEvent(axis,value)};kha_SystemImpl.gamepadButtonCallback=function(gamepad,button,value){kha_SystemImpl.gamepads[gamepad].sendButtonEvent(button,value)};kha_SystemImpl.audioCallback=function(samples){kha_audio2_Audio._callCallback(samples);var buffer=kha_audio2_Audio.buffer;Krom.writeAudioBuffer(buffer.data.buffer,samples)};kha_SystemImpl.init=function(options,callback){Krom.init(options.title,options.width,options.height,options.framebuffer.samplesPerPixel,options.framebuffer.verticalSync,options.window.mode,options.window.windowFeatures,5);kha_SystemImpl.start=Krom.getTime();haxe_Log.trace=function(v,infos){var message=haxe_Log.formatOutput(v,infos);Krom.log(message)};new kha_Window(0);kha_Scheduler.init();kha_Shaders.init();var g4=new kha_krom_Graphics;kha_SystemImpl.framebuffer=new kha_Framebuffer(0,null,null,g4);kha_SystemImpl.framebuffer.init(new kha_graphics2_Graphics1(kha_SystemImpl.framebuffer),new kha_graphics4_Graphics2(kha_SystemImpl.framebuffer),g4);Krom.setCallback(kha_SystemImpl.renderCallback);Krom.setDropFilesCallback(kha_SystemImpl.dropFilesCallback);Krom.setCutCopyPasteCallback(kha_SystemImpl.cutCallback,kha_SystemImpl.copyCallback,kha_SystemImpl.pasteCallback);Krom.setApplicationStateCallback(kha_SystemImpl.foregroundCallback,kha_SystemImpl.resumeCallback,kha_SystemImpl.pauseCallback,kha_SystemImpl.backgroundCallback,kha_SystemImpl.shutdownCallback);kha_SystemImpl.keyboard=new kha_input_Keyboard;kha_SystemImpl.mouse=new kha_input_MouseImpl;kha_SystemImpl.pen=new kha_input_Pen;kha_SystemImpl.gamepads=[];var _g=0;var _g1=kha_SystemImpl.maxGamepads;while(_g<_g1){var i=_g++;kha_SystemImpl.gamepads[i]=new kha_input_Gamepad(i)}Krom.setKeyboardDownCallback(kha_SystemImpl.keyboardDownCallback);Krom.setKeyboardUpCallback(kha_SystemImpl.keyboardUpCallback);Krom.setKeyboardPressCallback(kha_SystemImpl.keyboardPressCallback);Krom.setMouseDownCallback(kha_SystemImpl.mouseDownCallback);Krom.setMouseUpCallback(kha_SystemImpl.mouseUpCallback);Krom.setMouseMoveCallback(kha_SystemImpl.mouseMoveCallback);Krom.setMouseWheelCallback(kha_SystemImpl.mouseWheelCallback);Krom.setPenDownCallback(kha_SystemImpl.penDownCallback);Krom.setPenUpCallback(kha_SystemImpl.penUpCallback);Krom.setPenMoveCallback(kha_SystemImpl.penMoveCallback);Krom.setGamepadAxisCallback(kha_SystemImpl.gamepadAxisCallback);Krom.setGamepadButtonCallback(kha_SystemImpl.gamepadButtonCallback);kha_audio2_Audio._init();kha_audio2_Audio1._init();Krom.setAudioCallback(kha_SystemImpl.audioCallback);kha_Scheduler.start();callback(kha_Window.get(0))};kha_SystemImpl.getTime=function(){return Krom.getTime()-kha_SystemImpl.start};kha_SystemImpl.getMouse=function(num){return kha_SystemImpl.mouse};kha_SystemImpl.getPen=function(num){return kha_SystemImpl.pen};kha_SystemImpl.getKeyboard=function(num){return kha_SystemImpl.keyboard};kha_SystemImpl.lockMouse=function(){if(!kha_SystemImpl.isMouseLocked()){Krom.lockMouse();var _g=0;var _g1=kha_SystemImpl.mouseLockListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}}};kha_SystemImpl.unlockMouse=function(){if(kha_SystemImpl.isMouseLocked()){Krom.unlockMouse();var _g=0;var _g1=kha_SystemImpl.mouseLockListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}}};kha_SystemImpl.canLockMouse=function(){return Krom.canLockMouse()};kha_SystemImpl.isMouseLocked=function(){return Krom.isMouseLocked()};kha_SystemImpl.notifyOfMouseLockChange=function(func,error){if(kha_SystemImpl.canLockMouse()&&func!=null){kha_SystemImpl.mouseLockListeners.push(func)}};kha_SystemImpl.removeFromMouseLockChange=function(func,error){if(kha_SystemImpl.canLockMouse()&&func!=null){HxOverrides.remove(kha_SystemImpl.mouseLockListeners,func)}};kha_SystemImpl.hideSystemCursor=function(){Krom.showMouse(false)};kha_SystemImpl.showSystemCursor=function(){Krom.showMouse(true)};kha_SystemImpl.getGamepadId=function(index){return"unknown"};kha_SystemImpl.getGamepadVendor=function(index){return"unknown"};var kha_Window=function(num){this.num=num;kha_Window.windows.push(this)};$hxClasses["kha.Window"]=kha_Window;kha_Window.__name__=true;kha_Window.__properties__={get_all:"get_all"};kha_Window.get=function(index){return kha_Window.windows[index]};kha_Window.get_all=function(){return kha_Window.windows};kha_Window.prototype={get_width:function(){return Krom.windowWidth(this.num)},get_height:function(){return Krom.windowHeight(this.num)},get_vSynced:function(){return true},__class__:kha_Window,__properties__:{get_vSynced:"get_vSynced",get_height:"get_height",get_width:"get_width"}};var kha_WindowOptions=function(title,x,y,width,height,display,visible,windowFeatures,mode){if(mode==null){mode=0}if(visible==null){visible=true}if(display==null){display=-1}if(height==null){height=600}if(width==null){width=800}if(y==null){y=-1}if(x==null){x=-1}this.mode=0;this.windowFeatures=1|4|2;this.visible=true;this.display=-1;this.height=600;this.width=800;this.y=-1;this.x=-1;this.title=null;this.title=title;this.x=x;this.y=y;this.width=width;this.height=height;this.display=display;this.visible=visible;this.windowFeatures=windowFeatures==null?1|4|2:windowFeatures;this.mode=mode};$hxClasses["kha.WindowOptions"]=kha_WindowOptions;kha_WindowOptions.__name__=true;kha_WindowOptions.prototype={__class__:kha_WindowOptions};var kha_audio1_AudioChannel=function(){};$hxClasses["kha.audio1.AudioChannel"]=kha_audio1_AudioChannel;kha_audio1_AudioChannel.__name__=true;kha_audio1_AudioChannel.__isInterface__=true;kha_audio1_AudioChannel.prototype={__class__:kha_audio1_AudioChannel,__properties__:{get_finished:"get_finished",set_volume:"set_volume"}};var kha_internal_IntBox=function(value){this.value=value};$hxClasses["kha.internal.IntBox"]=kha_internal_IntBox;kha_internal_IntBox.__name__=true;kha_internal_IntBox.prototype={__class__:kha_internal_IntBox};var kha_audio2_Audio=function(){};$hxClasses["kha.audio2.Audio"]=kha_audio2_Audio;kha_audio2_Audio.__name__=true;kha_audio2_Audio._init=function(){var bufferSize=2048;kha_audio2_Audio.buffer=new kha_audio2_Buffer(bufferSize*4,2,44100);kha_audio2_Audio.samplesPerSecond=44100};kha_audio2_Audio._callCallback=function(samples){if(kha_audio2_Audio.buffer==null){return}if(kha_audio2_Audio.audioCallback!=null){kha_audio2_Audio.intBox.value=samples;kha_audio2_Audio.audioCallback(kha_audio2_Audio.intBox,kha_audio2_Audio.buffer)}else{var _g=0;var _g1=samples;while(_g<_g1){var i=_g++;kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.writeLocation]=0;kha_audio2_Audio.buffer.writeLocation+=1;if(kha_audio2_Audio.buffer.writeLocation>=kha_audio2_Audio.buffer.size){kha_audio2_Audio.buffer.writeLocation=0}}}};kha_audio2_Audio.stream=function(sound,loop){if(loop==null){loop=false}return null};var kha_audio2_Audio1=function(){};$hxClasses["kha.audio2.Audio1"]=kha_audio2_Audio1;kha_audio2_Audio1.__name__=true;kha_audio2_Audio1._init=function(){var this1=new Array(32);kha_audio2_Audio1.soundChannels=this1;var this1=new Array(32);kha_audio2_Audio1.streamChannels=this1;var this1=new Array(32);kha_audio2_Audio1.internalSoundChannels=this1;var this1=new Array(32);kha_audio2_Audio1.internalStreamChannels=this1;var this1=new Float32Array(512);kha_audio2_Audio1.sampleCache1=this1;var this1=new Float32Array(512);kha_audio2_Audio1.sampleCache2=this1;kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_Audio.audioCallback=kha_audio2_Audio1.mix};kha_audio2_Audio1.mix=function(samplesBox,buffer){var samples=samplesBox.value;if(kha_audio2_Audio1.sampleCache1.length<samples){if(kha_audio2_Audio.disableGcInteractions){haxe_Log.trace("Unexpected allocation request in audio thread.",{fileName:"kha/audio2/Audio1.hx",lineNumber:50,className:"kha.audio2.Audio1",methodName:"mix"});var _g=0;var _g1=samples;while(_g<_g1){var i=_g++;buffer.data[buffer.writeLocation]=0;buffer.writeLocation+=1;if(buffer.writeLocation>=buffer.size){buffer.writeLocation=0}}kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_Audio.disableGcInteractions=false;return}var this1=new Float32Array(samples*2);kha_audio2_Audio1.sampleCache1=this1;var this1=new Float32Array(samples*2);kha_audio2_Audio1.sampleCache2=this1;kha_audio2_Audio1.lastAllocationCount=0}else if(kha_audio2_Audio1.lastAllocationCount>100){kha_audio2_Audio.disableGcInteractions=true}else{kha_audio2_Audio1.lastAllocationCount+=1}var _g=0;var _g1=samples;while(_g<_g1){var i=_g++;kha_audio2_Audio1.sampleCache2[i]=0}var _g=0;while(_g<32){var i=_g++;kha_audio2_Audio1.internalSoundChannels[i]=kha_audio2_Audio1.soundChannels[i]}var _g=0;while(_g<32){var i=_g++;kha_audio2_Audio1.internalStreamChannels[i]=kha_audio2_Audio1.streamChannels[i]}var _g=0;var _g1=kha_audio2_Audio1.internalSoundChannels;while(_g<_g1.length){var channel=_g1[_g];++_g;if(channel==null||channel.get_finished()){continue}channel.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);var _g2=0;var _g3=samples;while(_g2<_g3){var i=_g2++;kha_audio2_Audio1.sampleCache2[i]+=kha_audio2_Audio1.sampleCache1[i]*channel.get_volume()}}var _g=0;var _g1=kha_audio2_Audio1.internalStreamChannels;while(_g<_g1.length){var channel=_g1[_g];++_g;if(channel==null||channel.get_finished()){continue}channel.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);var _g2=0;var _g3=samples;while(_g2<_g3){var i=_g2++;kha_audio2_Audio1.sampleCache2[i]+=kha_audio2_Audio1.sampleCache1[i]*channel.get_volume()}}var _g=0;var _g1=samples;while(_g<_g1){var i=_g++;var a=kha_audio2_Audio1.sampleCache2[i];var a1=a<1?a:1;buffer.data[buffer.writeLocation]=a1>-1?a1:-1;buffer.writeLocation+=1;if(buffer.writeLocation>=buffer.size){buffer.writeLocation=0}}};kha_audio2_Audio1.play=function(sound,loop){if(loop==null){loop=false}var channel=null;if(kha_audio2_Audio.samplesPerSecond!=sound.sampleRate){channel=new kha_audio2_ResamplingAudioChannel(loop,sound.sampleRate)}else{channel=new kha_audio2_AudioChannel(loop)}channel.data=sound.uncompressedData;var foundChannel=false;var _g=0;while(_g<32){var i=_g++;if(kha_audio2_Audio1.soundChannels[i]==null||kha_audio2_Audio1.soundChannels[i].get_finished()){kha_audio2_Audio1.soundChannels[i]=channel;foundChannel=true;break}}if(foundChannel){return channel}else{return null}};kha_audio2_Audio1._playAgain=function(channel){var _g=0;while(_g<32){var i=_g++;if(kha_audio2_Audio1.soundChannels[i]==channel){kha_audio2_Audio1.soundChannels[i]=null}}var _g=0;while(_g<32){var i=_g++;if(kha_audio2_Audio1.soundChannels[i]==null||kha_audio2_Audio1.soundChannels[i].get_finished()||kha_audio2_Audio1.soundChannels[i]==channel){kha_audio2_Audio1.soundChannels[i]=channel;break}}};kha_audio2_Audio1.stream=function(sound,loop){if(loop==null){loop=false}var hardwareChannel=kha_audio2_Audio.stream(sound,loop);if(hardwareChannel!=null){return hardwareChannel}var channel=new kha_audio2_StreamChannel(sound.compressedData,loop);var foundChannel=false;var _g=0;while(_g<32){var i=_g++;if(kha_audio2_Audio1.streamChannels[i]==null||kha_audio2_Audio1.streamChannels[i].get_finished()){kha_audio2_Audio1.streamChannels[i]=channel;foundChannel=true;break}}if(foundChannel){return channel}else{return null}};var kha_audio2_AudioChannel=function(looping){this.looping=false;this.stopped=false;this.paused=false;this.myPosition=0;this.myVolume=1;this.data=null;this.looping=looping};$hxClasses["kha.audio2.AudioChannel"]=kha_audio2_AudioChannel;kha_audio2_AudioChannel.__name__=true;kha_audio2_AudioChannel.__interfaces__=[kha_audio1_AudioChannel];kha_audio2_AudioChannel.prototype={nextSamples:function(requestedSamples,requestedLength,sampleRate){if(this.paused||this.stopped){var _g=0;var _g1=requestedLength;while(_g<_g1){var i=_g++;requestedSamples[i]=0}return}var requestedSamplesIndex=0;while(requestedSamplesIndex<requestedLength){var _g=0;var a=this.data.length-this.myPosition;var b=requestedLength-requestedSamplesIndex;var _g1=a<b?a:b;while(_g<_g1){var i=_g++;requestedSamples[requestedSamplesIndex++]=this.data[this.myPosition++]}if(this.myPosition>=this.data.length){this.myPosition=0;if(!this.looping){this.stopped=true;break}}}while(requestedSamplesIndex<requestedLength)requestedSamples[requestedSamplesIndex++]=0},play:function(){this.paused=false;this.stopped=false;kha_audio2_Audio1._playAgain(this)},stop:function(){this.myPosition=0;this.stopped=true},get_volume:function(){return this.myVolume},set_volume:function(value){return this.myVolume=value},get_finished:function(){return this.stopped},__class__:kha_audio2_AudioChannel,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume"}};var kha_audio2_Buffer=function(size,channels,samplesPerSecond){this.size=size;var this1=new Float32Array(size);this.data=this1;this.channels=channels;this.samplesPerSecond=samplesPerSecond;this.readLocation=0;this.writeLocation=0};$hxClasses["kha.audio2.Buffer"]=kha_audio2_Buffer;kha_audio2_Buffer.__name__=true;kha_audio2_Buffer.prototype={__class__:kha_audio2_Buffer};var kha_audio2_ResamplingAudioChannel=function(looping,sampleRate){kha_audio2_AudioChannel.call(this,looping);this.sampleRate=sampleRate};$hxClasses["kha.audio2.ResamplingAudioChannel"]=kha_audio2_ResamplingAudioChannel;kha_audio2_ResamplingAudioChannel.__name__=true;kha_audio2_ResamplingAudioChannel.__super__=kha_audio2_AudioChannel;kha_audio2_ResamplingAudioChannel.prototype=$extend(kha_audio2_AudioChannel.prototype,{nextSamples:function(requestedSamples,requestedLength,sampleRate){if(this.paused||this.stopped){var _g=0;var _g1=requestedLength;while(_g<_g1){var i=_g++;requestedSamples[i]=0}return}var requestedSamplesIndex=0;while(requestedSamplesIndex<requestedLength){var _g=0;var value=Math.ceil(this.data.length*(sampleRate/this.sampleRate));var a=(value%2==0?value:value+1)-this.myPosition;var b=requestedLength-requestedSamplesIndex;var _g1=a<b?a:b;while(_g<_g1){var i=_g++;var index=requestedSamplesIndex++;var position=this.myPosition++;var even=position%2==0;var factor=this.sampleRate/sampleRate;var value1;if(even){position=position/2|0;var pos=factor*position;var pos1=Math.floor(pos);var pos2=Math.floor(pos+1);pos1*=2;pos2*=2;var minimum=0;var maximum=this.data.length-1;if(maximum%2!=0){--maximum}var a1=pos1<minimum||pos1>maximum?0:this.data[pos1];var b1=pos2<minimum||pos2>maximum?0:this.data[pos2];var t=pos-Math.floor(pos);value1=(1-t)*a1+t*b1}else{position=position/2|0;var pos3=factor*position;var pos11=Math.floor(pos3);var pos21=Math.floor(pos3+1);pos11=pos11*2+1;pos21=pos21*2+1;var minimum1=1;var maximum1=this.data.length-1;if(maximum1%2==0){--maximum1}var a2=pos11<minimum1||pos11>maximum1?0:this.data[pos11];var b2=pos21<minimum1||pos21>maximum1?0:this.data[pos21];var t1=pos3-Math.floor(pos3);value1=(1-t1)*a2+t1*b2}requestedSamples[index]=value1}var value2=Math.ceil(this.data.length*(sampleRate/this.sampleRate));if(this.myPosition>=(value2%2==0?value2:value2+1)){this.myPosition=0;if(!this.looping){this.stopped=true;break}}}while(requestedSamplesIndex<requestedLength)requestedSamples[requestedSamplesIndex++]=0},play:function(){this.paused=false;this.stopped=false;kha_audio2_Audio1._playAgain(this)},stop:function(){this.myPosition=0;this.stopped=true},get_volume:function(){return this.myVolume},set_volume:function(value){return this.myVolume=value},get_finished:function(){return this.stopped},__class__:kha_audio2_ResamplingAudioChannel});var kha_audio2_StreamChannel=function(data,loop){this.paused=false;this.atend=false;this.myVolume=1;this.loop=loop;this.reader=kha_audio2_ogg_vorbis_Reader.openFromBytes(data)};$hxClasses["kha.audio2.StreamChannel"]=kha_audio2_StreamChannel;kha_audio2_StreamChannel.__name__=true;kha_audio2_StreamChannel.__interfaces__=[kha_audio1_AudioChannel];kha_audio2_StreamChannel.prototype={nextSamples:function(samples,length,sampleRate){if(this.paused){var _g=0;var _g1=length;while(_g<_g1){var i=_g++;samples[i]=0}return}var count=this.reader.read(samples,length/2|0,2,sampleRate,true)*2;if(count<length){if(this.loop){this.reader.set_currentMillisecond(0)}else{this.atend=true}var _g=count;var _g1=length;while(_g<_g1){var i=_g++;samples[i]=0}}},play:function(){this.paused=false},stop:function(){this.atend=true},get_volume:function(){return this.myVolume},set_volume:function(value){return this.myVolume=value},get_finished:function(){return this.atend},__class__:kha_audio2_StreamChannel,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume"}};var kha_audio2_ogg_tools_Crc32=function(){};$hxClasses["kha.audio2.ogg.tools.Crc32"]=kha_audio2_ogg_tools_Crc32;kha_audio2_ogg_tools_Crc32.__name__=true;kha_audio2_ogg_tools_Crc32.init=function(){if(kha_audio2_ogg_tools_Crc32.table!=null){return}var this1=new Array(256);kha_audio2_ogg_tools_Crc32.table=this1;var _g=0;while(_g<256){var i=_g++;var s=i<<24;s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);kha_audio2_ogg_tools_Crc32.table[i]=s}};var kha_audio2_ogg_vorbis_Reader=function(input,seekFunc,inputLength){this.seekFunc=seekFunc;this.inputLength=inputLength;this.decoder=kha_audio2_ogg_vorbis_VorbisDecoder.start(input);this.decoder.setupSampleNumber(seekFunc,inputLength);this.loopStart=this.get_header().comment.get_loopStart();this.loopLength=this.get_header().comment.get_loopLength()};$hxClasses["kha.audio2.ogg.vorbis.Reader"]=kha_audio2_ogg_vorbis_Reader;kha_audio2_ogg_vorbis_Reader.__name__=true;kha_audio2_ogg_vorbis_Reader.openFromBytes=function(bytes){var input=new haxe_io_BytesInput(bytes);var bytes1=input;return new kha_audio2_ogg_vorbis_Reader(input,function(pos){kha_audio2_ogg_vorbis_Reader.seekBytes(bytes1,pos)},bytes.length)};kha_audio2_ogg_vorbis_Reader.seekBytes=function(bytes,pos){bytes.set_position(pos)};kha_audio2_ogg_vorbis_Reader.readAll=function(bytes,output,useFloat){if(useFloat==null){useFloat=false}var input=new haxe_io_BytesInput(bytes);var decoder=kha_audio2_ogg_vorbis_VorbisDecoder.start(input);var bytes1=input;decoder.setupSampleNumber(function(pos){kha_audio2_ogg_vorbis_Reader.seekBytes(bytes1,pos)},bytes.length);var header=decoder.header;var count=0;var bufferSize=4096;var this1=new Float32Array(bufferSize*header.channel);var buffer=this1;while(true){var n=decoder.read(buffer,bufferSize,header.channel,header.sampleRate,useFloat);var _g=0;var _g1=n*header.channel;while(_g<_g1){var i=_g++;output.writeFloat(buffer[i])}if(n==0){break}count+=n}return decoder.header};kha_audio2_ogg_vorbis_Reader.prototype={get_header:function(){return this.decoder.header},get_currentSample:function(){return this.decoder.currentSample},set_currentSample:function(value){this.decoder.seek(this.seekFunc,this.inputLength,value);return this.decoder.currentSample},get_currentMillisecond:function(){var samples=this.get_currentSample();var b=this.get_header().sampleRate;return UInt.toFloat(samples)/UInt.toFloat(b)*1e3},set_currentMillisecond:function(value){this.set_currentSample(Math.floor(UInt.toFloat(this.get_header().sampleRate)*(value/1e3)));return this.get_currentMillisecond()},read:function(output,samples,channels,sampleRate,useFloat){if(useFloat==null){useFloat=false}this.decoder.ensurePosition(this.seekFunc);if(samples==null){samples=this.decoder.totalSample}if(channels==null){channels=this.get_header().channel}if(sampleRate==null){sampleRate=this.get_header().sampleRate}return this.decoder.read(output,samples,channels,sampleRate,useFloat)},__class__:kha_audio2_ogg_vorbis_Reader,__properties__:{set_currentMillisecond:"set_currentMillisecond",get_currentMillisecond:"get_currentMillisecond",set_currentSample:"set_currentSample",get_currentSample:"get_currentSample",get_header:"get_header"}};var kha_audio2_ogg_vorbis_VorbisDecodeState=function(input){this.nextSeg=0;this.firstDecode=false;this.bytesInSeg=0;this.validBits=0;this.input=input;this.inputPosition=0;this.page=new kha_audio2_ogg_vorbis_data_Page;kha_audio2_ogg_tools_Crc32.init()};$hxClasses["kha.audio2.ogg.vorbis.VorbisDecodeState"]=kha_audio2_ogg_vorbis_VorbisDecodeState;kha_audio2_ogg_vorbis_VorbisDecodeState.__name__=true;kha_audio2_ogg_vorbis_VorbisDecodeState.prototype={setup:function(loc0,loc1){this.inputPosition+=1;var segmentCount=this.input.readByte();this.inputPosition+=segmentCount;var this1=new Array(segmentCount);var vec=this1;var _g=0;var _g1=segmentCount;while(_g<_g1){var i=_g++;vec[i]=this.input.readByte()}this.segments=vec;this.endSegWithKnownLoc=-2;if(loc0!=-1||loc1!=-1){var i=segmentCount-1;while(i>=0){if(this.segments[i]<255){break}if(i>=0){this.endSegWithKnownLoc=i;this.knownLocForPacket=loc0}--i}}if(this.firstDecode){var i=0;var len=0;var p=new kha_audio2_ogg_vorbis_data_ProbedPage;var _g=0;var _g1=segmentCount;while(_g<_g1){var i=_g++;len+=this.segments[i]}len+=27+segmentCount;p.pageStart=this.firstAudioPageOffset;p.pageEnd=p.pageStart+len;p.firstDecodedSample=0;p.lastDecodedSample=loc0;this.pFirst=p}this.nextSeg=0},clone:function(seekFunc){var state=Object.create(kha_audio2_ogg_vorbis_VorbisDecodeState.prototype);seekFunc(this.inputPosition);state.input=this.input;state.eof=this.eof;state.validBits=this.validBits;state.discardSamplesDeferred=this.discardSamplesDeferred;state.firstDecode=this.firstDecode;state.nextSeg=this.nextSeg;state.bytesInSeg=this.bytesInSeg;state.acc=state.acc;state.lastSeg=this.lastSeg;state.lastSegWhich=this.lastSegWhich;state.currentLoc=this.currentLoc;state.currentLocValid=this.currentLocValid;state.inputPosition=this.inputPosition;state.firstAudioPageOffset=this.firstAudioPageOffset;state.error=this.error;state.segments=this.segments;state.pFirst=this.pFirst;state.pLast=this.pLast;state.page=this.page.clone();return state},next:function(){if(this.lastSeg){return 0}if(this.nextSeg==-1){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(_g){var _g1=haxe_Exception.caught(_g).unwrap();if(_g1 instanceof kha_audio2_ogg_vorbis_data_ReaderError){var e=_g1;this.lastSeg=true;this.error=e;return 0}else{throw _g}}if((this.page.flag&1)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}}var len=this.segments[this.nextSeg++];if(len<255){this.lastSeg=true;this.lastSegWhich=this.nextSeg-1}if(this.nextSeg>=this.segments.length){this.nextSeg=-1}this.bytesInSeg=len;return len},startPacket:function(){while(this.nextSeg==-1){this.page.start(this);if((this.page.flag&1)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}))}}this.lastSeg=false;this.validBits=0;this.bytesInSeg=0},maybeStartPacket:function(){if(this.nextSeg==-1){var eof=false;var x;try{this.inputPosition+=1;x=this.input.readByte()}catch(_g){if(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof){eof=true;x=0}else{throw _g}}if(eof){return false}var tmp;var tmp1;var tmp2;if(x==79){this.inputPosition+=1;tmp2=this.input.readByte()!=103}else{tmp2=true}if(!tmp2){this.inputPosition+=1;tmp1=this.input.readByte()!=103}else{tmp1=true}if(!tmp1){this.inputPosition+=1;tmp=this.input.readByte()!=83}else{tmp=true}if(tmp){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}))}this.page.startWithoutCapturePattern(this)}this.startPacket();return true},readBits:function(n){if(this.validBits<0){return 0}else if(this.validBits<n){if(n>24){return this.readBits(24)+(this.readBits(n-24)<<24)}else{if(this.validBits==0){this.acc=0}while(true){if(this.bytesInSeg==0&&(this.lastSeg||this.next()==0)){this.validBits=-1;break}else{this.bytesInSeg--;this.inputPosition+=1;this.acc=this.acc+(this.input.readByte()<<this.validBits);this.validBits+=8}if(!(this.validBits<n)){break}}if(this.validBits<0){return 0}else{var z=this.acc&(1<<n)-1;this.acc=this.acc>>>n;this.validBits-=n;return z}}}else{var z=this.acc&(1<<n)-1;this.acc=this.acc>>>n;this.validBits-=n;return z}},firstPageValidate:function(){if(this.segments.length!=1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"segmentCount",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:308,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))}if(this.segments[0]!=30){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:311,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))}},startFirstDecode:function(){this.firstAudioPageOffset=this.inputPosition;this.firstDecode=true},prepHuffman:function(){if(this.validBits<=24){if(this.validBits==0){this.acc=0}while(true){if(this.bytesInSeg==0&&(this.lastSeg||this.next()==0)){return}else{this.bytesInSeg--;this.inputPosition+=1;this.acc=this.acc+(this.input.readByte()<<this.validBits);this.validBits+=8}if(!(this.validBits<=24)){break}}}},finishDecodePacket:function(previousLength,n,r){var left=r.left.start;var currentLocValid=false;var n2=n>>1;if(this.firstDecode){this.currentLoc=-n2;this.discardSamplesDeferred=n-r.right.end;currentLocValid=true;this.firstDecode=false}else if(this.discardSamplesDeferred!=0){r.left.start+=this.discardSamplesDeferred;left=r.left.start;this.discardSamplesDeferred=0}else{var tmp=previousLength==0&&currentLocValid}if(this.lastSegWhich==this.endSegWithKnownLoc){if(currentLocValid&&(this.page.flag&4)!=0){var currentEnd=this.knownLocForPacket-(n-r.right.end);if(currentEnd<this.currentLoc+r.right.end){var len=currentEnd<this.currentLoc?0:currentEnd-this.currentLoc;len+=r.left.start;this.currentLoc+=len;return{len:len,left:left,right:r.right.start}}}this.currentLoc=this.knownLocForPacket-(n2-r.left.start);currentLocValid=true}if(currentLocValid){this.currentLoc+=r.right.start-r.left.start}return{len:r.right.end,left:left,right:r.right.start}},getSampleNumber:function(seekFunc,inputLength){var restoreOffset=this.inputPosition;var previousSafe=UInt.gte(inputLength,65536)&&UInt.gte(inputLength-65536,this.firstAudioPageOffset)?inputLength-65536:this.firstAudioPageOffset;seekFunc(this.inputPosition=previousSafe);var end=0;var last=false;var _g=this.findPage(seekFunc,inputLength);switch(_g._hx_index){case 0:var l=_g.last;var e=_g.end;end=e;last=l;break;case 1:throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}var lastPageLoc=this.inputPosition;_hx_loop1:while(!last){seekFunc(this.inputPosition=end);var _g=this.findPage(seekFunc,inputLength);switch(_g._hx_index){case 0:var l=_g.last;var e=_g.end;end=e;last=l;break;case 1:break _hx_loop1}previousSafe=lastPageLoc+1;lastPageLoc=this.inputPosition}seekFunc(this.inputPosition=lastPageLoc);this.inputPosition+=6;var this1=new Array(6);var vec=this1;var _g=0;var _g1=6;while(_g<_g1){var i=_g++;vec[i]=this.input.readByte()}var vorbisHeader=vec;this.inputPosition+=4;var lo=this.input.readInt32();this.inputPosition+=4;var hi=this.input.readInt32();if(lo==-1&&hi==-1||hi>0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:553,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}this.pLast=new kha_audio2_ogg_vorbis_data_ProbedPage;this.pLast.pageStart=lastPageLoc;this.pLast.pageEnd=end;this.pLast.lastDecodedSample=lo;this.pLast.firstDecodedSample=null;this.pLast.afterPreviousPageStart=previousSafe;seekFunc(this.inputPosition=restoreOffset);return lo},findPage:function(seekFunc,inputLength){try{while(true){this.inputPosition+=1;var n=this.input.readByte();if(n==79){var retryLoc=this.inputPosition;if(retryLoc-25>inputLength){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}var tmp;var tmp1;this.inputPosition+=1;if(this.input.readByte()==103){this.inputPosition+=1;tmp1=this.input.readByte()!=103}else{tmp1=true}if(!tmp1){this.inputPosition+=1;tmp=this.input.readByte()!=83}else{tmp=true}if(tmp){continue}var this1=new Array(27);var header=this1;header[0]=79;header[1]=103;header[2]=103;header[3]=83;this.inputPosition+=1;header[4]=this.input.readByte();this.inputPosition+=1;header[5]=this.input.readByte();this.inputPosition+=1;header[6]=this.input.readByte();this.inputPosition+=1;header[7]=this.input.readByte();this.inputPosition+=1;header[8]=this.input.readByte();this.inputPosition+=1;header[9]=this.input.readByte();this.inputPosition+=1;header[10]=this.input.readByte();this.inputPosition+=1;header[11]=this.input.readByte();this.inputPosition+=1;header[12]=this.input.readByte();this.inputPosition+=1;header[13]=this.input.readByte();this.inputPosition+=1;header[14]=this.input.readByte();this.inputPosition+=1;header[15]=this.input.readByte();this.inputPosition+=1;header[16]=this.input.readByte();this.inputPosition+=1;header[17]=this.input.readByte();this.inputPosition+=1;header[18]=this.input.readByte();this.inputPosition+=1;header[19]=this.input.readByte();this.inputPosition+=1;header[20]=this.input.readByte();this.inputPosition+=1;header[21]=this.input.readByte();this.inputPosition+=1;header[22]=this.input.readByte();this.inputPosition+=1;header[23]=this.input.readByte();this.inputPosition+=1;header[24]=this.input.readByte();this.inputPosition+=1;header[25]=this.input.readByte();this.inputPosition+=1;header[26]=this.input.readByte();if(header[4]!=0){seekFunc(this.inputPosition=retryLoc);continue}var goal=header[22]+(header[23]<<8)+(header[24]<<16)+(header[25]<<24);header[22]=0;header[23]=0;header[24]=0;header[25]=0;var crc=0;var _g=0;while(_g<27){var i=_g++;crc=crc<<8^kha_audio2_ogg_tools_Crc32.table[header[i]^crc>>>24]}var len=0;try{var _g1=0;var _g2=header[26];while(_g1<_g2){var i1=_g1++;this.inputPosition+=1;var s=this.input.readByte();crc=crc<<8^kha_audio2_ogg_tools_Crc32.table[s^crc>>>24];len+=s}var _g3=0;var _g4=len;while(_g3<_g4){var i2=_g3++;this.inputPosition+=1;var byte=this.input.readByte();crc=crc<<8^kha_audio2_ogg_tools_Crc32.table[byte^crc>>>24]}}catch(_g5){if(haxe_Exception.caught(_g5).unwrap()instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}else{throw _g5}}if(crc==goal){var end=this.inputPosition;seekFunc(this.inputPosition=retryLoc-1);return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found(end,(header[5]&4)!=0)}}}}catch(_g){if(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}else{throw _g}}},analyzePage:function(seekFunc,h){var z=new kha_audio2_ogg_vorbis_data_ProbedPage;var this1=new Array(255);var packetType=this1;z.pageStart=this.inputPosition;this.inputPosition+=27;var this1=new Array(27);var vec=this1;var _g=0;var _g1=27;while(_g<_g1){var i=_g++;vec[i]=this.input.readByte()}var pageHeader=vec;var n=pageHeader[26];this.inputPosition+=n;var this1=new Array(n);var vec=this1;var _g=0;var _g1=n;while(_g<_g1){var i=_g++;vec[i]=this.input.readByte()}var lacing=vec;var len=0;var _g=0;var _g1=pageHeader[26];while(_g<_g1){var i=_g++;len+=lacing[i]}z.pageEnd=z.pageStart+27+pageHeader[26]+len;z.lastDecodedSample=pageHeader[6]+(pageHeader[7]<<8)+(pageHeader[8]<<16)+(pageHeader[9]<<16);if((pageHeader[5]&4)!=0){z.firstDecodedSample=null;seekFunc(this.inputPosition=z.pageStart);return z}var numPacket=0;var packetStart=(pageHeader[5]&1)==0;var modeCount=h.modes.length;var _g=0;var _g1=pageHeader[26];while(_g<_g1){var i=_g++;if(packetStart){if(lacing[i]==0){seekFunc(this.inputPosition=z.pageStart);return null}this.inputPosition+=1;var n=this.input.readByte();if((n&1)!=0){seekFunc(this.inputPosition=z.pageStart);return null}n>>=1;var n1=modeCount-1;var log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];var b=n1<16384?n1<16?log2_4[n1]:n1<512?5+log2_4[n1>>5]:10+log2_4[n1>>10]:n1<16777216?n1<524288?15+log2_4[n1>>15]:20+log2_4[n1>>20]:n1<536870912?25+log2_4[n1>>25]:n1<-2147483648?30+log2_4[n1>>30]:0;n&=(1<<b)-1;if(n>=modeCount){seekFunc(this.inputPosition=z.pageStart);return null}packetType[numPacket++]=h.modes[n].blockflag;var len=lacing[i]-1;this.inputPosition+=len;var this1=new Array(len);var vec=this1;var _g2=0;var _g3=len;while(_g2<_g3){var i1=_g2++;vec[i1]=this.input.readByte()}}else{var len1=lacing[i];this.inputPosition+=len1;var this2=new Array(len1);var vec1=this2;var _g4=0;var _g5=len1;while(_g4<_g5){var i2=_g4++;vec1[i2]=this.input.readByte()}}packetStart=lacing[i]<255}var samples=0;if(numPacket>1){samples+=packetType[numPacket-1]?h.blocksize1:h.blocksize0}var i=numPacket-2;while(i>=1){--i;if(packetType[i]){if(packetType[i+1]){samples+=h.blocksize1>>1}else{samples+=(h.blocksize1-h.blocksize0>>2)+(h.blocksize0>>1)}}else{samples+=h.blocksize0>>1}--i}z.firstDecodedSample=z.lastDecodedSample-samples;seekFunc(this.inputPosition=z.pageStart);return z},decodeScalarRaw:function(c){this.prepHuffman();var codewordLengths=c.codewordLengths;var codewords=c.codewords;var sortedCodewords=c.sortedCodewords;if(c.entries>8?sortedCodewords!=null:codewords!=null){var n=this.acc;n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;var code=n>>>16|n<<16;var x=0;var n=c.sortedEntries;while(n>1){var m=x+(n>>1);if(UInt.gte(code,sortedCodewords[m])){x=m;n-=n>>1}else{n>>=1}}if(!c.sparse){x=c.sortedValues[x]}var len=codewordLengths[x];if(this.validBits>=len){this.acc=this.acc>>>len;this.validBits-=len;return x}this.validBits=0;return-1}var _g=0;var _g1=c.entries;while(_g<_g1){var i=_g++;var cl=codewordLengths[i];if(cl==255){continue}if(codewords[i]==(this.acc&(1<<cl)-1)){if(this.validBits>=cl){this.acc=this.acc>>>cl;this.validBits-=cl;return i}this.validBits=0;return-1}}this.error=new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:847,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"});this.validBits=0;return-1},__class__:kha_audio2_ogg_vorbis_VorbisDecodeState};var kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult=$hxEnums["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:true,__constructs__:["Found","NotFound"],Found:($_=function(end,last){return{_hx_index:0,end:end,last:last,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}},$_.__params__=["end","last"],$_),NotFound:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}};var kha_audio2_ogg_vorbis_VorbisDecoder=function(header,decodeState){this.header=header;this.decodeState=decodeState;this.totalSample=null;this.currentSample=0;this.previousLength=0;var this1=new Array(header.channel);this.channelBuffers=this1;var this1=new Array(header.channel);this.previousWindow=this1;var this1=new Array(header.channel);this.finalY=this1;var _g=0;var _g1=header.channel;while(_g<_g1){var i=_g++;var this1=this.channelBuffers;var this2=new Array(header.blocksize1);var vec=this2;this1[i]=vec;var this3=this.previousWindow;var this4=new Array(header.blocksize1/2|0);var vec1=this4;this3[i]=vec1;this.finalY[i]=[]}var this1=new Array(2);this.a=this1;var this1=new Array(2);this.b=this1;var this1=new Array(2);this.c=this1;var this1=new Array(2);this.window=this1;var this1=new Array(2);this.bitReverseData=this1;this.initBlocksize(0,header.blocksize0);this.initBlocksize(1,header.blocksize1)};$hxClasses["kha.audio2.ogg.vorbis.VorbisDecoder"]=kha_audio2_ogg_vorbis_VorbisDecoder;kha_audio2_ogg_vorbis_VorbisDecoder.__name__=true;kha_audio2_ogg_vorbis_VorbisDecoder.start=function(input){var decodeState=new kha_audio2_ogg_vorbis_VorbisDecodeState(input);var header=kha_audio2_ogg_vorbis_data_Header.read(decodeState);var decoder=new kha_audio2_ogg_vorbis_VorbisDecoder(header,decodeState);decodeState.startFirstDecode();decoder.pumpFirstFrame();return decoder};kha_audio2_ogg_vorbis_VorbisDecoder.prototype={read:function(output,samples,channels,sampleRate,useFloat){var b=this.header.sampleRate;if((UInt.toFloat(sampleRate)%UInt.toFloat(b)|0)!=0){throw haxe_Exception.thrown("Unsupported sampleRate : can't convert "+(this.header.sampleRate==null?"null":Std.string(UInt.toFloat(this.header.sampleRate)))+" to "+sampleRate)}if(channels%this.header.channel!=0){throw haxe_Exception.thrown("Unsupported channels : can't convert "+this.header.channel+" to "+channels)}var b=this.header.sampleRate;var sampleRepeat=UInt.toFloat(sampleRate)/UInt.toFloat(b)|0;var channelRepeat=channels/this.header.channel|0;var n=0;var len=Math.floor(samples/sampleRepeat);if(this.totalSample!=null&&len>this.totalSample-this.currentSample){len=this.totalSample-this.currentSample}var index=0;while(n<len){var k=this.channelBufferEnd-this.channelBufferStart;if(k>=len-n){k=len-n}var _g=this.channelBufferStart;var _g1=this.channelBufferStart+k;while(_g<_g1){var j=_g++;var _g2=0;var _g3=sampleRepeat;while(_g2<_g3){var sr=_g2++;var _g4=0;var _g5=this.header.channel;while(_g4<_g5){var i=_g4++;var _g6=0;var _g7=channelRepeat;while(_g6<_g7){var cr=_g6++;var value=this.channelBuffers[i][j];if(value>1){value=1}else if(value<-1){value=-1}if(useFloat){output[index]=value;++index}}}}}n+=k;this.channelBufferStart+=k;if(n==len||this.getFrameFloat()==0){break}}var _g=n;var _g1=len;while(_g<_g1){var j=_g++;var _g2=0;var _g3=sampleRepeat;while(_g2<_g3){var sr=_g2++;var _g4=0;var _g5=this.header.channel;while(_g4<_g5){var i=_g4++;var _g6=0;var _g7=channelRepeat;while(_g6<_g7){var cr=_g6++;if(useFloat){output[index]=0;++index}}}}}this.currentSample+=len;return len*sampleRepeat},skipSamples:function(len){var n=0;if(this.totalSample!=null&&len>this.totalSample-this.currentSample){len=this.totalSample-this.currentSample}while(n<len){var k=this.channelBufferEnd-this.channelBufferStart;if(k>=len-n){k=len-n}n+=k;this.channelBufferStart+=k;if(n==len||this.getFrameFloat()==0){break}}this.currentSample+=len;return len},setupSampleNumber:function(seekFunc,inputLength){if(this.totalSample==null){this.totalSample=this.decodeState.getSampleNumber(seekFunc,inputLength)}},seek:function(seekFunc,inputLength,sampleNumber){if(this.currentSample==sampleNumber){return}if(this.totalSample==null){this.setupSampleNumber(seekFunc,inputLength);if(this.totalSample==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}}if(sampleNumber<0){sampleNumber=0}var p0=this.decodeState.pFirst;var p1=this.decodeState.pLast;if(sampleNumber>=p1.lastDecodedSample){sampleNumber=p1.lastDecodedSample-1}if(sampleNumber<p0.lastDecodedSample){this.seekFrameFromPage(seekFunc,p0.pageStart,0,sampleNumber)}else{var attempts=0;while(p0.pageEnd<p1.pageStart){var startOffset=p0.pageEnd;var endOffset=p1.afterPreviousPageStart;var startSample=p0.lastDecodedSample;var endSample=p1.lastDecodedSample;if(startSample==null||endSample==null){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}if(UInt.gt(endOffset,startOffset+4e3)){endOffset=endOffset-4e3}var probe=startOffset+Math.floor(UInt.toFloat(endOffset-startOffset)/UInt.toFloat(endSample-startSample)*(sampleNumber-startSample));if(attempts>=4){var probe2=startOffset+(endOffset-startOffset>>>1);probe=attempts>=8?probe2:UInt.gt(probe2,probe)?probe+(probe2-probe>>>1):probe2+(probe-probe2>>>1)}++attempts;seekFunc(this.decodeState.inputPosition=probe);var _g=this.decodeState.findPage(seekFunc,inputLength);switch(_g._hx_index){case 0:var _g1=_g.last;var _g2=_g.end;break;case 1:throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}var q=this.decodeState.analyzePage(seekFunc,this.header);if(q==null){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}q.afterPreviousPageStart=probe;if(q.pageStart==p1.pageStart){p1=q;continue}if(sampleNumber<q.lastDecodedSample){p1=q}else{p0=q}}if(p0.lastDecodedSample<=sampleNumber&&sampleNumber<p1.lastDecodedSample){this.seekFrameFromPage(seekFunc,p1.pageStart,p0.lastDecodedSample,sampleNumber)}else{throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}}},seekFrameFromPage:function(seekFunc,pageStart,firstSample,targetSample){var frame=0;var frameStart=firstSample;seekFunc(this.decodeState.inputPosition=pageStart);this.decodeState.nextSeg=-1;var leftEnd=0;var leftStart=0;var prevState=null;var lastState=null;while(true){prevState=lastState;lastState=this.decodeState.clone(seekFunc);var initialResult=this.decodeInitial();if(initialResult==null){lastState=prevState;break}leftStart=initialResult.left.start;leftEnd=initialResult.left.end;var start=frame==0?leftEnd:leftStart;if(targetSample<frameStart+initialResult.right.start-start){break}var _this=this.decodeState;while(_this.bytesInSeg!=0||!_this.lastSeg&&_this.next()!=0){_this.bytesInSeg--;_this.inputPosition+=1;_this.input.readByte()}frameStart+=initialResult.right.start-start;++frame}this.decodeState=lastState;seekFunc(this.decodeState.inputPosition);this.previousLength=0;this.pumpFirstFrame();this.currentSample=frameStart;this.skipSamples(targetSample-frameStart)},ensurePosition:function(seekFunc){seekFunc(this.decodeState.inputPosition)},getFrameFloat:function(){var result=this.decodePacket();if(result==null){this.channelBufferStart=this.channelBufferEnd=0;return 0}var len=this.finishFrame(result);this.channelBufferStart=result.left;this.channelBufferEnd=result.left+len;return len},pumpFirstFrame:function(){this.finishFrame(this.decodePacket())},finishFrame:function(r){var len=r.len;var right=r.right;var left=r.left;if(this.previousLength!=0){var n=this.previousLength;var w=this.getWindow(n);var _g=0;var _g1=this.header.channel;while(_g<_g1){var i=_g++;var cb=this.channelBuffers[i];var pw=this.previousWindow[i];var _g2=0;var _g3=n;while(_g2<_g3){var j=_g2++;cb[left+j]=cb[left+j]*w[j]+pw[j]*w[n-1-j]}}}var prev=this.previousLength;this.previousLength=len-right;var _g=0;var _g1=this.header.channel;while(_g<_g1){var i=_g++;var pw=this.previousWindow[i];var cb=this.channelBuffers[i];var _g2=0;var _g3=len-right;while(_g2<_g3){var j=_g2++;pw[j]=cb[right+j]}}if(prev==0){return 0}if(len<right){right=len}return right-left},getWindow:function(len){len<<=1;if(len==this.header.blocksize0){return this.window[0]}else if(len==this.header.blocksize1){return this.window[1]}else{return null}},initBlocksize:function(bs,n){var n2=n>>1;var n4=n>>2;var n8=n>>3;var this1=this.a;var this2=new Array(n2);this1[bs]=this2;var this1=this.b;var this2=new Array(n2);this1[bs]=this2;var this1=this.c;var this2=new Array(n4);this1[bs]=this2;var this1=this.window;var this2=new Array(n2);this1[bs]=this2;var this1=this.bitReverseData;var this2=new Array(n8);this1[bs]=this2;kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors(n,this.a[bs],this.b[bs],this.c[bs]);kha_audio2_ogg_vorbis_VorbisTools.computeWindow(n,this.window[bs]);kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse(n,this.bitReverseData[bs])},inverseMdct:function(buffer,n,blocktype){var bt=blocktype?1:0;var a=this.a[bt];var b=this.b[bt];var c=this.c[bt];var bitReverse=this.bitReverseData[bt];var n2=n>>1;var n4=n>>2;var n8=n>>3;var this1=new Array(n2);var buf2=this1;var dOffset=n2-2;var aaOffset=0;var eOffset=0;var eStopOffset=n2;while(eOffset!=eStopOffset){buf2[dOffset+1]=buffer[eOffset]*a[aaOffset]-buffer[eOffset+2]*a[aaOffset+1];buf2[dOffset]=buffer[eOffset]*a[aaOffset+1]+buffer[eOffset+2]*a[aaOffset];dOffset-=2;aaOffset+=2;eOffset+=4}eOffset=n2-3;while(dOffset>=0){buf2[dOffset+1]=-buffer[eOffset+2]*a[aaOffset]- -buffer[eOffset]*a[aaOffset+1];buf2[dOffset]=-buffer[eOffset+2]*a[aaOffset+1]+-buffer[eOffset]*a[aaOffset];dOffset-=2;aaOffset+=2;eOffset-=4}var u=buffer;var v=buf2;var aaOffset=n2-8;var eOffset0=n4;var eOffset1=0;var dOffset0=n4;var dOffset1=0;while(aaOffset>=0){var v41_21=v[eOffset0+1]-v[eOffset1+1];var v40_20=v[eOffset0]-v[eOffset1];u[dOffset0+1]=v[eOffset0+1]+v[eOffset1+1];u[dOffset0]=v[eOffset0]+v[eOffset1];u[dOffset1+1]=v41_21*a[aaOffset+4]-v40_20*a[aaOffset+5];u[dOffset1]=v40_20*a[aaOffset+4]+v41_21*a[aaOffset+5];v41_21=v[eOffset0+3]-v[eOffset1+3];v40_20=v[eOffset0+2]-v[eOffset1+2];u[dOffset0+3]=v[eOffset0+3]+v[eOffset1+3];u[dOffset0+2]=v[eOffset0+2]+v[eOffset1+2];u[dOffset1+3]=v41_21*a[aaOffset]-v40_20*a[aaOffset+1];u[dOffset1+2]=v40_20*a[aaOffset]+v41_21*a[aaOffset+1];aaOffset-=8;dOffset0+=4;dOffset1+=4;eOffset0+=4;eOffset1+=4}var log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];var ld=(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0)-1;var i_off=n2-1-n4*0;var eeOffset0=i_off;var eeOffset2=i_off+-(n>>3);var aOffset=0;var i=(n>>4>>2)+1;while(--i>0){var k00_20=u[eeOffset0]-u[eeOffset2];var k01_21=u[eeOffset0+-1]-u[eeOffset2+-1];u[eeOffset0]+=u[eeOffset2];u[eeOffset0+-1]+=u[eeOffset2+-1];u[eeOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-2]-u[eeOffset2+-2];k01_21=u[eeOffset0+-3]-u[eeOffset2+-3];u[eeOffset0+-2]+=u[eeOffset2+-2];u[eeOffset0+-3]+=u[eeOffset2+-3];u[eeOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-4]-u[eeOffset2+-4];k01_21=u[eeOffset0+-5]-u[eeOffset2+-5];u[eeOffset0+-4]+=u[eeOffset2+-4];u[eeOffset0+-5]+=u[eeOffset2+-5];u[eeOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-6]-u[eeOffset2+-6];k01_21=u[eeOffset0+-7]-u[eeOffset2+-7];u[eeOffset0+-6]+=u[eeOffset2+-6];u[eeOffset0+-7]+=u[eeOffset2+-7];u[eeOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;eeOffset0-=8;eeOffset2-=8}var i_off=n2-1-n4;var eeOffset0=i_off;var eeOffset2=i_off+-(n>>3);var aOffset=0;var i=(n>>4>>2)+1;while(--i>0){var k00_20=u[eeOffset0]-u[eeOffset2];var k01_21=u[eeOffset0+-1]-u[eeOffset2+-1];u[eeOffset0]+=u[eeOffset2];u[eeOffset0+-1]+=u[eeOffset2+-1];u[eeOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-2]-u[eeOffset2+-2];k01_21=u[eeOffset0+-3]-u[eeOffset2+-3];u[eeOffset0+-2]+=u[eeOffset2+-2];u[eeOffset0+-3]+=u[eeOffset2+-3];u[eeOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-4]-u[eeOffset2+-4];k01_21=u[eeOffset0+-5]-u[eeOffset2+-5];u[eeOffset0+-4]+=u[eeOffset2+-4];u[eeOffset0+-5]+=u[eeOffset2+-5];u[eeOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-6]-u[eeOffset2+-6];k01_21=u[eeOffset0+-7]-u[eeOffset2+-7];u[eeOffset0+-6]+=u[eeOffset2+-6];u[eeOffset0+-7]+=u[eeOffset2+-7];u[eeOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;eeOffset0-=8;eeOffset2-=8}var d0=n2-1-n8*0;var aOffset=0;var eOffset0=d0;var eOffset2=d0+-(n>>4);var i=(n>>5>>2)+1;while(--i>0){var k00_20=u[eOffset0]-u[eOffset2];var k01_21=u[eOffset0+-1]-u[eOffset2+-1];u[eOffset0]+=u[eOffset2];u[eOffset0+-1]+=u[eOffset2+-1];u[eOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-2]-u[eOffset2+-2];k01_21=u[eOffset0+-3]-u[eOffset2+-3];u[eOffset0+-2]+=u[eOffset2+-2];u[eOffset0+-3]+=u[eOffset2+-3];u[eOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-4]-u[eOffset2+-4];k01_21=u[eOffset0+-5]-u[eOffset2+-5];u[eOffset0+-4]+=u[eOffset2+-4];u[eOffset0+-5]+=u[eOffset2+-5];u[eOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-6]-u[eOffset2+-6];k01_21=u[eOffset0+-7]-u[eOffset2+-7];u[eOffset0+-6]+=u[eOffset2+-6];u[eOffset0+-7]+=u[eOffset2+-7];u[eOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];eOffset0-=8;eOffset2-=8;aOffset+=16}var d0=n2-1-n8;var aOffset=0;var eOffset0=d0;var eOffset2=d0+-(n>>4);var i=(n>>5>>2)+1;while(--i>0){var k00_20=u[eOffset0]-u[eOffset2];var k01_21=u[eOffset0+-1]-u[eOffset2+-1];u[eOffset0]+=u[eOffset2];u[eOffset0+-1]+=u[eOffset2+-1];u[eOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-2]-u[eOffset2+-2];k01_21=u[eOffset0+-3]-u[eOffset2+-3];u[eOffset0+-2]+=u[eOffset2+-2];u[eOffset0+-3]+=u[eOffset2+-3];u[eOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-4]-u[eOffset2+-4];k01_21=u[eOffset0+-5]-u[eOffset2+-5];u[eOffset0+-4]+=u[eOffset2+-4];u[eOffset0+-5]+=u[eOffset2+-5];u[eOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-6]-u[eOffset2+-6];k01_21=u[eOffset0+-7]-u[eOffset2+-7];u[eOffset0+-6]+=u[eOffset2+-6];u[eOffset0+-7]+=u[eOffset2+-7];u[eOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];eOffset0-=8;eOffset2-=8;aOffset+=16}var d0=n2-1-n8*2;var aOffset=0;var eOffset0=d0;var eOffset2=d0+-(n>>4);var i=(n>>5>>2)+1;while(--i>0){var k00_20=u[eOffset0]-u[eOffset2];var k01_21=u[eOffset0+-1]-u[eOffset2+-1];u[eOffset0]+=u[eOffset2];u[eOffset0+-1]+=u[eOffset2+-1];u[eOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-2]-u[eOffset2+-2];k01_21=u[eOffset0+-3]-u[eOffset2+-3];u[eOffset0+-2]+=u[eOffset2+-2];u[eOffset0+-3]+=u[eOffset2+-3];u[eOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-4]-u[eOffset2+-4];k01_21=u[eOffset0+-5]-u[eOffset2+-5];u[eOffset0+-4]+=u[eOffset2+-4];u[eOffset0+-5]+=u[eOffset2+-5];u[eOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-6]-u[eOffset2+-6];k01_21=u[eOffset0+-7]-u[eOffset2+-7];u[eOffset0+-6]+=u[eOffset2+-6];u[eOffset0+-7]+=u[eOffset2+-7];u[eOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];eOffset0-=8;eOffset2-=8;aOffset+=16}var d0=n2-1-n8*3;var aOffset=0;var eOffset0=d0;var eOffset2=d0+-(n>>4);var i=(n>>5>>2)+1;while(--i>0){var k00_20=u[eOffset0]-u[eOffset2];var k01_21=u[eOffset0+-1]-u[eOffset2+-1];u[eOffset0]+=u[eOffset2];u[eOffset0+-1]+=u[eOffset2+-1];u[eOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-2]-u[eOffset2+-2];k01_21=u[eOffset0+-3]-u[eOffset2+-3];u[eOffset0+-2]+=u[eOffset2+-2];u[eOffset0+-3]+=u[eOffset2+-3];u[eOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-4]-u[eOffset2+-4];k01_21=u[eOffset0+-5]-u[eOffset2+-5];u[eOffset0+-4]+=u[eOffset2+-4];u[eOffset0+-5]+=u[eOffset2+-5];u[eOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=16;k00_20=u[eOffset0+-6]-u[eOffset2+-6];k01_21=u[eOffset0+-7]-u[eOffset2+-7];u[eOffset0+-6]+=u[eOffset2+-6];u[eOffset0+-7]+=u[eOffset2+-7];u[eOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];eOffset0-=8;eOffset2-=8;aOffset+=16}var _g=2;var _g1=ld-3>>1;while(_g<_g1){var l=_g++;var k0=n>>l+2;var k0_2=k0>>1;var lim=1<<l+1;var _g2=0;var _g3=lim;while(_g2<_g3){var i=_g2++;var d0=n2-1-k0*i;var k1=1<<l+3;var aOffset=0;var eOffset0=d0;var eOffset2=d0+-k0_2;var i1=(n>>l+4>>2)+1;while(--i1>0){var k00_20=u[eOffset0]-u[eOffset2];var k01_21=u[eOffset0+-1]-u[eOffset2+-1];u[eOffset0]+=u[eOffset2];u[eOffset0+-1]+=u[eOffset2+-1];u[eOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=k1;k00_20=u[eOffset0+-2]-u[eOffset2+-2];k01_21=u[eOffset0+-3]-u[eOffset2+-3];u[eOffset0+-2]+=u[eOffset2+-2];u[eOffset0+-3]+=u[eOffset2+-3];u[eOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=k1;k00_20=u[eOffset0+-4]-u[eOffset2+-4];k01_21=u[eOffset0+-5]-u[eOffset2+-5];u[eOffset0+-4]+=u[eOffset2+-4];u[eOffset0+-5]+=u[eOffset2+-5];u[eOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=k1;k00_20=u[eOffset0+-6]-u[eOffset2+-6];k01_21=u[eOffset0+-7]-u[eOffset2+-7];u[eOffset0+-6]+=u[eOffset2+-6];u[eOffset0+-7]+=u[eOffset2+-7];u[eOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];eOffset0-=8;eOffset2-=8;aOffset+=k1}}}var _g=ld-3>>1;var _g1=ld-6;while(_g<_g1){var l=_g++;var k0=n>>l+2;var k1=1<<l+3;var k0_2=k0>>1;var rlim=n>>l+6;var lim=1<<l+1;var aOffset=0;var i_off=n2-1;var r=rlim+1;while(--r>0){var A0=a[aOffset];var A1=a[aOffset+1];var A2=a[aOffset+k1];var A3=a[aOffset+k1+1];var A4=a[aOffset+k1*2];var A5=a[aOffset+k1*2+1];var A6=a[aOffset+k1*3];var A7=a[aOffset+k1*3+1];var eeOffset0=i_off;var eeOffset2=i_off+-k0_2;var i=lim+1;while(--i>0){var k00=u[eeOffset0]-u[eeOffset2];var k11=u[eeOffset0+-1]-u[eeOffset2+-1];u[eeOffset0]+=u[eeOffset2];u[eeOffset0+-1]+=u[eeOffset2+-1];u[eeOffset2]=k00*A0-k11*A1;u[eeOffset2+-1]=k11*A0+k00*A1;k00=u[eeOffset0+-2]-u[eeOffset2+-2];k11=u[eeOffset0+-3]-u[eeOffset2+-3];u[eeOffset0+-2]+=u[eeOffset2+-2];u[eeOffset0+-3]+=u[eeOffset2+-3];u[eeOffset2+-2]=k00*A2-k11*A3;u[eeOffset2+-3]=k11*A2+k00*A3;k00=u[eeOffset0+-4]-u[eeOffset2+-4];k11=u[eeOffset0+-5]-u[eeOffset2+-5];u[eeOffset0+-4]+=u[eeOffset2+-4];u[eeOffset0+-5]+=u[eeOffset2+-5];u[eeOffset2+-4]=k00*A4-k11*A5;u[eeOffset2+-5]=k11*A4+k00*A5;k00=u[eeOffset0+-6]-u[eeOffset2+-6];k11=u[eeOffset0+-7]-u[eeOffset2+-7];u[eeOffset0+-6]+=u[eeOffset2+-6];u[eeOffset0+-7]+=u[eeOffset2+-7];u[eeOffset2+-6]=k00*A6-k11*A7;u[eeOffset2+-7]=k11*A6+k00*A7;eeOffset0-=k0;eeOffset2-=k0}aOffset+=k1*4;i_off-=8}}var i_off=n2-1;var A2=a[n>>3];var zOffset=i_off;var baseOffset=i_off-16*(n>>5);while(zOffset>baseOffset){var t0=u[zOffset];var t1=u[zOffset+-8];u[zOffset+-8]=t0-t1;u[zOffset]=t0+t1;t0=u[zOffset+-1];t1=u[zOffset+-9];u[zOffset+-9]=t0-t1;u[zOffset+-1]=t0+t1;t0=u[zOffset+-2];t1=u[zOffset+-10];var k00=t0-t1;u[zOffset+-2]=t0+t1;t0=u[zOffset+-3];t1=u[zOffset+-11];var k11=t0-t1;u[zOffset+-3]=t0+t1;u[zOffset+-10]=(k00+k11)*A2;u[zOffset+-11]=(k11-k00)*A2;t0=u[zOffset+-4];t1=u[zOffset+-12];k00=t1-t0;u[zOffset+-4]=t0+t1;t0=u[zOffset+-5];t1=u[zOffset+-13];k11=t0-t1;u[zOffset+-5]=t0+t1;u[zOffset+-12]=k11;u[zOffset+-13]=k00;t0=u[zOffset+-6];t1=u[zOffset+-14];k00=t1-t0;u[zOffset+-6]=t0+t1;t0=u[zOffset+-7];t1=u[zOffset+-15];k11=t0-t1;u[zOffset+-7]=t0+t1;u[zOffset+-14]=(k00+k11)*A2;u[zOffset+-15]=(k00-k11)*A2;var t01=u[zOffset];var t11=u[zOffset+-4];var k001=t01-t11;var y0=t01+t11;t01=u[zOffset+-2];t11=u[zOffset+-6];var y2=t01+t11;var k22=t01-t11;u[zOffset]=y0+y2;u[zOffset+-2]=y0-y2;var k33=u[zOffset+-3]-u[zOffset+-7];u[zOffset+-4]=k001+k33;u[zOffset+-6]=k001-k33;t01=u[zOffset+-1];t11=u[zOffset+-5];var k111=t01-t11;var y1=t01+t11;var y3=u[zOffset+-3]+u[zOffset+-7];u[zOffset+-1]=y1+y3;u[zOffset+-3]=y1-y3;u[zOffset+-5]=k111-k22;u[zOffset+-7]=k111+k22;var zOffset1=zOffset-8;var t02=u[zOffset1];var t12=u[zOffset1+-4];var k002=t02-t12;var y01=t02+t12;t02=u[zOffset1+-2];t12=u[zOffset1+-6];var y21=t02+t12;var k221=t02-t12;u[zOffset1]=y01+y21;u[zOffset1+-2]=y01-y21;var k331=u[zOffset1+-3]-u[zOffset1+-7];u[zOffset1+-4]=k002+k331;u[zOffset1+-6]=k002-k331;t02=u[zOffset1+-1];t12=u[zOffset1+-5];var k112=t02-t12;var y11=t02+t12;var y31=u[zOffset1+-3]+u[zOffset1+-7];u[zOffset1+-1]=y11+y31;u[zOffset1+-3]=y11-y31;u[zOffset1+-5]=k112-k221;u[zOffset1+-7]=k112+k221;zOffset-=16}var brOffset=0;var dOffset0=n4-4;var dOffset1=n2-4;while(dOffset0>=0){var k4=bitReverse[brOffset];v[dOffset1+3]=u[k4];v[dOffset1+2]=u[k4+1];v[dOffset0+3]=u[k4+2];v[dOffset0+2]=u[k4+3];k4=bitReverse[brOffset+1];v[dOffset1+1]=u[k4];v[dOffset1]=u[k4+1];v[dOffset0+1]=u[k4+2];v[dOffset0]=u[k4+3];dOffset0-=4;dOffset1-=4;brOffset+=2}var cOffset=0;var dOffset=0;var eOffset=n2-4;while(dOffset<eOffset){var a02=v[dOffset]-v[eOffset+2];var a11=v[dOffset+1]+v[eOffset+3];var b0=c[cOffset+1]*a02+c[cOffset]*a11;var b1=c[cOffset+1]*a11-c[cOffset]*a02;var b2=v[dOffset]+v[eOffset+2];var b3=v[dOffset+1]-v[eOffset+3];v[dOffset]=b2+b0;v[dOffset+1]=b3+b1;v[eOffset+2]=b2-b0;v[eOffset+3]=b1-b3;a02=v[dOffset+2]-v[eOffset];a11=v[dOffset+3]+v[eOffset+1];b0=c[cOffset+3]*a02+c[cOffset+2]*a11;b1=c[cOffset+3]*a11-c[cOffset+2]*a02;b2=v[dOffset+2]+v[eOffset];b3=v[dOffset+3]-v[eOffset+1];v[dOffset+2]=b2+b0;v[dOffset+3]=b3+b1;v[eOffset]=b2-b0;v[eOffset+1]=b1-b3;cOffset+=4;dOffset+=4;eOffset-=4}var bOffset=n2-8;var eOffset=n2-8;var dOffset0=0;var dOffset1=n2-4;var dOffset2=n2;var dOffset3=n-4;while(eOffset>=0){var p3=buf2[eOffset+6]*b[bOffset+7]-buf2[eOffset+7]*b[bOffset+6];var p2=-buf2[eOffset+6]*b[bOffset+6]-buf2[eOffset+7]*b[bOffset+7];buffer[dOffset0]=p3;buffer[dOffset1+3]=-p3;buffer[dOffset2]=p2;buffer[dOffset3+3]=p2;var p1=buf2[eOffset+4]*b[bOffset+5]-buf2[eOffset+5]*b[bOffset+4];var p0=-buf2[eOffset+4]*b[bOffset+4]-buf2[eOffset+5]*b[bOffset+5];buffer[dOffset0+1]=p1;buffer[dOffset1+2]=-p1;buffer[dOffset2+1]=p0;buffer[dOffset3+2]=p0;p3=buf2[eOffset+2]*b[bOffset+3]-buf2[eOffset+3]*b[bOffset+2];p2=-buf2[eOffset+2]*b[bOffset+2]-buf2[eOffset+3]*b[bOffset+3];buffer[dOffset0+2]=p3;buffer[dOffset1+1]=-p3;buffer[dOffset2+2]=p2;buffer[dOffset3+1]=p2;p1=buf2[eOffset]*b[bOffset+1]-buf2[eOffset+1]*b[bOffset];p0=-buf2[eOffset]*b[bOffset]-buf2[eOffset+1]*b[bOffset+1];buffer[dOffset0+3]=p1;buffer[dOffset1]=-p1;buffer[dOffset2+3]=p0;buffer[dOffset3]=p0;bOffset-=8;eOffset-=8;dOffset0+=4;dOffset2+=4;dOffset1-=4;dOffset3-=4}},decodePacket:function(){var result=this.decodeInitial();if(result==null){return null}var rest=this.decodePacketRest(result);return rest},decodeInitial:function(){this.channelBufferStart=this.channelBufferEnd=0;while(true){if(!this.decodeState.maybeStartPacket()){return null}if(this.decodeState.readBits(1)!=0){while(true){var _this=this.decodeState;var x;if(_this.bytesInSeg==0&&(_this.lastSeg||_this.next()==0)){x=-1}else{_this.bytesInSeg--;_this.inputPosition+=1;x=_this.input.readByte()}_this.validBits=0;if(!(-1!=x)){break}}continue}break}var n=this.header.modes.length-1;var log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];var i=this.decodeState.readBits(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0);if(i==-1||i>=this.header.modes.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}))}var m=this.header.modes[i];var n;var prev;var next;if(m.blockflag){n=this.header.blocksize1;prev=this.decodeState.readBits(1);next=this.decodeState.readBits(1)}else{next=0;prev=next;n=this.header.blocksize0}var windowCenter=n>>1;return{mode:i,left:m.blockflag&&prev==0?{start:n-this.header.blocksize0>>2,end:n+this.header.blocksize0>>2}:{start:0,end:windowCenter},right:m.blockflag&&next==0?{start:n*3-this.header.blocksize0>>2,end:n*3+this.header.blocksize0>>2}:{start:windowCenter,end:n}}},decodePacketRest:function(r){var len=0;var m=this.header.modes[r.mode];var this1=new Array(256);var zeroChannel=this1;var this1=new Array(256);var reallyZeroChannel=this1;var n=m.blockflag?this.header.blocksize1:this.header.blocksize0;var map=this.header.mapping[m.mapping];var n2=n>>1;var rangeList=[256,128,86,64];var codebooks=this.header.codebooks;var _g=0;var _g1=this.header.channel;while(_g<_g1){var i=_g++;var s=map.chan[i].mux;zeroChannel[i]=false;var floor=this.header.floorConfig[map.submapFloor[s]];if(floor.type==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}))}else{var g=floor.floor1;if(this.decodeState.readBits(1)!=0){var fy=[];var this1=new Array(256);var step2Flag=this1;var range=rangeList[g.floor1Multiplier-1];var offset=2;fy=this.finalY[i];var log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];fy[0]=this.decodeState.readBits((range<16384?range<16?log2_4[range]:range<512?5+log2_4[range>>5]:10+log2_4[range>>10]:range<16777216?range<524288?15+log2_4[range>>15]:20+log2_4[range>>20]:range<536870912?25+log2_4[range>>25]:range<-2147483648?30+log2_4[range>>30]:0)-1);var log2_41=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];fy[1]=this.decodeState.readBits((range<16384?range<16?log2_41[range]:range<512?5+log2_41[range>>5]:10+log2_41[range>>10]:range<16777216?range<524288?15+log2_41[range>>15]:20+log2_41[range>>20]:range<536870912?25+log2_41[range>>25]:range<-2147483648?30+log2_41[range>>30]:0)-1);var _g2=0;var _g3=g.partitions;while(_g2<_g3){var j=_g2++;var pclass=g.partitionClassList[j];var cdim=g.classDimensions[pclass];var cbits=g.classSubclasses[pclass];var csub=(1<<cbits)-1;var cval=0;if(cbits!=0){var c=codebooks[g.classMasterbooks[pclass]];var _this=this.decodeState;if(_this.validBits<10){_this.prepHuffman()}var i1=c.fastHuffman[_this.acc&1023];var val;if(i1>=0){var l=c.codewordLengths[i1];_this.acc=_this.acc>>>l;_this.validBits-=l;if(_this.validBits<0){_this.validBits=0;val=-1}else{val=i1}}else{val=_this.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}cval=val}var books=g.subclassBooks[pclass];var _g4=0;var _g5=cdim;while(_g4<_g5){var k=_g4++;var book=books[cval&csub];cval>>=cbits;var tmp=offset++;var tmp1;if(book>=0){var _this1=this.decodeState;var c1=codebooks[book];if(_this1.validBits<10){_this1.prepHuffman()}var i2=c1.fastHuffman[_this1.acc&1023];var val1;if(i2>=0){var l1=c1.codewordLengths[i2];_this1.acc=_this1.acc>>>l1;_this1.validBits-=l1;if(_this1.validBits<0){_this1.validBits=0;val1=-1}else{val1=i2}}else{val1=_this1.decodeScalarRaw(c1)}if(c1.sparse){val1=c1.sortedValues[val1]}tmp1=val1}else{tmp1=0}fy[tmp]=tmp1}}if(this.decodeState.validBits==-1){zeroChannel[i]=true;continue}step2Flag[0]=step2Flag[1]=true;var naighbors=g.neighbors;var xlist=g.xlist;var _g6=2;var _g7=g.values;while(_g6<_g7){var j1=_g6++;var low=naighbors[j1][0];var high=naighbors[j1][1];var x0=xlist[low];var y0=fy[low];var dy=fy[high]-y0;var adx=xlist[high]-x0;var err=Math.abs(dy)*(xlist[j1]-x0);var off=err/adx|0;var lowroom=dy<0?y0-off:y0+off;var val2=fy[j1];var highroom=range-lowroom;var room=highroom<lowroom?highroom*2:lowroom*2;if(val2!=0){step2Flag[low]=step2Flag[high]=true;step2Flag[j1]=true;if(val2>=room){if(highroom>lowroom){fy[j1]=val2-lowroom+lowroom}else{fy[j1]=lowroom-val2+highroom-1}}else if((val2&1)!=0){fy[j1]=lowroom-(val2+1>>1)}else{fy[j1]=lowroom+(val2>>1)}}else{step2Flag[j1]=false;fy[j1]=lowroom}}var _g8=0;var _g9=g.values;while(_g8<_g9){var j2=_g8++;if(!step2Flag[j2]){fy[j2]=-1}}}else{zeroChannel[i]=true}}}var _g=0;var _g1=this.header.channel;while(_g<_g1){var i=_g++;reallyZeroChannel[i]=zeroChannel[i]}var _g=0;var _g1=map.couplingSteps;while(_g<_g1){var i=_g++;if(!zeroChannel[map.chan[i].magnitude]||!zeroChannel[map.chan[i].angle]){zeroChannel[map.chan[i].magnitude]=zeroChannel[map.chan[i].angle]=false}}var _g=0;var _g1=map.submaps;while(_g<_g1){var i=_g++;var this1=new Array(this.header.channel);var residueBuffers=this1;var this2=new Array(256);var doNotDecode=this2;var ch=0;var _g2=0;var _g3=this.header.channel;while(_g2<_g3){var j=_g2++;if(map.chan[j].mux==i){if(zeroChannel[j]){doNotDecode[ch]=true;residueBuffers[ch]=null}else{doNotDecode[ch]=false;residueBuffers[ch]=this.channelBuffers[j]}++ch}}var r1=map.submapResidue[i];var residue=this.header.residueConfig[r1];residue.decode(this.decodeState,this.header,residueBuffers,ch,n2,doNotDecode,this.channelBuffers)}var i=map.couplingSteps;var n2=n>>1;while(--i>=0){var m1=this.channelBuffers[map.chan[i].magnitude];var a=this.channelBuffers[map.chan[i].angle];var _g=0;var _g1=n2;while(_g<_g1){var j=_g++;var a2;var m2;if(m1[j]>0){if(a[j]>0){m2=m1[j];a2=m1[j]-a[j]}else{a2=m1[j];m2=m1[j]+a[j]}}else if(a[j]>0){m2=m1[j];a2=m1[j]+a[j]}else{a2=m1[j];m2=m1[j]-a[j]}m1[j]=m2;a[j]=a2}}var _g=0;var _g1=this.header.channel;while(_g<_g1){var i=_g++;if(reallyZeroChannel[i]){var _g2=0;var _g3=n2;while(_g2<_g3){var j=_g2++;this.channelBuffers[i][j]=0}}else{map.doFloor(this.header.floorConfig,i,n,this.channelBuffers[i],this.finalY[i],null)}}var _g=0;var _g1=this.header.channel;while(_g<_g1){var i=_g++;this.inverseMdct(this.channelBuffers[i],n,m.blockflag)}var _this=this.decodeState;while(_this.bytesInSeg!=0||!_this.lastSeg&&_this.next()!=0){_this.bytesInSeg--;_this.inputPosition+=1;_this.input.readByte()}return this.decodeState.finishDecodePacket(this.previousLength,n,r)},__class__:kha_audio2_ogg_vorbis_VorbisDecoder};var kha_audio2_ogg_vorbis_VorbisTools=function(){};$hxClasses["kha.audio2.ogg.vorbis.VorbisTools"]=kha_audio2_ogg_vorbis_VorbisTools;kha_audio2_ogg_vorbis_VorbisTools.__name__=true;kha_audio2_ogg_vorbis_VorbisTools.pointCompare=function(a,b){if(a.x<b.x){return-1}else if(a.x>b.x){return 1}else{return 0}};kha_audio2_ogg_vorbis_VorbisTools.uintAsc=function(a,b){if(UInt.gt(b,a)){return-1}else if(a==b){return 0}else{return 1}};kha_audio2_ogg_vorbis_VorbisTools.lookup1Values=function(entries,dim){var r=Math.exp(Math.log(entries)/dim)|0;if((Math.pow(r+1,dim)|0)<=entries){++r}return r};kha_audio2_ogg_vorbis_VorbisTools.computeWindow=function(n,$window){var n2=n>>1;var _g=0;var _g1=n2;while(_g<_g1){var i=_g++;$window[i]=Math.sin(1.5707963267948966*kha_audio2_ogg_vorbis_VorbisTools.square(Math.sin((i+.5)/n2*.5*3.141592653589793)))}};kha_audio2_ogg_vorbis_VorbisTools.square=function(f){return f*f};kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse=function(n,rev){var log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];var ld=(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0)-1;var n8=n>>3;var _g=0;var _g1=n8;while(_g<_g1){var i=_g++;var n=i;n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;rev[i]=(n>>>16|n<<16)>>>32-ld+3<<2}};kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors=function(n,af,bf,cf){var n4=n>>2;var n8=n>>3;var k2=0;var _g=0;var _g1=n4;while(_g<_g1){var k=_g++;af[k2]=Math.cos(4*k*3.141592653589793/n);af[k2+1]=-Math.sin(4*k*3.141592653589793/n);bf[k2]=Math.cos((k2+1)*3.141592653589793/n/2)*.5;bf[k2+1]=Math.sin((k2+1)*3.141592653589793/n/2)*.5;k2+=2}var k2=0;var _g=0;var _g1=n8;while(_g<_g1){var k=_g++;cf[k2]=Math.cos(2*(k2+1)*3.141592653589793/n);cf[k2+1]=-Math.sin(2*(k2+1)*3.141592653589793/n);k2+=2}};kha_audio2_ogg_vorbis_VorbisTools.drawLine=function(output,x0,y0,x1,y1,n){if(kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable==null){var this1=new Array(32);kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable=this1;var _g=0;while(_g<32){var i=_g++;var this1=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable;var this2=new Array(64);this1[i]=this2;var _g1=1;while(_g1<64){var j=_g1++;kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[i][j]=i/j|0}}}var dy=y1-y0;var adx=x1-x0;var ady=dy<0?-dy:dy;var base;var x=x0;var y=y0;var err=0;var sy;if(adx<64&&ady<32){if(dy<0){base=-kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[ady][adx];sy=base-1}else{base=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[ady][adx];sy=base+1}}else{base=dy/adx|0;sy=dy<0?base-1:base+1}ady-=(base<0?-base:base)*adx;if(x1>n){x1=n}output[x]*=kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[y];var _g=x+1;var _g1=x1;while(_g<_g1){var i=_g++;err+=ady;if(err>=adx){err-=adx;y+=sy}else{y+=base}output[i]*=kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[y]}};var kha_audio2_ogg_vorbis_data_Codebook=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Codebook"]=kha_audio2_ogg_vorbis_data_Codebook;kha_audio2_ogg_vorbis_data_Codebook.__name__=true;kha_audio2_ogg_vorbis_data_Codebook.read=function(decodeState){var c=new kha_audio2_ogg_vorbis_data_Codebook;if(decodeState.readBits(8)!=66||decodeState.readBits(8)!=67||decodeState.readBits(8)!=86){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}var x=decodeState.readBits(8);c.dimensions=(decodeState.readBits(8)<<8)+x;var x=decodeState.readBits(8);var y=decodeState.readBits(8);c.entries=(decodeState.readBits(8)<<16)+(y<<8)+x;var ordered=decodeState.readBits(1);c.sparse=ordered!=0?false:decodeState.readBits(1)!=0;var this1=new Array(c.entries);var lengths=this1;if(!c.sparse){c.codewordLengths=lengths}var total=0;if(ordered!=0){var currentEntry=0;var currentLength=decodeState.readBits(5)+1;while(currentEntry<c.entries){var limit=c.entries-currentEntry;var log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];var n=decodeState.readBits(limit<16384?limit<16?log2_4[limit]:limit<512?5+log2_4[limit>>5]:10+log2_4[limit>>10]:limit<16777216?limit<524288?15+log2_4[limit>>15]:20+log2_4[limit>>20]:limit<536870912?25+log2_4[limit>>25]:limit<-2147483648?30+log2_4[limit>>30]:0);if(currentEntry+n>c.entries){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook entrys",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}var _g=0;var _g1=n;while(_g<_g1){var i=_g++;lengths[currentEntry+i]=currentLength}currentEntry+=n;++currentLength}}else{var _g=0;var _g1=c.entries;while(_g<_g1){var j=_g++;var present=c.sparse?decodeState.readBits(1):1;if(present!=0){lengths[j]=decodeState.readBits(5)+1;++total}else{lengths[j]=255}}}if(c.sparse&&total>=c.entries>>2){c.codewordLengths=lengths;c.sparse=false}var tmp;if(c.sparse){tmp=total}else{var sortedCount=0;var _g=0;var _g1=c.entries;while(_g<_g1){var j=_g++;var l=lengths[j];if(l>10&&l!=255){++sortedCount}}tmp=sortedCount}c.sortedEntries=tmp;var values=null;if(!c.sparse){var this1=new Array(c.entries);c.codewords=this1}else{if(c.sortedEntries!=0){var this1=new Array(c.sortedEntries);c.codewordLengths=this1;var this1=new Array(c.entries);c.codewords=this1;var this1=new Array(c.entries);values=this1}var size=c.entries+64*c.sortedEntries}if(!c.computeCodewords(lengths,c.entries,values)){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"compute codewords",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}if(c.sortedEntries!=0){c.sortedCodewords=[];var this1=new Array(c.sortedEntries);c.sortedValues=this1;c.computeSortedHuffman(lengths,values)}if(c.sparse){values=null;c.codewords=null;lengths=null}c.computeAcceleratedHuffman();c.lookupType=decodeState.readBits(4);if(c.lookupType>2){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook lookup type",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}if(c.lookupType>0){var x=decodeState.readBits(32);var mantissa=UInt.toFloat(x&2097151);var sign=x&-2147483648;var exp=(x&2145386496)>>>21;var res=sign!=0?-mantissa:mantissa;c.minimumValue=res*Math.pow(2,exp-788);var x=decodeState.readBits(32);var mantissa=UInt.toFloat(x&2097151);var sign=x&-2147483648;var exp=(x&2145386496)>>>21;var res=sign!=0?-mantissa:mantissa;c.deltaValue=res*Math.pow(2,exp-788);c.valueBits=decodeState.readBits(4)+1;c.sequenceP=decodeState.readBits(1)!=0;if(c.lookupType==1){c.lookupValues=kha_audio2_ogg_vorbis_VorbisTools.lookup1Values(c.entries,c.dimensions)}else{c.lookupValues=c.entries*c.dimensions}var this1=new Array(c.lookupValues);var mults=this1;var _g=0;var _g1=c.lookupValues;while(_g<_g1){var j=_g++;var q=decodeState.readBits(c.valueBits);if(q==-1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"fail lookup",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}mults[j]=q}var this1=new Array(c.lookupValues);c.multiplicands=this1;var _g=0;var _g1=c.lookupValues;while(_g<_g1){var j=_g++;c.multiplicands[j]=mults[j]*c.deltaValue+c.minimumValue}if(c.lookupType==2&&c.sequenceP){var _g=1;var _g1=c.lookupValues;while(_g<_g1){var j=_g++;c.multiplicands[j]=c.multiplicands[j-1]}c.sequenceP=false}}return c};kha_audio2_ogg_vorbis_data_Codebook.prototype={computeCodewords:function(len,n,values){var this1=new Array(32);var available=this1;available[0]=0;available[1]=0;available[2]=0;available[3]=0;available[4]=0;available[5]=0;available[6]=0;available[7]=0;available[8]=0;available[9]=0;available[10]=0;available[11]=0;available[12]=0;available[13]=0;available[14]=0;available[15]=0;available[16]=0;available[17]=0;available[18]=0;available[19]=0;available[20]=0;available[21]=0;available[22]=0;available[23]=0;available[24]=0;available[25]=0;available[26]=0;available[27]=0;available[28]=0;available[29]=0;available[30]=0;available[31]=0;var k=0;while(k<n){if(len[k]<255){break}++k}if(k==n){return true}var m=0;var count=m++;if(!this.sparse){this.codewords[k]=0}else{this.codewords[count]=0;this.codewordLengths[count]=len[k];values[count]=k}var i=0;while(++i<=len[k])available[i]=1<<32-i;i=k;while(++i<n){var z=len[i];if(z==255){continue}while(z>0&&available[z]==0)--z;if(z==0){return false}var res=available[z];available[z]=0;var n1=res;n1=(n1&-1431655766)>>>1|(n1&1431655765)<<1;n1=(n1&-858993460)>>>2|(n1&858993459)<<2;n1=(n1&-252645136)>>>4|(n1&252645135)<<4;n1=(n1&-16711936)>>>8|(n1&16711935)<<8;var huffCode=n1>>>16|n1<<16;var count=m++;if(!this.sparse){this.codewords[i]=huffCode}else{this.codewords[count]=huffCode;this.codewordLengths[count]=len[i];values[count]=i}if(z!=len[i]){var y=len[i];while(y>z){available[y]=res+(1<<32-y);--y}}}return true},computeSortedHuffman:function(lengths,values){if(!this.sparse){var k=0;var _g=0;var _g1=this.entries;while(_g<_g1){var i=_g++;var len=lengths[i];if(this.sparse?true:len==255?false:len>10){var n=this.codewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;this.sortedCodewords[k++]=n>>>16|n<<16}}}else{var _g=0;var _g1=this.sortedEntries;while(_g<_g1){var i=_g++;var n=this.codewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;this.sortedCodewords[i]=n>>>16|n<<16}}this.sortedCodewords[this.sortedEntries]=-1;this.sortedCodewords.sort(kha_audio2_ogg_vorbis_VorbisTools.uintAsc);var len=this.sparse?this.sortedEntries:this.entries;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;var huffLen=this.sparse?lengths[values[i]]:lengths[i];if(this.sparse?true:huffLen==255?false:huffLen>10){var n=this.codewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;var code=n>>>16|n<<16;var x=0;var n1=this.sortedEntries;while(n1>1){var m=x+(n1>>1);if(UInt.gte(code,this.sortedCodewords[m])){x=m;n1-=n1>>1}else{n1>>=1}}if(this.sparse){this.sortedValues[x]=values[i];this.codewordLengths[x]=huffLen}else{this.sortedValues[x]=i}}}},computeAcceleratedHuffman:function(){var this1=new Array(1024);this.fastHuffman=this1;this.fastHuffman[0]=-1;var _g=0;var _g1=1024;while(_g<_g1){var i=_g++;this.fastHuffman[i]=-1}var len=this.sparse?this.sortedEntries:this.entries;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;if(this.codewordLengths[i]<=10){var z;if(this.sparse){var n=this.sortedCodewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;z=n>>>16|n<<16}else{z=this.codewords[i]}while(z<1024){this.fastHuffman[z]=i;z+=1<<this.codewordLengths[i]}}}},codebookDecode:function(decodeState,output,offset,len){if(decodeState.validBits<10){decodeState.prepHuffman()}var i=this.fastHuffman[decodeState.acc&1023];var val;if(i>=0){var l=this.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(this)}if(this.sparse){val=this.sortedValues[val]}var z=val;var lookupValues=this.lookupValues;var sequenceP=this.sequenceP;var multiplicands=this.multiplicands;var minimumValue=this.minimumValue;if(z<0){return false}if(len>this.dimensions){len=this.dimensions}if(this.lookupType==1){var div=1;var last=0;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;var off=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;var val=multiplicands[off]+last;output[offset+i]+=val;if(sequenceP){last=val+minimumValue}div=div*lookupValues}return true}z*=this.dimensions;if(sequenceP){var last=0;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;var val=multiplicands[z+i]+last;output[offset+i]+=val;last=val+minimumValue}}else{var last=0;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;output[offset+i]+=multiplicands[z+i]+last}}return true},codebookDecodeStep:function(decodeState,output,offset,len,step){if(decodeState.validBits<10){decodeState.prepHuffman()}var i=this.fastHuffman[decodeState.acc&1023];var val;if(i>=0){var l=this.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(this)}if(this.sparse){val=this.sortedValues[val]}var z=val;var last=0;if(z<0){return false}if(len>this.dimensions){len=this.dimensions}var lookupValues=this.lookupValues;var sequenceP=this.sequenceP;var multiplicands=this.multiplicands;if(this.lookupType==1){var div=1;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;var off=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;var val=multiplicands[off]+last;output[offset+i*step]+=val;if(sequenceP){last=val}div=div*lookupValues}return true}z*=this.dimensions;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;var val=multiplicands[z+i]+last;output[offset+i*step]+=val;if(sequenceP){last=val}}return true},decodeDeinterleaveRepeat:function(decodeState,residueBuffers,ch,cInter,pInter,len,totalDecode){var effective=this.dimensions;if(this.lookupType==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}var multiplicands=this.multiplicands;var sequenceP=this.sequenceP;var lookupValues=this.lookupValues;while(totalDecode>0){var last=0;if(decodeState.validBits<10){decodeState.prepHuffman()}var i=this.fastHuffman[decodeState.acc&1023];var val;if(i>=0){var l=this.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(this)}if(this.sparse){val=this.sortedValues[val]}var z=val;if(z<0){if(decodeState.bytesInSeg==0&&decodeState.lastSeg){return null}throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(cInter+pInter*ch+effective>len*ch){effective=len*ch-(pInter*ch-cInter)}if(this.lookupType==1){var div=1;if(sequenceP){var _g=0;var _g1=effective;while(_g<_g1){var i1=_g++;var off=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;var val1=multiplicands[off]+last;residueBuffers[cInter][pInter]+=val1;if(++cInter==ch){cInter=0;++pInter}last=val1;div=div*lookupValues}}else{var _g2=0;var _g3=effective;while(_g2<_g3){var i2=_g2++;var off1=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;var val2=multiplicands[off1]+last;residueBuffers[cInter][pInter]+=val2;if(++cInter==ch){cInter=0;++pInter}div=div*lookupValues}}}else{z*=this.dimensions;if(sequenceP){var _g4=0;var _g5=effective;while(_g4<_g5){var i3=_g4++;var val3=multiplicands[z+i3]+last;residueBuffers[cInter][pInter]+=val3;if(++cInter==ch){cInter=0;++pInter}last=val3}}else{var _g6=0;var _g7=effective;while(_g6<_g7){var i4=_g6++;var val4=multiplicands[z+i4]+last;residueBuffers[cInter][pInter]+=val4;if(++cInter==ch){cInter=0;++pInter}}}}totalDecode-=effective}return{cInter:cInter,pInter:pInter}},residueDecode:function(decodeState,target,offset,n,rtype){if(rtype==0){var step=n/this.dimensions|0;var _g=0;var _g1=step;while(_g<_g1){var k=_g++;if(!this.codebookDecodeStep(decodeState,target,offset+k,n-offset-k,step)){return false}}}else{var k=0;while(k<n){if(!this.codebookDecode(decodeState,target,offset,n-k)){return false}k+=this.dimensions;offset+=this.dimensions}}return true},__class__:kha_audio2_ogg_vorbis_data_Codebook};var kha_audio2_ogg_vorbis_data_Comment=function(){this.data=new haxe_ds_StringMap};$hxClasses["kha.audio2.ogg.vorbis.data.Comment"]=kha_audio2_ogg_vorbis_data_Comment;kha_audio2_ogg_vorbis_data_Comment.__name__=true;kha_audio2_ogg_vorbis_data_Comment.prototype={get_loopStart:function(){return Std.parseInt(this.getString("loopstart"))},get_loopLength:function(){return Std.parseInt(this.getString("looplength"))},add:function(key,value){key=key.toLowerCase();if(Object.prototype.hasOwnProperty.call(this.data.h,key)){this.data.h[key].push(value)}else{var v=[value];this.data.h[key]=v}},getString:function(key){key=key.toLowerCase();if(Object.prototype.hasOwnProperty.call(this.data.h,key)){return this.data.h[key][0]}else{return null}},__class__:kha_audio2_ogg_vorbis_data_Comment,__properties__:{get_loopLength:"get_loopLength",get_loopStart:"get_loopStart"}};var kha_audio2_ogg_vorbis_data_Floor=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Floor"]=kha_audio2_ogg_vorbis_data_Floor;kha_audio2_ogg_vorbis_data_Floor.__name__=true;kha_audio2_ogg_vorbis_data_Floor.read=function(decodeState,codebooks){var floor=new kha_audio2_ogg_vorbis_data_Floor;floor.type=decodeState.readBits(16);if(floor.type>1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}if(floor.type==0){var g=floor.floor0=new kha_audio2_ogg_vorbis_data_Floor0;g.order=decodeState.readBits(8);g.rate=decodeState.readBits(16);g.barkMapSize=decodeState.readBits(16);g.amplitudeBits=decodeState.readBits(6);g.amplitudeOffset=decodeState.readBits(8);g.numberOfBooks=decodeState.readBits(4)+1;var _g=0;var _g1=g.numberOfBooks;while(_g<_g1){var j=_g++;g.bookList[j]=decodeState.readBits(8)}throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}else{var p=[];var g=floor.floor1=new kha_audio2_ogg_vorbis_data_Floor1;var maxClass=-1;g.partitions=decodeState.readBits(5);var this1=new Array(g.partitions);g.partitionClassList=this1;var _g=0;var _g1=g.partitions;while(_g<_g1){var j=_g++;g.partitionClassList[j]=decodeState.readBits(4);if(g.partitionClassList[j]>maxClass){maxClass=g.partitionClassList[j]}}var this1=new Array(maxClass+1);g.classDimensions=this1;var this1=new Array(maxClass+1);g.classMasterbooks=this1;var this1=new Array(maxClass+1);g.classSubclasses=this1;var this1=new Array(maxClass+1);g.subclassBooks=this1;var _g=0;var _g1=maxClass+1;while(_g<_g1){var j=_g++;g.classDimensions[j]=decodeState.readBits(3)+1;g.classSubclasses[j]=decodeState.readBits(2);if(g.classSubclasses[j]!=0){g.classMasterbooks[j]=decodeState.readBits(8);if(g.classMasterbooks[j]>=codebooks.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}var kl=1<<g.classSubclasses[j];var this1=g.subclassBooks;var this2=new Array(kl);this1[j]=this2;var _g2=0;var _g3=kl;while(_g2<_g3){var k=_g2++;g.subclassBooks[j][k]=decodeState.readBits(8)-1;if(g.subclassBooks[j][k]>=codebooks.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}}g.floor1Multiplier=decodeState.readBits(2)+1;g.rangebits=decodeState.readBits(4);var this1=new Array(250);g.xlist=this1;g.xlist[0]=0;g.xlist[1]=1<<g.rangebits;g.values=2;var _g=0;var _g1=g.partitions;while(_g<_g1){var j=_g++;var c=g.partitionClassList[j];var _g2=0;var _g3=g.classDimensions[c];while(_g2<_g3){var k=_g2++;g.xlist[g.values]=decodeState.readBits(g.rangebits);g.values++}}var _g=0;var _g1=g.values;while(_g<_g1){var j=_g++;p.push(new kha_audio2_ogg_vorbis_data_IntPoint);p[j].x=g.xlist[j];p[j].y=j}p.sort(kha_audio2_ogg_vorbis_VorbisTools.pointCompare);var this1=new Array(g.values);g.sortedOrder=this1;var _g=0;var _g1=g.values;while(_g<_g1){var j=_g++;g.sortedOrder[j]=p[j].y}var this1=new Array(g.values);g.neighbors=this1;var _g=2;var _g1=g.values;while(_g<_g1){var j=_g++;var x=g.xlist;var low=-1;var high=65536;var plow=0;var phigh=0;var _g2=0;var _g3=j;while(_g2<_g3){var i=_g2++;if(x[i]>low&&x[i]<x[j]){plow=i;low=x[i]}if(x[i]<high&&x[i]>x[j]){phigh=i;high=x[i]}}var ne_low=plow;var ne_high=phigh;var this1=g.neighbors;var this2=new Array(g.values);this1[j]=this2;g.neighbors[j][0]=ne_low;g.neighbors[j][1]=ne_high}}return floor};kha_audio2_ogg_vorbis_data_Floor.prototype={__class__:kha_audio2_ogg_vorbis_data_Floor};var kha_audio2_ogg_vorbis_data_Floor0=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Floor0"]=kha_audio2_ogg_vorbis_data_Floor0;kha_audio2_ogg_vorbis_data_Floor0.__name__=true;kha_audio2_ogg_vorbis_data_Floor0.prototype={__class__:kha_audio2_ogg_vorbis_data_Floor0};var kha_audio2_ogg_vorbis_data_Floor1=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Floor1"]=kha_audio2_ogg_vorbis_data_Floor1;kha_audio2_ogg_vorbis_data_Floor1.__name__=true;kha_audio2_ogg_vorbis_data_Floor1.prototype={__class__:kha_audio2_ogg_vorbis_data_Floor1};var kha_audio2_ogg_vorbis_data_Header=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Header"]=kha_audio2_ogg_vorbis_data_Header;kha_audio2_ogg_vorbis_data_Header.__name__=true;kha_audio2_ogg_vorbis_data_Header.read=function(decodeState){var page=decodeState.page;page.start(decodeState);if((page.flag&2)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"not firstPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if((page.flag&4)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"lastPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if((page.flag&1)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.firstPageValidate();decodeState.inputPosition+=1;if(decodeState.input.readByte()!=1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var header=new haxe_io_Bytes(new ArrayBuffer(6));var x;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x=decodeState.input.readByte()}decodeState.validBits=0;header.b[0]=x;var x;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x=decodeState.input.readByte()}decodeState.validBits=0;header.b[1]=x;var x;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x=decodeState.input.readByte()}decodeState.validBits=0;header.b[2]=x;var x;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x=decodeState.input.readByte()}decodeState.validBits=0;header.b[3]=x;var x;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x=decodeState.input.readByte()}decodeState.validBits=0;header.b[4]=x;var x;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x=decodeState.input.readByte()}decodeState.validBits=0;header.b[5]=x;if(header.toString()!="vorbis"){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))}decodeState.inputPosition+=4;var version=decodeState.input.readInt32();if(version!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"vorbis version : "+version,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var header=new kha_audio2_ogg_vorbis_data_Header;decodeState.inputPosition+=1;header.channel=decodeState.input.readByte();if(header.channel==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no channel",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}else if(header.channel>16){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS,"too many channels",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.inputPosition+=4;header.sampleRate=decodeState.input.readInt32();if(header.sampleRate==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.inputPosition+=4;header.maximumBitRate=decodeState.input.readInt32();decodeState.inputPosition+=4;header.nominalBitRate=decodeState.input.readInt32();decodeState.inputPosition+=4;header.minimumBitRate=decodeState.input.readInt32();decodeState.inputPosition+=1;var x=decodeState.input.readByte();var log0=x&15;var log1=x>>4;header.blocksize0=1<<log0;header.blocksize1=1<<log1;if(log0<6||log0>13){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if(log1<6||log1>13){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if(log0>log1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.inputPosition+=1;var x=decodeState.input.readByte();if((x&1)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.page.start(decodeState);decodeState.startPacket();var len=0;var output=new haxe_io_BytesOutput;while(true){len=decodeState.next();if(!(len!=0)){break}decodeState.inputPosition+=len;output.write(decodeState.input.read(len));decodeState.bytesInSeg=0}var packetInput=new haxe_io_BytesInput(output.getBytes());packetInput.readByte();packetInput.read(6);var vendorLength=packetInput.readInt32();header.vendor=packetInput.readString(vendorLength);header.comment=new kha_audio2_ogg_vorbis_data_Comment;var commentCount=packetInput.readInt32();var _g=0;var _g1=commentCount;while(_g<_g1){var i=_g++;var n=packetInput.readInt32();var str=packetInput.readString(n);var splitter=str.indexOf("=");if(splitter!=-1){header.comment.add(str.substring(0,splitter),str.substring(splitter+1))}}var x1=packetInput.readByte();if((x1&1)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.startPacket();var x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;if(x1!=5){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"setup packet",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var header1=new haxe_io_Bytes(new ArrayBuffer(6));var x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;header1.b[0]=x1;var x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;header1.b[1]=x1;var x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;header1.b[2]=x1;var x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;header1.b[3]=x1;var x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;header1.b[4]=x1;var x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;header1.b[5]=x1;if(header1.toString()!="vorbis"){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))}var codebookCount=decodeState.readBits(8)+1;var this1=new Array(codebookCount);header.codebooks=this1;var _g=0;var _g1=codebookCount;while(_g<_g1){var i=_g++;header.codebooks[i]=kha_audio2_ogg_vorbis_data_Codebook.read(decodeState)}x=decodeState.readBits(6)+1;var _g=0;var _g1=x;while(_g<_g1){var i=_g++;if(decodeState.readBits(16)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}var floorCount=decodeState.readBits(6)+1;var this1=new Array(floorCount);header.floorConfig=this1;var _g=0;var _g1=floorCount;while(_g<_g1){var i=_g++;header.floorConfig[i]=kha_audio2_ogg_vorbis_data_Floor.read(decodeState,header.codebooks)}var residueCount=decodeState.readBits(6)+1;var this1=new Array(residueCount);header.residueConfig=this1;var _g=0;var _g1=residueCount;while(_g<_g1){var i=_g++;header.residueConfig[i]=kha_audio2_ogg_vorbis_data_Residue.read(decodeState,header.codebooks)}var mappingCount=decodeState.readBits(6)+1;var this1=new Array(mappingCount);header.mapping=this1;var _g=0;var _g1=mappingCount;while(_g<_g1){var i=_g++;var map=kha_audio2_ogg_vorbis_data_Mapping.read(decodeState,header.channel);header.mapping[i]=map;var _g2=0;var _g3=map.submaps;while(_g2<_g3){var j=_g2++;if(map.submapFloor[j]>=header.floorConfig.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if(map.submapResidue[j]>=header.residueConfig.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}}var modeCount=decodeState.readBits(6)+1;var this1=new Array(modeCount);header.modes=this1;var _g=0;var _g1=modeCount;while(_g<_g1){var i=_g++;var mode=kha_audio2_ogg_vorbis_data_Mode.read(decodeState);header.modes[i]=mode;if(mode.mapping>=header.mapping.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}while(decodeState.bytesInSeg!=0||!decodeState.lastSeg&&decodeState.next()!=0){decodeState.bytesInSeg--;decodeState.inputPosition+=1;decodeState.input.readByte()}return header};kha_audio2_ogg_vorbis_data_Header.prototype={__class__:kha_audio2_ogg_vorbis_data_Header};var kha_audio2_ogg_vorbis_data_IntPoint=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.IntPoint"]=kha_audio2_ogg_vorbis_data_IntPoint;kha_audio2_ogg_vorbis_data_IntPoint.__name__=true;kha_audio2_ogg_vorbis_data_IntPoint.prototype={__class__:kha_audio2_ogg_vorbis_data_IntPoint};var kha_audio2_ogg_vorbis_data_Mapping=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Mapping"]=kha_audio2_ogg_vorbis_data_Mapping;kha_audio2_ogg_vorbis_data_Mapping.__name__=true;kha_audio2_ogg_vorbis_data_Mapping.read=function(decodeState,channels){var m=new kha_audio2_ogg_vorbis_data_Mapping;var mappingType=decodeState.readBits(16);if(mappingType!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"mapping type "+mappingType,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}var this1=new Array(channels);m.chan=this1;var _g=0;var _g1=channels;while(_g<_g1){var j=_g++;m.chan[j]=new kha_audio2_ogg_vorbis_data_MappingChannel}if(decodeState.readBits(1)!=0){m.submaps=decodeState.readBits(4)+1}else{m.submaps=1}if(decodeState.readBits(1)!=0){m.couplingSteps=decodeState.readBits(8)+1;var _g=0;var _g1=m.couplingSteps;while(_g<_g1){var k=_g++;var n=channels-1;var log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];m.chan[k].magnitude=decodeState.readBits(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0);var n1=channels-1;var log2_41=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];m.chan[k].angle=decodeState.readBits(n1<16384?n1<16?log2_41[n1]:n1<512?5+log2_41[n1>>5]:10+log2_41[n1>>10]:n1<16777216?n1<524288?15+log2_41[n1>>15]:20+log2_41[n1>>20]:n1<536870912?25+log2_41[n1>>25]:n1<-2147483648?30+log2_41[n1>>30]:0);if(m.chan[k].magnitude>=channels){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}if(m.chan[k].angle>=channels){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}if(m.chan[k].magnitude==m.chan[k].angle){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}}else{m.couplingSteps=0}if(decodeState.readBits(2)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}if(m.submaps>1){var _g=0;var _g1=channels;while(_g<_g1){var j=_g++;m.chan[j].mux=decodeState.readBits(4);if(m.chan[j].mux>=m.submaps){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}}else{var _g=0;var _g1=channels;while(_g<_g1){var j=_g++;m.chan[j].mux=0}}var this1=new Array(m.submaps);m.submapFloor=this1;var this1=new Array(m.submaps);m.submapResidue=this1;var _g=0;var _g1=m.submaps;while(_g<_g1){var j=_g++;decodeState.readBits(8);m.submapFloor[j]=decodeState.readBits(8);m.submapResidue[j]=decodeState.readBits(8)}return m};kha_audio2_ogg_vorbis_data_Mapping.prototype={doFloor:function(floors,i,n,target,finalY,step2Flag){var n2=n>>1;var s=this.chan[i].mux;var floor;var floor=floors[this.submapFloor[s]];if(floor.type==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}))}else{var g=floor.floor1;var lx=0;var ly=finalY[0]*g.floor1Multiplier;var _g=1;var _g1=g.values;while(_g<_g1){var q=_g++;var j=g.sortedOrder[q];if(finalY[j]>=0){var hy=finalY[j]*g.floor1Multiplier;var hx=g.xlist[j];kha_audio2_ogg_vorbis_VorbisTools.drawLine(target,lx,ly,hx,hy,n2);lx=hx;ly=hy}}if(lx<n2){var _g=lx;var _g1=n2;while(_g<_g1){var j=_g++;target[j]*=kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[ly]}}}},__class__:kha_audio2_ogg_vorbis_data_Mapping};var kha_audio2_ogg_vorbis_data_MappingChannel=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.MappingChannel"]=kha_audio2_ogg_vorbis_data_MappingChannel;kha_audio2_ogg_vorbis_data_MappingChannel.__name__=true;kha_audio2_ogg_vorbis_data_MappingChannel.prototype={__class__:kha_audio2_ogg_vorbis_data_MappingChannel};var kha_audio2_ogg_vorbis_data_Mode=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Mode"]=kha_audio2_ogg_vorbis_data_Mode;kha_audio2_ogg_vorbis_data_Mode.__name__=true;kha_audio2_ogg_vorbis_data_Mode.read=function(decodeState){var m=new kha_audio2_ogg_vorbis_data_Mode;m.blockflag=decodeState.readBits(1)!=0;m.windowtype=decodeState.readBits(16);m.transformtype=decodeState.readBits(16);m.mapping=decodeState.readBits(8);if(m.windowtype!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}))}if(m.transformtype!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}))}return m};kha_audio2_ogg_vorbis_data_Mode.prototype={__class__:kha_audio2_ogg_vorbis_data_Mode};var kha_audio2_ogg_vorbis_data_Page=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Page"]=kha_audio2_ogg_vorbis_data_Page;kha_audio2_ogg_vorbis_data_Page.__name__=true;kha_audio2_ogg_vorbis_data_Page.prototype={clone:function(){var page=new kha_audio2_ogg_vorbis_data_Page;page.flag=this.flag;return page},start:function(decodeState){var tmp;var tmp1;var tmp2;decodeState.inputPosition+=1;if(decodeState.input.readByte()==79){decodeState.inputPosition+=1;tmp2=decodeState.input.readByte()!=103}else{tmp2=true}if(!tmp2){decodeState.inputPosition+=1;tmp1=decodeState.input.readByte()!=103}else{tmp1=true}if(!tmp1){decodeState.inputPosition+=1;tmp=decodeState.input.readByte()!=83}else{tmp=true}if(tmp){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}))}this.startWithoutCapturePattern(decodeState)},startWithoutCapturePattern:function(decodeState){decodeState.inputPosition+=1;var version=decodeState.input.readByte();if(version!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION,""+version,{fileName:"kha/audio2/ogg/vorbis/data/Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}))}decodeState.inputPosition+=1;this.flag=decodeState.input.readByte();decodeState.inputPosition+=4;var loc0=decodeState.input.readInt32();decodeState.inputPosition+=4;var loc1=decodeState.input.readInt32();decodeState.inputPosition+=4;decodeState.input.readInt32();decodeState.inputPosition+=4;decodeState.input.readInt32();decodeState.inputPosition+=4;decodeState.input.readInt32();decodeState.setup(loc0,loc1)},__class__:kha_audio2_ogg_vorbis_data_Page};var kha_audio2_ogg_vorbis_data_ProbedPage=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.ProbedPage"]=kha_audio2_ogg_vorbis_data_ProbedPage;kha_audio2_ogg_vorbis_data_ProbedPage.__name__=true;kha_audio2_ogg_vorbis_data_ProbedPage.prototype={__class__:kha_audio2_ogg_vorbis_data_ProbedPage};var kha_audio2_ogg_vorbis_data_ReaderError=function(type,message,posInfos){if(message==null){message=""}this.type=type;this.message=message;this.posInfos=posInfos};$hxClasses["kha.audio2.ogg.vorbis.data.ReaderError"]=kha_audio2_ogg_vorbis_data_ReaderError;kha_audio2_ogg_vorbis_data_ReaderError.__name__=true;kha_audio2_ogg_vorbis_data_ReaderError.prototype={__class__:kha_audio2_ogg_vorbis_data_ReaderError};var kha_audio2_ogg_vorbis_data_ReaderErrorType=$hxEnums["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:true,__constructs__:["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"],NEED_MORE_DATA:{_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_API_MIXING:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OUTOFMEM:{_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FEATURE_NOT_SUPPORTED:{_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},TOO_MANY_CHANNELS:{_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FILE_OPEN_FAILURE:{_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_WITHOUT_LENGTH:{_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},UNEXPECTED_EOF:{_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_INVALID:{_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_SETUP:{_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM:{_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},MISSING_CAPTURE_PATTERN:{_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM_STRUCTURE_VERSION:{_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CONTINUED_PACKET_FLAG_INVALID:{_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INCORRECT_STREAM_SERIAL_NUMBER:{_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_FIRST_PAGE:{_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},BAD_PACKET_TYPE:{_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CANT_FIND_LAST_PAGE:{_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_FAILED:{_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OTHER:{_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}};var kha_audio2_ogg_vorbis_data_Residue=function(){};$hxClasses["kha.audio2.ogg.vorbis.data.Residue"]=kha_audio2_ogg_vorbis_data_Residue;kha_audio2_ogg_vorbis_data_Residue.__name__=true;kha_audio2_ogg_vorbis_data_Residue.read=function(decodeState,codebooks){var r=new kha_audio2_ogg_vorbis_data_Residue;r.type=decodeState.readBits(16);if(r.type>2){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}var this1=new Array(64);var residueCascade=this1;r.begin=decodeState.readBits(24);r.end=decodeState.readBits(24);r.partSize=decodeState.readBits(24)+1;var classifications=r.classifications=decodeState.readBits(6)+1;r.classbook=decodeState.readBits(8);var _g=0;var _g1=r.classifications;while(_g<_g1){var j=_g++;var highBits=0;var lowBits=decodeState.readBits(3);if(decodeState.readBits(1)!=0){highBits=decodeState.readBits(5)}residueCascade[j]=highBits*8+lowBits}var this1=new Array(r.classifications);r.residueBooks=this1;var _g=0;var _g1=r.classifications;while(_g<_g1){var j=_g++;var this1=r.residueBooks;var this2=new Array(8);this1[j]=this2;var _g2=0;while(_g2<8){var k=_g2++;if((residueCascade[j]&1<<k)!=0){r.residueBooks[j][k]=decodeState.readBits(8);if(r.residueBooks[j][k]>=codebooks.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}}else{r.residueBooks[j][k]=-1}}}var el=codebooks[r.classbook].entries;var classwords=codebooks[r.classbook].dimensions;var this1=new Array(el);r.classdata=this1;var _g=0;var _g1=el;while(_g<_g1){var j=_g++;var temp=j;var k=classwords;var this1=r.classdata;var this2=new Array(classwords);var cd=this1[j]=this2;while(--k>=0){cd[k]=temp%classifications;temp=temp/classifications|0}}return r};kha_audio2_ogg_vorbis_data_Residue.prototype={decode:function(decodeState,header,residueBuffers,ch,n,doNotDecode,channelBuffers){var codebooks=header.codebooks;var classwords=codebooks[this.classbook].dimensions;var nRead=this.end-this.begin;var partSize=this.partSize;var partRead=UInt.toFloat(nRead)/UInt.toFloat(partSize)|0;var this1=new Array(header.channel*partRead+1);var classifications=this1;var _g=0;var _g1=ch;while(_g<_g1){var i=_g++;if(!doNotDecode[i]){var buffer=residueBuffers[i];var _g2=0;var _g3=buffer.length;while(_g2<_g3){var j=_g2++;buffer[j]=0}}}if(this.type==2&&ch!=1){var _g=0;var _g1=ch;while(_g<_g1){var j=_g++;if(!doNotDecode[j]){break}else if(j==ch-1){return}}var _g=0;while(_g<8){var pass=_g++;var pcount=0;var classSet=0;if(ch==2){while(pcount<partRead){var z=this.begin+pcount*partSize;var cInter=z&1;var pInter=z>>>1;if(pass==0){var c=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}var i=c.fastHuffman[decodeState.acc&1023];var val;if(i>=0){var l=c.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}var q=val;if(q==-1){return}var i1=classwords;while(--i1>=0){classifications[i1+pcount]=q%this.classifications;q=q/this.classifications|0}}var _g1=0;var _g2=classwords;while(_g1<_g2){var i2=_g1++;if(pcount>=partRead){break}var z1=this.begin+pcount*partSize;var c1=classifications[pcount];var b=this.residueBooks[c1][pass];if(b>=0){var book=codebooks[b];var result=book.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter,pInter,n,partSize);if(result==null){return}else{cInter=result.cInter;pInter=result.pInter}}else{z1=z1+partSize;cInter=z1&1;pInter=z1>>>1}++pcount}}}else if(ch==1){while(pcount<partRead){var z2=this.begin+pcount*partSize;var cInter1=0;var pInter1=z2;if(pass==0){var c2=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}var i3=c2.fastHuffman[decodeState.acc&1023];var val1;if(i3>=0){var l1=c2.codewordLengths[i3];decodeState.acc=decodeState.acc>>>l1;decodeState.validBits-=l1;if(decodeState.validBits<0){decodeState.validBits=0;val1=-1}else{val1=i3}}else{val1=decodeState.decodeScalarRaw(c2)}if(c2.sparse){val1=c2.sortedValues[val1]}var q1=val1;if(q1==-1){return}var i4=classwords;while(--i4>=0){classifications[i4+pcount]=q1%this.classifications;q1=q1/this.classifications|0}}var _g3=0;var _g4=classwords;while(_g3<_g4){var i5=_g3++;if(pcount>=partRead){break}var z3=this.begin+pcount*partSize;var b1=this.residueBooks[classifications[pcount]][pass];if(b1>=0){var book1=codebooks[b1];var result1=book1.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter1,pInter1,n,partSize);if(result1==null){return}else{cInter1=result1.cInter;pInter1=result1.pInter}}else{z3=z3+partSize;cInter1=0;pInter1=z3}++pcount}}}else{while(pcount<partRead){var z4=this.begin+pcount*partSize;var cInter2=UInt.toFloat(z4)%UInt.toFloat(ch)|0;var pInter2=UInt.toFloat(z4)/UInt.toFloat(ch)|0;if(pass==0){var c3=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}var i6=c3.fastHuffman[decodeState.acc&1023];var val2;if(i6>=0){var l2=c3.codewordLengths[i6];decodeState.acc=decodeState.acc>>>l2;decodeState.validBits-=l2;if(decodeState.validBits<0){decodeState.validBits=0;val2=-1}else{val2=i6}}else{val2=decodeState.decodeScalarRaw(c3)}if(c3.sparse){val2=c3.sortedValues[val2]}var q2=val2;if(q2==-1){return}var i7=classwords;while(--i7>=0){classifications[i7+pcount]=q2%this.classifications;q2=q2/this.classifications|0}}var _g5=0;var _g6=classwords;while(_g5<_g6){var i8=_g5++;if(pcount>=partRead){break}var z5=this.begin+pcount*partSize;var b2=this.residueBooks[classifications[pcount]][pass];if(b2>=0){var book2=codebooks[b2];var result2=book2.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter2,pInter2,n,partSize);if(result2==null){return}else{cInter2=result2.cInter;pInter2=result2.pInter}}else{z5=z5+partSize;cInter2=UInt.toFloat(z5)%UInt.toFloat(ch)|0;pInter2=UInt.toFloat(z5)/UInt.toFloat(ch)|0}++pcount}}}}return}var _g=0;while(_g<8){var pass=_g++;var pcount=0;var classSet=0;while(pcount<partRead){if(pass==0){var _g1=0;var _g2=ch;while(_g1<_g2){var j=_g1++;if(!doNotDecode[j]){var c=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}var i=c.fastHuffman[decodeState.acc&1023];var val;if(i>=0){var l=c.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}var temp=val;if(temp==-1){return}var i1=classwords;while(--i1>=0){classifications[j*partRead+i1+pcount]=temp%this.classifications;temp=temp/this.classifications|0}}}}var _g3=0;var _g4=classwords;while(_g3<_g4){var i2=_g3++;if(pcount>=partRead){break}var _g5=0;var _g6=ch;while(_g5<_g6){var j1=_g5++;if(!doNotDecode[j1]){var c1=classifications[j1*partRead+pcount];var b=this.residueBooks[c1][pass];if(b>=0){var target=residueBuffers[j1];var offset=this.begin+pcount*partSize;var n=partSize;var book=codebooks[b];if(!book.residueDecode(decodeState,target,offset,n,this.type)){return}}}}++pcount}}}},__class__:kha_audio2_ogg_vorbis_data_Residue};var kha_graphics1_Graphics=function(){};$hxClasses["kha.graphics1.Graphics"]=kha_graphics1_Graphics;kha_graphics1_Graphics.__name__=true;kha_graphics1_Graphics.__isInterface__=true;var kha_graphics2_Graphics=function(){this.transformations=[new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1)];this.transformationIndex=0;this.opacities=[1];this.myFontSize=12;this.pipe=null};$hxClasses["kha.graphics2.Graphics"]=kha_graphics2_Graphics;kha_graphics2_Graphics.__name__=true;kha_graphics2_Graphics.prototype={begin:function(clear,clearColor){if(clear==null){clear=true}},end:function(){},fillRect:function(x,y,width,height){},set_color:function(color){return-16777216},get_fontSize:function(){return this.myFontSize},get_opacity:function(){return this.opacities[this.opacities.length-1]},__class__:kha_graphics2_Graphics,__properties__:{get_opacity:"get_opacity",get_fontSize:"get_fontSize",set_color:"set_color"}};var kha_graphics2_Graphics1=function(canvas){this.canvas=canvas};$hxClasses["kha.graphics2.Graphics1"]=kha_graphics2_Graphics1;kha_graphics2_Graphics1.__name__=true;kha_graphics2_Graphics1.__interfaces__=[kha_graphics1_Graphics];kha_graphics2_Graphics1.prototype={__class__:kha_graphics2_Graphics1};var kha_graphics4_ConstantLocation=function(){};$hxClasses["kha.graphics4.ConstantLocation"]=kha_graphics4_ConstantLocation;kha_graphics4_ConstantLocation.__name__=true;kha_graphics4_ConstantLocation.__isInterface__=true;var kha_graphics4_CubeMap=function(texture){this.texture_=texture};$hxClasses["kha.graphics4.CubeMap"]=kha_graphics4_CubeMap;kha_graphics4_CubeMap.__name__=true;kha_graphics4_CubeMap.__interfaces__=[kha_Resource,kha_Canvas];kha_graphics4_CubeMap.getRenderTargetFormat=function(format){switch(format){case 0:return 0;case 2:return 3;case 3:return 4;case 4:return 1;default:return 0}};kha_graphics4_CubeMap.getDepthBufferBits=function(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return 24;case 2:return 24;case 3:return 24;case 4:return 32;case 5:return 16}};kha_graphics4_CubeMap.getStencilBufferBits=function(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return-1;case 2:return 8;case 3:return 8;case 4:return 8;case 5:return 0}};kha_graphics4_CubeMap.createRenderTarget=function(size,format,depthStencil,contextId){if(contextId==null){contextId=0}if(depthStencil==null){depthStencil=0}if(format==null){format=0}var cubeMap=new kha_graphics4_CubeMap(null);cubeMap.format=format;cubeMap.renderTarget_=Krom.createRenderTargetCubeMap(size,kha_graphics4_CubeMap.getDepthBufferBits(depthStencil),kha_graphics4_CubeMap.getRenderTargetFormat(format),kha_graphics4_CubeMap.getStencilBufferBits(depthStencil),contextId);return cubeMap};kha_graphics4_CubeMap.prototype={get_width:function(){if(this.texture_==null){return this.renderTarget_.width}else{return this.texture_.width}},get_height:function(){if(this.texture_==null){return this.renderTarget_.height}else{return this.texture_.height}},get_g4:function(){if(this.graphics4==null){this.graphics4=new kha_krom_Graphics(this)}return this.graphics4},__class__:kha_graphics4_CubeMap,__properties__:{get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}};var kha_graphics4_FragmentShader=function(sources,names){if(sources!=null){this.shader=Krom.createFragmentShader(sources[0].bytes.b.bufferValue,names[0])}};$hxClasses["kha.graphics4.FragmentShader"]=kha_graphics4_FragmentShader;kha_graphics4_FragmentShader.__name__=true;kha_graphics4_FragmentShader.fromSource=function(source){var shader=new kha_graphics4_FragmentShader(null,null);shader.shader=Krom.createFragmentShaderFromSource(source);return shader};kha_graphics4_FragmentShader.prototype={__class__:kha_graphics4_FragmentShader};var kha_graphics4_GeometryShader=function(sources,names){this.shader=Krom.createGeometryShader(sources[0].bytes.b.bufferValue,names[0])};$hxClasses["kha.graphics4.GeometryShader"]=kha_graphics4_GeometryShader;kha_graphics4_GeometryShader.__name__=true;kha_graphics4_GeometryShader.prototype={__class__:kha_graphics4_GeometryShader};var kha_graphics4_Graphics=function(){};$hxClasses["kha.graphics4.Graphics"]=kha_graphics4_Graphics;kha_graphics4_Graphics.__name__=true;kha_graphics4_Graphics.__isInterface__=true;kha_graphics4_Graphics.prototype={__class__:kha_graphics4_Graphics};var kha_graphics4_InternalPipeline=function(pipeline,projectionLocation,textureLocation){this.pipeline=pipeline;this.projectionLocation=projectionLocation;this.textureLocation=textureLocation};$hxClasses["kha.graphics4.InternalPipeline"]=kha_graphics4_InternalPipeline;kha_graphics4_InternalPipeline.__name__=true;kha_graphics4_InternalPipeline.prototype={__class__:kha_graphics4_InternalPipeline};var kha_graphics4_PipelineCache=function(){};$hxClasses["kha.graphics4.PipelineCache"]=kha_graphics4_PipelineCache;kha_graphics4_PipelineCache.__name__=true;kha_graphics4_PipelineCache.__isInterface__=true;kha_graphics4_PipelineCache.prototype={__class__:kha_graphics4_PipelineCache};var kha_graphics4_PerFramebufferPipelineCache=function(pipeline,texture){this.pipelines=[];pipeline.compile();var projectionLocation=null;try{projectionLocation=pipeline.getConstantLocation("projectionMatrix")}catch(_g){var x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:89,className:"kha.graphics4.PerFramebufferPipelineCache",methodName:"new"})}var textureLocation=null;if(texture){try{textureLocation=pipeline.getTextureUnit("tex")}catch(_g){var x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:98,className:"kha.graphics4.PerFramebufferPipelineCache",methodName:"new"})}}this.pipelines.push(new kha_graphics4_InternalPipeline(pipeline,projectionLocation,textureLocation))};$hxClasses["kha.graphics4.PerFramebufferPipelineCache"]=kha_graphics4_PerFramebufferPipelineCache;kha_graphics4_PerFramebufferPipelineCache.__name__=true;kha_graphics4_PerFramebufferPipelineCache.__interfaces__=[kha_graphics4_PipelineCache];kha_graphics4_PerFramebufferPipelineCache.prototype={get:function(colorFormats,depthStencilFormat){return this.pipelines[this.hash(colorFormats,depthStencilFormat)]},hash:function(colorFormats,depthStencilFormat){return 0},__class__:kha_graphics4_PerFramebufferPipelineCache};var kha_graphics4_ImageShaderPainter=function(g4){this.myPipeline=null;this.bilinearMipmaps=false;this.bilinear=false;this.g=g4;kha_graphics4_ImageShaderPainter.bufferStart=0;kha_graphics4_ImageShaderPainter.bufferIndex=0;kha_graphics4_ImageShaderPainter.initShaders();this.myPipeline=kha_graphics4_ImageShaderPainter.standardImagePipeline;this.initBuffers()};$hxClasses["kha.graphics4.ImageShaderPainter"]=kha_graphics4_ImageShaderPainter;kha_graphics4_ImageShaderPainter.__name__=true;kha_graphics4_ImageShaderPainter.initShaders=function(){if(kha_graphics4_ImageShaderPainter.structure==null){kha_graphics4_ImageShaderPainter.structure=kha_graphics4_Graphics2.createImageVertexStructure()}if(kha_graphics4_ImageShaderPainter.standardImagePipeline==null){var pipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure);kha_graphics4_ImageShaderPainter.standardImagePipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,true)}};kha_graphics4_ImageShaderPainter.prototype={setProjection:function(projectionMatrix){this.projectionMatrix=projectionMatrix},initBuffers:function(){if(kha_graphics4_ImageShaderPainter.rectVertexBuffer==null){kha_graphics4_ImageShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(6e3,kha_graphics4_ImageShaderPainter.structure,1);kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock();kha_graphics4_ImageShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(9e3,0);var indices=kha_graphics4_ImageShaderPainter.indexBuffer.lock();var _g=0;while(_g<1500){var i=_g++;indices[i*3*2]=i*4;indices[i*3*2+1]=i*4+1;indices[i*3*2+2]=i*4+2;indices[i*3*2+3]=i*4;indices[i*3*2+4]=i*4+2;indices[i*3*2+5]=i*4+3}kha_graphics4_ImageShaderPainter.indexBuffer.unlock()}},drawBuffer:function(end){if(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart==0){return}kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock((kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*4);var pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer);this.g.setTexture(pipeline.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture);this.g.setTextureParameters(pipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,this.bilinearMipmaps?2:0);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(kha_graphics4_ImageShaderPainter.bufferStart*2*3,(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*2*3);this.g.setTexture(pipeline.textureLocation,null);if(end||(kha_graphics4_ImageShaderPainter.bufferStart+kha_graphics4_ImageShaderPainter.bufferIndex+1)*4>=1500){kha_graphics4_ImageShaderPainter.bufferStart=0;kha_graphics4_ImageShaderPainter.bufferIndex=0;kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(0)}else{kha_graphics4_ImageShaderPainter.bufferStart=kha_graphics4_ImageShaderPainter.bufferIndex;kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(kha_graphics4_ImageShaderPainter.bufferStart*4)}},end:function(){if(kha_graphics4_ImageShaderPainter.bufferIndex>0){this.drawBuffer(true)}kha_graphics4_ImageShaderPainter.lastTexture=null},__class__:kha_graphics4_ImageShaderPainter};var kha_graphics4_ColoredShaderPainter=function(g4){this.myPipeline=null;this.g=g4;kha_graphics4_ColoredShaderPainter.bufferIndex=0;kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0;kha_graphics4_ColoredShaderPainter.initShaders();this.myPipeline=kha_graphics4_ColoredShaderPainter.standardColorPipeline;this.initBuffers()};$hxClasses["kha.graphics4.ColoredShaderPainter"]=kha_graphics4_ColoredShaderPainter;kha_graphics4_ColoredShaderPainter.__name__=true;kha_graphics4_ColoredShaderPainter.initShaders=function(){if(kha_graphics4_ColoredShaderPainter.structure==null){kha_graphics4_ColoredShaderPainter.structure=kha_graphics4_Graphics2.createColoredVertexStructure()}if(kha_graphics4_ColoredShaderPainter.standardColorPipeline==null){var pipeline=kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure);kha_graphics4_ColoredShaderPainter.standardColorPipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,false)}};kha_graphics4_ColoredShaderPainter.prototype={setProjection:function(projectionMatrix){this.projectionMatrix=projectionMatrix},initBuffers:function(){if(kha_graphics4_ColoredShaderPainter.rectVertexBuffer==null){kha_graphics4_ColoredShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(4e3,kha_graphics4_ColoredShaderPainter.structure,1);kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock();kha_graphics4_ColoredShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(6e3,0);var indices=kha_graphics4_ColoredShaderPainter.indexBuffer.lock();var _g=0;while(_g<1e3){var i=_g++;indices[i*3*2]=i*4;indices[i*3*2+1]=i*4+1;indices[i*3*2+2]=i*4+2;indices[i*3*2+3]=i*4;indices[i*3*2+4]=i*4+2;indices[i*3*2+5]=i*4+3}kha_graphics4_ColoredShaderPainter.indexBuffer.unlock();kha_graphics4_ColoredShaderPainter.triangleVertexBuffer=new kha_graphics4_VertexBuffer(3e3,kha_graphics4_ColoredShaderPainter.structure,1);kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock();kha_graphics4_ColoredShaderPainter.triangleIndexBuffer=new kha_graphics4_IndexBuffer(3e3,0);var triIndices=kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock();var _g=0;while(_g<1e3){var i=_g++;triIndices[i*3]=i*3;triIndices[i*3+1]=i*3+1;triIndices[i*3+2]=i*3+2}kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock()}},setRectVertices:function(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty){var baseIndex=kha_graphics4_ColoredShaderPainter.bufferIndex*7*4;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex]=bottomleftx;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+1]=bottomlefty;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+2]=-5;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+7]=topleftx;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+8]=toplefty;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+9]=-5;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+14]=toprightx;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+15]=toprighty;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+16]=-5;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+21]=bottomrightx;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+22]=bottomrighty;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+23]=-5},setRectColors:function(opacity,color){var baseIndex=kha_graphics4_ColoredShaderPainter.bufferIndex*7*4;var a=opacity*((color>>>24)*.00392156862745098);var r=a*(((color&16711680)>>>16)*.00392156862745098);var g=a*(((color&65280)>>>8)*.00392156862745098);var b=a*((color&255)*.00392156862745098);kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+3]=r;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+4]=g;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+5]=b;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+6]=a;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+10]=r;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+11]=g;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+12]=b;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+13]=a;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+17]=r;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+18]=g;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+19]=b;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+20]=a;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+24]=r;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+25]=g;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+26]=b;kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex+27]=a},drawBuffer:function(trisDone){if(kha_graphics4_ColoredShaderPainter.bufferIndex==0){return}if(!trisDone){if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){this.drawTriBuffer(true)}}kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.bufferIndex*4);var pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.bufferIndex*2*3);kha_graphics4_ColoredShaderPainter.bufferIndex=0;kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock()},drawTriBuffer:function(rectsDone){if(!rectsDone){if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){this.drawBuffer(true)}}kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3);var pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3);kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0;kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock()},fillRect:function(opacity,color,bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty){if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){this.drawTriBuffer(true)}if(kha_graphics4_ColoredShaderPainter.bufferIndex+1>=1e3){this.drawBuffer(false)}this.setRectColors(opacity,color);this.setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty);++kha_graphics4_ColoredShaderPainter.bufferIndex},__class__:kha_graphics4_ColoredShaderPainter};var kha_graphics4_TextShaderPainter=function(g4){this.bilinear=false;this.myPipeline=null;this.g=g4;kha_graphics4_TextShaderPainter.bufferIndex=0;kha_graphics4_TextShaderPainter.initShaders();this.myPipeline=kha_graphics4_TextShaderPainter.standardTextPipeline;this.initBuffers()};$hxClasses["kha.graphics4.TextShaderPainter"]=kha_graphics4_TextShaderPainter;kha_graphics4_TextShaderPainter.__name__=true;kha_graphics4_TextShaderPainter.initShaders=function(){if(kha_graphics4_TextShaderPainter.structure==null){kha_graphics4_TextShaderPainter.structure=kha_graphics4_Graphics2.createTextVertexStructure()}if(kha_graphics4_TextShaderPainter.standardTextPipeline==null){var pipeline=kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure);kha_graphics4_TextShaderPainter.standardTextPipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,true)}};kha_graphics4_TextShaderPainter.prototype={setProjection:function(projectionMatrix){this.projectionMatrix=projectionMatrix},initBuffers:function(){if(kha_graphics4_TextShaderPainter.rectVertexBuffer==null){kha_graphics4_TextShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(4e3,kha_graphics4_TextShaderPainter.structure,1);kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock();kha_graphics4_TextShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(6e3,0);var indices=kha_graphics4_TextShaderPainter.indexBuffer.lock();var _g=0;while(_g<1e3){var i=_g++;indices[i*3*2]=i*4;indices[i*3*2+1]=i*4+1;indices[i*3*2+2]=i*4+2;indices[i*3*2+3]=i*4;indices[i*3*2+4]=i*4+2;indices[i*3*2+5]=i*4+3}kha_graphics4_TextShaderPainter.indexBuffer.unlock()}},drawBuffer:function(){if(kha_graphics4_TextShaderPainter.bufferIndex==0){return}kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock(kha_graphics4_TextShaderPainter.bufferIndex*4);var pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.setTexture(pipeline.textureLocation,kha_graphics4_TextShaderPainter.lastTexture);this.g.setTextureParameters(pipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,0);this.g.drawIndexedVertices(0,kha_graphics4_TextShaderPainter.bufferIndex*2*3);this.g.setTexture(pipeline.textureLocation,null);kha_graphics4_TextShaderPainter.bufferIndex=0;kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock()},end:function(){if(kha_graphics4_TextShaderPainter.bufferIndex>0){this.drawBuffer()}kha_graphics4_TextShaderPainter.lastTexture=null},__class__:kha_graphics4_TextShaderPainter};var kha_graphics4_Graphics2=function(canvas){kha_graphics2_Graphics.call(this);this.set_color(-1);this.canvas=canvas;this.g=canvas.get_g4();this.imagePainter=new kha_graphics4_ImageShaderPainter(this.g);this.coloredPainter=new kha_graphics4_ColoredShaderPainter(this.g);this.textPainter=new kha_graphics4_TextShaderPainter(this.g);this.textPainter.fontSize=this.get_fontSize();this.projectionMatrix=new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.setProjection();if(kha_graphics4_Graphics2.videoPipeline==null){kha_graphics4_Graphics2.videoPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure());kha_graphics4_Graphics2.videoPipeline.fragmentShader=kha_Shaders.painter_video_frag;kha_graphics4_Graphics2.videoPipeline.vertexShader=kha_Shaders.painter_video_vert;kha_graphics4_Graphics2.videoPipeline.compile()}};$hxClasses["kha.graphics4.Graphics2"]=kha_graphics4_Graphics2;kha_graphics4_Graphics2.__name__=true;kha_graphics4_Graphics2.upperPowerOfTwo=function(v){--v;v|=v>>>1;v|=v>>>2;v|=v>>>4;v|=v>>>8;v|=v>>>16;return++v};kha_graphics4_Graphics2.createImageVertexStructure=function(){var structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("texPosition",1);structure.add("vertexColor",3);return structure};kha_graphics4_Graphics2.createImagePipeline=function(structure){var shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_image_frag;shaderPipeline.vertexShader=kha_Shaders.painter_image_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=1;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=1;shaderPipeline.alphaBlendDestination=5;return shaderPipeline};kha_graphics4_Graphics2.createColoredVertexStructure=function(){var structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("vertexColor",3);return structure};kha_graphics4_Graphics2.createColoredPipeline=function(structure){var shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_colored_frag;shaderPipeline.vertexShader=kha_Shaders.painter_colored_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=1;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=1;shaderPipeline.alphaBlendDestination=5;return shaderPipeline};kha_graphics4_Graphics2.createTextVertexStructure=function(){var structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("texPosition",1);structure.add("vertexColor",3);return structure};kha_graphics4_Graphics2.createTextPipeline=function(structure){var shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_text_frag;shaderPipeline.vertexShader=kha_Shaders.painter_text_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=3;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=3;shaderPipeline.alphaBlendDestination=5;return shaderPipeline};kha_graphics4_Graphics2.__super__=kha_graphics2_Graphics;kha_graphics4_Graphics2.prototype=$extend(kha_graphics2_Graphics.prototype,{setProjection:function(){var width=this.canvas.get_width();var height=this.canvas.get_height();if(this.canvas instanceof kha_Framebuffer){var _this=this.projectionMatrix;var tx=-width/width;var ty=-height/(0-height);var tz=-1.0002000200020003;var m__00=2/width;var m__10=0;var m__20=0;var m__30=tx;var m__01=0;var m__11=2/(0-height);var m__21=0;var m__31=ty;var m__02=0;var m__12=0;var m__22=-.002000200020002;var m__32=tz;var m__03=0;var m__13=0;var m__23=0;var m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}else{if(!kha_Image.get_nonPow2Supported()){width=kha_graphics4_Graphics2.upperPowerOfTwo(width);height=kha_graphics4_Graphics2.upperPowerOfTwo(height)}if(kha_Image.renderTargetsInvertedY()){var _this=this.projectionMatrix;var tx=-width/width;var ty=-height/height;var tz=-1.0002000200020003;var m__00=2/width;var m__10=0;var m__20=0;var m__30=tx;var m__01=0;var m__11=2/height;var m__21=0;var m__31=ty;var m__02=0;var m__12=0;var m__22=-.002000200020002;var m__32=tz;var m__03=0;var m__13=0;var m__23=0;var m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}else{var _this=this.projectionMatrix;var tx=-width/width;var ty=-height/(0-height);var tz=-1.0002000200020003;var m__00=2/width;var m__10=0;var m__20=0;var m__30=tx;var m__01=0;var m__11=2/(0-height);var m__21=0;var m__31=ty;var m__02=0;var m__12=0;var m__22=-.002000200020002;var m__32=tz;var m__03=0;var m__13=0;var m__23=0;var m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}}this.imagePainter.setProjection(this.projectionMatrix);this.coloredPainter.setProjection(this.projectionMatrix);this.textPainter.setProjection(this.projectionMatrix)},get_color:function(){return this.myColor},set_color:function(color){return this.myColor=color},fillRect:function(x,y,width,height){this.imagePainter.end();this.textPainter.end();var _this=this.transformations[this.transformationIndex];var x1=x;var y1=y+height;if(y1==null){y1=0}if(x1==null){x1=0}var value_x=x1;var value_y=y1;var w=_this._02*value_x+_this._12*value_y+_this._22;var x1=(_this._00*value_x+_this._10*value_y+_this._20)/w;var y1=(_this._01*value_x+_this._11*value_y+_this._21)/w;var x2=x1;var y2=y1;if(y2==null){y2=0}if(x2==null){x2=0}var p1_x=x2;var p1_y=y2;var _this=this.transformations[this.transformationIndex];var x1=x;var y1=y;if(y1==null){y1=0}if(x1==null){x1=0}var value_x=x1;var value_y=y1;var w=_this._02*value_x+_this._12*value_y+_this._22;var x1=(_this._00*value_x+_this._10*value_y+_this._20)/w;var y1=(_this._01*value_x+_this._11*value_y+_this._21)/w;var x2=x1;var y2=y1;if(y2==null){y2=0}if(x2==null){x2=0}var p2_x=x2;var p2_y=y2;var _this=this.transformations[this.transformationIndex];var x1=x+width;var y1=y;if(y1==null){y1=0}if(x1==null){x1=0}var value_x=x1;var value_y=y1;var w=_this._02*value_x+_this._12*value_y+_this._22;var x1=(_this._00*value_x+_this._10*value_y+_this._20)/w;var y1=(_this._01*value_x+_this._11*value_y+_this._21)/w;var x2=x1;var y2=y1;if(y2==null){y2=0}if(x2==null){x2=0}var p3_x=x2;var p3_y=y2;var _this=this.transformations[this.transformationIndex];var x1=x+width;var y1=y+height;if(y1==null){y1=0}if(x1==null){x1=0}var value_x=x1;var value_y=y1;var w=_this._02*value_x+_this._12*value_y+_this._22;var x=(_this._00*value_x+_this._10*value_y+_this._20)/w;var y=(_this._01*value_x+_this._11*value_y+_this._21)/w;var x1=x;var y1=y;if(y1==null){y1=0}if(x1==null){x1=0}var p4_x=x1;var p4_y=y1;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y)},begin:function(clear,clearColor){if(clear==null){clear=true}if(kha_graphics4_Graphics2.current==null){kha_graphics4_Graphics2.current=this}else{throw haxe_Exception.thrown("End before you begin")}this.g.begin();if(clear){this.clear(clearColor)}this.setProjection()},clear:function(color){this.flush();this.g.clear(color==null?-16777216:color)},flush:function(){this.imagePainter.end();this.textPainter.end();var _this=this.coloredPainter;if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){_this.drawTriBuffer(false)}if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){_this.drawBuffer(false)}},end:function(){this.flush();this.g.end();if(kha_graphics4_Graphics2.current==this){kha_graphics4_Graphics2.current=null}else{throw haxe_Exception.thrown("Begin before you end")}},__class__:kha_graphics4_Graphics2});var kha_graphics4_IndexBuffer=function(indexCount,usage,canRead){if(canRead==null){canRead=false}this.indexCount=indexCount;this.buffer=Krom.createIndexBuffer(indexCount)};$hxClasses["kha.graphics4.IndexBuffer"]=kha_graphics4_IndexBuffer;kha_graphics4_IndexBuffer.__name__=true;kha_graphics4_IndexBuffer.prototype={lock:function(start,count){this._data=Krom.lockIndexBuffer(this.buffer);if(start==null){start=0}if(count==null){count=this.indexCount}return this._data.subarray(start,start+count)},unlock:function(count){Krom.unlockIndexBuffer(this.buffer)},set:function(){Krom.setIndexBuffer(this.buffer)},__class__:kha_graphics4_IndexBuffer};var kha_graphics4_PipelineStateBase=function(){this.inputLayout=null;this.vertexShader=null;this.fragmentShader=null;this.geometryShader=null;this.tessellationControlShader=null;this.tessellationEvaluationShader=null;this.cullMode=2;this.depthWrite=false;this.depthMode=0;this.stencilMode=0;this.stencilBothPass=0;this.stencilDepthFail=0;this.stencilFail=0;this.stencilReferenceValue=kha_graphics4_StencilValue.Static(0);this.stencilReadMask=255;this.stencilWriteMask=255;this.blendSource=1;this.blendDestination=2;this.blendOperation=0;this.alphaBlendSource=1;this.alphaBlendDestination=2;this.alphaBlendOperation=0;this.colorWriteMasksRed=[];this.colorWriteMasksGreen=[];this.colorWriteMasksBlue=[];this.colorWriteMasksAlpha=[];this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorAttachmentCount=1;this.colorAttachments=[];this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.depthStencilAttachment=0;this.conservativeRasterization=false};$hxClasses["kha.graphics4.PipelineStateBase"]=kha_graphics4_PipelineStateBase;kha_graphics4_PipelineStateBase.__name__=true;kha_graphics4_PipelineStateBase.prototype={__class__:kha_graphics4_PipelineStateBase};var kha_graphics4_PipelineState=function(){kha_graphics4_PipelineStateBase.call(this);this.pipeline=Krom.createPipeline()};$hxClasses["kha.graphics4.PipelineState"]=kha_graphics4_PipelineState;kha_graphics4_PipelineState.__name__=true;kha_graphics4_PipelineState.convertBlendingFactor=function(factor){switch(factor){case 0:case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9}};kha_graphics4_PipelineState.__super__=kha_graphics4_PipelineStateBase;kha_graphics4_PipelineState.prototype=$extend(kha_graphics4_PipelineStateBase.prototype,{delete:function(){Krom.deletePipeline(this.pipeline);this.pipeline=null},compile:function(){var structure0=this.inputLayout.length>0?this.inputLayout[0]:null;var structure1=this.inputLayout.length>1?this.inputLayout[1]:null;var structure2=this.inputLayout.length>2?this.inputLayout[2]:null;var structure3=this.inputLayout.length>3?this.inputLayout[3]:null;var gs=this.geometryShader!=null?this.geometryShader.shader:null;var tcs=this.tessellationControlShader!=null?this.tessellationControlShader.shader:null;var tes=this.tessellationEvaluationShader!=null?this.tessellationEvaluationShader.shader:null;var stencilReferenceValue=0;var _g=this.stencilReferenceValue;if(_g._hx_index==1){var value=_g.value;stencilReferenceValue=value}Krom.compilePipeline(this.pipeline,structure0,structure1,structure2,structure3,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,gs,tcs,tes,{cullMode:this.cullMode,depthWrite:this.depthWrite,depthMode:this.depthMode,stencilMode:this.stencilMode,stencilBothPass:this.stencilBothPass,stencilDepthFail:this.stencilDepthFail,stencilFail:this.stencilFail,stencilReferenceValue:stencilReferenceValue,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.blendSource),blendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.blendDestination),alphaBlendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMasksRed,colorWriteMaskGreen:this.colorWriteMasksGreen,colorWriteMaskBlue:this.colorWriteMasksBlue,colorWriteMaskAlpha:this.colorWriteMasksAlpha,conservativeRasterization:this.conservativeRasterization})},set:function(){Krom.setPipeline(this.pipeline)},getConstantLocation:function(name){return Krom.getConstantLocation(this.pipeline,name)},getTextureUnit:function(name){return Krom.getTextureUnit(this.pipeline,name)},__class__:kha_graphics4_PipelineState});var kha_graphics4_StencilValue=$hxEnums["kha.graphics4.StencilValue"]={__ename__:true,__constructs__:["Dynamic","Static"],Dynamic:{_hx_index:0,__enum__:"kha.graphics4.StencilValue",toString:$estr},Static:($_=function(value){return{_hx_index:1,value:value,__enum__:"kha.graphics4.StencilValue",toString:$estr}},$_.__params__=["value"],$_)};var kha_graphics4_TessellationControlShader=function(sources,names){this.shader=Krom.createTessellationControlShader(sources[0].bytes.b.bufferValue,names[0])};$hxClasses["kha.graphics4.TessellationControlShader"]=kha_graphics4_TessellationControlShader;kha_graphics4_TessellationControlShader.__name__=true;kha_graphics4_TessellationControlShader.prototype={__class__:kha_graphics4_TessellationControlShader};var kha_graphics4_TessellationEvaluationShader=function(sources,names){this.shader=Krom.createTessellationEvaluationShader(sources[0].bytes.b.bufferValue,names[0])};$hxClasses["kha.graphics4.TessellationEvaluationShader"]=kha_graphics4_TessellationEvaluationShader;kha_graphics4_TessellationEvaluationShader.__name__=true;kha_graphics4_TessellationEvaluationShader.prototype={__class__:kha_graphics4_TessellationEvaluationShader};var kha_graphics4_TextureUnit=function(){};$hxClasses["kha.graphics4.TextureUnit"]=kha_graphics4_TextureUnit;kha_graphics4_TextureUnit.__name__=true;kha_graphics4_TextureUnit.__isInterface__=true;var kha_graphics4_VertexBuffer=function(vertexCount,structure,usage,instanceDataStepRate,canRead){if(canRead==null){canRead=false}if(instanceDataStepRate==null){instanceDataStepRate=0}this.vertexCount=vertexCount;this.structure=structure;this.buffer=Krom.createVertexBuffer(vertexCount,structure.elements,usage,instanceDataStepRate)};$hxClasses["kha.graphics4.VertexBuffer"]=kha_graphics4_VertexBuffer;kha_graphics4_VertexBuffer.__name__=true;kha_graphics4_VertexBuffer.prototype={lock:function(start,count){this._data=Krom.lockVertexBuffer(this.buffer);return this._data},lockInt16:function(start,count){var this1=new Int16Array(this.lock(start,count).buffer);return this1},unlock:function(count){Krom.unlockVertexBuffer(this.buffer)},set:function(offset){Krom.setVertexBuffer(this.buffer);return 0},__class__:kha_graphics4_VertexBuffer};var kha_graphics4_VertexElement=function(name,data){this.name=name;this.data=data};$hxClasses["kha.graphics4.VertexElement"]=kha_graphics4_VertexElement;kha_graphics4_VertexElement.__name__=true;kha_graphics4_VertexElement.prototype={__class__:kha_graphics4_VertexElement};var kha_graphics4_VertexShader=function(sources,names){if(sources!=null){this.shader=Krom.createVertexShader(sources[0].bytes.b.bufferValue,names[0])}};$hxClasses["kha.graphics4.VertexShader"]=kha_graphics4_VertexShader;kha_graphics4_VertexShader.__name__=true;kha_graphics4_VertexShader.fromSource=function(source){var shader=new kha_graphics4_VertexShader(null,null);shader.shader=Krom.createVertexShaderFromSource(source);return shader};kha_graphics4_VertexShader.prototype={__class__:kha_graphics4_VertexShader};var kha_graphics4_VertexStructure=function(){this.elements=[];this.instanced=false};$hxClasses["kha.graphics4.VertexStructure"]=kha_graphics4_VertexStructure;kha_graphics4_VertexStructure.__name__=true;kha_graphics4_VertexStructure.prototype={add:function(name,data){this.elements.push(new kha_graphics4_VertexElement(name,data))},size:function(){return this.elements.length},byteSize:function(){var byteSize=0;var _g=0;var _g1=this.elements.length;while(_g<_g1){var i=_g++;byteSize+=this.dataByteSize(this.elements[i].data)}return byteSize},dataByteSize:function(data){switch(data){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64;case 5:return 4;case 6:return 8}},get:function(index){return this.elements[index]},__class__:kha_graphics4_VertexStructure};var kha_input_Gamepad=$hx_exports["kha"]["input"]["Gamepad"]=function(index,id){if(id==null){id="unknown"}if(index==null){index=0}this.index=index;this.axisListeners=[];this.buttonListeners=[];kha_input_Gamepad.instances[index]=this};$hxClasses["kha.input.Gamepad"]=kha_input_Gamepad;kha_input_Gamepad.__name__=true;kha_input_Gamepad.get=function(index){if(index==null){index=0}if(index>=kha_input_Gamepad.instances.length){return null}return kha_input_Gamepad.instances[index]};kha_input_Gamepad.notifyOnConnect=function(connectListener,disconnectListener){if(connectListener!=null){kha_input_Gamepad.connectListeners.push(connectListener)}if(disconnectListener!=null){kha_input_Gamepad.disconnectListeners.push(disconnectListener)}};kha_input_Gamepad.removeConnect=function(connectListener,disconnectListener){if(connectListener!=null){HxOverrides.remove(kha_input_Gamepad.connectListeners,connectListener)}if(disconnectListener!=null){HxOverrides.remove(kha_input_Gamepad.disconnectListeners,disconnectListener)}};kha_input_Gamepad.sendConnectEvent=function(index){kha_input_Gamepad.instances[index].connected=true;var _g=0;var _g1=kha_input_Gamepad.connectListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(index)}};kha_input_Gamepad.sendDisconnectEvent=function(index){kha_input_Gamepad.instances[index].connected=false;var _g=0;var _g1=kha_input_Gamepad.disconnectListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(index)}};kha_input_Gamepad.prototype={notify:function(axisListener,buttonListener){if(axisListener!=null){this.axisListeners.push(axisListener)}if(buttonListener!=null){this.buttonListeners.push(buttonListener)}},remove:function(axisListener,buttonListener){if(axisListener!=null){HxOverrides.remove(this.axisListeners,axisListener)}if(buttonListener!=null){HxOverrides.remove(this.buttonListeners,buttonListener)}},get_id:function(){return kha_SystemImpl.getGamepadId(this.index)},get_vendor:function(){return kha_SystemImpl.getGamepadVendor(this.index)},sendAxisEvent:function(axis,value){var _g=0;var _g1=this.axisListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(axis,value)}},sendButtonEvent:function(button,value){var _g=0;var _g1=this.buttonListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(button,value)}},__class__:kha_input_Gamepad,__properties__:{get_vendor:"get_vendor",get_id:"get_id"}};var kha_input_BlockInterventions=$hxEnums["kha.input.BlockInterventions"]={__ename__:true,__constructs__:["Default","Full","None","Custom"],Default:{_hx_index:0,__enum__:"kha.input.BlockInterventions",toString:$estr},Full:{_hx_index:1,__enum__:"kha.input.BlockInterventions",toString:$estr},None:{_hx_index:2,__enum__:"kha.input.BlockInterventions",toString:$estr},Custom:($_=function(func){return{_hx_index:3,func:func,__enum__:"kha.input.BlockInterventions",toString:$estr}},$_.__params__=["func"],$_)};var kha_netsync_Controller=function(){this.__id=kha_netsync_ControllerBuilder.nextId++;this._inputBuffer=new haxe_io_Bytes(new ArrayBuffer(1))};$hxClasses["kha.netsync.Controller"]=kha_netsync_Controller;kha_netsync_Controller.__name__=true;kha_netsync_Controller.prototype={__class__:kha_netsync_Controller};var kha_input_Keyboard=$hx_exports["kha"]["input"]["Keyboard"]=function(){kha_netsync_Controller.call(this);this.downListeners=[];this.upListeners=[];this.pressListeners=[];kha_input_Keyboard.instance=this};$hxClasses["kha.input.Keyboard"]=kha_input_Keyboard;kha_input_Keyboard.__name__=true;kha_input_Keyboard.get=function(num){if(num==null){num=0}return kha_SystemImpl.getKeyboard(num)};kha_input_Keyboard.disableSystemInterventions=function(behavior){kha_input_Keyboard.keyBehavior=behavior};kha_input_Keyboard.__super__=kha_netsync_Controller;kha_input_Keyboard.prototype=$extend(kha_netsync_Controller.prototype,{notify:function(downListener,upListener,pressListener){if(downListener!=null){this.downListeners.push(downListener)}if(upListener!=null){this.upListeners.push(upListener)}if(pressListener!=null){this.pressListeners.push(pressListener)}},remove:function(downListener,upListener,pressListener){if(downListener!=null){HxOverrides.remove(this.downListeners,downListener)}if(upListener!=null){HxOverrides.remove(this.upListeners,upListener)}if(pressListener!=null){HxOverrides.remove(this.pressListeners,pressListener)}},show:function(){},hide:function(){},sendDownEvent:function(code){var _g=0;var _g1=this.downListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(code)}},sendUpEvent:function(code){var _g=0;var _g1=this.upListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(code)}},sendPressEvent:function(char){var _g=0;var _g1=this.pressListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(char)}},_receive:function(bytes){},__class__:kha_input_Keyboard});var kha_input_MouseEventBlockBehavior=$hxEnums["kha.input.MouseEventBlockBehavior"]={__ename__:true,__constructs__:["Full","None","Custom"],Full:{_hx_index:0,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr},None:{_hx_index:1,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr},Custom:($_=function(func){return{_hx_index:2,func:func,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr}},$_.__params__=["func"],$_)};var kha_input_MouseCursor=$hxEnums["kha.input.MouseCursor"]={__ename__:true,__constructs__:["Default","Pointer","Text","EastWestResize","NorthSouthResize","NorthEastResize","SouthEastResize","NorthWestResize","SouthWestResize","Grab","Grabbing","NotAllowed","Wait","Crosshair"],Default:{_hx_index:0,__enum__:"kha.input.MouseCursor",toString:$estr},Pointer:{_hx_index:1,__enum__:"kha.input.MouseCursor",toString:$estr},Text:{_hx_index:2,__enum__:"kha.input.MouseCursor",toString:$estr},EastWestResize:{_hx_index:3,__enum__:"kha.input.MouseCursor",toString:$estr},NorthSouthResize:{_hx_index:4,__enum__:"kha.input.MouseCursor",toString:$estr},NorthEastResize:{_hx_index:5,__enum__:"kha.input.MouseCursor",toString:$estr},SouthEastResize:{_hx_index:6,__enum__:"kha.input.MouseCursor",toString:$estr},NorthWestResize:{_hx_index:7,__enum__:"kha.input.MouseCursor",toString:$estr},SouthWestResize:{_hx_index:8,__enum__:"kha.input.MouseCursor",toString:$estr},Grab:{_hx_index:9,__enum__:"kha.input.MouseCursor",toString:$estr},Grabbing:{_hx_index:10,__enum__:"kha.input.MouseCursor",toString:$estr},NotAllowed:{_hx_index:11,__enum__:"kha.input.MouseCursor",toString:$estr},Wait:{_hx_index:12,__enum__:"kha.input.MouseCursor",toString:$estr},Crosshair:{_hx_index:13,__enum__:"kha.input.MouseCursor",toString:$estr}};var kha_input_Mouse=$hx_exports["kha"]["input"]["Mouse"]=function(){kha_netsync_Controller.call(this);kha_input_Mouse.instance=this};$hxClasses["kha.input.Mouse"]=kha_input_Mouse;kha_input_Mouse.__name__=true;kha_input_Mouse.get=function(num){if(num==null){num=0}return kha_SystemImpl.getMouse(num)};kha_input_Mouse.setWheelEventBlockBehavior=function(behavior){kha_input_Mouse.wheelEventBlockBehavior=behavior};kha_input_Mouse.__super__=kha_netsync_Controller;kha_input_Mouse.prototype=$extend(kha_netsync_Controller.prototype,{notify:function(downListener,upListener,moveListener,wheelListener,leaveListener){this.notifyWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener)},remove:function(downListener,upListener,moveListener,wheelListener,leaveListener){this.removeWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener)},notifyWindowed:function(windowId,downListener,upListener,moveListener,wheelListener,leaveListener){if(downListener!=null){if(this.windowDownListeners==null){this.windowDownListeners=[]}while(this.windowDownListeners.length<=windowId)this.windowDownListeners.push([]);this.windowDownListeners[windowId].push(downListener)}if(upListener!=null){if(this.windowUpListeners==null){this.windowUpListeners=[]}while(this.windowUpListeners.length<=windowId)this.windowUpListeners.push([]);this.windowUpListeners[windowId].push(upListener)}if(moveListener!=null){if(this.windowMoveListeners==null){this.windowMoveListeners=[]}while(this.windowMoveListeners.length<=windowId)this.windowMoveListeners.push([]);this.windowMoveListeners[windowId].push(moveListener)}if(wheelListener!=null){if(this.windowWheelListeners==null){this.windowWheelListeners=[]}while(this.windowWheelListeners.length<=windowId)this.windowWheelListeners.push([]);this.windowWheelListeners[windowId].push(wheelListener)}if(leaveListener!=null){if(this.windowLeaveListeners==null){this.windowLeaveListeners=[]}while(this.windowLeaveListeners.length<=windowId)this.windowLeaveListeners.push([]);this.windowLeaveListeners[windowId].push(leaveListener)}},removeWindowed:function(windowId,downListener,upListener,moveListener,wheelListener,leaveListener){if(downListener!=null){if(this.windowDownListeners!=null){if(windowId<this.windowDownListeners.length){HxOverrides.remove(this.windowDownListeners[windowId],downListener)}else{haxe_Log.trace('no downListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:147,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no downListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:151,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(upListener!=null){if(this.windowUpListeners!=null){if(windowId<this.windowUpListeners.length){HxOverrides.remove(this.windowUpListeners[windowId],upListener)}else{haxe_Log.trace('no upListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:161,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no upListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:165,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(moveListener!=null){if(this.windowMoveListeners!=null){if(windowId<this.windowMoveListeners.length){HxOverrides.remove(this.windowMoveListeners[windowId],moveListener)}else{haxe_Log.trace('no moveListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:175,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no moveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:179,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(wheelListener!=null){if(this.windowWheelListeners!=null){if(windowId<this.windowWheelListeners.length){HxOverrides.remove(this.windowWheelListeners[windowId],wheelListener)}else{haxe_Log.trace('no wheelListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:189,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no wheelListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:193,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(leaveListener!=null){if(this.windowLeaveListeners!=null){if(windowId<this.windowLeaveListeners.length){HxOverrides.remove(this.windowLeaveListeners[windowId],leaveListener)}else{haxe_Log.trace('no leaveListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:203,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no leaveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:207,className:"kha.input.Mouse",methodName:"removeWindowed"})}}},lock:function(){},unlock:function(){},canLock:function(){return false},isLocked:function(){return false},notifyOnLockChange:function(change,error){},removeFromLockChange:function(change,error){},hideSystemCursor:function(){},showSystemCursor:function(){},setSystemCursor:function(cursor){},sendLeaveEvent:function(windowId){if(this.windowLeaveListeners!=null){var _g=0;var _g1=this.windowLeaveListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener()}}},sendDownEvent:function(windowId,button,x,y){if(this.windowDownListeners!=null){var _g=0;var _g1=this.windowDownListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener(button,x,y)}}},sendUpEvent:function(windowId,button,x,y){if(this.windowUpListeners!=null){var _g=0;var _g1=this.windowUpListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener(button,x,y)}}},sendMoveEvent:function(windowId,x,y,movementX,movementY){if(this.windowMoveListeners!=null){var _g=0;var _g1=this.windowMoveListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener(x,y,movementX,movementY)}}},sendWheelEvent:function(windowId,delta){if(this.windowWheelListeners!=null){var _g=0;var _g1=this.windowWheelListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener(delta)}}},_receive:function(bytes){},__class__:kha_input_Mouse});var kha_input_MouseImpl=function(){kha_input_Mouse.call(this)};$hxClasses["kha.input.MouseImpl"]=kha_input_MouseImpl;kha_input_MouseImpl.__name__=true;kha_input_MouseImpl.__super__=kha_input_Mouse;kha_input_MouseImpl.prototype=$extend(kha_input_Mouse.prototype,{lock:function(){kha_SystemImpl.lockMouse()},unlock:function(){kha_SystemImpl.unlockMouse()},canLock:function(){return kha_SystemImpl.canLockMouse()},isLocked:function(){return kha_SystemImpl.isMouseLocked()},notifyOnLockChange:function(func,error){kha_SystemImpl.notifyOfMouseLockChange(func,error)},removeFromLockChange:function(func,error){kha_SystemImpl.removeFromMouseLockChange(func,error)},hideSystemCursor:function(){kha_SystemImpl.hideSystemCursor()},showSystemCursor:function(){kha_SystemImpl.showSystemCursor()},_receive:function(bytes){},__class__:kha_input_MouseImpl});var kha_input_Pen=function(){kha_input_Pen.instance=this};$hxClasses["kha.input.Pen"]=kha_input_Pen;kha_input_Pen.__name__=true;kha_input_Pen.get=function(num){if(num==null){num=0}return kha_SystemImpl.getPen(num)};kha_input_Pen.prototype={notify:function(downListener,upListener,moveListener){this.notifyWindowed(0,downListener,upListener,moveListener)},notifyWindowed:function(windowId,downListener,upListener,moveListener){if(downListener!=null){if(this.windowDownListeners==null){this.windowDownListeners=[]}while(this.windowDownListeners.length<=windowId)this.windowDownListeners.push([]);this.windowDownListeners[windowId].push(downListener)}if(upListener!=null){if(this.windowUpListeners==null){this.windowUpListeners=[]}while(this.windowUpListeners.length<=windowId)this.windowUpListeners.push([]);this.windowUpListeners[windowId].push(upListener)}if(moveListener!=null){if(this.windowMoveListeners==null){this.windowMoveListeners=[]}while(this.windowMoveListeners.length<=windowId)this.windowMoveListeners.push([]);this.windowMoveListeners[windowId].push(moveListener)}},sendDownEvent:function(windowId,x,y,pressure){if(this.windowDownListeners!=null){var _g=0;var _g1=this.windowDownListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener(x,y,pressure)}}},sendUpEvent:function(windowId,x,y,pressure){if(this.windowUpListeners!=null){var _g=0;var _g1=this.windowUpListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener(x,y,pressure)}}},sendMoveEvent:function(windowId,x,y,pressure){if(this.windowMoveListeners!=null){var _g=0;var _g1=this.windowMoveListeners[windowId];while(_g<_g1.length){var listener=_g1[_g];++_g;listener(x,y,pressure)}}},__class__:kha_input_Pen};var kha_input_TouchDownEventBlockBehavior=$hxEnums["kha.input.TouchDownEventBlockBehavior"]={__ename__:true,__constructs__:["Full","None","Custom"],Full:{_hx_index:0,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr},None:{_hx_index:1,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr},Custom:($_=function(func){return{_hx_index:2,func:func,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr}},$_.__params__=["func"],$_)};var kha_input_Surface=$hx_exports["kha"]["input"]["Surface"]=function(){this.touchStartListeners=[];this.touchEndListeners=[];this.moveListeners=[];kha_input_Surface.instance=this};$hxClasses["kha.input.Surface"]=kha_input_Surface;kha_input_Surface.__name__=true;kha_input_Surface.get=function(num){if(num==null){num=0}if(num!=0){return null}return kha_input_Surface.instance};kha_input_Surface.setTouchDownEventBlockBehavior=function(behavior){kha_input_Surface.touchDownEventBlockBehavior=behavior};kha_input_Surface.prototype={notify:function(touchStartListener,touchEndListener,moveListener){if(touchStartListener!=null){this.touchStartListeners.push(touchStartListener)}if(touchEndListener!=null){this.touchEndListeners.push(touchEndListener)}if(moveListener!=null){this.moveListeners.push(moveListener)}},remove:function(touchStartListener,touchEndListener,moveListener){if(touchStartListener!=null){HxOverrides.remove(this.touchStartListeners,touchStartListener)}if(touchEndListener!=null){HxOverrides.remove(this.touchEndListeners,touchEndListener)}if(moveListener!=null){HxOverrides.remove(this.moveListeners,moveListener)}},sendTouchStartEvent:function(index,x,y){var _g=0;var _g1=this.touchStartListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(index,x,y)}},sendTouchEndEvent:function(index,x,y){var _g=0;var _g1=this.touchEndListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(index,x,y)}},sendMoveEvent:function(index,x,y){var _g=0;var _g1=this.moveListeners;while(_g<_g1.length){var listener=_g1[_g];++_g;listener(index,x,y)}},__class__:kha_input_Surface};var kha_internal_BytesBlob=function(bytes){this.bytes=bytes};$hxClasses["kha.internal.BytesBlob"]=kha_internal_BytesBlob;kha_internal_BytesBlob.__name__=true;kha_internal_BytesBlob.__interfaces__=[kha_Resource];kha_internal_BytesBlob.fromBytes=function(bytes){return new kha_internal_BytesBlob(bytes)};kha_internal_BytesBlob.prototype={get_length:function(){return this.bytes.length},toString:function(){return this.bytes.toString()},toBytes:function(){return this.bytes},__class__:kha_internal_BytesBlob,__properties__:{get_length:"get_length"}};var kha_krom_Graphics=function(renderTarget){this.renderTarget=renderTarget};$hxClasses["kha.krom.Graphics"]=kha_krom_Graphics;kha_krom_Graphics.__name__=true;kha_krom_Graphics.__interfaces__=[kha_graphics4_Graphics];kha_krom_Graphics.prototype={begin:function(additionalRenderTargets){Krom.begin(this.renderTarget,additionalRenderTargets)},beginFace:function(face){Krom.beginFace(this.renderTarget,face)},end:function(){Krom.end()},clear:function(color,depth,stencil){var flags=0;if(color!=null){flags|=1}if(depth!=null){flags|=2}if(stencil!=null){flags|=4}Krom.clear(flags,color==null?0:color,depth,stencil)},viewport:function(x,y,width,height){Krom.viewport(x,y,width,height)},setVertexBuffer:function(vertexBuffer){vertexBuffer.set(0)},setVertexBuffers:function(vertexBuffers){Krom.setVertexBuffers(vertexBuffers)},setIndexBuffer:function(indexBuffer){indexBuffer.set()},setCubeMap:function(unit,cubeMap){if(cubeMap==null){return}if(cubeMap.texture_!=null){Krom.setTexture(unit,cubeMap.texture_)}else{Krom.setRenderTarget(unit,cubeMap.renderTarget_)}},setCubeMapDepth:function(unit,cubeMap){if(cubeMap==null){return}Krom.setTextureDepth(unit,cubeMap.renderTarget_)},setTexture:function(unit,texture){if(texture==null){return}if(texture.texture_!=null){Krom.setTexture(unit,texture.texture_)}else{Krom.setRenderTarget(unit,texture.renderTarget_)}},setTextureDepth:function(unit,texture){if(texture==null){return}Krom.setTextureDepth(unit,texture.renderTarget_)},setImageTexture:function(unit,texture){if(texture==null){return}Krom.setImageTexture(unit,texture.texture_)},setTextureParameters:function(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter){Krom.setTextureParameters(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter)},setTexture3DParameters:function(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter){Krom.setTexture3DParameters(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter)},setTextureCompareMode:function(texunit,enabled){Krom.setTextureCompareMode(texunit,enabled)},setCubeMapCompareMode:function(texunit,enabled){Krom.setCubeMapCompareMode(texunit,enabled)},setPipeline:function(pipeline){pipeline.set()},setBool:function(location,value){Krom.setBool(location,value)},setInt:function(location,value){Krom.setInt(location,value)},setFloat:function(location,value){Krom.setFloat(location,value)},setFloat2:function(location,value1,value2){Krom.setFloat2(location,value1,value2)},setFloat3:function(location,value1,value2,value3){Krom.setFloat3(location,value1,value2,value3)},setFloat4:function(location,value1,value2,value3,value4){Krom.setFloat4(location,value1,value2,value3,value4)},setFloats:function(location,values){Krom.setFloats(location,values.buffer)},setMatrix:function(location,matrix){kha_krom_Graphics.mat[0]=matrix._00;kha_krom_Graphics.mat[1]=matrix._01;kha_krom_Graphics.mat[2]=matrix._02;kha_krom_Graphics.mat[3]=matrix._03;kha_krom_Graphics.mat[4]=matrix._10;kha_krom_Graphics.mat[5]=matrix._11;kha_krom_Graphics.mat[6]=matrix._12;kha_krom_Graphics.mat[7]=matrix._13;kha_krom_Graphics.mat[8]=matrix._20;kha_krom_Graphics.mat[9]=matrix._21;kha_krom_Graphics.mat[10]=matrix._22;kha_krom_Graphics.mat[11]=matrix._23;kha_krom_Graphics.mat[12]=matrix._30;kha_krom_Graphics.mat[13]=matrix._31;kha_krom_Graphics.mat[14]=matrix._32;kha_krom_Graphics.mat[15]=matrix._33;Krom.setMatrix(location,kha_krom_Graphics.mat.buffer)},setMatrix3:function(location,matrix){kha_krom_Graphics.mat[0]=matrix._00;kha_krom_Graphics.mat[1]=matrix._01;kha_krom_Graphics.mat[2]=matrix._02;kha_krom_Graphics.mat[3]=matrix._10;kha_krom_Graphics.mat[4]=matrix._11;kha_krom_Graphics.mat[5]=matrix._12;kha_krom_Graphics.mat[6]=matrix._20;kha_krom_Graphics.mat[7]=matrix._21;kha_krom_Graphics.mat[8]=matrix._22;Krom.setMatrix3(location,kha_krom_Graphics.mat.buffer)},drawIndexedVertices:function(start,count){if(count==null){count=-1}if(start==null){start=0}Krom.drawIndexedVertices(start,count)},drawIndexedVerticesInstanced:function(instanceCount,start,count){if(count==null){count=-1}if(start==null){start=0}Krom.drawIndexedVerticesInstanced(instanceCount,start,count)},scissor:function(x,y,width,height){Krom.scissor(x,y,width,height)},disableScissor:function(){Krom.disableScissor()},__class__:kha_krom_Graphics};var kha_krom_Sound=function(bytes){kha_Sound.call(this);this.sampleRate=44100;var count=bytes.length/4|0;var this1=new Float32Array(count);this.uncompressedData=this1;var _g=0;var _g1=count;while(_g<_g1){var i=_g++;this.uncompressedData[i]=bytes.getFloat(i*4)}this.compressedData=null};$hxClasses["kha.krom.Sound"]=kha_krom_Sound;kha_krom_Sound.__name__=true;kha_krom_Sound.__super__=kha_Sound;kha_krom_Sound.prototype=$extend(kha_Sound.prototype,{uncompress:function(done){done()},__class__:kha_krom_Sound});var kha_math_FastVector3=function(x,y,z){if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z};$hxClasses["kha.math.FastVector3"]=kha_math_FastVector3;kha_math_FastVector3.__name__=true;kha_math_FastVector3.prototype={__class__:kha_math_FastVector3};var kha_netsync_ControllerBuilder=function(){};$hxClasses["kha.netsync.ControllerBuilder"]=kha_netsync_ControllerBuilder;kha_netsync_ControllerBuilder.__name__=true;var kha_netsync_Session=function(){};$hxClasses["kha.netsync.Session"]=kha_netsync_Session;kha_netsync_Session.__name__=true;kha_netsync_Session.the=function(){return kha_netsync_Session.instance};function $bind(o,m){if(m==null)return null;if(m.__id__==null)m.__id__=$global.$haxeUID++;var f;if(o.hx__closures__==null)o.hx__closures__={};else f=o.hx__closures__[m.__id__];if(f==null){f=m.bind(o);o.hx__closures__[m.__id__]=f}return f}$global.$haxeUID|=0;if(typeof performance!="undefined"?typeof performance.now=="function":false){HxOverrides.now=performance.now.bind(performance)}$hxClasses["Math"]=Math;if(String.fromCodePoint==null)String.fromCodePoint=function(c){return c<65536?String.fromCharCode(c):String.fromCharCode((c>>10)+55232)+String.fromCharCode((c&1023)+56320)};String.prototype.__class__=$hxClasses["String"]=String;String.__name__=true;$hxClasses["Array"]=Array;Array.__name__=true;Date.prototype.__class__=$hxClasses["Date"]=Date;Date.__name__="Date";var Int={};var Dynamic={};var Float=Number;var Bool=Boolean;var Class={};var Enum={};haxe_ds_ObjectMap.count=0;js_Boot.__toStr={}.toString;arm_SimpleRotateObject.__meta__={fields:{speed:{prop:null}}};armory_renderpath_HosekWilkieData.datasetRGB1=[-1.099459,-.1335146,-4.083223,5.919603,-.1104166,1.600158,-1326538e-12,4.917807,.5127716,-1.169858,-.1832793,.9694744,.09495762,-.04738918,.2194171,.1095749,3.603604,.3815119,-.9665225,-.1403888,5.194457,-1.107607,-.8135181,4.969661,-.2300508,-2.48935,1.279158,-1.292508,-.1299552,-2.071404,-.04752482,1.215598,-1.904179,.3027985,8.707768,.06332446,-.9264666,-.169678,4.57407,-.4232936,-7.575833,5.079755,-.2576343,-4.506805,.6908129,-1.139072,-.1796056,1.923311,6.788529,-2.364389,-1.064041,.171701,1.534681,.501581,-1.107257,-.1384411,-4.285744,5.713157,-.1015992,1.372638,.06555893,5.127514,.6550471,-1.187337,-.1969013,.8551048,.05289708,-.07626406,.01733153,.1779454,3.801038,.4742709,-.9685321,-.1553308,4.732492,-1.178935,-.7852791,4.604492,-.2666518,-2.367663,1.177527,-1.252817,-.05129949,-2.800433,-.01295992,1.308964,-2.204331,.7276011,8.699265,.1188388,-.9459509,-.2322133,4.375041,-.1712018,-7.451681,5.078019,-.4223538,-4.595561,1.074719,-1.125092,-.179675,1.626399,6.989743,-2.406382,-.9060383,.2961611,1.337715,.543814,-1.135338,-.171616,-1.499253,2.373491,-.1654023,.9566404,.1113453,4.528473,.6579439,-1.13278,-.1456214,-1.736672,1.756589,-.1087003,.3757927,.252507,7.178513,.5003814,-1.167176,-.2927225,5.727667,-3.139244,-.6425204,2.822634,-.1457812,-6.78708,1.017072,-1.042529,.04110823,-4.000629,4.362364,1.09054,-1.338674,.8246964,10.95249,.2912211,-1.061598,-.2096143,3.803155,-7.977069,-3.63788,3.707671,-.1903128,-3.397953,.99715,-1.07356,-.2077964,1.492052,16.26322,-5.015304,-.4059889,.2659782,.639538,.5634436,-1.172794,-.2111186,-1.360013,1.60408,-.08473723,.7217312,.154803,4.25701,.6328974,-1.238374,-.2670827,.3247678,.5466311,-.7425952,.527644,.02678026,5.484169,.6814734,-1.176923,-.2574586,2.304045,-2.797678,1.464405,1.998552,.2550559,-4.199772,.7544892,-1.003284,.01943984,-2.145066,10.30924,-15.25413,-2.02301,.5448699,8.159497,.5539148,-1.060017,-.2037206,2.483018,-4.595459,6.526991,4.031804,.1206513,-2.586527,.7875752,-1.081141,-.2123302,1.092275,2.683841,-4.166938,-1.396582,.4371205,1.030233,.6664862,-1.222392,-.2651924,-.4625037,.3521964,.02148855,.5078494,.179159,3.852516,.5998216,-1.42461,-.4710155,-.1826815,1.786277,-1.952442,.5277612,-.01773629,2.415874,.6701272,-1.130655,-.1358609,.9171203,-4.660394,6.251162,1.904529,.2639668,1.85613,.822844,-.9739015,-.06674749,-.4768897,12.48589,-19.94688,-2.353043,.5885575,1.287251,.4830135,-1.082178,-.1974495,1.050245,-4.792855,8.663406,3.246969,.1556731,.8117442,.8050376,-1.063354,-.1727108,.9681592,2.736077,-4.969269,-.836057,.5994612,1.024039,.6786935,-1.261936,-.3053676,-.4262222,.4000196,-.02059388,.4721802,.1480028,3.505343,.6121337,-1.681088,-.6971919,-.1105652,.7437426,-.6594399,.2254221,.08710195,1.263913,.5681865,-.9453001,.03460388,.6067038,-1.985128,3.457236,2.655483,-.01162354,3.304716,1.00195,-1.086609,-.2029011,-.639917,6.926885,-15.12189,-3.793051,.945612,.2222222,.2893725,-1.041259,-.138879,1.147331,6.282086,3.679836,4.398314,-.1355232,1.031134,.9273509,-1.063473,-.1916051,.6556979,-.003371891,-3.699664,-1.926783,.7371154,1.179975,.6367068,-1.33639,-.3778927,-.7259477,.2270247,.4627513,.1366459,.2637347,3.292059,.4998211,-2.119878,-1.055472,.5422052,.7826648,-1.286065,.9517905,-.1432358,-.2379816,.5910513,-.7761432,.2124336,-.6845184,-.9812342,4.347257,.967198,.377315,5.789529,.9646598,-1.118734,-.3513815,.5500918,.9449627,-12.6207,-1.82528,.473126,-3.326892,.3568768,-1.026437,-.08257946,.3221701,11.98372,1.55513,2.560304,.1406465,2.912858,.8643181,-1.069949,-.2029607,.5825042,-.002398595,-3.278335,-1.349882,.7208433,.8505164,.6625391,-1.392309,-.4454945,-.5664,.6283393,-.3761727,.6949802,.07748178,3.192797,.5968661,-2.713405,-1.395112,.202923,.1877272,-.3715859,-.1652929,.2385861,-.4150768,.1375467,-.9588644,.024339,-1.527493,-.9632874,5.496269,1.094931,.2004044,6.084554,1.369604,-.8028546,-.2473563,1.617898,2.073591,-11.49446,-.8394131,.2726847,-4.634538,.1367293,-1.198326,-.1804865,-.3565414,4.0732,1.662086,1.23977,.3367978,2.997402,.9360383,-1.013531,-.185906,.5799857,13.31883,-4.346873,-1.11382,.5275714,.8045177,.6496373,-1.530103,-.6107468,-.3841771,1.881508,-1.464807,.665469,-5950797e-12,2.738912,.8101012,-2.415469,-1.057499,-.4161968,-2.357548,.6300296,.6224915,.01545048,2.038561,-.1339415,-3.096796,-1.465688,-1.199232,4.567061,3.26098,-.9794907,.8950491,2.049235,1.331015,.2713904,.2852852,1.20209,-8.206784,-5.805762,1.804431,-.6090648,-1.990902,.3288858,-1.45658,-.345596,-.06409257,16.67697,-2.311094,-.9771104,.6759863,1.245136,.7911932,-.9860389,-.2099564,.294665,-.0035478,-2.268313,-.06205647,.4705185,.8657995,.6856284,-1.971736,-.9414047,-.3400557,1.468763,-1.474284,.5501062,-110975e-10,2.35637,.9001702,-1.589845,-.7797079,-.558224,-.8137376,.5846617,.1129459,-.02658005,2.707248,-.2112486,-6.940173,-2.823963,-1.620848,1.090696,2.39173,1.370047,.5890462,1.7284,1.331253,1.293144,-.001919778,1.644206,-.8666967,-7.161953,-1.385018,-.1505374,-1.388643,.2530122,-1.48888,-.2495496,-.2377137,11.67714,-.8617124,1.053828,.1992744,.3633564,.8553304,-1.060891,-.4035829,.2823207,-.002369798,-1.876577,-.5950265,.4241017,.3140802,.6631669,-1.101204,-.1351353,-4.030882,6.096353,-.1148599,1.606507,-1555474e-12,4.436084,.5973715,-1.154597,-.1923378,.8512132,.2934895,-.06522777,.1389077,.09091469,3.133307,.2108541,-1.031588,-.1546804,5.266214,-.949139,-.7184867,4.875626,-.1911907,-2.865642,1.087895,-1.159454,-.09546699,-1.508146,-.02031411,1.040653,-2.333508,.2540592,8.594981,.0931677,-1.03594,-.2021151,4.719343,-.9019318,-7.858046,3.901234,-.2233137,-4.344739,.6550733,-1.096669,-.1558196,2.057553,6.274495,-2.678352,-1.814927,.1550676,1.903276,.4998989,-1.114209,-.1473531,-7.602914,8.973685,-.04980074,1.289198,.08366906,4.557987,.6118757,-1.149397,-.1981628,4.914096,-3.498986,-.0625709,.1667401,.104898,2.284689,.5935965,-1.056121,-.1456172,.4272656,2.912649,-.5501745,4.406542,-.138768,1.245555,.9733011,-1.125047,-.04003662,1.058457,-3.462236,.4395278,-2.395805,.5177589,4.866247,.4253189,-1.051444,-.2804541,3.364668,3.293787,-10.15741,3.807407,-.3592377,-3.367415,.7900825,-1.093847,-.1436965,2.38478,5.78707,-2.445987,-1.311171,.2326563,1.158439,.5555416,-1.134824,-.1680468,-3.32562,4.458596,-.1135063,1.1045,.07794544,4.609952,.6854854,-1.143017,-.1565926,.3014687,-.1763027,-.03557925,-.2342406,.2528705,5.884085,.4750602,-1.136801,-.2907502,3.682423,-.4061202,-.8728159,4.00151,-.1522202,-5.528713,1.044847,-1.063652,.07808107,-1.983678,.3648078,2.102276,-3.06505,.8431951,10.3883,.2662834,-1.061015,-.2859814,4.223615,-2.290138,-8.31401,4.405718,-.4613627,-4.50291,1.008383,-1.106302,-.1697123,2.087196,8.238929,-2.992416,-1.821776,.3434859,.7755179,.534119,-1.17111,-.2106304,-1.614361,2.378103,-.1625969,.8504483,.1059312,4.046256,.6618227,-1.20048,-.2235733,1.01439,-1.174074,-.444018,.2262406,.1665868,5.461829,.567631,-1.223587,-.3502622,1.699106,.6724266,1.268567,2.135102,.0008039374,-5.221111,.944569,-.9452673,.1468459,-1.335034,4.346628,-12.85652,-1.807046,.8175243,9.301065,.3656798,-1.134681,-.3310951,3.571244,-2.208948,6.04158,3.107577,-.3112127,-4.186351,.9188333,-1.083237,-.1831394,2.062654,1.385424,-5.00495,-1.332669,.3627352,.332315,.6191181,-1.211527,-.2590617,-.1660874,.3627905,-.1039258,.4697924,.1671653,3.507497,.6022506,-1.433017,-.4733592,.1724445,.9953236,-1.874457,.4432099,.0171581,2.339272,.644147,-1.08492,-.1587903,.8999585,-2.537516,5.877859,2.014554,.09689141,.3177242,.9030399,-1.008242,.00279303,-.3507469,10.283,-20.80454,-2.781026,.899509,3.366951,.3473867,-1.103151,-.2799598,2.525791,-4.255704,9.903388,3.722668,-.3603941,-1.303292,.9369454,-1.102235,-.2025061,2.08566,1.686787,-5.010957,-1.656458,.4584029,-.2751759,.6184162,-1.25613,-.3104904,.163935,.1315502,-.7297583,.477848,.1259265,3.012108,.6202728,-1.620114,-.655267,-.2877157,1.094371,.2818914,.369683,.09428521,1.450951,.5681308,-.9686204,-.03755647,1.46998,-3.103414,2.856583,1.883209,-.05746099,1.286383,1.001751,-1.089377,-.1023062,-1.498891,10.66455,-17.20184,-2.759314,1.061258,2.910211,.2624701,-1.044681,-.2156857,3.230136,-.5863862,6.09664,3.550019,-.4255773,-1.500033,.9687696,-1.133658,-.2505101,1.71784,.008480428,-5.011789,-1.740989,.498343,-.2081829,.6088641,-1.335366,-.3863319,-.5279971,.3638324,.3230699,.08339707,.2483293,2.678646,.4998346,-2.004511,-.9957121,1.250807,.01625025,-.3410754,.7858244,-.09506757,.02651876,.5788643,-.8714157,.1192051,-.8486879,-.3702497,1.818277,1.103427,.2454866,3.841575,.984735,-1.042618,-.2285793,.3620175,2.983368,-9.776844,-1.971587,.6691674,-.7901947,.32132,-1.099112,-.1869868,2.044065,2.062964,1.265668,2.71013,-.1099443,.2179353,.9024108,-1.106985,-.2396881,1.809807,8.523319,-5.011788,-1.590086,.3248449,-.1003187,.6550606,-1.421285,-.4767024,-.3885004,.827459,-.3644229,.6999513,.0519671,2.578431,.624631,-2.611217,-1.398846,.4527425,-.5932142,.2224617,-.5593581,.3389633,-.7767112,.06536004,-.9881543,.04684782,-.8616613,.8799807,4.00313,1.739543,-.08098378,5.524802,1.499673,-.7544759,-.2314808,.812577,-.7724135,-9.577645,-1.629433,.6790832,-4.193895,-.02526624,-1.273719,-.218703,1.401798,5.231832,.7405093,1.775166,-.07269476,1.996087,1.05745,-1.046864,-.2247559,1.679449,11.40057,-4.948829,-1.182664,.3241038,-.2470012,.61159,-1.514607,-.598543,-.187761,1.75693,-1.314206,.611581,-597046e-11,2.412975,.8124304,-2.308414,-1.083797,-.1179959,-1.728246,.7784742,.5494505,.006203168,.9326251,-.1419518,-3.230837,-1.43867,-.9868286,2.974393,1.949339,-.6337857,.8160271,3.278606,1.354373,.5149378,.2754789,1.040965,-4.501186,-3.399057,.9661861,-.4736173,-4.037574,.2794847,-1.62187,-.3192763,.8786242,9.785565,-2.727652,.01903691,.5521261,2.138764,.8419871,-.9951701,-.2550607,1.498952,-.002737197,-3.101832,-.5921329,.2864422,-.4405218,.663141,-1.902954,-.9056918,-.206957,1.191499,-1.092577,.5849556,-9649602e-12,2.048407,.9001527,-1.271627,-.7193923,-.01136606,-.1167951,.003286175,-.05262827,-.02473874,1.716125,-.2187133,-7.647175,-3.114129,-1.490128,-.5266488,3.06309,1.474262,.5481458,2.052174,1.353089,2.191403,.342112,1.44651,2.170943,-7.768187,-1.471207,-.1456708,-1.753574,.2310576,-1.932296,-.3814739,.6245422,6.748294,-.3060171,1.067747,.2500671,-.1252596,.8614611,-.9471101,-.405264,1.300174,-.003951536,-1.908284,-.5385721,.2133578,-.6250292,.6658012];armory_renderpath_HosekWilkieData.datasetRGBRad1=[1.962684,1.159831,4.450588,5.079633,4.437388,4.324573,1.946487,1.287515,3.703696,8.782833,3.440437,5.160333,1.88217,1.335878,2.648641,13.58368,3.105473,5.907387,1.738159,1.624289,-.008786695,21.18253,2.770255,7.055672,1.571896,2.301786,-4.028545,29.66806,1.630876,8.711031,1.475048,2.679086,-6.311315,33.77896,2.140975,9.385283,1.326174,3.378759,-9.831444,39.42061,2.852702,10.82542,1.153344,3.967771,-12.65181,41.95016,7.468239,12.2135,.9746081,4.051626,-12.98454,37.54964,17.49232,14.20619,.8448016,3.181809,-8.757338,21.97962,35.24033,16.39549,2.029623,1.364434,4.201529,5.415099,9.825839,10.63328,2.023126,1.494728,3.420413,9.072178,9.205157,11.86639,1.956307,1.648665,2.039712,14.30239,9.039526,13.30453,1.825053,1.985022,-.8036307,22.02493,9.415361,15.17659,1.650367,2.593201,-4.469328,29.69817,9.410977,17.4485,1.555202,2.962925,-6.60817,33.29887,10.64559,18.50816,1.412478,3.439403,-9.196616,36.85077,13.45341,20.03128,1.25299,3.820805,-11.15338,37.21593,20.14916,21.8232,1.091952,3.663027,-10.3133,29.78985,32.96835,23.7545,.9501691,2.664579,-5.545167,12.81159,51.54768,25.74284];armory_renderpath_HosekWilkieData.datasetRGB2=[-1.14053,-.1982747,-7.51273,8.403899,-.05699038,.9015907,.03392161,4.772522,.5111184,-1.165117,-.1852955,2.963684,-2.262274,-.1571683,.6339974,.04977879,7.243307,.4220053,-1.169936,-.3357429,1.911291,-.2391074,-.4791643,1.446113,-.09178108,-4.700239,.8096219,-1.060246,-.1051633,.5013829,2.832309,-.3707855,1.523131,.09163749,5.604183,.7208566,-1.089753,-.2382167,2.360312,-5.902562,-8.799894,1.377692,-.06131633,-1.415472,.6124057,-1.075481,-.1242391,1.425781,8.810319,-2.922646,1.48652,.0327058,3.889783,.4999482,-1.149342,-.2076337,-7.446587,8.014559,-.04866227,.8203043,.06386483,4.894198,.5452051,-1.120531,-.1513311,2.735504,-2.417591,-.1361114,.4296342,.09427488,8.171403,.4102448,-1.226964,-.3516378,1.308298,-.05097487,-.4846783,1.654619,-.113494,-3.347854,1.131147,-.9664377,.02767589,.1658235,2.407439,-.1300304,.9170958,.2742895,6.642633,.2550064,-1.153358,-.3126223,2.078934,-5.857733,-8.659848,1.758505,-.09616094,-1.230863,.9663832,-1.05385,-.1330743,1.481738,10.49485,-3.528854,.9142363,.124488,2.644615,.5001048,-1.173687,-.2360362,-3.741454,4.088507,-.07528205,.6645237,.07718265,4.65122,.5586318,-1.213757,-.2589561,.7132551,-.4259327,-.1980821,.3627815,.0466656,5.807984,.5847377,-1.108794,-.225987,1.574179,-.3753731,-.5984743,1.659414,-.01681021,.6785219,.8647325,-1.060896,-.0134669,-.7529656,1.711319,-.9792435,.2022433,.3826487,5.725157,.5290714,-1.085145,-.2840715,2.088029,-4.935097,-9.056542,1.976149,-.03912485,-.8636064,.7452125,-1.077983,-.1416633,1.100848,10.15875,-2.943712,.5255135,.2164224,2.941143,.6699937,-1.223293,-.2867444,-1.624136,1.668299,-.09537589,.5015947,.1130741,4.244812,.5082152,-1.325342,-.4280991,.470549,.06926592,-.4572587,.5344144,-.02554192,3.093939,.6639401,-1.113581,-.1192133,.4011536,.7011889,.2052842,.9880724,.01807533,4.69016,.857624,-1.016063,-.1038138,-.2280391,.7898918,-11.27333,.2074545,.5388182,1.364263,.4660455,-1.099582,-.2228607,1.332648,5.135188,1.653152,1.41702,-.1087532,1.809275,.8080874,-1.064357,-.1520775,.8207368,-.001323565,-5.009523,.3946298,.4337902,2.593198,.6719172,-1.278702,-.3512866,-.4511055,.389576,-.2429672,.4270577,.1135348,3.71913,.4998867,-1.580069,-.7095475,-.3198904,1.715748,-1.185915,.4523161,-.01026159,.7927188,.553835,-.9474023,.1173703,.4881381,-2.618684,3.251661,1.213931,-.01736274,8.000768,1.025998,-1.129091,-.3287694,-.3524077,3.352892,-14.16073,-.8485617,.6560766,-2.820937,.3111303,-1.030884,-.1137581,1.109855,8.082276,1.519214,2.112433,-.1592299,3.675905,.8703367,-1.075192,-.1627166,.351491,1.168164,-4.255822,-.6015348,.6265776,2.884818,.6548384,-1.316017,-.3889652,-.5030854,.4488704,-.31868,.4570763,.08909201,3.659274,.5011746,-1.731876,-.8493806,.1194871,2.002781,-2.006547,.4872233,-.02854606,.2662137,.4611629,-.927368,.1380954,-.3302179,-3.553265,4.633345,.9696729,.08799775,8.291129,1.094451,-1.099377,-.3325392,.2501063,2.613712,-13.28142,-.5579527,.4992081,-3.504402,.3022924,-1.04842,-.1227773,.5845373,11.05869,.03813151,1.330409,.01978131,3.95943,.8396439,-1.063233,-.1560639,.2840033,.8751565,-3.41182,-.1436564,.584658,2.899292,.6799095,-1.376715,-.4541567,-1.445491,1.569898,-.1390627,.555827,.04109877,3.349451,.5516123,-1.953391,-1.035869,1.690563,-.196469,-.7787096,.5799605,.02945626,.04217906,.2451373,-1.012422,.07136451,-1.862534,-.7228653,.1947997,.2091805,.06399233,7.928994,1.290733,-.9706708,-.288095,1.107797,-2.731734,-8.445995,.4296774,.5117648,-3.824277,.1761207,-1.110611,-.1789409,.2108488,20.7143,-1.763174,.09554695,-.02943103,3.422079,.8815496,-1.048334,-.1614087,.2475184,.02146938,-2.983901,.2538224,.560137,2.461925,.6777394,-1.393719,-.5002724,-2.40894,2.680983,-.1362825,.7395067,-3300343e-12,3.260889,.8132057,-2.128663,-1.151182,2.923026,-1.931838,-.442617,.2309983,-.00548589,.3279529,-.2229467,-1.618022,-.376649,-3.163544,1.611608,-.3967476,.393368,.3006742,6.835177,1.613765,-.5669064,-.1481749,2.071817,-8.157422,-5.988088,.2387202,.1447191,-4.296385,.05011258,-1.241724,-.2519348,-.1908609,29.52235,-3.33366,-.01837651,.1022249,2.92932,.8867262,-1.02167,-.1667327,.1789771,-.002178108,-2.641572,-.05641484,.5303758,2.138196,.678035,-1.669332,-.7588708,-2.993557,3.17876,-.08066442,.6544672,-808988e-11,2.628924,.9001272,-1.755806,-.8735348,3.258881,-2.504785,-.3300791,.1180565,-.009315982,1.785154,-.3205824,-3.720277,-1.73335,-3.332272,1.515869,.1734218,.8011956,.199544,3.817666,1.638502,.4724641,.3209828,2.051443,-5.105574,-6.509139,-.4232041,.2598931,-2.151756,-.00349391,-1.5256,-.4897606,-.09891121,23.46818,-2.278152,.1681219,-.04469389,1.051,.9294666,-.9908649,-.2008182,.1605143,-.002463113,-2.477349,-.1218647,.4750121,1.460813,.6661364,-2.122119,-1.125475,-3.066599,3.145078,-.05411593,.5133628,-7823408e-12,2.268448,.9001416,-1.528158,-.9370249,2.567559,-1.591439,-.363446,.1763256,.001119624,1.811848,-.2637929,-6.524387,-2.673507,-2.940472,-.6025609,.7852067,1.073499,-.03540435,3.517416,1.490466,.8886026,-.09681828,1.430554,4.993717,-6.071355,-.6053986,.5092997,-1.27301,.07491329,-1.481997,-.5897282,.2659264,1.267239,-.5741291,.05983011,-.2217312,-.3016452,.926083,-1.010943,-.2075134,.05066749,14.70708,-3.780501,.07253223,.4045458,1.320164,.6559925,-1.129907,-.1884011,-8.04767,9.035776,-.05539419,.8823349,.03197135,4.839388,.5042822,-1.133821,-.1510781,3.362822,-2.453381,-.1463925,.4728708,.0595814,7.6363,.4805162,-1.176518,-.3549902,1.729044,-.2160966,-.5075865,1.675584,-.08906902,-5.386842,.5452218,-1.043563,-.07520975,.8750644,2.510518,.007584882,.936125,.07889083,6.066644,.5813108,-1.081304,-.2222253,2.517638,-4.45382,-8.663691,.8662558,-.04802657,-.8965449,.4886656,-1.083774,-.1375469,1.685818,5.63112,-3.100752,.4045941,.02346895,3.390321,.5008309,-1.143158,-.2058334,-9.660198,10.62394,-.04434119,.8607615,.03177325,4.416481,.5918162,-1.146773,-.1727385,4.626048,-4.684602,-.08307137,.1619616,.1484866,7.572868,.2681126,-1.151324,-.3099303,.4125596,2.340752,-.4214444,1.987375,-.191341,-3.845978,1.337311,-1.034258,-.007778759,.7050094,-.8036369,.313857,.2469452,.355997,7.485917,.04790329,-1.096568,-.2673169,2.575654,-.8057121,-8.884928,1.41617,-.2091315,-1.543494,1.065445,-1.083304,-.1528265,1.697727,2.503702,-2.885296,-.12985,.154887,2.479652,.5066496,-1.165736,-.2329945,-5.967964,6.705959,-.05931355,.7485638,.03913878,4.221591,.6183926,-1.212422,-.254591,2.418626,-2.266104,-.1102014,.01363887,.1055411,5.648062,.4557412,-1.070436,-.2163341,.7098718,.7843075,-.432393,2.109823,-.095897,-.1985193,1.060428,-1.104879,-.03013622,.02976276,1.069707,.141,-.488002,.4452288,6.41859,.3195986,-1.048969,-.2655317,2.689426,-3.941038,-9.506461,1.837119,-.1892124,-1.562146,.9043414,-1.106145,-.1601642,1.544544,7.388492,-2.9246,-.4328453,.1763161,2.523111,.5851902,-1.203666,-.2776587,-2.084286,2.45084,-.08746613,.5258507,.07983316,3.860055,.5486167,-1.340448,-.423059,.3462849,.4707607,-.2512626,.1530746,.02724218,3.035216,.5876133,-1.014554,-.116879,.9477794,-1.061218,-.419673,2.058832,-.05989624,3.058168,.9763861,-1.137388,-.0985403,-.2984893,3.64782,-.6585571,-1.47918,.6102932,3.265914,.3480333,-1.021816,-.2344957,2.463671,-7.240685,-8.862697,2.514058,-.2122768,-.03313968,.9028136,-1.126581,-.1874347,1.454154,10.34398,-3.237393,-.8654927,.2457248,1.845769,.6002482,-1.263727,-.3439354,-.1786388,.3980166,-.3349517,.3825166,.1029225,3.331096,.4998955,-1.53001,-.6879698,.2380415,1.608216,-1.682679,.354636,-.00391522,.4517655,.5128605,-.9685659,.09480403,.06076844,-3.217561,4.568074,1.069299,.02083638,7.301088,1.072165,-1.113925,-.3112382,.3954133,5.105907,-14.56866,-.4917378,.5289909,-2.678374,.3014709,-1.046864,-.1215754,1.778308,4.661489,.2565583,1.35368,-.1175767,3.415972,.8457746,-1.10448,-.1940913,1.343668,-.001759206,-5.009204,-.4186951,.312571,1.628183,.6720408,-1.286902,-.3781238,-.08977253,.3545393,-.4866515,.3843664,.08281675,3.122231,.5046991,-1.712597,-.8549112,.4809286,1.515398,-2.212211,.2539029,.02335997,-.06089466,.4268444,-.8807283,.1646097,-.4437898,-3.188247,5.984417,1.334779,-.04026975,7.546431,1.175751,-1.147253,-.3538199,.6101836,4.43778,-15.59813,-1.103222,.6242039,-3.091472,.217429,-1.03823,-.1213475,1.547505,5.893176,1.368738,1.663127,-.137713,3.185279,.8736453,-1.101026,-.1874907,1.272667,3.596524,-5.007243,-.6352483,.3048985,1.931613,.6788844,-1.342753,-.4384971,-1.213491,1.621399,-.1551441,.5614218,.02591739,2.958967,.5782132,-1.937684,-1.066019,1.913336,-.7347719,-.5916167,.158759,.1092568,-.6275002,.1599071,-.9302391,.1486187,-1.603835,.1783713,1.100461,1.174181,-.1602361,7.868331,1.468971,-1.053631,-.372705,1.114117,-.9603286,-10.62469,-1.16214,.7952797,-4.478765,-.04440862,-1.083629,-.1261405,1.229344,11.27825,.131901,1.624729,-.2825898,3.661082,1.036911,-1.09395,-.2067455,1.258035,7.548645,-4.598387,-.8944932,.3292634,1.311304,.6291871,-1.385867,-.5068139,-1.48649,1.969049,-.1698025,.6629167,-5289365e-12,2.760315,.8644368,-2.107367,-1.175639,2.313241,-1.001653,-.4843139,.1124485,3901494e-11,-.3502469,-.320478,-1.475244,-.2833055,-2.085824,1.192563,-.76452,.8380081,.220358,7.157885,1.753702,-.6644372,-.2549735,1.600273,-8.589034,-6.144718,-.7599731,.289837,-5.770923,-.09656242,-1.211687,-.1653494,.83934,27.92988,-3.395461,.9933752,-.03976877,3.776659,.9546526,-1.063757,-.2037563,1.117207,-.001252806,-3.33233,-.6971409,.3388719,1.311398,.6635171,-1.678889,-.7992295,-2.421687,2.871029,-.07662842,.6046208,-7598099e-12,2.002314,.9001307,-1.692144,-.880425,3.060895,-2.000009,-.3183563,.08385862,-.006326713,1.206639,-.3369967,-3.676795,-1.719207,-2.534697,1.005285,.1550407,1.07291,.1318094,3.717018,1.689191,.5424542,.3263528,1.551055,-3.841058,-6.598996,-1.201779,.3530669,-2.542945,-.06482523,-1.553849,-.457686,.9324676,19.50982,-2.344516,1.12102,-.1221537,.7285496,.9582816,-1.02065,-.2215797,1.009774,-.002056855,-2.740338,-.8122355,.3328967,.8982766,.6594676,-2.24736,-1.221267,-3.072346,3.385139,-.04387559,.5084887,-7418833e-12,1.750107,.9001401,-1.248499,-.8442718,3.062611,-2.020314,-.2815341,.05254745,.003345008,1.433225,-.2835911,-7.004119,-2.927978,-2.649852,.7971894,.5466893,1.442667,-.06063912,2.806194,1.547429,1.434882,.09114639,1.170089,.03512808,-5.861915,-1.411843,.5400486,-.7746522,.02386984,-1.559053,-.5502302,1.200396,13.47741,-2.344397,.8868907,-.3292661,-1.362105,.9217826,-1.044436,-.2360719,.7054471,-.002904518,-2.092829,-.5119668,.4174861,.9687435,.6588427];armory_renderpath_HosekWilkieData.datasetRGBRad2=[1.59033,1.355401,1.151412,13.59116,5.857714,8.090833,1.55254,1.51004,.1276413,16.04643,5.912162,8.350009,1.470871,1.880464,-1.865398,20.30808,5.471461,9.109834,1.356563,2.373866,-4.653245,25.70922,5.686009,10.0948,1.244232,2.851519,-7.130942,29.93449,6.38212,11.14578,1.173693,3.120604,-8.491886,31.87393,7.290615,11.80066,1.091845,3.368888,-9.722083,32.68508,10.32424,12.36508,.9858985,3.500541,-10.26328,30.92956,16.10881,13.31222,.8864993,3.172888,-8.68755,23.62161,26.21851,14.74967,.7946973,2.189355,-4.207953,9.399091,40.62849,16.81753,1.711696,1.657311,.9328021,13.1788,15.06751,18.63556,1.666968,1.849993,-.2088601,15.86653,14.8688,19.40719,1.584846,2.170022,-2.019597,19.70826,14.90684,20.45055,1.469412,2.524017,-4.197267,23.65249,16.64588,21.34477,1.369714,2.843548,-6.059031,26.34993,18.81361,22.32186,1.310477,2.984444,-6.831686,26.8234,21.23267,22.59755,1.222552,3.176523,-7.731496,26.7176,24.84358,23.36863,1.115781,3.130635,-7.581744,23.36531,31.71048,24.13859,1.013181,2.699342,-5.602709,15.00158,42.17613,25.15957,.8976323,1.726948,-1.29612,1.183675,55.03215,26.43066];armory_renderpath_HosekWilkieData.datasetRGB3=[-1.372629,-.4905585,-41.00789,41.22169,-.00738936,.4839359,.006474757,3.471755,.5092936,-1.523025,-.6497084,6.249857,-5.662543,-.01908402,.551281,-2181049e-11,2.507663,.4339598,-1.035567,-.0747874,.922103,-2.140047,-.02374146,.3795517,-.01769134,7.479831,.7729303,-1.271086,-.558819,.6908023,2.096832,-.2453967,1.410648,.04475036,-4.719115,.5741186,-.9712598,-.07033926,.9167274,-.9502097,.3004684,.4547054,-.05929017,5.266196,.7204135,-1.087457,-.1888896,.8156686,.3101712,-2.155419,1.422205,.09692261,3.122404,.499943,-1.42528,-.5413508,-34.54883,34.81142,-.008686975,.4914268,-2479243e-12,3.239879,.6094201,-1.688557,-.8070865,7.018459,-6.244574,-.02149341,.3993971,.01252502,1.630662,.109786,-.8664152,.07869125,-.5236535,-1.21896,-.02059093,.6684898,-.05584112,8.602299,1.410496,-1.319763,-.5985323,1.253918,1.914706,-.3216739,.9011213,.1324845,-5.252749,.06231252,-.9706008,-.05914059,.569315,-1.175362,.5221644,.7518213,-.08247655,5.875635,.9850863,-1.08533,-.1956105,.8019605,.5338101,-3.423464,1.110444,.1507923,2.864942,.4999481,-1.431967,-.5478935,-32.86288,33.05288,-.008380797,.477205,-3044274e-12,3.289973,.5976303,-1.801361,-.9315889,5.391756,-4.588592,-.02040076,.4144684,.01814534,1.051795,.1145651,-.7905357,.1451332,-.1605661,-1.592174,.0004561348,.3380323,-.07770275,8.775384,1.489512,-1.308575,-.5539232,.9184133,2.011479,-.3842472,1.432274,.1637153,-4.408856,.05272957,-.9829872,-.08183048,.4464556,-1.442716,1.029641,-.06991617,.008702356,5.706417,.9116452,-1.08713,-.2038013,.7260801,.9164376,-5.006183,1.511271,.1257134,2.715439,.6201652,-1.448662,-.5799075,-28.33268,28.58023,-.009134061,.4404783,-2709026e-12,3.029357,.5540071,-2.061772,-1.14519,7.918478,-7.212525,-.0202076,.2962715,.0468967,.8517209,.2334587,-.6413755,.1780425,-2.412919,1.064484,-.01949986,.6769741,-.175276,7.262714,1.325869,-1.304871,-.3975581,1.219002,.7285178,-.2710105,.7779727,.3247139,-.8818168,.1839517,-1.001104,-.1994801,.3676742,-1.409737,.2901555,.250694,.002468899,3.398923,.8584645,-1.111552,-.2487204,.7410842,1.703749,-5.007855,1.057763,.1354511,2.088715,.6600013,-1.547227,-.6679466,-18.61465,18.84045,-.0124221,.4157339,-2432805e-12,2.812423,.5446957,-2.04389,-1.149081,2.304118,-1.715757,-.02433628,.2816836,.07185458,1.06486,.2706789,-.904072,-.08274472,-.2555676,-.6326215,-.0277088,.6676024,-.2513532,5.903839,1.241452,-1.000013,-.1010774,.3699166,.8774526,-.3042007,.6951053,.4361813,.6793421,.2573892,-1.171332,-.3768188,.3701377,-1.470757,.5525942,.02991456,.01581823,2.365233,.8214514,-1.068667,-.232633,.6725059,2.243733,-4.61437,1.033677,.1376291,2.013334,.6865304,-1.592991,-.7246948,-25.98204,26.2196,-.008365176,.4207571,-2742772e-12,2.623735,.587319,-2.271349,-1.280884,6.308739,-5.75835,-.01977049,.3671835,.06698038,1.150597,.1759218,-.636862,-.007436052,-2.230026,1.640997,-.01548497,.3145331,-.2492644,5.083843,1.260215,-1.177925,-.09628114,.3051152,-.03749544,-.2713209,1.164226,.4559969,2.175429,.2874284,-1.0785,-.3801779,.4788906,-.4795969,.5977621,-.4488535,.03386874,1.538143,.8062054,-1.108028,-.2596892,.5162202,1.557081,-4.265039,1.182535,.1563762,2.095084,.6883383,-1.668427,-.7908511,-27.7969,27.99746,-.007186935,.3757766,-3326858e-12,2.563421,.5439687,-2.156175,-1.220004,3.585732,-3.235988,-.01086239,.1846143,.1046017,1.234427,.2842191,-1.117051,-.4101627,-.846373,.7671472,-.02226609,.8574943,-.3434124,4.475715,1.154824,-.744484,.2312078,-.5393724,.1574213,-.1763914,.2751692,.55642,2.217672,.3483932,-1.273036,-.5275562,.4902512,-.04498436,.4339366,.2386682,.02380879,1.413444,.7855923,-1.084192,-.2936753,.4719432,1.384436,-3.257789,.6119543,.1681884,1.650441,.6936631,-1.84849,-.951267,-30.05251,30.24315,-.005635304,.344778,-2782999e-12,2.309422,.5643559,-2.300008,-1.252335,-1.218876,1.49373,-.0061071,.0797486,.1023449,1.505934,.2360948,-1.483705,-.8547575,-.7797146,.6447971,-.02678052,1.091263,-.3344889,3.830416,1.189425,-.5348005,.3982733,-.4071573,.3265569,-.08658789,-.2370892,.5369097,1.478279,.3143303,-1.320401,-.6043247,.3019196,-.07732911,.4768381,.6745764,.03694098,1.158234,.8169056,-1.10104,-.3420019,.3775661,1.769338,-2.990515,.1649529,.1970125,1.453355,.6759757,-2.251946,-1.229349,-32.71808,32.83114,-.004252027,.3372289,-3001937e-12,2.154046,.5842674,-1.867834,-.9531252,-12.29365,12.69149,-.006844772,.1185107,.07539587,1.846381,.1899412,-3.398629,-2.180862,2.335213,-3.382823,-.008613985,.8431602,-.2393567,3.11246,1.218556,.5708381,.940603,-.6890113,2.746233,-.05772068,.1096005,.3491978,.7281453,.3212049,-1.705909,-.8517224,.113116,-2.141434,.4274043,.33976,.178649,.9026101,.78828,-1.012865,-.3495551,.3369038,3.724205,-3.089586,.1266964,.146179,1.170199,.6931052,-2.890318,-1.665573,-34.93756,35.00369,-.002984251,.2622419,-425936e-11,1.947681,.6905752,-1.956022,-1.0629,-19.19714,19.75164,-.008865396,.216554,.05475637,1.761134,.003164249,-5.612198,-3.101371,4.098034,-6.144001,.009944958,.2905472,-.170711,3.199107,1.33766,.8353756,.4855943,-1.243589,5.147385,-.07013963,.938041,.2335714,.1727744,.2802696,-1.524329,-.7388547,.3259025,-4.050634,.4058549,-.2591384,.1898299,.3556071,.7884126,-1.070371,-.4207858,.1739862,5.29341,-3.136757,.2323856,.1673706,1.007227,.6844287,-1.34172,-.4834889,-46.33447,46.82148,-.006137296,.4599216,.007047323,2.895798,.4999398,-1.529104,-.6498631,15.34103,-14.50675,-.01531439,.3280082,.01682926,1.901587,.5013227,-1.014776,-.1454495,-4.071085,2.954982,-.02630348,.5681531,-.03016505,6.773854,.5003504,-1.172413,-.402632,2.960428,.202071,-.2004947,.9375572,.05998168,-4.945934,.4502898,-.9898161,-.05772814,.4470024,-.5786656,.1158168,.346804,-.0504336,6.867947,.8012363,-1.085111,-.1882675,1.223748,.3565495,-3.688357,.5653723,.06727646,2.69013,.49994,-1.389119,-.529025,-40.55774,41.05972,-.007062577,.456006,-1736334e-12,2.775512,.6671455,-1.584641,-.7200619,12.48067,-11.56028,-.01659568,.3050029,.01099895,1.438927,-.02138015,-.9826068,-.08887254,-2.960031,1.808816,-.02478159,.6035733,-.04868441,7.347705,1.584739,-1.150423,-.4073793,2.412991,.487084,-.2337902,.8295114,.1129914,-5.150045,-.09016643,-1.016933,-.06311501,.5218937,-.571643,.1250993,.3601524,-.05497586,7.060139,1.018333,-1.073151,-.1845444,1.155394,.3004486,-3.431711,.4657031,.09401223,2.68862,.4999544,-1.391257,-.5365815,-42.55881,42.99132,-.005838466,.4229134,-2760038e-12,2.775531,.6234597,-1.780062,-.922888,13.76172,-12.60946,-.01507526,.3117435,.02205045,.6093731,.03463446,-.7388169,.127567,-3.999528,2.223993,-.01856853,.543931,-.08834054,8.037139,1.645951,-1.322387,-.5320143,2.659359,1.086712,-.2129712,.8704649,.1800315,-4.967241,-.138372,-.9378288,-.01599895,.3607555,-1.980561,.3791456,.1212268,-.02845992,6.825542,1.059139,-1.100832,-.2172313,1.211561,2.002721,-5.010011,.5717583,.06777702,2.160006,.5676392,-1.409373,-.5708751,-30.34974,30.79809,-.007280715,.3723304,-2436279e-12,2.577348,.5913377,-1.954312,-1.11651,5.399148,-4.299553,-.01724739,.3742824,.04187077,.1044883,.1232727,-.6772215,.2001396,-.3670523,-1.014628,-.003497152,.4099858,-.1584633,7.7504,1.514559,-1.2916,-.4977437,.9641914,1.56242,-.3227782,.9055427,.3046444,-3.385619,.009546291,-.9750857,-.0877056,.9054256,-1.429236,.8974777,-.1217961,-.05194608,4.909409,.9589153,-1.088007,-.1959301,.9745799,1.260761,-5.008864,.7271248,.1096661,2.717295,.6340731,-1.45605,-.6223072,-22.28088,22.69604,-.009340812,.4118308,-2418083e-12,2.442117,.5589638,-2.176449,-1.302416,2.222836,-1.22273,-.01728051,.1323513,.07027731,.04835745,.2093351,-.5789641,.2215407,.2142291,-1.201725,-.01185728,.8122982,-.238042,6.706841,1.404146,-1.307463,-.4515174,.6447827,1.223841,-.2902391,.4986588,.4073652,-1.706696,.1060885,-.9698678,-.1307094,.9389347,-1.522852,.7768797,-.1368595,-.03857426,3.676935,.8980966,-1.104349,-.2380323,1.047043,1.865421,-5.011664,.7014954,.09622701,1.89136,.6687354,-1.502249,-.6724523,-28.88092,29.3036,-.006685766,.3685464,-2469442e-12,2.310797,.5566754,-2.217125,-1.364924,4.048243,-3.111333,-.01317747,.1921948,.08627702,.001981769,.2213689,-.6215757,.1687995,-.5949131,-.1551293,.0003356129,.6897657,-.2855053,6.271042,1.363084,-1.216317,-.3489429,.7566226,.5409809,-.2830843,.6191825,.4755163,-.9131387,.1383909,-1.030437,-.2034064,.8335995,-1.050947,.8689093,-.367231,-.04056183,3.111269,.8856842,-1.078984,-.2070549,.9683145,1.497022,-5.007653,.7702541,.1285822,2.225188,.6587911,-1.559291,-.7374039,-35.96311,36.3447,-.004667132,.3277964,-2487945e-12,2.215652,.5764681,-2.356929,-1.444755,6.244526,-5.540162,-.00879451,.17921,.09578517,.3737676,.1922194,-.6589752,-.0292691,-1.831779,1.869962,-.002030095,.7552089,-.3168157,4.632196,1.294054,-1.161046,-.1472506,.6494138,-.8327174,-.2320724,.3391212,.5269637,.9376341,.2458573,-1.034427,-.3062504,.8975634,.3203531,.8565142,-.1250162,-.04094017,1.861304,.8223468,-1.109954,-.2740277,1.063811,.7077398,-4.695734,.5621696,.1248956,1.297723,.678972,-1.788293,-.9368751,-43.8298,44.24963,-.00365253,.3094331,-2810503e-12,1.904402,.5861599,-2.268206,-1.312676,2.863082,-2.373727,-.00514498,.1711072,.09316041,.9309598,.1791683,-1.376966,-.7418582,-1.349589,1.563419,-.003124219,.6967139,-.3061887,3.602731,1.255669,-.601754,.2815928,.5424052,-.688545,-.1620001,.2980046,.4995571,.7371203,.2812466,-1.278853,-.5245326,.787052,.3125067,.7748105,-.07788581,.003490956,1.283748,.813019,-1.05093,-.2786331,1.056344,1.053002,-4.047789,.4432174,.1169077,.9532621,.6806764,-2.084927,-1.203954,-48.81638,49.2016,-.002896045,.2882977,-3073517e-12,1.702211,.637418,-2.328567,-1.238023,-1.891019,2.45152,-.005847581,.2084702,.0784813,1.211048,.08095008,-2.634632,-1.78946,-.1370558,-.3326435,.002783737,.5239451,-.2548881,2.896327,1.324116,.06882616,.5997821,.1535398,1.375209,-.1267285,.4239743,.4013122,.1794675,.2395382,-1.430918,-.6439041,.832598,-1.705612,.7236426,-.05567593,.06408718,.6836524,.8388887,-1.037956,-.3215402,.9457349,3.178114,-4.152156,.2230992,.1156198,.7606223,.6656923,-2.967314,-1.728778,-37.30988,37.55578,-.002588835,.2927966,-3935038e-12,1.592161,.6868694,-2.123311,-1.175148,-13.14988,13.86882,-.007828537,.1852026,.05481038,1.294309,.02428177,-5.443597,-3.156344,2.110838,-3.421556,.0118189,.1196951,-.1742902,2.404353,1.272805,1.029898,.5912521,-.3983531,3.286069,-.09252065,1.331381,.2560642,.8001754,.3624178,-1.547574,-.7881604,1.020902,-2.897069,.521347,-.9242315,.1185594,-1.150721,.7317211,-.9621043,-.1991406,.6531287,3.925839,-3.596904,.6317332,.1531334,1.457846,.6966285];armory_renderpath_HosekWilkieData.datasetRGBRad3=[.9926518,1.999494,-4.136109,18.5627,13.51028,13.90238,.9634366,2.119694,-4.614523,19.19701,13.76644,14.18731,.9446537,2.17161,-4.915556,19.1824,15.37135,14.0053,.9073074,2.330536,-5.577596,19.61615,16.88365,14.46955,.8739124,2.388682,-5.842995,19.23265,18.87735,14.85698,.8563688,2.391534,-5.769133,18.28709,20.97209,14.69587,.8270533,2.34279,-5.558071,16.84993,23.56498,15.05975,.7908339,2.190341,-4.852571,13.74862,28.06846,15.48444,.7403619,1.783998,-2.983854,7.622563,35.0761,16.15805,.6840111,1.154457,-.239383,-.7896893,42.82765,17.79469,1.1683,1.860993,-2.129074,12.51952,30.32499,29.38716,1.150338,1.918813,-2.413527,12.74862,30.87134,29.51432,1.114719,1.964689,-2.625423,12.47837,32.37949,29.43596,1.077948,2.006292,-2.846934,11.90195,34.59293,29.37492,1.035143,1.986681,-2.752584,10.60972,37.22185,29.18594,1.015992,1.992054,-2.812626,10.01416,38.473,29.24624,.9756887,1.939897,-2.533281,8.319176,40.83907,29.25586,.9264164,1.716454,-1.597044,4.739725,45.07683,28.78915,.8595191,1.346034,-.02801895,-.6582906,50.17523,28.52953,.7754116,.7709245,2.200201,-7.487661,54.36622,28.93432];armory_renderpath_HosekWilkieData.datasetsRGB=[armory_renderpath_HosekWilkieData.datasetRGB1,armory_renderpath_HosekWilkieData.datasetRGB2,armory_renderpath_HosekWilkieData.datasetRGB3];armory_renderpath_HosekWilkieData.datasetsRGBRad=[armory_renderpath_HosekWilkieData.datasetRGBRad1,armory_renderpath_HosekWilkieData.datasetRGBRad2,armory_renderpath_HosekWilkieData.datasetRGBRad3];armory_renderpath_Inc.pointIndex=0;armory_renderpath_Inc.spotIndex=0;armory_trait_physics_bullet_PhysicsWorld.sceneRemoved=false;armory_trait_physics_bullet_PhysicsWorld.nullvec=true;iron_math_Mat4.helpVec=new iron_math_Vec4;iron_math_Mat4.helpMat=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_math_Quat.helpMat=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);armory_trait_physics_bullet_RigidBody.nextId=0;armory_trait_physics_bullet_RigidBody.ammoArray=-1;armory_trait_physics_bullet_RigidBody.nullvec=true;armory_trait_physics_bullet_RigidBody.quat=new iron_math_Quat;armory_trait_physics_bullet_RigidBody.CF_STATIC_OBJECT=1;armory_trait_physics_bullet_RigidBody.CF_KINEMATIC_OBJECT=2;armory_trait_physics_bullet_RigidBody.CF_NO_CONTACT_RESPONSE=4;armory_trait_physics_bullet_RigidBody.CF_CHARACTER_OBJECT=16;armory_trait_physics_bullet_RigidBody.convexHullCache=new haxe_ds_ObjectMap;armory_trait_physics_bullet_RigidBody.triangleMeshCache=new haxe_ds_ObjectMap;armory_trait_physics_bullet_RigidBody.usersCache=new haxe_ds_ObjectMap;haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe_io_FPHelper.helper=new DataView(new ArrayBuffer(8));iron_App.traitInits=[];iron_App.traitUpdates=[];iron_App.traitLateUpdates=[];iron_App.traitRenders=[];iron_App.traitRenders2D=[];iron_App.pauseUpdates=false;iron_App.lastw=-1;iron_App.lasth=-1;iron_Scene.uidCounter=0;iron_Scene.framePassed=true;iron_data_Data.cachedSceneRaws=new haxe_ds_StringMap;iron_data_Data.cachedMeshes=new haxe_ds_StringMap;iron_data_Data.cachedLights=new haxe_ds_StringMap;iron_data_Data.cachedCameras=new haxe_ds_StringMap;iron_data_Data.cachedMaterials=new haxe_ds_StringMap;iron_data_Data.cachedParticles=new haxe_ds_StringMap;iron_data_Data.cachedWorlds=new haxe_ds_StringMap;iron_data_Data.cachedShaders=new haxe_ds_StringMap;iron_data_Data.cachedBlobs=new haxe_ds_StringMap;iron_data_Data.cachedImages=new haxe_ds_StringMap;iron_data_Data.cachedSounds=new haxe_ds_StringMap;iron_data_Data.assetsLoaded=0;iron_data_Data.loadingMeshes=new haxe_ds_StringMap;iron_data_Data.loadingLights=new haxe_ds_StringMap;iron_data_Data.loadingCameras=new haxe_ds_StringMap;iron_data_Data.loadingMaterials=new haxe_ds_StringMap;iron_data_Data.loadingParticles=new haxe_ds_StringMap;iron_data_Data.loadingWorlds=new haxe_ds_StringMap;iron_data_Data.loadingShaders=new haxe_ds_StringMap;iron_data_Data.loadingSceneRaws=new haxe_ds_StringMap;iron_data_Data.loadingBlobs=new haxe_ds_StringMap;iron_data_Data.loadingImages=new haxe_ds_StringMap;iron_data_Data.loadingSounds=new haxe_ds_StringMap;iron_data_Data.dataPath="."+"/"+"data"+"/";iron_data_MaterialData.uidCounter=0;iron_data_MaterialContext.num=0;iron_math_RayCaster.VPInv=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_math_RayCaster.PInv=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_math_RayCaster.VInv=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation.m1=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation.m2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation.vpos=new iron_math_Vec4;iron_object_Animation.vpos2=new iron_math_Vec4;iron_object_Animation.vscl=new iron_math_Vec4;iron_object_Animation.vscl2=new iron_math_Vec4;iron_object_Animation.q1=new iron_math_Quat;iron_object_Animation.q2=new iron_math_Quat;iron_object_Animation.q3=new iron_math_Quat;iron_object_Animation.vp=new iron_math_Vec4;iron_object_Animation.vs=new iron_math_Vec4;iron_object_BoneAnimation.skinMaxBones=128;iron_object_BoneAnimation.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.m1=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.m2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.vpos=new iron_math_Vec4;iron_object_BoneAnimation.vscl=new iron_math_Vec4;iron_object_BoneAnimation.q1=new iron_math_Quat;iron_object_BoneAnimation.q2=new iron_math_Quat;iron_object_BoneAnimation.q3=new iron_math_Quat;iron_object_BoneAnimation.vpos2=new iron_math_Vec4;iron_object_BoneAnimation.vscl2=new iron_math_Vec4;iron_object_BoneAnimation.v1=new iron_math_Vec4;iron_object_BoneAnimation.v2=new iron_math_Vec4;iron_object_Object.uidCounter=0;iron_object_Object.seed=1;iron_object_CameraObject.temp=new iron_math_Vec4;iron_object_CameraObject.sphereCenter=new iron_math_Vec4;iron_object_CameraObject.vcenter=new iron_math_Vec4;iron_object_CameraObject.vup=new iron_math_Vec4;iron_object_LightObject.cascadeBounds=1;iron_object_LightObject.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_LightObject.eye=new iron_math_Vec4;iron_object_Transform.temp=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Transform.q=new iron_math_Quat;iron_object_Uniforms.biasMat=new iron_math_Mat4(.5,0,0,.5,0,-.5,0,.5,0,0,.5,.5,0,0,0,1);iron_object_Uniforms.helpMat=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Uniforms.helpMat2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Uniforms.helpMat3=new iron_math_Mat3(1,0,0,0,1,0,0,0,1);iron_object_Uniforms.helpVec=new iron_math_Vec4;iron_object_Uniforms.helpVec2=new iron_math_Vec4;iron_object_Uniforms.helpQuat=new iron_math_Quat;iron_object_Uniforms.defaultFilter=1;iron_system_Input.occupied=false;iron_system_Input.gamepads=[];iron_system_Input.registered=false;iron_system_Mouse.buttons=["left","right","middle"];iron_system_Keyboard.keys=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","space","backspace","tab","enter","shift","control","alt","win","escape","delete","up","down","left","right","back",",",".",":",";","<","=",">","?","!",'"',"#","$","%","&","_","(",")","*","|","{","}","[","]","~","`","/","\\","@","+","-","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12"];iron_system_Gamepad.buttonsPS=["cross","circle","square","triangle","l1","r1","l2","r2","share","options","l3","r3","up","down","left","right","home","touchpad"];iron_system_Gamepad.buttons=iron_system_Gamepad.buttonsPS;iron_system_Time.scale=1;iron_system_Time.last=0;iron_system_Time.realDelta=0;iron_system_Time.frequency=60;kha_Display.displays=[];kha_Scheduler.DIF_COUNT=3;kha_Scheduler.maxframetime=.5;kha_Scheduler.startTime=0;kha_Shaders.World_World_fragData0="s3166:AAEkR2xvYmFscwAADEgAAAAAAAwAAAADAUEAEAAAAAwAAAADAUIAIAAAAAwAAAADAUMAMAAAAAwAAAADAUQAQAAAAAwAAAADAUUAUAAAAAwAAAADAUYAYAAAAAwAAAADAUcAcAAAAAwAAAADAUkAgAAAAAwAAAADAWhvc2VrU3VuRGlyZWN0aW9uAJAAAAAMAAAAAwFaAKAAAAAMAAAAAwFlbnZtYXBTdHJlbmd0aACsAAAABAAAAAEBRFhCQ:oFaYEQAESnGddDpHhshucBAAAAjAgAAAUAAAA0AAAAPAIAAHACAACkAgAAEAgAAFJERUYAAgAAAQAAAEgAAAABAAAAHAAAAAAE::8AAQAA2AEAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAwAAABgAAAAsAAAAAAAAAAAAAAAgAEAAAAAAAAMAAAAAgAAAIQBAAAAAAAAlAEAABAAAAAMAAAAAgAAAIQBAAAAAAAAlgEAACAAAAAMAAAAAgAAAIQBAAAAAAAAmAEAADAAAAAMAAAAAgAAAIQBAAAAAAAAmgEAAEAAAAAMAAAAAgAAAIQBAAAAAAAAnAEAAFAAAAAMAAAAAgAAAIQBAAAAAAAAngEAAGAAAAAMAAAAAgAAAIQBAAAAAAAAoAEAAHAAAAAMAAAAAgAAAIQBAAAAAAAAogEAAIAAAAAMAAAAAgAAAIQBAAAAAAAApAEAAJAAAAAMAAAAAgAAAIQBAAAAAAAAtgEAAKAAAAAMAAAAAgAAAIQBAAAAAAAAuAEAAKwAAAAEAAAAAgAAAMgBAAAAAAAASACrqwEAAwABAAMAAAAAAAAAAABBAEIAQwBEAEUARgBHAEkAaG9zZWtTdW5EaXJlY3Rpb24AWgBlbnZtYXBTdHJlbmd0aACrAAADAAEAAQAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAHBwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFJkBQAAQAAAAFkBAABZAAAERo4gAAAAAAALAAAAYhAAA3IQEAAAAAAAZQAAA:IgEAAAAAAAaAAAAgMAAAAQAAAHEgAQAAAAAABGEhAAAAAAAEYSEAAAAAAARAAABRIAEAAAAAAACgAQAAAAAAA4AAAHcgAQAAAAAAAGABAAAAAAACYZEAAAAAAAEAAACCIAEAAAAAAAlgQQAAAAAABGgiAAAAAAAAkAAAA2IAAFEgAQAAAAAAAKABAAAAAAADIAAApCABAAAAAAABoAEICBAAAAAAAAAAFAAAAwbpm8AUAAACcWmD0yAAAKQgAQAAAAAAAqABAAAAAAABoAEICBAAAAAAAAAAFAAACENFm%MgAACkIAEAAAAAAAKgAQAAAAAAAaABCAgQAAAAAAAAABQAAApA3JPwAAAAiCABAAAAAAABoAEIDBAAAAAAAAAAFAAAAAAIA:SwAABYIAEAAAAAAAOgAQAAAAAAA4AAAHEgAQAAEAAAA6ABAAAAAAACoAEAAAAAAAMgAACRIAEAABAAAACgAQAAEAAAABQAAAAAAAwAFAAADbD0lAMQAACCIAEAABAAAAGgAQAAAAAAAaABCAQQAAAAAAAAABAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAAMgAACUIAEAAAAAAAKgAQAAAAAAA6ABAAAAAAAAoAEAABAAAAOAAACHIAEAABAAAApgoQAAAAAABGgiAAAAAAAAUAAAA4AAAKcgAQAAEAAABGAhAAAQAAAAJAAAA7qrg:O6q4PzuquD8AAAAAGQAABXIAEAABAAAARgIQAAEAAAAyAAALcgAQAAEAAABGgiAAAAAAAAQAAABGAhAAAQAAAEaCIAAAAAAAAwAAADgAAAdCABAAAAAAABoAEAAAAAAAGgAQAAAAAAAyAAAKcgAQAAEAAABGgiAAAAAAAAYAAACmChAAAAAAAEYCEAABAAAAAAAAB0IAEAAAAAAAGgAQAAAAAAAaABAAAAAAADIAAAkiABAAAAAAABoAEAAAAAAAGgAQAAAAAAABQAAAAACAPzIAAA5yABAAAgAAAEaCIAAAAAAAAAAAAEaCIAAAAAAAAAAAAAJAAAAAAIA:AACAPwAAgD8AAAAAMgAAC3IAEAACAAAARoIggEEAAAAAAAAAAAAAAKYKEAAAAAAARgIQAAIAAAAvAAAFcgAQAAIAAABGAhAAAgAAADgAAApyABAAAgAAAEYCEAACAAAAAkAAAAAAwD8AAMA:AADAPwAAAAAZAAAFcgAQAAIAAABGAhAAAgAAAA4AAAfiABAAAAAAAFYFEAAAAAAABgkQAAIAAAAyAAAK4gAQAAAAAAAGiSAAAAAAAAcAAABWDhAAAAAAAAYJEAABAAAASwAABRIAEAABAAAACgAQAAAAAAAAAAAHEgAQAAAAAAAKABAAAAAAAAFAAAAK1yM8DgAACOIAEAABAAAABokgAAAAAAACAAAABgAQAAAAAAA4AAAK4gAQAAEAAABWDhAAAQAAAAJAAAAAAAAAO6q4PzuquD87qrg:GQAABeIAEAABAAAAVg4QAAEAAAAyAAAN4gAQAAEAAAAGiSAAAAAAAAEAAABWDhAAAQAAAAJAAAAAAAAAAACAPwAAgD8AAIA:MgAACnIAEAAAAAAARoIgAAAAAAAIAAAABgAQAAEAAACWBxAAAAAAADgAAAdyABAAAAAAAEYCEAAAAAAAlgcQAAEAAAA4AAAIcgAQAAAAAABGAhAAAAAAAEaCIAAAAAAACgAAADgAAAhyIBAAAAAAAEYCEAAAAAAA9o8gAAAAAAAKAAAANgAABYIgEAAAAAAAAUAAAAAAAAA%AAABU1RBVHQAAAAqAAAAAwAAAAAAAAACAAAAJgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.World_World_vertData0="s1240:Am5vcgAAcG9zAAEBJEdsb2JhbHMAAAFTTVZQAAAAAABAAAAABAREWEJDAWvUj:hTvlSpp43Hljh:kAEAAAB8AwAABQAAADQAAAD0AAAAQAEAAJgBAAAAAwAAUkRFRrgAAAABAAAASAAAAAEAAAAcAAAAAAT%:wABAACQAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAkR2xvYmFscwCrq6s8AAAAAQAAAGAAAABAAAAAAAAAAAAAAAB4AAAAAAAAAEAAAAACAAAAgAAAAAAAAABTTVZQAKurqwMAAwAEAAQAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAABwcAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR05QAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAAcIAABBAAAAAAAAAAEAAAADAAAAAQAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSYAEAAEAAAQBYAAAAWQAABEaOIAAAAAAABAAAAF8AAANyEBAAAAAAAF8AAANyEBAAAQAAAGUAAANyIBAAAAAAAGcAAATyIBAAAQAAAAEAAABoAAACAgAAADYAAAVyIBAAAAAAAEYSEAAAAAAANgAABXIAEAAAAAAARhIQAAEAAAA2AAAFggAQAAAAAAABQAAAAACAPxEAAAgSABAAAQAAAEYOEAAAAAAARo4gAAAAAAACAAAAEQAACCIAEAABAAAARg4QAAAAAABGjiAAAAAAAAMAAAAAAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAANgAABYIgEAABAAAAGgAQAAEAAAA4AAAHQiAQAAEAAAAKABAAAQAAAAFAAAAAAAA:EQAACBIgEAABAAAARg4QAAAAAABGjiAAAAAAAAAAAAARAAAIIiAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAQAAAD4AAAFTVEFUdAAAAAsAAAACAAAAAAAAAAQAAAAGAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.armdefault_mesh_fragData0="s3234:AANfc2hhZG93TWFwX3NhbXBsZXIAAHNoYWRvd01hcAAAJEdsb2JhbHMAAAVzdW5EaXIAAAAAAAwAAAADAXJlY2VpdmVTaGFkb3cADAAAAAQAAAABAXNoYWRvd3NCaWFzABAAAAAEAAAAAQFzdW5Db2wAFAAAAAwAAAADAWVudm1hcFN0cmVuZ3RoACAAAAAEAAAAAQFEWEJDtUjlQiC9IXUAhivURk7jBQEAAADkCAAABQAAADQAAAAEAgAAUAIAAIQCAABoCAAAUkRFRsgBAAABAAAApAAAAAMAAAAcAAAAAAT::wABAACeAQAAfAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAACPAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAJkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3NoYWRvd01hcF9zYW1wbGVyAHNoYWRvd01hcAAkR2xvYmFscwCrq5kAAAAFAAAAvAAAADAAAAAAAAAAAAAAADQBAAAAAAAADAAAAAIAAAA8AQAAAAAAAEwBAAAMAAAABAAAAAIAAABcAQAAAAAAAGwBAAAQAAAABAAAAAIAAAB4AQAAAAAAAIgBAAAUAAAADAAAAAIAAAA8AQAAAAAAAI8BAAAgAAAABAAAAAIAAAB4AQAAAAAAAHN1bkRpcgCrAQADAAEAAwAAAAAAAAAAAHJlY2VpdmVTaGFkb3cAq6sAAAEAAQABAAAAAAAAAAAAc2hhZG93c0JpYXMAAAADAAEAAQAAAAAAAAAAAHN1bkNvbABlbnZtYXBTdHJlbmd0aABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6tJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFLcBQAAQAAAAHcBAABZAAAERo4gAAAAAAADAAAAWggAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAANyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIDAAAAEAAABxIAEAAAAAAARhIQAAEAAABGEhAAAQAAAEQAAAUSABAAAAAAAAoAEAAAAAAAOAAAB3IAEAAAAAAABgAQAAAAAABGEhAAAQAAABAAAAgSABAAAAAAAEYCEAAAAAAARoIgAAAAAAAAAAAANAAABxIAEAAAAAAACgAQAAAAAAABQAAAAAAAADEAAAciABAAAAAAAAFAAAAAAAAAOhAQAAAAAAA3AAAKIgAQAAAAAAA6gCAAAAAAAAAAAAAaABAAAAAAAAFAAAAAAAAAHwAEAxoAEAAAAAAADgAAB%IAEAAAAAAABhkQAAAAAAD2HxAAAAAAAAAAAAmCABAAAAAAADoAEAAAAAAACoAggEEAAAAAAAAAAQAAAAAAAAryABAAAQAAAJYJEAAAAAAAAkAAAAAAgLoAAIC6AACAugAAAABGAAALEgAQAAEAAABGABAAAQAAAAZwEAAAAAAAAGAQAAAAAAA6ABAAAAAAAEYAAAsiABAAAQAAAOYKEAABAAAABnAQAAAAAAAAYBAAAAAAADoAEAAAAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAAAAAAAryABAAAgAAAJYJEAAAAAAAAkAAAAAAgLoAAIA6AAAAAAAAgLpGAAALIgAQAAEAAABGABAAAgAAAAZwEAAAAAAAAGAQAAAAAAA6ABAAAAAAAAAAAAcSABAAAQAAABoAEAABAAAACgAQAAEAAABGAAALIgAQAAEAAADmChAAAgAAAAZwEAAAAAAAAGAQAAAAAAA6ABAAAAAAAAAAAAcSABAAAQAAABoAEAABAAAACgAQAAEAAABGAAALIgAQAAEAAACWBRAAAAAAAAZwEAAAAAAAAGAQAAAAAAA6ABAAAAAAAAAAAAcSABAAAQAAABoAEAABAAAACgAQAAEAAAAAAAAK8gAQAAIAAACWCRAAAAAAAAJAAAAAAAAAAACAOgAAgDoAAIC6RgAACyIAEAABAAAARgAQAAIAAAAGcBAAAAAAAABgEAAAAAAAOgAQAAAAAAAAAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAARgAACyIAEAABAAAA5goQAAIAAAAGcBAAAAAAAABgEAAAAAAAOgAQAAAAAAAAAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAAAAAACvIAEAACAAAAlgkQAAAAAAACQAAAAACAOgAAAAAAAIA6AACAOkYAAAsiABAAAAAAAEYAEAACAAAABnAQAAAAAAAAYBAAAAAAADoAEAAAAAAAAAAAByIAEAAAAAAAGgAQAAAAAAAKABAAAQAAAEYAAAtCABAAAAAAAOYKEAACAAAABnAQAAAAAAAAYBAAAAAAADoAEAAAAAAAAAAAByIAEAAAAAAAKgAQAAAAAAAaABAAAAAAADgAAAciABAAAAAAABoAEAAAAAAAAUAAADmO4z0SAAABNgAABSIAEAAAAAAAAUAAAAAAgD8VAAABHQAABxIAEAAAAAAACgAQAAAAAAABQAAAAAAAPwEAAAcSABAAAAAAAAoAEAAAAAAAAUAAAAAAgD84AAAHEgAQAAAAAAAKABAAAAAAABoAEAAAAAAAOAAABxIAEAAAAAAACgAQAAAAAAABQAAAzcxMPzgAAAgiABAAAAAAAAqAIAAAAAAAAgAAAAFAAADNzEw:MgAACnIAEAAAAAAABgAQAAAAAACWhyAAAAAAAAEAAABWBRAAAAAAAC8AAAVyABAAAAAAAEYCEAAAAAAAOAAACnIAEAAAAAAARgIQAAAAAAACQAAAL7roPi%66D4vuug%AAAAABkAAAVyIBAAAAAAAEYCEAAAAAAANgAABYIgEAAAAAAAAUAAAAAAgD8%AAABU1RBVHQAAAAuAAAAAwAAAAAAAAADAAAAHQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.armdefault_mesh_vertData0="s1846:Am5vcgAAcG9zAAEBJEdsb2JhbHMAAANOAAAAAAAsAAAAAwNMV1ZQADAAAABAAAAABARXVlAAcAAAAEAAAAAEBERYQkPpsgMZpWxKeAU2IUzoYrbSAQAAACgFAAAFAAAANAAAADwBAACIAQAA%AEAAKwEAABSREVGAAEAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAANgAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAADAAAAYAAAALAAAAAAAAAAAAAAAKgAAAAAAAAALAAAAAIAAACsAAAAAAAAALwAAAAwAAAAQAAAAAIAAADEAAAAAAAAANQAAABwAAAAQAAAAAIAAADEAAAAAAAAAE4Aq6sDAAMAAwADAAAAAAAAAAAATFdWUACrq6sDAAMABAAEAAAAAAAAAAAAV1ZQAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAOAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAABwgAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKsAgAAQAABAKsAAABZAAAERo4gAAAAAAALAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAZQAAA:IgEAAAAAAAZQAAA3IgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAIDAAAANgAABXIAEAAAAAAARhIQAAEAAAA2AAAFggAQAAAAAAABQAAAAACAPxEAAAgSIBAAAAAAAEYOEAAAAAAARo4gAAAAAAADAAAAEQAACCIgEAAAAAAARg4QAAAAAABGjiAAAAAAAAQAAAARAAAIQiAQAAAAAABGDhAAAAAAAEaOIAAAAAAABQAAABEAAAiCIBAAAAAAAEYOEAAAAAAARo4gAAAAAAAGAAAANgAABTIAEAABAAAARhAQAAAAAAA2AAAFQgAQAAEAAAA6EBAAAQAAABAAAAgSABAAAgAAAEYCEAABAAAARoIgAAAAAAAAAAAAEAAACCIAEAACAAAARgIQAAEAAABGgiAAAAAAAAEAAAAQAAAIQgAQAAIAAABGAhAAAQAAAEaCIAAAAAAAAgAAABAAAAcSABAAAQAAAEYCEAACAAAARgIQAAIAAABEAAAFEgAQAAEAAAAKABAAAQAAADgAAAdyIBAAAQAAAAYAEAABAAAARgIQAAIAAAARAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAACQAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAAKAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAHAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAgAAAA%AAABU1RBVHQAAAAWAAAAAwAAAAAAAAAFAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.armdefault_shadowmap_fragData0="s410:AAAARFhCQ3%xd:YuyuL2W1XcJlZCEbQBAAAAMAEAAAUAAAA0AAAAgAAAAJAAAACgAAAAtAAAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOCAAAAAAAAAAIAAAAT1NHTggAAAAAAAAACAAAAFNIRFIMAAAAQAAAAAMAAAA%AAABU1RBVHQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.armdefault_shadowmap_vertData0="s1095:AXBvcwAAASRHbG9iYWxzAAABTFdWUAAAAAAAQAAAAAQERFhCQwpk4Gh9R86Sox3W%tlktaoBAAAAFAMAAAUAAAA0AAAA9AAAACgBAABcAQAAmAIAAFJERUa4AAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAkAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIAAAAAAAAAATFdWUACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8HAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAABAAAAAwAAAAAAAAAPAAAAU1ZfUG9zaXRpb24AU0hEUjQBAABAAAEATQAAAFkAAARGjiAAAAAAAAQAAABfAAADchAQAAAAAABnAAAE8iAQAAAAAAABAAAAaAAAAgIAAAA2AAAFcgAQAAAAAABGEhAAAAAAADYAAAWCABAAAAAAAAFAAAAAAIA:EQAACBIAEAABAAAARg4QAAAAAABGjiAAAAAAAAIAAAARAAAIIgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAwAAAAAAAAcSABAAAQAAABoAEAABAAAACgAQAAEAAAA2AAAFgiAQAAAAAAAaABAAAQAAADgAAAdCIBAAAAAAAAoAEAABAAAAAUAAAAAAAD8RAAAIEiAQAAAAAABGDhAAAAAAAEaOIAAAAAAAAAAAABEAAAgiIBAAAAAAAEYOEAAAAAAARo4gAAAAAAABAAAAPgAAAVNUQVR0AAAACgAAAAIAAAAAAAAAAgAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.ground_mesh_fragData0="s3656:AAVfSW1hZ2VUZXh0dXJlX3NhbXBsZXIAAF9zaGFkb3dNYXBfc2FtcGxlcgABSW1hZ2VUZXh0dXJlAABzaGFkb3dNYXAAASRHbG9iYWxzAAAFc3VuRGlyAAAAAAAMAAAAAwFyZWNlaXZlU2hhZG93AAwAAAAEAAAAAQFzaGFkb3dzQmlhcwAQAAAABAAAAAEBc3VuQ29sABQAAAAMAAAAAwFlbnZtYXBTdHJlbmd0aAAgAAAABAAAAAEBRFhCQwaX0XIFsdOEFCX7DQ9ka0MBAAAA:AkAAAUAAAA0AAAAaAIAAMwCAAAAAwAAgAkAAFJERUYsAgAAAQAAAAgBAAAFAAAAHAAAAAAE::8AAQAAAgIAALwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAA0gAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAMAAADlAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAPIAAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAA:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfSW1hZ2VUZXh0dXJlX3NhbXBsZXIAX3NoYWRvd01hcF9zYW1wbGVyAEltYWdlVGV4dHVyZQBzaGFkb3dNYXAAJEdsb2JhbHMAq6ur:AAAAAUAAAAgAQAAMAAAAAAAAAAAAAAAmAEAAAAAAAAMAAAAAgAAAKABAAAAAAAAsAEAAAwAAAAEAAAAAgAAAMABAAAAAAAA0AEAABAAAAAEAAAAAgAAANwBAAAAAAAA7AEAABQAAAAMAAAAAgAAAKABAAAAAAAA8wEAACAAAAAEAAAAAgAAANwBAAAAAAAAc3VuRGlyAKsBAAMAAQADAAAAAAAAAAAAcmVjZWl2ZVNoYWRvdwCrqwAAAQABAAEAAAAAAAAAAABzaGFkb3dzQmlhcwAAAAMAAQABAAAAAAAAAAAAc3VuQ29sAGVudm1hcFN0cmVuZ3RoAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrq0lTR05cAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAA8PAABQAAAAAQAAAAAAAAADAAAAAQAAAAMDAABQAAAAAgAAAAAAAAADAAAAAgAAAAcHAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUngGAABAAAAAngEAAFkAAARGjiAAAAAAAAMAAABaAAADAGAQAAAAAABaCAADAGAQAAEAAABYGAAEAHAQAAAAAABVVQAAWBgABABwEAABAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGIQAANyEBAAAgAAAGUAAAPyIBAAAAAAAGgAAAIDAAAAEAAABxIAEAAAAAAARhIQAAIAAABGEhAAAgAAAEQAAAUSABAAAAAAAAoAEAAAAAAAOAAAB3IAEAAAAAAABgAQAAAAAABGEhAAAgAAAEUAAAnyABAAAQAAAEYQEAABAAAARn4QAAAAAAAAYBAAAAAAAC8AAAVyABAAAQAAAEYCEAABAAAAOAAACnIAEAABAAAARgIQAAEAAAACQAAAzcwMQM3MDEDNzAxAAAAAABkAAAVyABAAAQAAAEYCEAABAAAAEAAACBIAEAAAAAAARgIQAAAAAABGgiAAAAAAAAAAAAA0AAAHEgAQAAAAAAAKABAAAAAAAAFAAAAAAAAAMQAAByIAEAAAAAAAAUAAAAAAAAA6EBAAAAAAADcAAAoiABAAAAAAADqAIAAAAAAAAAAAABoAEAAAAAAAAUAAAAAAAAAfAAQDGgAQAAAAAAAOAAAH4gAQAAAAAAAGGRAAAAAAAPYfEAAAAAAAAAAACYIAEAAAAAAAOgAQAAAAAAAKgCCAQQAAAAAAAAABAAAAAAAACvIAEAACAAAAlgkQAAAAAAACQAAAAACAugAAgLoAAIC6AAAAAEYAAAuCABAAAQAAAEYAEAACAAAABnAQAAEAAAAAYBAAAQAAADoAEAAAAAAARgAACxIAEAACAAAA5goQAAIAAAAGcBAAAQAAAABgEAABAAAAOgAQAAAAAAAAAAAHggAQAAEAAAA6ABAAAQAAAAoAEAACAAAAAAAACvIAEAACAAAAlgkQAAAAAAACQAAAAACAugAAgDoAAAAAAACAukYAAAsSABAAAgAAAEYAEAACAAAABnAQAAEAAAAAYBAAAQAAADoAEAAAAAAAAAAAB4IAEAABAAAAOgAQAAEAAAAKABAAAgAAAEYAAAsSABAAAgAAAOYKEAACAAAABnAQAAEAAAAAYBAAAQAAADoAEAAAAAAAAAAAB4IAEAABAAAAOgAQAAEAAAAKABAAAgAAAEYAAAsSABAAAgAAAJYFEAAAAAAABnAQAAEAAAAAYBAAAQAAADoAEAAAAAAAAAAAB4IAEAABAAAAOgAQAAEAAAAKABAAAgAAAAAAAAryABAAAgAAAJYJEAAAAAAAAkAAAAAAAAAAAIA6AACAOgAAgLpGAAALEgAQAAIAAABGABAAAgAAAAZwEAABAAAAAGAQAAEAAAA6ABAAAAAAAAAAAAeCABAAAQAAADoAEAABAAAACgAQAAIAAABGAAALEgAQAAIAAADmChAAAgAAAAZwEAABAAAAAGAQAAEAAAA6ABAAAAAAAAAAAAeCABAAAQAAADoAEAABAAAACgAQAAIAAAAAAAAK8gAQAAIAAACWCRAAAAAAAAJAAAAAAIA6AAAAAAAAgDoAAIA6RgAACyIAEAAAAAAARgAQAAIAAAAGcBAAAQAAAABgEAABAAAAOgAQAAAAAAAAAAAHIgAQAAAAAAAaABAAAAAAADoAEAABAAAARgAAC0IAEAAAAAAA5goQAAIAAAAGcBAAAQAAAABgEAABAAAAOgAQAAAAAAAAAAAHIgAQAAAAAAAqABAAAAAAABoAEAAAAAAAOAAAByIAEAAAAAAAGgAQAAAAAAABQAAAOY7jPRIAAAE2AAAFIgAQAAAAAAABQAAAAACAPxUAAAEdAAAHEgAQAAAAAAAKABAAAAAAAAFAAAAAAAA:AQAABxIAEAAAAAAACgAQAAAAAAABQAAAAACAPzgAAAfSABAAAAAAAAYAEAAAAAAABgkQAAEAAAA4AAAHcgAQAAAAAABWBRAAAAAAAIYDEAAAAAAAOAAACHIAEAABAAAARgIQAAEAAAAGgCAAAAAAAAIAAAAyAAAKcgAQAAAAAABGAhAAAAAAAJaHIAAAAAAAAQAAAEYCEAABAAAALwAABXIAEAAAAAAARgIQAAAAAAA4AAAKcgAQAAAAAABGAhAAAAAAAAJAAAAvuug%L7roPi%66D4AAAAAGQAABXIgEAAAAAAARgIQAAAAAAA2AAAFgiAQAAAAAAABQAAAAACAPz4AAAFTVEFUdAAAADIAAAADAAAAAAAAAAQAAAAgAAAAAAAAAAEAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAJAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.ground_mesh_vertData0="s2087:A25vcgAAcG9zAAF0ZXgAAgEkR2xvYmFscwAABHRleFVucGFjawAAAAAABAAAAAEBTgAQAAAALAAAAAMDTFdWUABAAAAAQAAAAAQEV1ZQAIAAAABAAAAABAREWEJDXIr02MFcNJWmDbgVDCxFLwEAAADEBQAABQAAADQAAABwAQAA1AEAAFwCAABIBQAAUkRFRjQBAAABAAAASAAAAAEAAAAcAAAAAAT%:wABAAAMAQAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAkR2xvYmFscwCrq6s8AAAABAAAAGAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAQAAAACAAAAzAAAAAAAAADcAAAAEAAAACwAAAACAAAA4AAAAAAAAADwAAAAQAAAAEAAAAACAAAA%AAAAAAAAAAIAQAAgAAAAEAAAAACAAAA%AAAAAAAAAB0ZXhVbnBhY2sAq6sAAAMAAQABAAAAAAAAAAAATgCrqwMAAwADAAMAAAAAAAAAAABMV1ZQAKurqwMAAwAEAAQAAAAAAAAAAABXVlAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR05cAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAAMDAABQAAAAAQAAAAAAAAADAAAAAQAAAA8PAABQAAAAAgAAAAAAAAADAAAAAgAAAAMDAABURVhDT09SRACrq6tPU0dOgAAAAAQAAAAIAAAAaAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAaAAAAAEAAAAAAAAAAwAAAAEAAAADDAAAaAAAAAIAAAAAAAAAAwAAAAIAAAAHCAAAcQAAAAAAAAABAAAAAwAAAAMAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUuQCAABAAAEAuQAAAFkAAARGjiAAAAAAAAwAAABfAAADMhAQAAAAAABfAAAD8hAQAAEAAABfAAADMhAQAAIAAABlAAAD8iAQAAAAAABlAAADMiAQAAEAAABlAAADciAQAAIAAABnAAAE8iAQAAMAAAABAAAAaAAAAgMAAAA2AAAFcgAQAAAAAABGEhAAAQAAADYAAAWCABAAAAAAAAFAAAAAAIA:EQAACBIgEAAAAAAARg4QAAAAAABGjiAAAAAAAAQAAAARAAAIIiAQAAAAAABGDhAAAAAAAEaOIAAAAAAABQAAABEAAAhCIBAAAAAAAEYOEAAAAAAARo4gAAAAAAAGAAAAEQAACIIgEAAAAAAARg4QAAAAAABGjiAAAAAAAAcAAAA4AAAIMiAQAAEAAABGEBAAAgAAAAaAIAAAAAAAAAAAADYAAAUyABAAAQAAAEYQEAAAAAAANgAABUIAEAABAAAAOhAQAAEAAAAQAAAIEgAQAAIAAABGAhAAAQAAAEaCIAAAAAAAAQAAABAAAAgiABAAAgAAAEYCEAABAAAARoIgAAAAAAACAAAAEAAACEIAEAACAAAARgIQAAEAAABGgiAAAAAAAAMAAAAQAAAHEgAQAAEAAABGAhAAAgAAAEYCEAACAAAARAAABRIAEAABAAAACgAQAAEAAAA4AAAHciAQAAIAAAAGABAAAQAAAEYCEAACAAAAEQAACBIAEAABAAAARg4QAAAAAABGjiAAAAAAAAoAAAARAAAIIgAQAAEAAABGDhAAAAAAAEaOIAAAAAAACwAAAAAAAAcSABAAAQAAABoAEAABAAAACgAQAAEAAAA2AAAFgiAQAAMAAAAaABAAAQAAADgAAAdCIBAAAwAAAAoAEAABAAAAAUAAAAAAAD8RAAAIEiAQAAMAAABGDhAAAAAAAEaOIAAAAAAACAAAABEAAAgiIBAAAwAAAEYOEAAAAAAARo4gAAAAAAAJAAAAPgAAAVNUQVR0AAAAFwAAAAMAAAAAAAAABwAAABEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_colored_fragData0="s564:AAAARFhCQ10%09VOlitqlcwulnj3BPYBAAAApAEAAAUAAAA0AAAAgAAAALQAAADoAAAAKAEAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI4AAAAQAAAAA4AAABiEAAD8hAQAAAAAABlAAAD8iAQAAAAAAA2AAAF8iAQAAAAAABGHhAAAAAAAD4AAAFTVEFUdAAAAAIAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_colored_vertData0="s1298:AnZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABASRHbG9iYWxzAAABcHJvamVjdGlvbk1hdHJpeAAAAAAAQAAAAAQERFhCQ4DtgybrA7ZLkEX80:H0lx8BAAAAiAMAAAUAAAA0AAAAAAEAAEwBAACkAQAADAMAAFJERUbEAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAnAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIwAAAAAAAAAcHJvamVjdGlvbk1hdHJpeACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR05EAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAA8PAAA4AAAAAQAAAAAAAAADAAAAAQAAAAcHAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUmABAABAAAEAWAAAAFkAAARGjiAAAAAAAAQAAABfAAAD8hAQAAAAAABfAAADchAQAAEAAABlAAAD8iAQAAAAAABnAAAE8iAQAAEAAAABAAAAaAAAAgIAAAA2AAAF8iAQAAAAAABGHhAAAAAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAQAAABoAEAABAAAAOAAAB0IgEAABAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAQAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAABAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAALAAAAAgAAAAAAAAAEAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_image_fragData0="s920:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNyheiuU7t5mFNPbkIv8yIwAQAAAJwCAAAFAAAANAAAANQAAAAgAQAAVAEAACACAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSxAAAAEAAAAAxAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB:IAEAAAAAAARg4QAAAAAABGHhAAAAAAADgAAAdyIBAAAAAAAEYCEAAAAAAA9h8QAAAAAAA2AAAFgiAQAAAAAAA6ABAAAAAAAD4AAAFTVEFUdAAAAAUAAAABAAAAAAAAAAMAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_image_vertData0="s1438:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMa3iE9IT:0doX7J6Il0ZrpAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_text_fragData0="s883:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkPq8S:xutfukNTooEJ3yp0AAQAAAIACAAAFAAAANAAAANQAAAAgAQAAVAEAAAQCAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSqAAAAEAAAAAqAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB4IgEAAAAAAACgAQAAAAAAA6EBAAAAAAADYAAAVyIBAAAAAAAEYSEAAAAAAAPgAAAVNUQVR0AAAABAAAAAEAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_text_vertData0="s1438:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMa3iE9IT:0doX7J6Il0ZrpAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_video_fragData0="s920:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNyheiuU7t5mFNPbkIv8yIwAQAAAJwCAAAFAAAANAAAANQAAAAgAQAAVAEAACACAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSxAAAAEAAAAAxAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB:IAEAAAAAAARg4QAAAAAABGHhAAAAAAADgAAAdyIBAAAAAAAEYCEAAAAAAA9h8QAAAAAAA2AAAFgiAQAAAAAAA6ABAAAAAAAD4AAAFTVEFUdAAAAAUAAAABAAAAAAAAAAMAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_video_vertData0="s1438:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMa3iE9IT:0doX7J6Il0ZrpAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.sky_mesh_fragData0="s3678:AAVfSW1hZ2VUZXh0dXJlXzAwMV9zYW1wbGVyAABfc2hhZG93TWFwX3NhbXBsZXIAAUltYWdlVGV4dHVyZV8wMDEAAHNoYWRvd01hcAABJEdsb2JhbHMAAAVzdW5EaXIAAAAAAAwAAAADAXJlY2VpdmVTaGFkb3cADAAAAAQAAAABAXNoYWRvd3NCaWFzABAAAAAEAAAAAQFzdW5Db2wAFAAAAAwAAAADAWVudm1hcFN0cmVuZ3RoACAAAAAEAAAAAQFEWEJDEDU8dfkgeUDWaGWZoJPXagEAAAAECgAABQAAADQAAABwAgAA1AIAAAgDAACICQAAUkRFRjQCAAABAAAAEAEAAAUAAAAcAAAAAAT::wABAAAKAgAAvAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAADWAAAAAwAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAwAAAOkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAA%gAAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAAAEAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAF9JbWFnZVRleHR1cmVfMDAxX3NhbXBsZXIAX3NoYWRvd01hcF9zYW1wbGVyAEltYWdlVGV4dHVyZV8wMDEAc2hhZG93TWFwACRHbG9iYWxzAKurqwQBAAAFAAAAKAEAADAAAAAAAAAAAAAAAKABAAAAAAAADAAAAAIAAACoAQAAAAAAALgBAAAMAAAABAAAAAIAAADIAQAAAAAAANgBAAAQAAAABAAAAAIAAADkAQAAAAAAAPQBAAAUAAAADAAAAAIAAACoAQAAAAAAAPsBAAAgAAAABAAAAAIAAADkAQAAAAAAAHN1bkRpcgCrAQADAAEAAwAAAAAAAAAAAHJlY2VpdmVTaGFkb3cAq6sAAAEAAQABAAAAAAAAAAAAc2hhZG93c0JpYXMAAAADAAEAAQAAAAAAAAAAAHN1bkNvbABlbnZtYXBTdHJlbmd0aABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6tJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAUAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFJ4BgAAQAAAAJ4BAABZAAAERo4gAAAAAAADAAAAWgAAAwBgEAAAAAAAWggAAwBgEAABAAAAWBgABABwEAAAAAAAVVUAAFgYAAQAcBAAAQAAAFVVAABiEAAD8hAQAAAAAABiEAADMhAQAAEAAABiEAADchAQAAIAAABlAAAD8iAQAAAAAABoAAACAwAAABAAAAcSABAAAAAAAEYSEAACAAAARhIQAAIAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAARhIQAAIAAABFAAAJ8gAQAAEAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAAvAAAFcgAQAAEAAABGAhAAAQAAADgAAApyABAAAQAAAEYCEAABAAAAAkAAAM3MDEDNzAxAzcwMQAAAAAAZAAAFcgAQAAEAAABGAhAAAQAAABAAAAgSABAAAAAAAEYCEAAAAAAARoIgAAAAAAAAAAAANAAABxIAEAAAAAAACgAQAAAAAAABQAAAAAAAADEAAAciABAAAAAAAAFAAAAAAAAAOhAQAAAAAAA3AAAKIgAQAAAAAAA6gCAAAAAAAAAAAAAaABAAAAAAAAFAAAAAAAAAHwAEAxoAEAAAAAAADgAAB%IAEAAAAAAABhkQAAAAAAD2HxAAAAAAAAAAAAmCABAAAAAAADoAEAAAAAAACoAggEEAAAAAAAAAAQAAAAAAAAryABAAAgAAAJYJEAAAAAAAAkAAAAAAgLoAAIC6AACAugAAAABGAAALggAQAAEAAABGABAAAgAAAAZwEAABAAAAAGAQAAEAAAA6ABAAAAAAAEYAAAsSABAAAgAAAOYKEAACAAAABnAQAAEAAAAAYBAAAQAAADoAEAAAAAAAAAAAB4IAEAABAAAAOgAQAAEAAAAKABAAAgAAAAAAAAryABAAAgAAAJYJEAAAAAAAAkAAAAAAgLoAAIA6AAAAAAAAgLpGAAALEgAQAAIAAABGABAAAgAAAAZwEAABAAAAAGAQAAEAAAA6ABAAAAAAAAAAAAeCABAAAQAAADoAEAABAAAACgAQAAIAAABGAAALEgAQAAIAAADmChAAAgAAAAZwEAABAAAAAGAQAAEAAAA6ABAAAAAAAAAAAAeCABAAAQAAADoAEAABAAAACgAQAAIAAABGAAALEgAQAAIAAACWBRAAAAAAAAZwEAABAAAAAGAQAAEAAAA6ABAAAAAAAAAAAAeCABAAAQAAADoAEAABAAAACgAQAAIAAAAAAAAK8gAQAAIAAACWCRAAAAAAAAJAAAAAAAAAAACAOgAAgDoAAIC6RgAACxIAEAACAAAARgAQAAIAAAAGcBAAAQAAAABgEAABAAAAOgAQAAAAAAAAAAAHggAQAAEAAAA6ABAAAQAAAAoAEAACAAAARgAACxIAEAACAAAA5goQAAIAAAAGcBAAAQAAAABgEAABAAAAOgAQAAAAAAAAAAAHggAQAAEAAAA6ABAAAQAAAAoAEAACAAAAAAAACvIAEAACAAAAlgkQAAAAAAACQAAAAACAOgAAAAAAAIA6AACAOkYAAAsiABAAAAAAAEYAEAACAAAABnAQAAEAAAAAYBAAAQAAADoAEAAAAAAAAAAAByIAEAAAAAAAGgAQAAAAAAA6ABAAAQAAAEYAAAtCABAAAAAAAOYKEAACAAAABnAQAAEAAAAAYBAAAQAAADoAEAAAAAAAAAAAByIAEAAAAAAAKgAQAAAAAAAaABAAAAAAADgAAAciABAAAAAAABoAEAAAAAAAAUAAADmO4z0SAAABNgAABSIAEAAAAAAAAUAAAAAAgD8VAAABHQAABxIAEAAAAAAACgAQAAAAAAABQAAAAAAAPwEAAAcSABAAAAAAAAoAEAAAAAAAAUAAAAAAgD84AAAH0gAQAAAAAAAGABAAAAAAAAYJEAABAAAAOAAAB3IAEAAAAAAAVgUQAAAAAACGAxAAAAAAADgAAAhyABAAAQAAAEYCEAABAAAABoAgAAAAAAACAAAAMgAACnIAEAAAAAAARgIQAAAAAACWhyAAAAAAAAEAAABGAhAAAQAAAC8AAAVyABAAAAAAAEYCEAAAAAAAOAAACnIAEAAAAAAARgIQAAAAAAACQAAAL7roPi%66D4vuug%AAAAABkAAAVyIBAAAAAAAEYCEAAAAAAANgAABYIgEAAAAAAAAUAAAAAAgD8%AAABU1RBVHQAAAAyAAAAAwAAAAAAAAAEAAAAIAAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_System.renderListeners=[];kha_System.foregroundListeners=[];kha_System.resumeListeners=[];kha_System.pauseListeners=[];kha_System.backgroundListeners=[];kha_System.shutdownListeners=[];kha_System.dropFilesListeners=[];kha_SystemImpl.maxGamepads=4;kha_SystemImpl.mouseLockListeners=[];kha_Window.windows=[];kha_audio2_Audio.disableGcInteractions=false;kha_audio2_Audio.intBox=new kha_internal_IntBox(0);kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1];kha_input_Gamepad.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}};kha_input_Gamepad.instances=[];kha_input_Gamepad.connectListeners=[];kha_input_Gamepad.disconnectListeners=[];kha_input_Keyboard.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}};kha_input_Keyboard.keyBehavior=kha_input_BlockInterventions.Default;kha_input_Mouse.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}};kha_input_Mouse.wheelEventBlockBehavior=kha_input_MouseEventBlockBehavior.Full;kha_input_Surface.touchDownEventBlockBehavior=kha_input_TouchDownEventBlockBehavior.Full;kha_krom_Graphics.mat=function($this){var $r;var this1=new Float32Array(16);$r=this1;return $r}(this);kha_netsync_ControllerBuilder.nextId=0;Main.main()})(typeof exports!="undefined"?exports:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);