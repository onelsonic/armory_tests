// Generated by HLC 4.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <iron/system/Mouse.h>
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
extern iron__system__$Mouse $g__iron_system_Mouse;
void iron_system_VirtualInput_downVirtual(iron__system__VirtualInput,String);
void iron_system_VirtualInput_upVirtual(iron__system__VirtualInput,String);
#include <kha/input/Mouse.h>
extern hl_type $t_dyn;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
void iron_system_VirtualInput_new(iron__system__VirtualInput);
kha__input__Mouse kha_input_Mouse_get(int*);
extern hl_type $t_fun_80434d3;
extern hl_type $t_fun_8ed843a;
extern hl_type $t_fun_298ebf7;
void kha_input_Mouse_notify(kha__input__Mouse,vclosure*,vclosure*,vclosure*,vclosure*,vclosure*);

void iron_system_Mouse_endFrame(iron__system__Mouse r0) {
	hl__types__ArrayObj r1, r3;
	bool r5, r10, r11;
	double r12;
	vdynamic *r9;
	varray *r8;
	int r2, r4, r6;
	r1 = r0->buttonsStarted;
	if( r1 == NULL ) hl_null_access();
	r2 = 1;
	r3 = r0->buttonsStarted;
	if( r3 == NULL ) hl_null_access();
	r4 = 2;
	r5 = false;
	r6 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$cdc3cc0_1_10;
	hl_types_ArrayObj___expand(r3,r4);
	label$cdc3cc0_1_10:
	r8 = r3->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r4] = r9;
	r4 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$cdc3cc0_1_16;
	hl_types_ArrayObj___expand(r1,r2);
	label$cdc3cc0_1_16:
	r8 = r1->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r2] = r9;
	r1 = r0->buttonsStarted;
	if( r1 == NULL ) hl_null_access();
	r2 = 0;
	r4 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$cdc3cc0_1_25;
	hl_types_ArrayObj___expand(r1,r2);
	label$cdc3cc0_1_25:
	r8 = r1->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r2] = r9;
	r1 = r0->buttonsReleased;
	if( r1 == NULL ) hl_null_access();
	r2 = 1;
	r3 = r0->buttonsReleased;
	if( r3 == NULL ) hl_null_access();
	r4 = 2;
	r10 = false;
	r6 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$cdc3cc0_1_38;
	hl_types_ArrayObj___expand(r3,r4);
	label$cdc3cc0_1_38:
	r8 = r3->array;
	r9 = hl_alloc_dynbool(r10);
	((vdynamic**)(r8 + 1))[r4] = r9;
	r4 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$cdc3cc0_1_44;
	hl_types_ArrayObj___expand(r1,r2);
	label$cdc3cc0_1_44:
	r8 = r1->array;
	r9 = hl_alloc_dynbool(r10);
	((vdynamic**)(r8 + 1))[r2] = r9;
	r1 = r0->buttonsReleased;
	if( r1 == NULL ) hl_null_access();
	r2 = 0;
	r4 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$cdc3cc0_1_53;
	hl_types_ArrayObj___expand(r1,r2);
	label$cdc3cc0_1_53:
	r8 = r1->array;
	r9 = hl_alloc_dynbool(r10);
	((vdynamic**)(r8 + 1))[r2] = r9;
	r11 = false;
	r0->moved = r11;
	r12 = 0.;
	r0->movementX = r12;
	r12 = 0.;
	r0->movementY = r12;
	r2 = 0;
	r0->wheelDelta = r2;
	return;
}

void iron_system_Mouse_reset(iron__system__Mouse r0) {
	hl__types__ArrayObj r1, r3;
	bool r5;
	vdynamic *r9;
	varray *r8;
	int r2, r4, r6;
	r1 = r0->buttonsDown;
	if( r1 == NULL ) hl_null_access();
	r2 = 1;
	r3 = r0->buttonsDown;
	if( r3 == NULL ) hl_null_access();
	r4 = 2;
	r5 = false;
	r6 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$cdc3cc0_2_10;
	hl_types_ArrayObj___expand(r3,r4);
	label$cdc3cc0_2_10:
	r8 = r3->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r4] = r9;
	r4 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$cdc3cc0_2_16;
	hl_types_ArrayObj___expand(r1,r2);
	label$cdc3cc0_2_16:
	r8 = r1->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r2] = r9;
	r1 = r0->buttonsDown;
	if( r1 == NULL ) hl_null_access();
	r2 = 0;
	r4 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$cdc3cc0_2_25;
	hl_types_ArrayObj___expand(r1,r2);
	label$cdc3cc0_2_25:
	r8 = r1->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r2] = r9;
	iron_system_Mouse_endFrame(r0);
	return;
}

void iron_system_Mouse_downListener(iron__system__Mouse r0,int r1,int r2,int r3) {
	String r12;
	hl__types__ArrayObj r4;
	bool r5;
	iron__system__$Mouse r11;
	double r10;
	vdynamic *r9;
	varray *r8;
	int r6;
	r4 = r0->buttonsDown;
	if( r4 == NULL ) hl_null_access();
	r5 = true;
	r6 = r4->length;
	if( ((unsigned)r1) < ((unsigned)r6) ) goto label$cdc3cc0_3_6;
	hl_types_ArrayObj___expand(r4,r1);
	label$cdc3cc0_3_6:
	r8 = r4->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r1] = r9;
	r4 = r0->buttonsStarted;
	if( r4 == NULL ) hl_null_access();
	r5 = true;
	r6 = r4->length;
	if( ((unsigned)r1) < ((unsigned)r6) ) goto label$cdc3cc0_3_15;
	hl_types_ArrayObj___expand(r4,r1);
	label$cdc3cc0_3_15:
	r8 = r4->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r1] = r9;
	r10 = (double)r2;
	r0->x = r10;
	r10 = (double)r3;
	r0->y = r10;
	r6 = 0;
	if( r1 != r6 ) goto label$cdc3cc0_3_28;
	r10 = (double)r2;
	r0->lastX = r10;
	r10 = (double)r3;
	r0->lastY = r10;
	label$cdc3cc0_3_28:
	r11 = (iron__system__$Mouse)$g__iron_system_Mouse;
	r4 = r11->buttons;
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( ((unsigned)r1) < ((unsigned)r6) ) goto label$cdc3cc0_3_35;
	r12 = NULL;
	goto label$cdc3cc0_3_38;
	label$cdc3cc0_3_35:
	r8 = r4->array;
	r9 = ((vdynamic**)(r8 + 1))[r1];
	r12 = (String)r9;
	label$cdc3cc0_3_38:
	iron_system_VirtualInput_downVirtual(((iron__system__VirtualInput)r0),r12);
	return;
}

void iron_system_Mouse_upListener(iron__system__Mouse r0,int r1,int r2,int r3) {
	String r12;
	hl__types__ArrayObj r4;
	bool r5;
	iron__system__$Mouse r11;
	double r10;
	vdynamic *r9;
	varray *r8;
	int r6;
	r4 = r0->buttonsDown;
	if( r4 == NULL ) hl_null_access();
	r5 = false;
	r6 = r4->length;
	if( ((unsigned)r1) < ((unsigned)r6) ) goto label$cdc3cc0_4_6;
	hl_types_ArrayObj___expand(r4,r1);
	label$cdc3cc0_4_6:
	r8 = r4->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r1] = r9;
	r4 = r0->buttonsReleased;
	if( r4 == NULL ) hl_null_access();
	r5 = true;
	r6 = r4->length;
	if( ((unsigned)r1) < ((unsigned)r6) ) goto label$cdc3cc0_4_15;
	hl_types_ArrayObj___expand(r4,r1);
	label$cdc3cc0_4_15:
	r8 = r4->array;
	r9 = hl_alloc_dynbool(r5);
	((vdynamic**)(r8 + 1))[r1] = r9;
	r10 = (double)r2;
	r0->x = r10;
	r10 = (double)r3;
	r0->y = r10;
	r11 = (iron__system__$Mouse)$g__iron_system_Mouse;
	r4 = r11->buttons;
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( ((unsigned)r1) < ((unsigned)r6) ) goto label$cdc3cc0_4_29;
	r12 = NULL;
	goto label$cdc3cc0_4_32;
	label$cdc3cc0_4_29:
	r8 = r4->array;
	r9 = ((vdynamic**)(r8 + 1))[r1];
	r12 = (String)r9;
	label$cdc3cc0_4_32:
	iron_system_VirtualInput_upVirtual(((iron__system__VirtualInput)r0),r12);
	return;
}

void iron_system_Mouse_moveListener(iron__system__Mouse r0,int r1,int r2,int r3,int r4) {
	bool r8;
	double r6, r7, r9;
	r6 = r0->lastX;
	r7 = -1.;
	if( r6 != r7 ) goto label$cdc3cc0_5_10;
	r6 = r0->lastY;
	r7 = -1.;
	if( r6 != r7 ) goto label$cdc3cc0_5_10;
	r6 = (double)r1;
	r0->lastX = r6;
	r6 = (double)r2;
	r0->lastY = r6;
	label$cdc3cc0_5_10:
	r8 = r0->locked;
	if( !r8 ) goto label$cdc3cc0_5_21;
	r6 = r0->movementX;
	r7 = (double)r3;
	r6 = r6 + r7;
	r0->movementX = r6;
	r6 = r0->movementY;
	r7 = (double)r4;
	r6 = r6 + r7;
	r0->movementY = r6;
	goto label$cdc3cc0_5_33;
	label$cdc3cc0_5_21:
	r6 = r0->movementX;
	r7 = (double)r1;
	r9 = r0->lastX;
	r7 = r7 - r9;
	r6 = r6 + r7;
	r0->movementX = r6;
	r6 = r0->movementY;
	r7 = (double)r2;
	r9 = r0->lastY;
	r7 = r7 - r9;
	r6 = r6 + r7;
	r0->movementY = r6;
	label$cdc3cc0_5_33:
	r6 = (double)r1;
	r0->lastX = r6;
	r6 = (double)r2;
	r0->lastY = r6;
	r6 = (double)r1;
	r0->x = r6;
	r6 = (double)r2;
	r0->y = r6;
	r8 = true;
	r0->moved = r8;
	return;
}

void iron_system_Mouse_wheelListener(iron__system__Mouse r0,int r1) {
	r0->wheelDelta = r1;
	return;
}

void iron_system_Mouse_new(iron__system__Mouse r0) {
	hl__types__ArrayObj r4;
	hl_type *r6;
	bool r2;
	kha__input__Mouse r9;
	vclosure *r11, *r12, *r13, *r14, *r15;
	double r1;
	int *r10;
	vdynamic *r7;
	varray *r5;
	int r3;
	r1 = -1.;
	r0->lastY = r1;
	r1 = -1.;
	r0->lastX = r1;
	r2 = false;
	r0->locked = r2;
	r3 = 0;
	r0->wheelDelta = r3;
	r1 = 0.;
	r0->movementY = r1;
	r1 = 0.;
	r0->movementX = r1;
	r2 = false;
	r0->moved = r2;
	r1 = 0.;
	r0->y = r1;
	r1 = 0.;
	r0->x = r1;
	r6 = &$t_dyn;
	r3 = 3;
	r5 = hl_alloc_array(r6,r3);
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 0;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 1;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 2;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r4 = hl_types_ArrayObj_alloc(r5);
	r0->buttonsReleased = r4;
	r6 = &$t_dyn;
	r3 = 3;
	r5 = hl_alloc_array(r6,r3);
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 0;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 1;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 2;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r4 = hl_types_ArrayObj_alloc(r5);
	r0->buttonsStarted = r4;
	r6 = &$t_dyn;
	r3 = 3;
	r5 = hl_alloc_array(r6,r3);
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 0;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 1;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r2 = false;
	r7 = hl_alloc_dynbool(r2);
	r3 = 2;
	((vdynamic**)(r5 + 1))[r3] = r7;
	r4 = hl_types_ArrayObj_alloc(r5);
	r0->buttonsDown = r4;
	iron_system_VirtualInput_new(((iron__system__VirtualInput)r0));
	r10 = NULL;
	r9 = kha_input_Mouse_get(r10);
	if( r9 == NULL ) hl_null_access();
	r11 = hl_alloc_closure_ptr(&$t_fun_80434d3,iron_system_Mouse_downListener,r0);
	r12 = hl_alloc_closure_ptr(&$t_fun_80434d3,iron_system_Mouse_upListener,r0);
	r13 = hl_alloc_closure_ptr(&$t_fun_8ed843a,iron_system_Mouse_moveListener,r0);
	r14 = hl_alloc_closure_ptr(&$t_fun_298ebf7,iron_system_Mouse_wheelListener,r0);
	r15 = NULL;
	kha_input_Mouse_notify(r9,r11,r12,r13,r14,r15);
	return;
}

