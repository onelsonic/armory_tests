// Generated by HLC 4.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <iron/system/Keyboard.h>
#include <hl/types/ArrayBase.h>
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
hl__types__ArrayBase hl_types_ArrayObj_splice(hl__types__ArrayObj,int,int);
extern hl_type $t_hl_types_ArrayObj;
extern hl_type $t_hl_types_ArrayBase;
extern iron__system__$Keyboard $g__iron_system_Keyboard;
extern String $s_space;
extern String $s_backspace;
extern String $s_tab;
extern String $s_enter;
extern String $s_shift;
extern String $s_control;
extern String $s_alt;
extern String $s_escape;
extern String $s_delete;
extern String $s_up;
extern String $s_down;
extern String $s_left;
extern String $s_right;
extern String $s_back;
extern String $s_comma;
extern String $s_period;
extern String $s_853ae90;
extern String $s_9eecb7d;
extern String $s_524a507;
extern String $s_43ec3e5;
extern String $s_cedf8da;
extern String $s_26b1722;
extern String $s_336d5eb;
extern String $s_0;
extern String $s_1;
extern String $s_2;
extern String $s_3;
extern String $s_4;
extern String $s_5;
extern String $s_6;
extern String $s_7;
extern String $s_8;
extern String $s_9;
extern String $s_f1;
extern String $s_f2;
extern String $s_f3;
extern String $s_f4;
extern String $s_f5;
extern String $s_f6;
extern String $s_f7;
extern String $s_f8;
extern String $s_f9;
extern String $s_f10;
extern String $s_f11;
extern String $s_f12;
String String_fromCharCode(int);
String String_toLowerCase(String);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
void iron_system_VirtualInput_downVirtual(iron__system__VirtualInput,String);
void iron_system_VirtualInput_upVirtual(iron__system__VirtualInput,String);
#include <kha/input/Keyboard.h>
extern hl_type $t_String;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type $t_haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
void iron_system_VirtualInput_new(iron__system__VirtualInput);
kha__input__Keyboard kha_input_Keyboard_get(int*);
extern hl_type $t_fun_fd2bdea;
extern hl_type $t_fun_7bd35b7;
void kha_input_Keyboard_notify(kha__input__Keyboard,vclosure*,vclosure*,vclosure*);

void iron_system_Keyboard_endFrame(iron__system__Keyboard r0) {
	String r7;
	haxe__ds__StringMap r10;
	hl__types__ArrayObj r3, r6;
	bool r11;
	hl__types__ArrayBase r12;
	vdynamic *r8;
	varray *r9;
	int r2, r4, r5;
	r3 = r0->keysFrame;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	r4 = 0;
	if( r4 >= r2 ) goto label$7027374_1_38;
	r2 = 0;
	r3 = r0->keysFrame;
	label$7027374_1_7:
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	if( r2 >= r5 ) goto label$7027374_1_30;
	r5 = r3->length;
	if( ((unsigned)r2) < ((unsigned)r5) ) goto label$7027374_1_15;
	r7 = NULL;
	goto label$7027374_1_18;
	label$7027374_1_15:
	r9 = r3->array;
	r8 = ((vdynamic**)(r9 + 1))[r2];
	r7 = (String)r8;
	label$7027374_1_18:
	++r2;
	r10 = r0->keysStarted;
	if( r10 == NULL ) hl_null_access();
	r11 = false;
	r8 = hl_alloc_dynbool(r11);
	haxe_ds_StringMap_set(r10,r7,r8);
	r10 = r0->keysReleased;
	if( r10 == NULL ) hl_null_access();
	r11 = false;
	r8 = hl_alloc_dynbool(r11);
	haxe_ds_StringMap_set(r10,r7,r8);
	goto label$7027374_1_7;
	label$7027374_1_30:
	r3 = r0->keysFrame;
	if( r3 == NULL ) hl_null_access();
	r2 = 0;
	r6 = r0->keysFrame;
	if( r6 == NULL ) hl_null_access();
	r4 = r6->length;
	r12 = hl_types_ArrayObj_splice(r3,r2,r4);
	r3 = (hl__types__ArrayObj)hl_dyn_castp(&r12,&$t_hl_types_ArrayBase,&$t_hl_types_ArrayObj);
	label$7027374_1_38:
	return;
}

void iron_system_Keyboard_reset(iron__system__Keyboard r0) {
	String r6;
	haxe__ds__StringMap r9;
	hl__types__ArrayObj r3;
	bool r10;
	iron__system__$Keyboard r4;
	vdynamic *r7;
	varray *r8;
	int r1, r5;
	r1 = 0;
	r4 = (iron__system__$Keyboard)$g__iron_system_Keyboard;
	r3 = r4->keys;
	label$7027374_2_3:
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	if( r1 >= r5 ) goto label$7027374_2_31;
	r5 = r3->length;
	if( ((unsigned)r1) < ((unsigned)r5) ) goto label$7027374_2_11;
	r6 = NULL;
	goto label$7027374_2_14;
	label$7027374_2_11:
	r8 = r3->array;
	r7 = ((vdynamic**)(r8 + 1))[r1];
	r6 = (String)r7;
	label$7027374_2_14:
	++r1;
	r9 = r0->keysDown;
	if( r9 == NULL ) hl_null_access();
	r10 = false;
	r7 = hl_alloc_dynbool(r10);
	haxe_ds_StringMap_set(r9,r6,r7);
	r9 = r0->keysStarted;
	if( r9 == NULL ) hl_null_access();
	r10 = false;
	r7 = hl_alloc_dynbool(r10);
	haxe_ds_StringMap_set(r9,r6,r7);
	r9 = r0->keysReleased;
	if( r9 == NULL ) hl_null_access();
	r10 = false;
	r7 = hl_alloc_dynbool(r10);
	haxe_ds_StringMap_set(r9,r6,r7);
	goto label$7027374_2_3;
	label$7027374_2_31:
	iron_system_Keyboard_endFrame(r0);
	return;
}

String iron_system_Keyboard_keyCode(int r0) {
	String r2;
	int r1;
	r1 = 32;
	if( r0 != r1 ) goto label$7027374_3_4;
	r2 = (String)$s_space;
	return r2;
	label$7027374_3_4:
	r1 = 8;
	if( r0 != r1 ) goto label$7027374_3_8;
	r2 = (String)$s_backspace;
	return r2;
	label$7027374_3_8:
	r1 = 9;
	if( r0 != r1 ) goto label$7027374_3_12;
	r2 = (String)$s_tab;
	return r2;
	label$7027374_3_12:
	r1 = 13;
	if( r0 != r1 ) goto label$7027374_3_16;
	r2 = (String)$s_enter;
	return r2;
	label$7027374_3_16:
	r1 = 16;
	if( r0 != r1 ) goto label$7027374_3_20;
	r2 = (String)$s_shift;
	return r2;
	label$7027374_3_20:
	r1 = 17;
	if( r0 != r1 ) goto label$7027374_3_24;
	r2 = (String)$s_control;
	return r2;
	label$7027374_3_24:
	r1 = 18;
	if( r0 != r1 ) goto label$7027374_3_28;
	r2 = (String)$s_alt;
	return r2;
	label$7027374_3_28:
	r1 = 27;
	if( r0 != r1 ) goto label$7027374_3_32;
	r2 = (String)$s_escape;
	return r2;
	label$7027374_3_32:
	r1 = 46;
	if( r0 != r1 ) goto label$7027374_3_36;
	r2 = (String)$s_delete;
	return r2;
	label$7027374_3_36:
	r1 = 38;
	if( r0 != r1 ) goto label$7027374_3_40;
	r2 = (String)$s_up;
	return r2;
	label$7027374_3_40:
	r1 = 40;
	if( r0 != r1 ) goto label$7027374_3_44;
	r2 = (String)$s_down;
	return r2;
	label$7027374_3_44:
	r1 = 37;
	if( r0 != r1 ) goto label$7027374_3_48;
	r2 = (String)$s_left;
	return r2;
	label$7027374_3_48:
	r1 = 39;
	if( r0 != r1 ) goto label$7027374_3_52;
	r2 = (String)$s_right;
	return r2;
	label$7027374_3_52:
	r1 = 1;
	if( r0 != r1 ) goto label$7027374_3_56;
	r2 = (String)$s_back;
	return r2;
	label$7027374_3_56:
	r1 = 188;
	if( r0 != r1 ) goto label$7027374_3_60;
	r2 = (String)$s_comma;
	return r2;
	label$7027374_3_60:
	r1 = 190;
	if( r0 != r1 ) goto label$7027374_3_64;
	r2 = (String)$s_period;
	return r2;
	label$7027374_3_64:
	r1 = 58;
	if( r0 != r1 ) goto label$7027374_3_68;
	r2 = (String)$s_853ae90;
	return r2;
	label$7027374_3_68:
	r1 = 59;
	if( r0 != r1 ) goto label$7027374_3_72;
	r2 = (String)$s_9eecb7d;
	return r2;
	label$7027374_3_72:
	r1 = 60;
	if( r0 != r1 ) goto label$7027374_3_76;
	r2 = (String)$s_524a507;
	return r2;
	label$7027374_3_76:
	r1 = 61;
	if( r0 != r1 ) goto label$7027374_3_80;
	r2 = (String)$s_43ec3e5;
	return r2;
	label$7027374_3_80:
	r1 = 62;
	if( r0 != r1 ) goto label$7027374_3_84;
	r2 = (String)$s_cedf8da;
	return r2;
	label$7027374_3_84:
	r1 = 107;
	if( r0 != r1 ) goto label$7027374_3_88;
	r2 = (String)$s_26b1722;
	return r2;
	label$7027374_3_88:
	r1 = 171;
	if( r0 != r1 ) goto label$7027374_3_92;
	r2 = (String)$s_26b1722;
	return r2;
	label$7027374_3_92:
	r1 = 109;
	if( r0 != r1 ) goto label$7027374_3_96;
	r2 = (String)$s_336d5eb;
	return r2;
	label$7027374_3_96:
	r1 = 173;
	if( r0 != r1 ) goto label$7027374_3_100;
	r2 = (String)$s_336d5eb;
	return r2;
	label$7027374_3_100:
	r1 = 48;
	if( r0 != r1 ) goto label$7027374_3_104;
	r2 = (String)$s_0;
	return r2;
	label$7027374_3_104:
	r1 = 96;
	if( r0 != r1 ) goto label$7027374_3_108;
	r2 = (String)$s_0;
	return r2;
	label$7027374_3_108:
	r1 = 49;
	if( r0 != r1 ) goto label$7027374_3_112;
	r2 = (String)$s_1;
	return r2;
	label$7027374_3_112:
	r1 = 97;
	if( r0 != r1 ) goto label$7027374_3_116;
	r2 = (String)$s_1;
	return r2;
	label$7027374_3_116:
	r1 = 50;
	if( r0 != r1 ) goto label$7027374_3_120;
	r2 = (String)$s_2;
	return r2;
	label$7027374_3_120:
	r1 = 98;
	if( r0 != r1 ) goto label$7027374_3_124;
	r2 = (String)$s_2;
	return r2;
	label$7027374_3_124:
	r1 = 51;
	if( r0 != r1 ) goto label$7027374_3_128;
	r2 = (String)$s_3;
	return r2;
	label$7027374_3_128:
	r1 = 99;
	if( r0 != r1 ) goto label$7027374_3_132;
	r2 = (String)$s_3;
	return r2;
	label$7027374_3_132:
	r1 = 52;
	if( r0 != r1 ) goto label$7027374_3_136;
	r2 = (String)$s_4;
	return r2;
	label$7027374_3_136:
	r1 = 100;
	if( r0 != r1 ) goto label$7027374_3_140;
	r2 = (String)$s_4;
	return r2;
	label$7027374_3_140:
	r1 = 53;
	if( r0 != r1 ) goto label$7027374_3_144;
	r2 = (String)$s_5;
	return r2;
	label$7027374_3_144:
	r1 = 101;
	if( r0 != r1 ) goto label$7027374_3_148;
	r2 = (String)$s_5;
	return r2;
	label$7027374_3_148:
	r1 = 54;
	if( r0 != r1 ) goto label$7027374_3_152;
	r2 = (String)$s_6;
	return r2;
	label$7027374_3_152:
	r1 = 102;
	if( r0 != r1 ) goto label$7027374_3_156;
	r2 = (String)$s_6;
	return r2;
	label$7027374_3_156:
	r1 = 55;
	if( r0 != r1 ) goto label$7027374_3_160;
	r2 = (String)$s_7;
	return r2;
	label$7027374_3_160:
	r1 = 103;
	if( r0 != r1 ) goto label$7027374_3_164;
	r2 = (String)$s_7;
	return r2;
	label$7027374_3_164:
	r1 = 56;
	if( r0 != r1 ) goto label$7027374_3_168;
	r2 = (String)$s_8;
	return r2;
	label$7027374_3_168:
	r1 = 104;
	if( r0 != r1 ) goto label$7027374_3_172;
	r2 = (String)$s_8;
	return r2;
	label$7027374_3_172:
	r1 = 57;
	if( r0 != r1 ) goto label$7027374_3_176;
	r2 = (String)$s_9;
	return r2;
	label$7027374_3_176:
	r1 = 105;
	if( r0 != r1 ) goto label$7027374_3_180;
	r2 = (String)$s_9;
	return r2;
	label$7027374_3_180:
	r1 = 112;
	if( r0 != r1 ) goto label$7027374_3_184;
	r2 = (String)$s_f1;
	return r2;
	label$7027374_3_184:
	r1 = 113;
	if( r0 != r1 ) goto label$7027374_3_188;
	r2 = (String)$s_f2;
	return r2;
	label$7027374_3_188:
	r1 = 114;
	if( r0 != r1 ) goto label$7027374_3_192;
	r2 = (String)$s_f3;
	return r2;
	label$7027374_3_192:
	r1 = 115;
	if( r0 != r1 ) goto label$7027374_3_196;
	r2 = (String)$s_f4;
	return r2;
	label$7027374_3_196:
	r1 = 116;
	if( r0 != r1 ) goto label$7027374_3_200;
	r2 = (String)$s_f5;
	return r2;
	label$7027374_3_200:
	r1 = 117;
	if( r0 != r1 ) goto label$7027374_3_204;
	r2 = (String)$s_f6;
	return r2;
	label$7027374_3_204:
	r1 = 118;
	if( r0 != r1 ) goto label$7027374_3_208;
	r2 = (String)$s_f7;
	return r2;
	label$7027374_3_208:
	r1 = 119;
	if( r0 != r1 ) goto label$7027374_3_212;
	r2 = (String)$s_f8;
	return r2;
	label$7027374_3_212:
	r1 = 120;
	if( r0 != r1 ) goto label$7027374_3_216;
	r2 = (String)$s_f9;
	return r2;
	label$7027374_3_216:
	r1 = 121;
	if( r0 != r1 ) goto label$7027374_3_220;
	r2 = (String)$s_f10;
	return r2;
	label$7027374_3_220:
	r1 = 122;
	if( r0 != r1 ) goto label$7027374_3_224;
	r2 = (String)$s_f11;
	return r2;
	label$7027374_3_224:
	r1 = 123;
	if( r0 != r1 ) goto label$7027374_3_228;
	r2 = (String)$s_f12;
	return r2;
	label$7027374_3_228:
	r2 = String_fromCharCode(r0);
	if( r2 == NULL ) hl_null_access();
	r2 = String_toLowerCase(r2);
	return r2;
}

void iron_system_Keyboard_downListener(iron__system__Keyboard r0,int r1) {
	String r2;
	haxe__ds__StringMap r6;
	hl__types__ArrayObj r5;
	bool r7;
	vdynamic *r8;
	int r3;
	r2 = iron_system_Keyboard_keyCode(r1);
	r5 = r0->keysFrame;
	if( r5 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_push(r5,((vdynamic*)r2));
	r6 = r0->keysStarted;
	if( r6 == NULL ) hl_null_access();
	r7 = true;
	r8 = hl_alloc_dynbool(r7);
	haxe_ds_StringMap_set(r6,r2,r8);
	r6 = r0->keysDown;
	if( r6 == NULL ) hl_null_access();
	r7 = true;
	r8 = hl_alloc_dynbool(r7);
	haxe_ds_StringMap_set(r6,r2,r8);
	iron_system_VirtualInput_downVirtual(((iron__system__VirtualInput)r0),r2);
	return;
}

void iron_system_Keyboard_upListener(iron__system__Keyboard r0,int r1) {
	String r2;
	haxe__ds__StringMap r6;
	hl__types__ArrayObj r5;
	bool r7;
	vdynamic *r8;
	int r3;
	r2 = iron_system_Keyboard_keyCode(r1);
	r5 = r0->keysFrame;
	if( r5 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_push(r5,((vdynamic*)r2));
	r6 = r0->keysReleased;
	if( r6 == NULL ) hl_null_access();
	r7 = true;
	r8 = hl_alloc_dynbool(r7);
	haxe_ds_StringMap_set(r6,r2,r8);
	r6 = r0->keysDown;
	if( r6 == NULL ) hl_null_access();
	r7 = false;
	r8 = hl_alloc_dynbool(r7);
	haxe_ds_StringMap_set(r6,r2,r8);
	iron_system_VirtualInput_upVirtual(((iron__system__VirtualInput)r0),r2);
	return;
}

void iron_system_Keyboard_pressListener(iron__system__Keyboard r0,String r1) {
	return;
}

void iron_system_Keyboard_new(iron__system__Keyboard r0) {
	haxe__ds__StringMap r5;
	hl__types__ArrayObj r1;
	hl_type *r3;
	vclosure *r9, *r10, *r11;
	int *r8;
	kha__input__Keyboard r7;
	int r4;
	varray *r2;
	r3 = &$t_String;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->keysFrame = r1;
	r5 = (haxe__ds__StringMap)hl_alloc_obj(&$t_haxe_ds_StringMap);
	haxe_ds_StringMap_new(r5);
	r0->keysReleased = r5;
	r5 = (haxe__ds__StringMap)hl_alloc_obj(&$t_haxe_ds_StringMap);
	haxe_ds_StringMap_new(r5);
	r0->keysStarted = r5;
	r5 = (haxe__ds__StringMap)hl_alloc_obj(&$t_haxe_ds_StringMap);
	haxe_ds_StringMap_new(r5);
	r0->keysDown = r5;
	iron_system_VirtualInput_new(((iron__system__VirtualInput)r0));
	iron_system_Keyboard_reset(r0);
	r8 = NULL;
	r7 = kha_input_Keyboard_get(r8);
	if( r7 == NULL ) hl_null_access();
	r9 = hl_alloc_closure_ptr(&$t_fun_fd2bdea,iron_system_Keyboard_downListener,r0);
	r10 = hl_alloc_closure_ptr(&$t_fun_fd2bdea,iron_system_Keyboard_upListener,r0);
	r11 = hl_alloc_closure_ptr(&$t_fun_7bd35b7,iron_system_Keyboard_pressListener,r0);
	kha_input_Keyboard_notify(r7,r9,r10,r11);
	return;
}

