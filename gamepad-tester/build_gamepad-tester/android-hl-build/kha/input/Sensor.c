// Generated by HLC 4.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/input/Sensor.h>
extern hl_type $t_hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
extern kha__input__$Sensor $g__kha_input_Sensor;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern venum* $g_d2d0fe8;
extern venum* $g_kha_input_SensorType_Gyroscope;

void kha_input_Sensor_new(kha__input__Sensor r0) {
	hl__types__ArrayObj r1;
	r1 = (hl__types__ArrayObj)hl_alloc_obj(&$t_hl_types_ArrayObj);
	hl_types_ArrayObj_new(r1);
	r0->listeners = r1;
	return;
}

kha__input__Sensor kha_input_Sensor_get(venum* r0) {
	kha__input__$Sensor r3;
	kha__input__Sensor r2;
	int r1;
	if( r0 == NULL ) hl_null_access();
	r1 = HL__ENUM_INDEX__(r0);
	switch(r1) {
		default:
			goto label$ba74e21_2_10;
		case 0:
			r3 = (kha__input__$Sensor)$g__kha_input_Sensor;
			r2 = r3->accelerometer;
			return r2;
		case 1:
			r3 = (kha__input__$Sensor)$g__kha_input_Sensor;
			r2 = r3->gyroscope;
			return r2;
	}
	label$ba74e21_2_10:
	r2 = NULL;
	return r2;
}

void kha_input_Sensor_notify(kha__input__Sensor r0,vclosure* r1) {
	hl__types__ArrayObj r3;
	int r2;
	r3 = r0->listeners;
	if( r3 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_push(r3,((vdynamic*)r1));
	return;
}

void kha_input_Sensor__accelerometerChanged(double r0,double r1,double r2) {
	hl__types__ArrayObj r7;
	venum *r4;
	kha__input__Sensor r3;
	vclosure *r9;
	vdynamic *r10;
	varray *r11;
	int r6, r8;
	r4 = (venum*)$g_d2d0fe8;
	r3 = kha_input_Sensor_get(r4);
	r6 = 0;
	if( r3 == NULL ) hl_null_access();
	r7 = r3->listeners;
	label$ba74e21_4_5:
	if( r7 == NULL ) hl_null_access();
	r8 = r7->length;
	if( r6 >= r8 ) goto label$ba74e21_4_20;
	r8 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r8) ) goto label$ba74e21_4_13;
	r9 = NULL;
	goto label$ba74e21_4_16;
	label$ba74e21_4_13:
	r11 = r7->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r9 = (vclosure*)r10;
	label$ba74e21_4_16:
	++r6;
	if( r9 == NULL ) hl_null_access();
	r9->hasValue ? ((void (*)(vdynamic*,double,double,double))r9->fun)((vdynamic*)r9->value,r0,r1,r2) : ((void (*)(double,double,double))r9->fun)(r0,r1,r2);
	goto label$ba74e21_4_5;
	label$ba74e21_4_20:
	return;
}

void kha_input_Sensor__gyroscopeChanged(double r0,double r1,double r2) {
	hl__types__ArrayObj r7;
	venum *r4;
	kha__input__Sensor r3;
	vclosure *r9;
	vdynamic *r10;
	varray *r11;
	int r6, r8;
	r4 = (venum*)$g_kha_input_SensorType_Gyroscope;
	r3 = kha_input_Sensor_get(r4);
	r6 = 0;
	if( r3 == NULL ) hl_null_access();
	r7 = r3->listeners;
	label$ba74e21_5_5:
	if( r7 == NULL ) hl_null_access();
	r8 = r7->length;
	if( r6 >= r8 ) goto label$ba74e21_5_20;
	r8 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r8) ) goto label$ba74e21_5_13;
	r9 = NULL;
	goto label$ba74e21_5_16;
	label$ba74e21_5_13:
	r11 = r7->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r9 = (vclosure*)r10;
	label$ba74e21_5_16:
	++r6;
	if( r9 == NULL ) hl_null_access();
	r9->hasValue ? ((void (*)(vdynamic*,double,double,double))r9->fun)((vdynamic*)r9->value,r0,r1,r2) : ((void (*)(double,double,double))r9->fun)(r0,r1,r2);
	goto label$ba74e21_5_5;
	label$ba74e21_5_20:
	return;
}

