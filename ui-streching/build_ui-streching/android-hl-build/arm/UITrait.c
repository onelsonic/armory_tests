// Generated by HLC 4.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <arm/UITrait.h>
#include <kha/Kravur.h>
#include <kha/Image.h>
#include <iron/Scene.h>
extern hl_type t$zui_Zui;
extern hl_type t$vrt_eedee8e;
extern hl_type t$kha_Kravur;
extern hl_type t$vrt_b430bc3;
void zui_Zui_new(zui__Zui,vvirtual*);
extern iron__$Scene g$_iron_Scene;
void arm_UITrait_sceneInit(arm__UITrait);
extern hl_type t$fun_4b81e0c;
void iron_Scene_notifyOnInit(iron__Scene,vclosure*);
#include <kha/graphics2/Graphics.h>
extern String s$Cube;
iron__object__Object iron_Scene_getChild(iron__Scene,String);
extern String s$Plane;
void arm_UITrait_render2D(arm__UITrait,kha__graphics2__Graphics);
extern hl_type t$fun_2bd22df;
void iron_Trait_notifyOnRender2D(iron__Trait,vclosure*);
void arm_UITrait_update(arm__UITrait);
void iron_Trait_notifyOnUpdate(iron__Trait,vclosure*);
#include <zui/Handle.h>
#include <hl/types/ArrayBytes_Float.h>
#include <iron/object/Transform.h>
#include <iron/math/Vec4.h>
void zui_Zui_begin(zui__Zui,kha__graphics2__Graphics);
extern zui__$Handle g$_zui_Handle;
zui__Handle zui_Handle_nest(zui__Handle,int,vvirtual*);
bool zui_Zui_window(zui__Zui,zui__Handle,int,int,int,int,bool*);
extern hl_type t$vrt_78b3427;
extern hl_type t$nul_bool;
extern hl_type t$vrt_5088dde;
extern String s$Menu;
bool zui_Zui_panel(zui__Zui,zui__Handle,String,bool*);
void zui_Zui_indent(zui__Zui);
extern String s$Scale;
int zui_Zui_text(zui__Zui,String,int*,int*);
extern hl_type t$vrt_e0d7fa2;
extern hl_type t$_f64;
extern hl_type t$nul_f64;
extern String s$X;
double zui_Zui_slider(zui__Zui,zui__Handle,String,double*,double*,bool*,int*,bool*,int*,bool*);
extern String s$Y;
extern String s$Z;
extern String s$Rotation;
extern String s$Move;
bool zui_Zui_check(zui__Zui,zui__Handle,String);
extern String s$Toggle_Cube;
bool zui_Zui_button(zui__Zui,String,int*,String);
#include <hl/natives.h>
hl__types__ArrayBytes_Float hl_types_ArrayBase_allocF64(vbyte*,int);
void zui_Zui_row(zui__Zui,hl__types__ArrayBytes_Float);
extern String s$Toggle_Plane;
extern String s$Rotate_Plane;
extern hl_type t$iron_math_Vec4;
void iron_math_Vec4_new(iron__math__Vec4,float*,float*,float*,float*);
double Math_random(void);
void iron_object_Transform_rotate(iron__object__Transform,iron__math__Vec4,float);
void zui_Zui_unindent(zui__Zui);
void iron_object_Transform_setRotation(iron__object__Transform,float,float,float);
void zui_Zui_end(zui__Zui,bool*);
double kha_Scheduler_time(void);
void iron_Trait_new(iron__Trait);
extern String s$font_default_ttf;
extern hl_type t$fun_a0f92a4;
void iron_data_Data_getFont(String,vclosure*);

void arm_UITrait_new__$1(arm__UITrait r0,kha__Kravur r1) {
	vvirtual *r3, *r4;
	iron__$Scene r7;
	iron__Scene r6;
	zui__Zui r2;
	vclosure *r8;
	if( r0 == NULL ) hl_null_access();
	r2 = (zui__Zui)hl_alloc_obj(&t$zui_Zui);
	r3 = hl_alloc_virtual(&t$vrt_eedee8e);
	if( hl_vfields(r3)[0] ) *(kha__Kravur*)(hl_vfields(r3)[0]) = (kha__Kravur)r1; else hl_dyn_setp(r3->value,62938841/*font*/,&t$kha_Kravur,r1);
	r4 = hl_to_virtual(&t$vrt_b430bc3,(vdynamic*)r3);
	zui_Zui_new(r2,r4);
	r0->ui = r2;
	r7 = (iron__$Scene)g$_iron_Scene;
	r6 = r7->active;
	if( r6 == NULL ) hl_null_access();
	r8 = hl_alloc_closure_ptr(&t$fun_4b81e0c,arm_UITrait_sceneInit,r0);
	iron_Scene_notifyOnInit(r6,r8);
	return;
}

void arm_UITrait_sceneInit(arm__UITrait r0) {
	String r4;
	iron__$Scene r3;
	iron__Scene r2;
	vclosure *r6, *r7;
	iron__object__Object r1;
	r3 = (iron__$Scene)g$_iron_Scene;
	r2 = r3->active;
	if( r2 == NULL ) hl_null_access();
	r4 = (String)s$Cube;
	r1 = iron_Scene_getChild(r2,r4);
	r0->cube = r1;
	r3 = (iron__$Scene)g$_iron_Scene;
	r2 = r3->active;
	if( r2 == NULL ) hl_null_access();
	r4 = (String)s$Plane;
	r1 = iron_Scene_getChild(r2,r4);
	r0->plane = r1;
	r6 = hl_alloc_closure_ptr(&t$fun_2bd22df,arm_UITrait_render2D,r0);
	iron_Trait_notifyOnRender2D(((iron__Trait)r0),r6);
	r7 = hl_alloc_closure_ptr(&t$fun_4b81e0c,arm_UITrait_update,r0);
	iron_Trait_notifyOnUpdate(((iron__Trait)r0),r7);
	return;
}

void arm_UITrait_render2D(arm__UITrait r0,kha__graphics2__Graphics r1) {
	String r16, r40;
	bool *r12, *r25, *r26;
	vvirtual *r8, *r14, *r20;
	bool r4, r13, r29, r32, r39;
	iron__math__Vec4 r47;
	iron__object__Transform r46;
	zui__Zui r3;
	float r48, r50, r52, r56, r57, r58;
	hl__types__ArrayBytes_Float r43;
	double r19, r23, r27, r28, r30, r31, r33, r34, r35, r36, r37, r38, r45, r55;
	zui__$Handle r6;
	iron__object__Object r41, r42;
	double *r22, *r24;
	int *r17, *r18;
	vdynamic *r15, *r21, *r59;
	zui__Handle r5;
	float *r49, *r51, *r53, *r54;
	vbyte *r44;
	int r7, r9, r10, r11;
	if( r1 == NULL ) hl_null_access();
	((void (*)(kha__graphics2__Graphics))r1->$type->vobj_proto[1])(r1);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	zui_Zui_begin(r3,r1);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 0;
	r8 = NULL;
	r5 = zui_Handle_nest(r5,r7,r8);
	r7 = 20;
	r9 = 20;
	r10 = 230;
	r11 = 600;
	r4 = true;
	r12 = &r4;
	r4 = zui_Zui_window(r3,r5,r7,r9,r10,r11,r12);
	if( !r4 ) goto label$734c420_3_305;
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 1;
	r14 = hl_alloc_virtual(&t$vrt_78b3427);
	r13 = true;
	r15 = hl_alloc_dynbool(r13);
	if( hl_vfields(r14)[0] ) *(vdynamic**)(hl_vfields(r14)[0]) = (vdynamic*)r15; else hl_dyn_setp(r14->value,-244504239/*selected*/,&t$nul_bool,r15);
	r8 = hl_to_virtual(&t$vrt_5088dde,(vdynamic*)r14);
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$Menu;
	r12 = NULL;
	r13 = zui_Zui_panel(r3,r5,r16,r12);
	if( !r13 ) goto label$734c420_3_305;
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	zui_Zui_indent(r3);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r16 = (String)s$Scale;
	r17 = NULL;
	r18 = NULL;
	r7 = zui_Zui_text(r3,r16,r17,r18);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 2;
	r20 = hl_alloc_virtual(&t$vrt_e0d7fa2);
	r19 = 1.;
	r21 = hl_alloc_dynamic(&t$_f64);
	r21->v.d = r19;
	if( hl_vfields(r20)[0] ) *(vdynamic**)(hl_vfields(r20)[0]) = (vdynamic*)r21; else hl_dyn_setp(r20->value,297304054/*value*/,&t$nul_f64,r21);
	r8 = hl_to_virtual(&t$vrt_5088dde,(vdynamic*)r20);
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$X;
	r7 = 0;
	r19 = (double)r7;
	r22 = &r19;
	r7 = 2;
	r23 = (double)r7;
	r24 = &r23;
	r13 = true;
	r12 = &r13;
	r17 = NULL;
	r25 = NULL;
	r18 = NULL;
	r26 = NULL;
	r19 = zui_Zui_slider(r3,r5,r16,r22,r24,r12,r17,r25,r18,r26);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 3;
	r20 = hl_alloc_virtual(&t$vrt_e0d7fa2);
	r27 = 1.;
	r21 = hl_alloc_dynamic(&t$_f64);
	r21->v.d = r27;
	if( hl_vfields(r20)[0] ) *(vdynamic**)(hl_vfields(r20)[0]) = (vdynamic*)r21; else hl_dyn_setp(r20->value,297304054/*value*/,&t$nul_f64,r21);
	r8 = hl_to_virtual(&t$vrt_5088dde,(vdynamic*)r20);
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$Y;
	r7 = 0;
	r27 = (double)r7;
	r22 = &r27;
	r7 = 2;
	r28 = (double)r7;
	r24 = &r28;
	r29 = true;
	r12 = &r29;
	r17 = NULL;
	r25 = NULL;
	r18 = NULL;
	r26 = NULL;
	r27 = zui_Zui_slider(r3,r5,r16,r22,r24,r12,r17,r25,r18,r26);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 4;
	r20 = hl_alloc_virtual(&t$vrt_e0d7fa2);
	r30 = 1.;
	r21 = hl_alloc_dynamic(&t$_f64);
	r21->v.d = r30;
	if( hl_vfields(r20)[0] ) *(vdynamic**)(hl_vfields(r20)[0]) = (vdynamic*)r21; else hl_dyn_setp(r20->value,297304054/*value*/,&t$nul_f64,r21);
	r8 = hl_to_virtual(&t$vrt_5088dde,(vdynamic*)r20);
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$Z;
	r7 = 0;
	r30 = (double)r7;
	r22 = &r30;
	r7 = 2;
	r31 = (double)r7;
	r24 = &r31;
	r32 = true;
	r12 = &r32;
	r17 = NULL;
	r25 = NULL;
	r18 = NULL;
	r26 = NULL;
	r30 = zui_Zui_slider(r3,r5,r16,r22,r24,r12,r17,r25,r18,r26);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r16 = (String)s$Rotation;
	r17 = NULL;
	r18 = NULL;
	r7 = zui_Zui_text(r3,r16,r17,r18);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 5;
	r8 = NULL;
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$X;
	r7 = 0;
	r33 = (double)r7;
	r22 = &r33;
	r34 = 3.1400000000000001;
	r24 = &r34;
	r12 = NULL;
	r17 = NULL;
	r25 = NULL;
	r18 = NULL;
	r26 = NULL;
	r33 = zui_Zui_slider(r3,r5,r16,r22,r24,r12,r17,r25,r18,r26);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 6;
	r8 = NULL;
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$Y;
	r7 = 0;
	r35 = (double)r7;
	r22 = &r35;
	r36 = 3.1400000000000001;
	r24 = &r36;
	r12 = NULL;
	r17 = NULL;
	r25 = NULL;
	r18 = NULL;
	r26 = NULL;
	r35 = zui_Zui_slider(r3,r5,r16,r22,r24,r12,r17,r25,r18,r26);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 7;
	r8 = NULL;
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$Z;
	r7 = 0;
	r37 = (double)r7;
	r22 = &r37;
	r38 = 3.1400000000000001;
	r24 = &r38;
	r12 = NULL;
	r17 = NULL;
	r25 = NULL;
	r18 = NULL;
	r26 = NULL;
	r37 = zui_Zui_slider(r3,r5,r16,r22,r24,r12,r17,r25,r18,r26);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r6 = (zui__$Handle)g$_zui_Handle;
	r5 = r6->global;
	if( r5 == NULL ) hl_null_access();
	r7 = 8;
	r14 = hl_alloc_virtual(&t$vrt_78b3427);
	r39 = r0->move;
	r15 = hl_alloc_dynbool(r39);
	if( hl_vfields(r14)[0] ) *(vdynamic**)(hl_vfields(r14)[0]) = (vdynamic*)r15; else hl_dyn_setp(r14->value,-244504239/*selected*/,&t$nul_bool,r15);
	r8 = hl_to_virtual(&t$vrt_5088dde,(vdynamic*)r14);
	r5 = zui_Handle_nest(r5,r7,r8);
	r16 = (String)s$Move;
	r39 = zui_Zui_check(r3,r5,r16);
	r0->move = r39;
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r16 = (String)s$Toggle_Cube;
	r17 = NULL;
	r40 = NULL;
	r39 = zui_Zui_button(r3,r16,r17,r40);
	if( !r39 ) goto label$734c420_3_219;
	r41 = r0->cube;
	if( r41 == NULL ) hl_null_access();
	r42 = r0->cube;
	if( r42 == NULL ) hl_null_access();
	r39 = r42->visible;
	r39 = !r39;
	r41->visible = r39;
	label$734c420_3_219:
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r7 = 16;
	r44 = hl_alloc_bytes(r7);
	r7 = 0;
	r45 = 0.5;
	r9 = 3;
	r9 = r7 << r9;
	*(double*)(r44 + r9) = r45;
	++r7;
	r45 = 0.5;
	r9 = 3;
	r9 = r7 << r9;
	*(double*)(r44 + r9) = r45;
	++r7;
	r7 = 2;
	r43 = hl_types_ArrayBase_allocF64(r44,r7);
	zui_Zui_row(r3,r43);
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r16 = (String)s$Toggle_Plane;
	r17 = NULL;
	r40 = NULL;
	r39 = zui_Zui_button(r3,r16,r17,r40);
	if( !r39 ) goto label$734c420_3_251;
	r41 = r0->plane;
	if( r41 == NULL ) hl_null_access();
	r42 = r0->plane;
	if( r42 == NULL ) hl_null_access();
	r39 = r42->visible;
	r39 = !r39;
	r41->visible = r39;
	label$734c420_3_251:
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r16 = (String)s$Rotate_Plane;
	r17 = NULL;
	r40 = NULL;
	r39 = zui_Zui_button(r3,r16,r17,r40);
	if( !r39 ) goto label$734c420_3_279;
	r41 = r0->plane;
	if( r41 == NULL ) hl_null_access();
	r46 = r41->transform;
	if( r46 == NULL ) hl_null_access();
	r47 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r45 = 0.;
	r48 = (float)r45;
	r49 = &r48;
	r45 = 0.;
	r50 = (float)r45;
	r51 = &r50;
	r45 = 1.;
	r52 = (float)r45;
	r53 = &r52;
	r54 = NULL;
	iron_math_Vec4_new(r47,r49,r51,r53,r54);
	r45 = Math_random();
	r55 = 3.1400000000000001;
	r45 = r45 * r55;
	r56 = (float)r45;
	iron_object_Transform_rotate(r46,r47,r56);
	label$734c420_3_279:
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	zui_Zui_unindent(r3);
	r41 = r0->cube;
	if( r41 == NULL ) hl_null_access();
	r46 = r41->transform;
	if( r46 == NULL ) hl_null_access();
	r56 = (float)r33;
	r57 = (float)r35;
	r58 = (float)r37;
	iron_object_Transform_setRotation(r46,r56,r57,r58);
	r41 = r0->cube;
	if( r41 == NULL ) hl_null_access();
	r46 = r41->transform;
	if( r46 == NULL ) hl_null_access();
	r47 = r46->scale;
	if( r47 == NULL ) hl_null_access();
	r56 = (float)r19;
	r47->x = r56;
	r56 = (float)r27;
	r47->y = r56;
	r56 = (float)r30;
	r47->z = r56;
	r45 = 1.;
	r56 = (float)r45;
	r47->w = r56;
	label$734c420_3_305:
	r3 = r0->ui;
	if( r3 == NULL ) hl_null_access();
	r12 = NULL;
	zui_Zui_end(r3,r12);
	r39 = false;
	r12 = &r39;
	r59 = NULL;
	((void (*)(kha__graphics2__Graphics,bool*,vdynamic*))r1->$type->vobj_proto[0])(r1,r12,r59);
	return;
}

void arm_UITrait_update(arm__UITrait r0) {
	bool r2;
	iron__math__Vec4 r5;
	iron__object__Transform r6;
	float r8;
	double r3, r4;
	iron__object__Object r7;
	r2 = r0->move;
	if( !r2 ) goto label$734c420_4_20;
	r3 = kha_Scheduler_time();
	r4 = 2.;
	r3 = r3 * r4;
	r7 = r0->cube;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->transform;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->loc;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_math_sin(r3);
	r8 = (float)r4;
	r5->x = r8;
	r7 = r0->cube;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->transform;
	if( r6 == NULL ) hl_null_access();
	r2 = true;
	r6->dirty = r2;
	label$734c420_4_20:
	return;
}

void arm_UITrait_new(arm__UITrait r0) {
	String r3;
	bool r1;
	vclosure *r4;
	r1 = true;
	r0->move = r1;
	iron_Trait_new(((iron__Trait)r0));
	r3 = (String)s$font_default_ttf;
	r4 = hl_alloc_closure_ptr(&t$fun_a0f92a4,arm_UITrait_new__$1,r0);
	iron_data_Data_getFont(r3,r4);
	return;
}

